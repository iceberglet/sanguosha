/*! For license information please see bundle.js.LICENSE.txt */
(()=>{var e={1244:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(6540);function i(){return(0,r.useState)(null)}},3713:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(6540);const i=function(e){const t=(0,r.useRef)(e);return(0,r.useEffect)((()=>{t.current=e}),[e]),t}},7895:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var r=n(6540),i=n(3713);function a(e){const t=(0,i.A)(e);return(0,r.useCallback)((function(...e){return t.current&&t.current(...e)}),[t])}},1706:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var r=n(6540);const i=void 0!==n.g&&n.g.navigator&&"ReactNative"===n.g.navigator.product,a="undefined"!=typeof document||i?r.useLayoutEffect:r.useEffect},3804:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var r=n(6540);const i=e=>e&&"function"!=typeof e?t=>{e.current=t}:e;const a=function(e,t){return(0,r.useMemo)((()=>function(e,t){const n=i(e),r=i(t);return e=>{n&&n(e),r&&r(e)}}(e,t)),[e,t])}},8880:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(6540);function i(){const e=(0,r.useRef)(!0),t=(0,r.useRef)((()=>e.current));return(0,r.useEffect)((()=>(e.current=!0,()=>{e.current=!1})),[]),t.current}},9567:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var r=n(6540),i=n(8880),a=n(1577);const o=2**31-1;function s(e,t,n){const r=n-Date.now();e.current=r<=o?setTimeout(t,r):setTimeout((()=>s(e,t,n)),o)}function l(){const e=(0,i.A)(),t=(0,r.useRef)();return(0,a.A)((()=>clearTimeout(t.current))),(0,r.useMemo)((()=>{const n=()=>clearTimeout(t.current);return{set:function(r,i=0){e()&&(n(),i<=o?t.current=setTimeout(r,i):s(t,r,Date.now()+i))},clear:n,handleRef:t}}),[])}},1577:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(6540);function i(e){const t=function(e){const t=(0,r.useRef)(e);return t.current=e,t}(e);(0,r.useEffect)((()=>()=>t.current()),[])}},6500:(e,t,n)=>{"use strict";n.d(t,{Yc:()=>g});var r=n(3804),i=n(7895),a=n(1706),o=n(6540),s=n(8978),l=n(4024);const d=["onEnter","onEntering","onEntered","onExit","onExiting","onExited","addEndListener","children"];function u(e){let{onEnter:t,onEntering:n,onEntered:i,onExit:a,onExiting:s,onExited:u,addEndListener:c,children:p}=e,h=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,d);const{major:f}=(0,l.k)(),g=f>=19?p.props.ref:p.ref,y=(0,o.useRef)(null),m=(0,r.A)(y,"function"==typeof p?null:g),v=e=>t=>{e&&y.current&&e(y.current,t)},C=(0,o.useCallback)(v(t),[t]),b=(0,o.useCallback)(v(n),[n]),S=(0,o.useCallback)(v(i),[i]),E=(0,o.useCallback)(v(a),[a]),w=(0,o.useCallback)(v(s),[s]),_=(0,o.useCallback)(v(u),[u]),P=(0,o.useCallback)(v(c),[c]);return Object.assign({},h,{nodeRef:y},t&&{onEnter:C},n&&{onEntering:b},i&&{onEntered:S},a&&{onExit:E},s&&{onExiting:w},u&&{onExited:_},c&&{addEndListener:P},{children:"function"==typeof p?(e,t)=>p(e,Object.assign({},t,{ref:m})):(0,o.cloneElement)(p,{ref:m})})}var c=n(4848);const p=["component"];const h=o.forwardRef(((e,t)=>{let{component:n}=e;const r=u(function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,p));return(0,c.jsx)(n,Object.assign({ref:t},r))}));function f({children:e,in:t,onExited:n,onEntered:s,transition:l}){const[d,u]=(0,o.useState)(!t);t&&d&&u(!1);const c=function({in:e,onTransition:t}){const n=(0,o.useRef)(null),r=(0,o.useRef)(!0),s=(0,i.A)(t);return(0,a.A)((()=>{if(!n.current)return;let t=!1;return s({in:e,element:n.current,initial:r.current,isStale:()=>t}),()=>{t=!0}}),[e,s]),(0,a.A)((()=>(r.current=!1,()=>{r.current=!0})),[]),n}({in:!!t,onTransition:e=>{Promise.resolve(l(e)).then((()=>{e.isStale()||(e.in?null==s||s(e.element,e.initial):(u(!0),null==n||n(e.element)))}),(t=>{throw e.in||u(!0),t}))}}),p=(0,r.A)(c,e.ref);return d&&!t?null:(0,o.cloneElement)(e,{ref:p})}function g(e,t,n){return e?(0,c.jsx)(h,Object.assign({},n,{component:e})):t?(0,c.jsx)(f,Object.assign({},n,{transition:t})):(0,c.jsx)(s.A,Object.assign({},n))}},8978:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(7895),i=n(3804),a=n(6540);const o=function({children:e,in:t,onExited:n,mountOnEnter:o,unmountOnExit:s}){const l=(0,a.useRef)(null),d=(0,a.useRef)(t),u=(0,r.A)(n);(0,a.useEffect)((()=>{t?d.current=!0:u(l.current)}),[t,u]);const c=(0,i.A)(l,e.ref),p=(0,a.cloneElement)(e,{ref:c});return t?p:s||!d.current&&o?null:p}},8415:(e,t,n)=>{"use strict";function r(e={}){return Array.isArray(e)?e:Object.keys(e).map((t=>(e[t].name=t,e[t])))}function i({enabled:e,enableEvents:t,placement:n,flip:i,offset:a,fixed:o,containerPadding:s,arrowElement:l,popperConfig:d={}}){var u,c,p,h,f;const g=function(e){const t={};return Array.isArray(e)?(null==e||e.forEach((e=>{t[e.name]=e})),t):e||t}(d.modifiers);return Object.assign({},d,{placement:n,enabled:e,strategy:o?"fixed":d.strategy,modifiers:r(Object.assign({},g,{eventListeners:{enabled:t,options:null==(u=g.eventListeners)?void 0:u.options},preventOverflow:Object.assign({},g.preventOverflow,{options:s?Object.assign({padding:s},null==(c=g.preventOverflow)?void 0:c.options):null==(p=g.preventOverflow)?void 0:p.options}),offset:{options:Object.assign({offset:a},null==(h=g.offset)?void 0:h.options)},arrow:Object.assign({},g.arrow,{enabled:!!l,options:Object.assign({},null==(f=g.arrow)?void 0:f.options,{element:l})}),flip:Object.assign({enabled:!!i},g.flip)}))})}n.d(t,{Ay:()=>i})},1289:(e,t,n)=>{"use strict";n.d(t,{A:()=>h,j:()=>c});var r=n(6406),i=n(1284),a=n(1625),o=n(6540),s=n(7895),l=n(9771),d=n.n(l);const u=()=>{};const c=e=>e&&("current"in e?e.current:e),p={click:"mousedown",mouseup:"mousedown",pointerup:"pointerdown"};const h=function(e,t=u,{disabled:n,clickTrigger:l="click"}={}){const h=(0,o.useRef)(!1),f=(0,o.useRef)(!1),g=(0,o.useCallback)((t=>{const n=c(e);var i;d()(!!n,"ClickOutside captured a close event but does not have a ref to compare it to. useClickOutside(), should be passed a ref that resolves to a DOM node"),h.current=!n||!!((i=t).metaKey||i.altKey||i.ctrlKey||i.shiftKey)||!function(e){return 0===e.button}(t)||!!(0,r.A)(n,t.target)||f.current,f.current=!1}),[e]),y=(0,s.A)((t=>{const n=c(e);n&&(0,r.A)(n,t.target)&&(f.current=!0)})),m=(0,s.A)((e=>{h.current||t(e)}));(0,o.useEffect)((()=>{var t,r;if(n||null==e)return;const o=(0,a.A)(c(e)),s=o.defaultView||window;let d=null!=(t=s.event)?t:null==(r=s.parent)?void 0:r.event,h=null;p[l]&&(h=(0,i.A)(o,p[l],y,!0));const f=(0,i.A)(o,l,g,!0),v=(0,i.A)(o,l,(e=>{e!==d?m(e):d=void 0}));let C=[];return"ontouchstart"in o.documentElement&&(C=[].slice.call(o.body.children).map((e=>(0,i.A)(e,"mousemove",u)))),()=>{null==h||h(),f(),v(),C.forEach((e=>e()))}}),[e,n,l,g,y,m])}},2955:(e,t,n)=>{"use strict";n.d(t,{A:()=>Ie});var r=n(6540),i=Object.prototype.hasOwnProperty;function a(e,t,n){for(n of e.keys())if(o(n,t))return n}function o(e,t){var n,r,s;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((r=e.length)===t.length)for(;r--&&o(e[r],t[r]););return-1===r}if(n===Set){if(e.size!==t.size)return!1;for(r of e){if((s=r)&&"object"==typeof s&&!(s=a(t,s)))return!1;if(!t.has(s))return!1}return!0}if(n===Map){if(e.size!==t.size)return!1;for(r of e){if((s=r[0])&&"object"==typeof s&&!(s=a(t,s)))return!1;if(!o(r[1],t.get(s)))return!1}return!0}if(n===ArrayBuffer)e=new Uint8Array(e),t=new Uint8Array(t);else if(n===DataView){if((r=e.byteLength)===t.byteLength)for(;r--&&e.getInt8(r)===t.getInt8(r););return-1===r}if(ArrayBuffer.isView(e)){if((r=e.byteLength)===t.byteLength)for(;r--&&e[r]===t[r];);return-1===r}if(!n||"object"==typeof e){for(n in r=0,e){if(i.call(e,n)&&++r&&!i.call(t,n))return!1;if(!(n in t)||!o(e[n],t[n]))return!1}return Object.keys(t).length===r}}return e!=e&&t!=t}var s=n(8880);const l=function(e){const t=(0,s.A)();return[e[0],(0,r.useCallback)((n=>{if(t())return e[1](n)}),[t,e[1]])]};function d(e){return e.split("-")[0]}function u(e){if(null==e)return window;if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function c(e){return e instanceof u(e).Element||e instanceof Element}function p(e){return e instanceof u(e).HTMLElement||e instanceof HTMLElement}function h(e){return"undefined"!=typeof ShadowRoot&&(e instanceof u(e).ShadowRoot||e instanceof ShadowRoot)}var f=Math.max,g=Math.min,y=Math.round;function m(){var e=navigator.userAgentData;return null!=e&&e.brands&&Array.isArray(e.brands)?e.brands.map((function(e){return e.brand+"/"+e.version})).join(" "):navigator.userAgent}function v(){return!/^((?!chrome|android).)*safari/i.test(m())}function C(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!1);var r=e.getBoundingClientRect(),i=1,a=1;t&&p(e)&&(i=e.offsetWidth>0&&y(r.width)/e.offsetWidth||1,a=e.offsetHeight>0&&y(r.height)/e.offsetHeight||1);var o=(c(e)?u(e):window).visualViewport,s=!v()&&n,l=(r.left+(s&&o?o.offsetLeft:0))/i,d=(r.top+(s&&o?o.offsetTop:0))/a,h=r.width/i,f=r.height/a;return{width:h,height:f,top:d,right:l+h,bottom:d+f,left:l,x:l,y:d}}function b(e){var t=C(e),n=e.offsetWidth,r=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-r)<=1&&(r=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:r}}function S(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&h(n)){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function E(e){return e?(e.nodeName||"").toLowerCase():null}function w(e){return u(e).getComputedStyle(e)}function _(e){return["table","td","th"].indexOf(E(e))>=0}function P(e){return((c(e)?e.ownerDocument:e.document)||window.document).documentElement}function N(e){return"html"===E(e)?e:e.assignedSlot||e.parentNode||(h(e)?e.host:null)||P(e)}function I(e){return p(e)&&"fixed"!==w(e).position?e.offsetParent:null}function k(e){for(var t=u(e),n=I(e);n&&_(n)&&"static"===w(n).position;)n=I(n);return n&&("html"===E(n)||"body"===E(n)&&"static"===w(n).position)?t:n||function(e){var t=/firefox/i.test(m());if(/Trident/i.test(m())&&p(e)&&"fixed"===w(e).position)return null;var n=N(e);for(h(n)&&(n=n.host);p(n)&&["html","body"].indexOf(E(n))<0;){var r=w(n);if("none"!==r.transform||"none"!==r.perspective||"paint"===r.contain||-1!==["transform","perspective"].indexOf(r.willChange)||t&&"filter"===r.willChange||t&&r.filter&&"none"!==r.filter)return n;n=n.parentNode}return null}(e)||t}function A(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function x(e,t,n){return f(e,g(t,n))}function T(e){return Object.assign({},{top:0,right:0,bottom:0,left:0},e)}function D(e,t){return t.reduce((function(t,n){return t[n]=e,t}),{})}var O="top",R="bottom",F="right",M="left",U="auto",H=[O,R,F,M],L="start",G="end",B="clippingParents",W="viewport",z="popper",j="reference",$=H.reduce((function(e,t){return e.concat([t+"-"+L,t+"-"+G])}),[]),Y=[].concat(H,[U]).reduce((function(e,t){return e.concat([t,t+"-"+L,t+"-"+G])}),[]),q=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];const K={name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,n=e.state,r=e.name,i=e.options,a=n.elements.arrow,o=n.modifiersData.popperOffsets,s=d(n.placement),l=A(s),u=[M,F].indexOf(s)>=0?"height":"width";if(a&&o){var c=function(e,t){return T("number"!=typeof(e="function"==typeof e?e(Object.assign({},t.rects,{placement:t.placement})):e)?e:D(e,H))}(i.padding,n),p=b(a),h="y"===l?O:M,f="y"===l?R:F,g=n.rects.reference[u]+n.rects.reference[l]-o[l]-n.rects.popper[u],y=o[l]-n.rects.reference[l],m=k(a),v=m?"y"===l?m.clientHeight||0:m.clientWidth||0:0,C=g/2-y/2,S=c[h],E=v-p[u]-c[f],w=v/2-p[u]/2+C,_=x(S,w,E),P=l;n.modifiersData[r]=((t={})[P]=_,t.centerOffset=_-w,t)}},effect:function(e){var t=e.state,n=e.options.element,r=void 0===n?"[data-popper-arrow]":n;null!=r&&("string"!=typeof r||(r=t.elements.popper.querySelector(r)))&&S(t.elements.popper,r)&&(t.elements.arrow=r)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function J(e){return e.split("-")[1]}var Q={top:"auto",right:"auto",bottom:"auto",left:"auto"};function X(e){var t,n=e.popper,r=e.popperRect,i=e.placement,a=e.variation,o=e.offsets,s=e.position,l=e.gpuAcceleration,d=e.adaptive,c=e.roundOffsets,p=e.isFixed,h=o.x,f=void 0===h?0:h,g=o.y,m=void 0===g?0:g,v="function"==typeof c?c({x:f,y:m}):{x:f,y:m};f=v.x,m=v.y;var C=o.hasOwnProperty("x"),b=o.hasOwnProperty("y"),S=M,E=O,_=window;if(d){var N=k(n),I="clientHeight",A="clientWidth";if(N===u(n)&&"static"!==w(N=P(n)).position&&"absolute"===s&&(I="scrollHeight",A="scrollWidth"),i===O||(i===M||i===F)&&a===G)E=R,m-=(p&&N===_&&_.visualViewport?_.visualViewport.height:N[I])-r.height,m*=l?1:-1;if(i===M||(i===O||i===R)&&a===G)S=F,f-=(p&&N===_&&_.visualViewport?_.visualViewport.width:N[A])-r.width,f*=l?1:-1}var x,T=Object.assign({position:s},d&&Q),D=!0===c?function(e,t){var n=e.x,r=e.y,i=t.devicePixelRatio||1;return{x:y(n*i)/i||0,y:y(r*i)/i||0}}({x:f,y:m},u(n)):{x:f,y:m};return f=D.x,m=D.y,l?Object.assign({},T,((x={})[E]=b?"0":"",x[S]=C?"0":"",x.transform=(_.devicePixelRatio||1)<=1?"translate("+f+"px, "+m+"px)":"translate3d("+f+"px, "+m+"px, 0)",x)):Object.assign({},T,((t={})[E]=b?m+"px":"",t[S]=C?f+"px":"",t.transform="",t))}var V={passive:!0};var Z={left:"right",right:"left",bottom:"top",top:"bottom"};function ee(e){return e.replace(/left|right|bottom|top/g,(function(e){return Z[e]}))}var te={start:"end",end:"start"};function ne(e){return e.replace(/start|end/g,(function(e){return te[e]}))}function re(e){var t=u(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function ie(e){return C(P(e)).left+re(e).scrollLeft}function ae(e){var t=w(e),n=t.overflow,r=t.overflowX,i=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function oe(e){return["html","body","#document"].indexOf(E(e))>=0?e.ownerDocument.body:p(e)&&ae(e)?e:oe(N(e))}function se(e,t){var n;void 0===t&&(t=[]);var r=oe(e),i=r===(null==(n=e.ownerDocument)?void 0:n.body),a=u(r),o=i?[a].concat(a.visualViewport||[],ae(r)?r:[]):r,s=t.concat(o);return i?s:s.concat(se(N(o)))}function le(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function de(e,t,n){return t===W?le(function(e,t){var n=u(e),r=P(e),i=n.visualViewport,a=r.clientWidth,o=r.clientHeight,s=0,l=0;if(i){a=i.width,o=i.height;var d=v();(d||!d&&"fixed"===t)&&(s=i.offsetLeft,l=i.offsetTop)}return{width:a,height:o,x:s+ie(e),y:l}}(e,n)):c(t)?function(e,t){var n=C(e,!1,"fixed"===t);return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}(t,n):le(function(e){var t,n=P(e),r=re(e),i=null==(t=e.ownerDocument)?void 0:t.body,a=f(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),o=f(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),s=-r.scrollLeft+ie(e),l=-r.scrollTop;return"rtl"===w(i||n).direction&&(s+=f(n.clientWidth,i?i.clientWidth:0)-a),{width:a,height:o,x:s,y:l}}(P(e)))}function ue(e,t,n,r){var i="clippingParents"===t?function(e){var t=se(N(e)),n=["absolute","fixed"].indexOf(w(e).position)>=0&&p(e)?k(e):e;return c(n)?t.filter((function(e){return c(e)&&S(e,n)&&"body"!==E(e)})):[]}(e):[].concat(t),a=[].concat(i,[n]),o=a[0],s=a.reduce((function(t,n){var i=de(e,n,r);return t.top=f(i.top,t.top),t.right=g(i.right,t.right),t.bottom=g(i.bottom,t.bottom),t.left=f(i.left,t.left),t}),de(e,o,r));return s.width=s.right-s.left,s.height=s.bottom-s.top,s.x=s.left,s.y=s.top,s}function ce(e){var t,n=e.reference,r=e.element,i=e.placement,a=i?d(i):null,o=i?J(i):null,s=n.x+n.width/2-r.width/2,l=n.y+n.height/2-r.height/2;switch(a){case O:t={x:s,y:n.y-r.height};break;case R:t={x:s,y:n.y+n.height};break;case F:t={x:n.x+n.width,y:l};break;case M:t={x:n.x-r.width,y:l};break;default:t={x:n.x,y:n.y}}var u=a?A(a):null;if(null!=u){var c="y"===u?"height":"width";switch(o){case L:t[u]=t[u]-(n[c]/2-r[c]/2);break;case G:t[u]=t[u]+(n[c]/2-r[c]/2)}}return t}function pe(e,t){void 0===t&&(t={});var n=t,r=n.placement,i=void 0===r?e.placement:r,a=n.strategy,o=void 0===a?e.strategy:a,s=n.boundary,l=void 0===s?B:s,d=n.rootBoundary,u=void 0===d?W:d,p=n.elementContext,h=void 0===p?z:p,f=n.altBoundary,g=void 0!==f&&f,y=n.padding,m=void 0===y?0:y,v=T("number"!=typeof m?m:D(m,H)),b=h===z?j:z,S=e.rects.popper,E=e.elements[g?b:h],w=ue(c(E)?E:E.contextElement||P(e.elements.popper),l,u,o),_=C(e.elements.reference),N=ce({reference:_,element:S,strategy:"absolute",placement:i}),I=le(Object.assign({},S,N)),k=h===z?I:_,A={top:w.top-k.top+v.top,bottom:k.bottom-w.bottom+v.bottom,left:w.left-k.left+v.left,right:k.right-w.right+v.right},x=e.modifiersData.offset;if(h===z&&x){var M=x[i];Object.keys(A).forEach((function(e){var t=[F,R].indexOf(e)>=0?1:-1,n=[O,R].indexOf(e)>=0?"y":"x";A[e]+=M[n]*t}))}return A}function he(e,t,n){return void 0===n&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function fe(e){return[O,F,R,M].some((function(t){return e[t]>=0}))}const ge={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,n=e.options,r=e.name,i=n.offset,a=void 0===i?[0,0]:i,o=Y.reduce((function(e,n){return e[n]=function(e,t,n){var r=d(e),i=[M,O].indexOf(r)>=0?-1:1,a="function"==typeof n?n(Object.assign({},t,{placement:e})):n,o=a[0],s=a[1];return o=o||0,s=(s||0)*i,[M,F].indexOf(r)>=0?{x:s,y:o}:{x:o,y:s}}(n,t.rects,a),e}),{}),s=o[t.placement],l=s.x,u=s.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=u),t.modifiersData[r]=o}};const ye={name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name,i=n.mainAxis,a=void 0===i||i,o=n.altAxis,s=void 0!==o&&o,l=n.boundary,u=n.rootBoundary,c=n.altBoundary,p=n.padding,h=n.tether,y=void 0===h||h,m=n.tetherOffset,v=void 0===m?0:m,C=pe(t,{boundary:l,rootBoundary:u,padding:p,altBoundary:c}),S=d(t.placement),E=J(t.placement),w=!E,_=A(S),P="x"===_?"y":"x",N=t.modifiersData.popperOffsets,I=t.rects.reference,T=t.rects.popper,D="function"==typeof v?v(Object.assign({},t.rects,{placement:t.placement})):v,U="number"==typeof D?{mainAxis:D,altAxis:D}:Object.assign({mainAxis:0,altAxis:0},D),H=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,G={x:0,y:0};if(N){if(a){var B,W="y"===_?O:M,z="y"===_?R:F,j="y"===_?"height":"width",$=N[_],Y=$+C[W],q=$-C[z],K=y?-T[j]/2:0,Q=E===L?I[j]:T[j],X=E===L?-T[j]:-I[j],V=t.elements.arrow,Z=y&&V?b(V):{width:0,height:0},ee=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},te=ee[W],ne=ee[z],re=x(0,I[j],Z[j]),ie=w?I[j]/2-K-re-te-U.mainAxis:Q-re-te-U.mainAxis,ae=w?-I[j]/2+K+re+ne+U.mainAxis:X+re+ne+U.mainAxis,oe=t.elements.arrow&&k(t.elements.arrow),se=oe?"y"===_?oe.clientTop||0:oe.clientLeft||0:0,le=null!=(B=null==H?void 0:H[_])?B:0,de=$+ae-le,ue=x(y?g(Y,$+ie-le-se):Y,$,y?f(q,de):q);N[_]=ue,G[_]=ue-$}if(s){var ce,he="x"===_?O:M,fe="x"===_?R:F,ge=N[P],ye="y"===P?"height":"width",me=ge+C[he],ve=ge-C[fe],Ce=-1!==[O,M].indexOf(S),be=null!=(ce=null==H?void 0:H[P])?ce:0,Se=Ce?me:ge-I[ye]-T[ye]-be+U.altAxis,Ee=Ce?ge+I[ye]+T[ye]-be-U.altAxis:ve,we=y&&Ce?function(e,t,n){var r=x(e,t,n);return r>n?n:r}(Se,ge,Ee):x(y?Se:me,ge,y?Ee:ve);N[P]=we,G[P]=we-ge}t.modifiersData[r]=G}},requiresIfExists:["offset"]};function me(e,t,n){void 0===n&&(n=!1);var r,i,a=p(t),o=p(t)&&function(e){var t=e.getBoundingClientRect(),n=y(t.width)/e.offsetWidth||1,r=y(t.height)/e.offsetHeight||1;return 1!==n||1!==r}(t),s=P(t),l=C(e,o,n),d={scrollLeft:0,scrollTop:0},c={x:0,y:0};return(a||!a&&!n)&&(("body"!==E(t)||ae(s))&&(d=(r=t)!==u(r)&&p(r)?{scrollLeft:(i=r).scrollLeft,scrollTop:i.scrollTop}:re(r)),p(t)?((c=C(t,!0)).x+=t.clientLeft,c.y+=t.clientTop):s&&(c.x=ie(s))),{x:l.left+d.scrollLeft-c.x,y:l.top+d.scrollTop-c.y,width:l.width,height:l.height}}function ve(e){var t=new Map,n=new Set,r=[];function i(e){n.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach((function(e){if(!n.has(e)){var r=t.get(e);r&&i(r)}})),r.push(e)}return e.forEach((function(e){t.set(e.name,e)})),e.forEach((function(e){n.has(e.name)||i(e)})),r}var Ce={placement:"bottom",modifiers:[],strategy:"absolute"};function be(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some((function(e){return!(e&&"function"==typeof e.getBoundingClientRect)}))}function Se(e){void 0===e&&(e={});var t=e,n=t.defaultModifiers,r=void 0===n?[]:n,i=t.defaultOptions,a=void 0===i?Ce:i;return function(e,t,n){void 0===n&&(n=a);var i,o,s={placement:"bottom",orderedModifiers:[],options:Object.assign({},Ce,a),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},l=[],d=!1,u={state:s,setOptions:function(n){var i="function"==typeof n?n(s.options):n;p(),s.options=Object.assign({},a,s.options,i),s.scrollParents={reference:c(e)?se(e):e.contextElement?se(e.contextElement):[],popper:se(t)};var o,d,h=function(e){var t=ve(e);return q.reduce((function(e,n){return e.concat(t.filter((function(e){return e.phase===n})))}),[])}((o=[].concat(r,s.options.modifiers),d=o.reduce((function(e,t){var n=e[t.name];return e[t.name]=n?Object.assign({},n,t,{options:Object.assign({},n.options,t.options),data:Object.assign({},n.data,t.data)}):t,e}),{}),Object.keys(d).map((function(e){return d[e]}))));return s.orderedModifiers=h.filter((function(e){return e.enabled})),s.orderedModifiers.forEach((function(e){var t=e.name,n=e.options,r=void 0===n?{}:n,i=e.effect;if("function"==typeof i){var a=i({state:s,name:t,instance:u,options:r}),o=function(){};l.push(a||o)}})),u.update()},forceUpdate:function(){if(!d){var e=s.elements,t=e.reference,n=e.popper;if(be(t,n)){s.rects={reference:me(t,k(n),"fixed"===s.options.strategy),popper:b(n)},s.reset=!1,s.placement=s.options.placement,s.orderedModifiers.forEach((function(e){return s.modifiersData[e.name]=Object.assign({},e.data)}));for(var r=0;r<s.orderedModifiers.length;r++)if(!0!==s.reset){var i=s.orderedModifiers[r],a=i.fn,o=i.options,l=void 0===o?{}:o,c=i.name;"function"==typeof a&&(s=a({state:s,options:l,name:c,instance:u})||s)}else s.reset=!1,r=-1}}},update:(i=function(){return new Promise((function(e){u.forceUpdate(),e(s)}))},function(){return o||(o=new Promise((function(e){Promise.resolve().then((function(){o=void 0,e(i())}))}))),o}),destroy:function(){p(),d=!0}};if(!be(e,t))return u;function p(){l.forEach((function(e){return e()})),l=[]}return u.setOptions(n).then((function(e){!d&&n.onFirstUpdate&&n.onFirstUpdate(e)})),u}}const Ee=Se({defaultModifiers:[{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,n=e.name,r=t.rects.reference,i=t.rects.popper,a=t.modifiersData.preventOverflow,o=pe(t,{elementContext:"reference"}),s=pe(t,{altBoundary:!0}),l=he(o,r),d=he(s,i,a),u=fe(l),c=fe(d);t.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:d,isReferenceHidden:u,hasPopperEscaped:c},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":c})}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,n=e.name;t.modifiersData[n]=ce({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}},{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,n=e.options,r=n.gpuAcceleration,i=void 0===r||r,a=n.adaptive,o=void 0===a||a,s=n.roundOffsets,l=void 0===s||s,u={placement:d(t.placement),variation:J(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:i,isFixed:"fixed"===t.options.strategy};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,X(Object.assign({},u,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:o,roundOffsets:l})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,X(Object.assign({},u,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}},{name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,n=e.instance,r=e.options,i=r.scroll,a=void 0===i||i,o=r.resize,s=void 0===o||o,l=u(t.elements.popper),d=[].concat(t.scrollParents.reference,t.scrollParents.popper);return a&&d.forEach((function(e){e.addEventListener("scroll",n.update,V)})),s&&l.addEventListener("resize",n.update,V),function(){a&&d.forEach((function(e){e.removeEventListener("scroll",n.update,V)})),s&&l.removeEventListener("resize",n.update,V)}},data:{}},ge,{name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var i=n.mainAxis,a=void 0===i||i,o=n.altAxis,s=void 0===o||o,l=n.fallbackPlacements,u=n.padding,c=n.boundary,p=n.rootBoundary,h=n.altBoundary,f=n.flipVariations,g=void 0===f||f,y=n.allowedAutoPlacements,m=t.options.placement,v=d(m),C=l||(v===m||!g?[ee(m)]:function(e){if(d(e)===U)return[];var t=ee(e);return[ne(e),t,ne(t)]}(m)),b=[m].concat(C).reduce((function(e,n){return e.concat(d(n)===U?function(e,t){void 0===t&&(t={});var n=t,r=n.placement,i=n.boundary,a=n.rootBoundary,o=n.padding,s=n.flipVariations,l=n.allowedAutoPlacements,u=void 0===l?Y:l,c=J(r),p=c?s?$:$.filter((function(e){return J(e)===c})):H,h=p.filter((function(e){return u.indexOf(e)>=0}));0===h.length&&(h=p);var f=h.reduce((function(t,n){return t[n]=pe(e,{placement:n,boundary:i,rootBoundary:a,padding:o})[d(n)],t}),{});return Object.keys(f).sort((function(e,t){return f[e]-f[t]}))}(t,{placement:n,boundary:c,rootBoundary:p,padding:u,flipVariations:g,allowedAutoPlacements:y}):n)}),[]),S=t.rects.reference,E=t.rects.popper,w=new Map,_=!0,P=b[0],N=0;N<b.length;N++){var I=b[N],k=d(I),A=J(I)===L,x=[O,R].indexOf(k)>=0,T=x?"width":"height",D=pe(t,{placement:I,boundary:c,rootBoundary:p,altBoundary:h,padding:u}),G=x?A?F:M:A?R:O;S[T]>E[T]&&(G=ee(G));var B=ee(G),W=[];if(a&&W.push(D[k]<=0),s&&W.push(D[G]<=0,D[B]<=0),W.every((function(e){return e}))){P=I,_=!1;break}w.set(I,W)}if(_)for(var z=function(e){var t=b.find((function(t){var n=w.get(t);if(n)return n.slice(0,e).every((function(e){return e}))}));if(t)return P=t,"break"},j=g?3:1;j>0;j--){if("break"===z(j))break}t.placement!==P&&(t.modifiersData[r]._skip=!0,t.placement=P,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}},ye,K]}),we=["enabled","placement","strategy","modifiers"];const _e={name:"applyStyles",enabled:!1,phase:"afterWrite",fn:()=>{}},Pe={name:"ariaDescribedBy",enabled:!0,phase:"afterWrite",effect:({state:e})=>()=>{const{reference:t,popper:n}=e.elements;if("removeAttribute"in t){const e=(t.getAttribute("aria-describedby")||"").split(",").filter((e=>e.trim()!==n.id));e.length?t.setAttribute("aria-describedby",e.join(",")):t.removeAttribute("aria-describedby")}},fn:({state:e})=>{var t;const{popper:n,reference:r}=e.elements,i=null==(t=n.getAttribute("role"))?void 0:t.toLowerCase();if(n.id&&"tooltip"===i&&"setAttribute"in r){const e=r.getAttribute("aria-describedby");if(e&&-1!==e.split(",").indexOf(n.id))return;r.setAttribute("aria-describedby",e?`${e},${n.id}`:n.id)}}},Ne=[];const Ie=function(e,t,n={}){let{enabled:i=!0,placement:a="bottom",strategy:s="absolute",modifiers:d=Ne}=n,u=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(n,we);const c=(0,r.useRef)(d),p=(0,r.useRef)(),h=(0,r.useCallback)((()=>{var e;null==(e=p.current)||e.update()}),[]),f=(0,r.useCallback)((()=>{var e;null==(e=p.current)||e.forceUpdate()}),[]),[g,y]=l((0,r.useState)({placement:a,update:h,forceUpdate:f,attributes:{},styles:{popper:{},arrow:{}}})),m=(0,r.useMemo)((()=>({name:"updateStateModifier",enabled:!0,phase:"write",requires:["computeStyles"],fn:({state:e})=>{const t={},n={};Object.keys(e.elements).forEach((r=>{t[r]=e.styles[r],n[r]=e.attributes[r]})),y({state:e,styles:t,attributes:n,update:h,forceUpdate:f,placement:e.placement})}})),[h,f,y]),v=(0,r.useMemo)((()=>(o(c.current,d)||(c.current=d),c.current)),[d]);return(0,r.useEffect)((()=>{p.current&&i&&p.current.setOptions({placement:a,strategy:s,modifiers:[...v,m,_e]})}),[s,a,m,i,v]),(0,r.useEffect)((()=>{if(i&&null!=e&&null!=t)return p.current=Ee(e,t,Object.assign({},u,{placement:a,strategy:s,modifiers:[...v,Pe,m]})),()=>{null!=p.current&&(p.current.destroy(),p.current=void 0,y((e=>Object.assign({},e,{attributes:{},styles:{popper:{}}}))))}}),[i,e,t]),g}},4561:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var r=n(1625),i=n(7828),a=n(6540),o=n(2810);const s=(e,t)=>i.A?null==e?(t||(0,r.A)()).body:("function"==typeof e&&(e=e()),e&&"current"in e&&(e=e.current),e&&("nodeType"in e||e.getBoundingClientRect)?e:null):null;function l(e,t){const n=(0,o.A)(),[r,i]=(0,a.useState)((()=>s(e,null==n?void 0:n.document)));if(!r){const t=s(e);t&&i(t)}return(0,a.useEffect)((()=>{t&&r&&t(r)}),[t,r]),(0,a.useEffect)((()=>{const t=s(e);t!==r&&i(t)}),[e,r]),r}},2810:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(6540),i=n(7828);const a=(0,r.createContext)(i.A?window:void 0);a.Provider;function o(){return(0,r.useContext)(a)}},4024:(e,t,n)=>{"use strict";n.d(t,{k:()=>a,v:()=>i});var r=n(6540);function i(e){return"Escape"===e.code||27===e.keyCode}function a(){const e=r.version.split(".");return{major:+e[0],minor:+e[1],patch:+e[2]}}},2655:(e,t)=>{"use strict";var n,r,i;r=[t],n=function(t){function n(e){var t,n=new Set,o=i(),s=Array.isArray(e)?function(t){return e.indexOf(t.animationName)>-1}:function(t){return t.animationName===e};function l(e){if(s(e)){var t=e.target,r=i()-o;t.style.setProperty("animation-delay","".concat(-r,"ms")),n.add(t)}}function d(e){s(e)&&(n.add(e.target),requestAnimationFrame((function(e){e!==t&&(o=i(),r(n)),t=e})))}return window.addEventListener("animationstart",l,!0),window.addEventListener("animationiteration",d,!0),{getElements:function(){return n},free:function(){window.removeEventListener("animationstart",l),window.removeEventListener("animationiteration",d),this.start(),n.clear()},start:function(){n.forEach((function(e){a(n,e)&&e.style.removeProperty("animation")}))},stop:function(){n.forEach((function(e){a(n,e)&&e.style.setProperty("animation","none")}))},pause:function(){n.forEach((function(e){a(n,e)&&e.style.setProperty("animation-play-state","paused")}))}}}function r(e){e.forEach((function(t){"paused"!==window.getComputedStyle(t).animationPlayState&&a(e,t)&&t.style.setProperty("animation","none")})),requestAnimationFrame((function(){e.forEach((function(t){"paused"!==window.getComputedStyle(t).animationPlayState&&a(e,t)&&t.style.removeProperty("animation")}))}))}function i(){return(new Date).getTime()}function a(e,t){var n=document.body.contains(t);return n||e.delete(t),n}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n,e.exports=t.default},void 0===(i="function"==typeof n?n.apply(t,r):n)||(e.exports=i)},922:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(4243);function i(e,t){e.classList?e.classList.add(t):(0,r.A)(e,t)||("string"==typeof e.className?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))}},8394:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>s});var r=n(7828),i=!1,a=!1;try{var o={get passive(){return i=!0},get once(){return a=i=!0}};r.A&&(window.addEventListener("test",o,o),window.removeEventListener("test",o,!0))}catch(e){}const s=function(e,t,n,r){if(r&&"boolean"!=typeof r&&!a){var o=r.once,s=r.capture,l=n;!a&&o&&(l=n.__once||function e(r){this.removeEventListener(t,e,s),n.call(this,r)},n.__once=l),e.addEventListener(t,l,i?r:s)}e.addEventListener(t,n,r)}},7828:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=!("undefined"==typeof window||!window.document||!window.document.createElement)},6406:(e,t,n)=>{"use strict";function r(e,t){return e.contains?e.contains(t):e.compareDocumentPosition?e===t||!!(16&e.compareDocumentPosition(t)):void 0}n.d(t,{A:()=>r})},2660:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var r=n(1625);function i(e,t){return function(e){var t=(0,r.A)(e);return t&&t.defaultView||window}(e).getComputedStyle(e,t)}var a=/([A-Z])/g;var o=/^ms-/;function s(e){return function(e){return e.replace(a,"-$1").toLowerCase()}(e).replace(o,"-ms-")}var l=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;const d=function(e,t){var n="",r="";if("string"==typeof t)return e.style.getPropertyValue(s(t))||i(e).getPropertyValue(s(t));Object.keys(t).forEach((function(i){var a=t[i];a||0===a?!function(e){return!(!e||!l.test(e))}(i)?n+=s(i)+": "+a+";":r+=i+"("+a+") ":e.style.removeProperty(s(i))})),r&&(n+="transform: "+r+";"),e.style.cssText+=";"+n}},4243:(e,t,n)=>{"use strict";function r(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")}n.d(t,{A:()=>r})},1284:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var r=n(8394),i=n(5019);const a=function(e,t,n,a){return(0,r.Ay)(e,t,n,a),function(){(0,i.A)(e,t,n,a)}}},1625:(e,t,n)=>{"use strict";function r(e){return e&&e.ownerDocument||document}n.d(t,{A:()=>r})},8995:(e,t,n)=>{"use strict";function r(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function i(e,t){e.classList?e.classList.remove(t):"string"==typeof e.className?e.className=r(e.className,t):e.setAttribute("class",r(e.className&&e.className.baseVal||"",t))}n.d(t,{A:()=>i})},5019:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=function(e,t,n,r){var i=r&&"boolean"!=typeof r?r.capture:r;e.removeEventListener(t,n,i),n.__once&&e.removeEventListener(t,n.__once,i)}},5797:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(2660),i=n(1284);function a(e,t,n){void 0===n&&(n=5);var r=!1,a=setTimeout((function(){r||function(e,t,n,r){if(void 0===n&&(n=!1),void 0===r&&(r=!0),e){var i=document.createEvent("HTMLEvents");i.initEvent(t,n,r),e.dispatchEvent(i)}}(e,"transitionend",!0)}),t+n),o=(0,i.A)(e,"transitionend",(function(){r=!0}),{once:!0});return function(){clearTimeout(a),o()}}function o(e,t,n,o){var s,l,d;null==n&&(s=e,l=(0,r.A)(s,"transitionDuration")||"",d=-1===l.indexOf("ms")?1e3:1,n=parseFloat(l)*d||0);var u=a(e,n,o),c=(0,i.A)(e,"transitionend",t);return function(){u(),c()}}},4146:(e,t,n)=>{"use strict";var r=n(4363),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function l(e){return r.isMemo(e)?o:s[e.$$typeof]||i}s[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[r.Memo]=o;var d=Object.defineProperty,u=Object.getOwnPropertyNames,c=Object.getOwnPropertySymbols,p=Object.getOwnPropertyDescriptor,h=Object.getPrototypeOf,f=Object.prototype;e.exports=function e(t,n,r){if("string"!=typeof n){if(f){var i=h(n);i&&i!==f&&e(t,i,r)}var o=u(n);c&&(o=o.concat(c(n)));for(var s=l(t),g=l(n),y=0;y<o.length;++y){var m=o[y];if(!(a[m]||r&&r[m]||g&&g[m]||s&&s[m])){var v=p(n,m);try{d(t,m,v)}catch(e){}}}}return t}},311:e=>{"use strict";e.exports=function(e,t,n,r,i,a,o,s){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var d=[n,r,i,a,o,s],u=0;(l=new Error(t.replace(/%s/g,(function(){return d[u++]})))).name="Invariant Violation"}throw l.framesToPop=1,l}}},1782:(e,t,n)=>{"use strict";n.r(t)},7638:(e,t,n)=>{"use strict";n.r(t)},5223:(e,t,n)=>{"use strict";n.r(t)},7683:(e,t,n)=>{"use strict";n.r(t)},4850:(e,t,n)=>{"use strict";n.r(t)},1137:(e,t,n)=>{"use strict";n.r(t)},5689:(e,t,n)=>{"use strict";n.r(t)},277:(e,t,n)=>{"use strict";n.r(t)},6433:(e,t,n)=>{"use strict";n.r(t)},3487:(e,t,n)=>{"use strict";n.r(t)},7952:(e,t,n)=>{"use strict";n.r(t)},6548:(e,t,n)=>{"use strict";n.r(t)},1026:(e,t,n)=>{"use strict";n.r(t)},5827:(e,t,n)=>{"use strict";n.r(t)},9084:(e,t,n)=>{"use strict";n.r(t)},822:(e,t,n)=>{"use strict";n.r(t)},4707:(e,t,n)=>{"use strict";n.r(t)},2816:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,a.default)((function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=null;return t.forEach((function(e){if(null==i){var t=e.apply(void 0,n);null!=t&&(i=t)}})),i}))};var r,i=n(5441),a=(r=i)&&r.__esModule?r:{default:r};e.exports=t.default},5441:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){function t(t,n,r,i,a,o){var s=i||"<<anonymous>>",l=o||r;if(null==n[r])return t?new Error("Required "+a+" `"+l+"` was not specified in `"+s+"`."):null;for(var d=arguments.length,u=Array(d>6?d-6:0),c=6;c<d;c++)u[c-6]=arguments[c];return e.apply(void 0,[n,r,s,a,l].concat(u))}var n=t.bind(null,!1);return n.isRequired=t.bind(null,!0),n},e.exports=t.default},2694:(e,t,n)=>{"use strict";var r=n(6925);function i(){}function a(){}a.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,a,o){if(o!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:i};return n.PropTypes=n,n}},5556:(e,t,n)=>{e.exports=n(2694)()},6925:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},8514:(e,t,n)=>{"use strict";n.r(t),n.d(t,{DragDropContext:()=>Ji,Draggable:()=>Ta,Droppable:()=>Fa,resetServerContext:()=>Ki,useKeyboardSensor:()=>Pi,useMouseSensor:()=>Si,useTouchSensor:()=>Ai});var r=n(6540),i=n(5540),a=n(8168);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function s(e){var t=function(e,t){if("object"!=o(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==o(t)?t:t+""}function l(e,t,n){return(t=s(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var p="function"==typeof Symbol&&Symbol.observable||"@@observable",h=function(){return Math.random().toString(36).substring(7).split("").join(".")},f={INIT:"@@redux/INIT"+h(),REPLACE:"@@redux/REPLACE"+h(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+h()}};function g(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function y(e,t,n){var r;if("function"==typeof t&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw new Error(c(0));if("function"==typeof t&&void 0===n&&(n=t,t=void 0),void 0!==n){if("function"!=typeof n)throw new Error(c(1));return n(y)(e,t)}if("function"!=typeof e)throw new Error(c(2));var i=e,a=t,o=[],s=o,l=!1;function d(){s===o&&(s=o.slice())}function u(){if(l)throw new Error(c(3));return a}function h(e){if("function"!=typeof e)throw new Error(c(4));if(l)throw new Error(c(5));var t=!0;return d(),s.push(e),function(){if(t){if(l)throw new Error(c(6));t=!1,d();var n=s.indexOf(e);s.splice(n,1),o=null}}}function m(e){if(!g(e))throw new Error(c(7));if(void 0===e.type)throw new Error(c(8));if(l)throw new Error(c(9));try{l=!0,a=i(a,e)}finally{l=!1}for(var t=o=s,n=0;n<t.length;n++){(0,t[n])()}return e}return m({type:f.INIT}),(r={dispatch:m,subscribe:h,getState:u,replaceReducer:function(e){if("function"!=typeof e)throw new Error(c(10));i=e,m({type:f.REPLACE})}})[p]=function(){var e,t=h;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new Error(c(11));function n(){e.next&&e.next(u())}return n(),{unsubscribe:t(n)}}})[p]=function(){return this},e},r}function m(e,t){return function(){return t(e.apply(this,arguments))}}function v(e,t){if("function"==typeof e)return m(e,t);if("object"!=typeof e||null===e)throw new Error(c(16));var n={};for(var r in e){var i=e[r];"function"==typeof i&&(n[r]=m(i,t))}return n}function C(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}var b=r.createContext(null);var S=function(e){e()},E=function(){return S};var w={notify:function(){},get:function(){return[]}};function _(e,t){var n,r=w;function i(){o.onStateChange&&o.onStateChange()}function a(){n||(n=t?t.addNestedSub(i):e.subscribe(i),r=function(){var e=E(),t=null,n=null;return{clear:function(){t=null,n=null},notify:function(){e((function(){for(var e=t;e;)e.callback(),e=e.next}))},get:function(){for(var e=[],n=t;n;)e.push(n),n=n.next;return e},subscribe:function(e){var r=!0,i=n={callback:e,next:null,prev:n};return i.prev?i.prev.next=i:t=i,function(){r&&null!==t&&(r=!1,i.next?i.next.prev=i.prev:n=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}())}var o={addNestedSub:function(e){return a(),r.subscribe(e)},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:i,isSubscribed:function(){return Boolean(n)},trySubscribe:a,tryUnsubscribe:function(){n&&(n(),n=void 0,r.clear(),r=w)},getListeners:function(){return r}};return o}var P="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?r.useLayoutEffect:r.useEffect;const N=function(e){var t=e.store,n=e.context,i=e.children,a=(0,r.useMemo)((function(){var e=_(t);return{store:t,subscription:e}}),[t]),o=(0,r.useMemo)((function(){return t.getState()}),[t]);P((function(){var e=a.subscription;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),o!==t.getState()&&e.notifyNestedSubs(),function(){e.tryUnsubscribe(),e.onStateChange=null}}),[a,o]);var s=n||b;return r.createElement(s.Provider,{value:a},i)};var I=n(8587),k=n(4146),A=n.n(k),x=n(4737),T=["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"],D=["reactReduxForwardedRef"],O=[],R=[null,null];function F(e,t){var n=e[1];return[t.payload,n+1]}function M(e,t,n){P((function(){return e.apply(void 0,t)}),n)}function U(e,t,n,r,i,a,o){e.current=r,t.current=i,n.current=!1,a.current&&(a.current=null,o())}function H(e,t,n,r,i,a,o,s,l,d){if(e){var u=!1,c=null,p=function(){if(!u){var e,n,p=t.getState();try{e=r(p,i.current)}catch(e){n=e,c=e}n||(c=null),e===a.current?o.current||l():(a.current=e,s.current=e,o.current=!0,d({type:"STORE_UPDATED",payload:{error:n}}))}};n.onStateChange=p,n.trySubscribe(),p();return function(){if(u=!0,n.tryUnsubscribe(),n.onStateChange=null,c)throw c}}}var L=function(){return[null,0]};function G(e,t){void 0===t&&(t={});var n=t,i=n.getDisplayName,o=void 0===i?function(e){return"ConnectAdvanced("+e+")"}:i,s=n.methodName,l=void 0===s?"connectAdvanced":s,d=n.renderCountProp,u=void 0===d?void 0:d,c=n.shouldHandleStateChanges,p=void 0===c||c,h=n.storeKey,f=void 0===h?"store":h,g=(n.withRef,n.forwardRef),y=void 0!==g&&g,m=n.context,v=void 0===m?b:m,C=(0,I.A)(n,T),S=v;return function(t){var n=t.displayName||t.name||"Component",i=o(n),s=(0,a.A)({},C,{getDisplayName:o,methodName:l,renderCountProp:u,shouldHandleStateChanges:p,storeKey:f,displayName:i,wrappedComponentName:n,WrappedComponent:t}),d=C.pure;var c=d?r.useMemo:function(e){return e()};function h(n){var i=(0,r.useMemo)((function(){var e=n.reactReduxForwardedRef,t=(0,I.A)(n,D);return[n.context,e,t]}),[n]),o=i[0],l=i[1],d=i[2],u=(0,r.useMemo)((function(){return o&&o.Consumer&&(0,x.isContextConsumer)(r.createElement(o.Consumer,null))?o:S}),[o,S]),h=(0,r.useContext)(u),f=Boolean(n.store)&&Boolean(n.store.getState)&&Boolean(n.store.dispatch);Boolean(h)&&Boolean(h.store);var g=f?n.store:h.store,y=(0,r.useMemo)((function(){return function(t){return e(t.dispatch,s)}(g)}),[g]),m=(0,r.useMemo)((function(){if(!p)return R;var e=_(g,f?null:h.subscription),t=e.notifyNestedSubs.bind(e);return[e,t]}),[g,f,h]),v=m[0],C=m[1],b=(0,r.useMemo)((function(){return f?h:(0,a.A)({},h,{subscription:v})}),[f,h,v]),E=(0,r.useReducer)(F,O,L),w=E[0][0],P=E[1];if(w&&w.error)throw w.error;var N=(0,r.useRef)(),k=(0,r.useRef)(d),A=(0,r.useRef)(),T=(0,r.useRef)(!1),G=c((function(){return A.current&&d===k.current?A.current:y(g.getState(),d)}),[g,w,d]);M(U,[k,N,T,d,G,A,C]),M(H,[p,g,v,y,k,N,T,A,C,P],[g,v,y]);var B=(0,r.useMemo)((function(){return r.createElement(t,(0,a.A)({},G,{ref:l}))}),[l,t,G]);return(0,r.useMemo)((function(){return p?r.createElement(u.Provider,{value:b},B):B}),[u,B,b])}var g=d?r.memo(h):h;if(g.WrappedComponent=t,g.displayName=h.displayName=i,y){var m=r.forwardRef((function(e,t){return r.createElement(g,(0,a.A)({},e,{reactReduxForwardedRef:t}))}));return m.displayName=i,m.WrappedComponent=t,A()(m,t)}return A()(g,t)}}function B(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t}function W(e,t){if(B(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var i=0;i<n.length;i++)if(!Object.prototype.hasOwnProperty.call(t,n[i])||!B(e[n[i]],t[n[i]]))return!1;return!0}function z(e){return function(t,n){var r=e(t,n);function i(){return r}return i.dependsOnOwnProps=!1,i}}function j(e){return null!==e.dependsOnOwnProps&&void 0!==e.dependsOnOwnProps?Boolean(e.dependsOnOwnProps):1!==e.length}function $(e,t){return function(t,n){n.displayName;var r=function(e,t){return r.dependsOnOwnProps?r.mapToProps(e,t):r.mapToProps(e)};return r.dependsOnOwnProps=!0,r.mapToProps=function(t,n){r.mapToProps=e,r.dependsOnOwnProps=j(e);var i=r(t,n);return"function"==typeof i&&(r.mapToProps=i,r.dependsOnOwnProps=j(i),i=r(t,n)),i},r}}const Y=[function(e){return"function"==typeof e?$(e):void 0},function(e){return e?void 0:z((function(e){return{dispatch:e}}))},function(e){return e&&"object"==typeof e?z((function(t){return function(e,t){var n={},r=function(r){var i=e[r];"function"==typeof i&&(n[r]=function(){return t(i.apply(void 0,arguments))})};for(var i in e)r(i);return n}(e,t)})):void 0}];const q=[function(e){return"function"==typeof e?$(e):void 0},function(e){return e?void 0:z((function(){return{}}))}];function K(e,t,n){return(0,a.A)({},n,e,t)}const J=[function(e){return"function"==typeof e?function(e){return function(t,n){n.displayName;var r,i=n.pure,a=n.areMergedPropsEqual,o=!1;return function(t,n,s){var l=e(t,n,s);return o?i&&a(l,r)||(r=l):(o=!0,r=l),r}}}(e):void 0},function(e){return e?void 0:function(){return K}}];var Q=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function X(e,t,n,r){return function(i,a){return n(e(i,a),t(r,a),a)}}function V(e,t,n,r,i){var a,o,s,l,d,u=i.areStatesEqual,c=i.areOwnPropsEqual,p=i.areStatePropsEqual,h=!1;function f(i,h){var f,g,y=!c(h,o),m=!u(i,a,h,o);return a=i,o=h,y&&m?(s=e(a,o),t.dependsOnOwnProps&&(l=t(r,o)),d=n(s,l,o)):y?(e.dependsOnOwnProps&&(s=e(a,o)),t.dependsOnOwnProps&&(l=t(r,o)),d=n(s,l,o)):m?(f=e(a,o),g=!p(f,s),s=f,g&&(d=n(s,l,o)),d):d}return function(i,u){return h?f(i,u):(s=e(a=i,o=u),l=t(r,o),d=n(s,l,o),h=!0,d)}}function Z(e,t){var n=t.initMapStateToProps,r=t.initMapDispatchToProps,i=t.initMergeProps,a=(0,I.A)(t,Q),o=n(e,a),s=r(e,a),l=i(e,a);return(a.pure?V:X)(o,s,l,e,a)}var ee=["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"];function te(e,t,n){for(var r=t.length-1;r>=0;r--){var i=t[r](e);if(i)return i}return function(t,r){throw new Error("Invalid value of type "+typeof e+" for "+n+" argument when connecting component "+r.wrappedComponentName+".")}}function ne(e,t){return e===t}function re(e){var t=void 0===e?{}:e,n=t.connectHOC,r=void 0===n?G:n,i=t.mapStateToPropsFactories,o=void 0===i?q:i,s=t.mapDispatchToPropsFactories,l=void 0===s?Y:s,d=t.mergePropsFactories,u=void 0===d?J:d,c=t.selectorFactory,p=void 0===c?Z:c;return function(e,t,n,i){void 0===i&&(i={});var s=i,d=s.pure,c=void 0===d||d,h=s.areStatesEqual,f=void 0===h?ne:h,g=s.areOwnPropsEqual,y=void 0===g?W:g,m=s.areStatePropsEqual,v=void 0===m?W:m,C=s.areMergedPropsEqual,b=void 0===C?W:C,S=(0,I.A)(s,ee),E=te(e,o,"mapStateToProps"),w=te(t,l,"mapDispatchToProps"),_=te(n,u,"mergeProps");return r(p,(0,a.A)({methodName:"connect",getDisplayName:function(e){return"Connect("+e+")"},shouldHandleStateChanges:Boolean(e),initMapStateToProps:E,initMapDispatchToProps:w,initMergeProps:_,pure:c,areStatesEqual:f,areOwnPropsEqual:y,areStatePropsEqual:v,areMergedPropsEqual:b},S))}}const ie=re();var ae,oe=n(961);function se(e,t){var n=(0,r.useState)((function(){return{inputs:t,result:e()}}))[0],i=(0,r.useRef)(!0),a=(0,r.useRef)(n),o=i.current||Boolean(t&&a.current.inputs&&function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}(t,a.current.inputs))?a.current:{inputs:t,result:e()};return(0,r.useEffect)((function(){i.current=!1,a.current=o}),[o]),o.result}ae=oe.unstable_batchedUpdates,S=ae;var le=se,de=function(e,t){return se((function(){return e}),t)},ue="Invariant failed";var ce=function(e){var t=e.top,n=e.right,r=e.bottom,i=e.left;return{top:t,right:n,bottom:r,left:i,width:n-i,height:r-t,x:i,y:t,center:{x:(n+i)/2,y:(r+t)/2}}},pe=function(e,t){return{top:e.top-t.top,left:e.left-t.left,bottom:e.bottom+t.bottom,right:e.right+t.right}},he=function(e,t){return{top:e.top+t.top,left:e.left+t.left,bottom:e.bottom-t.bottom,right:e.right-t.right}},fe={top:0,right:0,bottom:0,left:0},ge=function(e){var t=e.borderBox,n=e.margin,r=void 0===n?fe:n,i=e.border,a=void 0===i?fe:i,o=e.padding,s=void 0===o?fe:o,l=ce(pe(t,r)),d=ce(he(t,a)),u=ce(he(d,s));return{marginBox:l,borderBox:ce(t),paddingBox:d,contentBox:u,margin:r,border:a,padding:s}},ye=function(e){var t=e.slice(0,-2);if("px"!==e.slice(-2))return 0;var n=Number(t);return isNaN(n)&&function(e,t){if(!e)throw new Error(ue)}(!1),n},me=function(e,t){var n,r,i=e.borderBox,a=e.border,o=e.margin,s=e.padding,l=(r=t,{top:(n=i).top+r.y,left:n.left+r.x,bottom:n.bottom+r.y,right:n.right+r.x});return ge({borderBox:l,border:a,margin:o,padding:s})},ve=function(e,t){return void 0===t&&(t={x:window.pageXOffset,y:window.pageYOffset}),me(e,t)},Ce=function(e,t){var n={top:ye(t.marginTop),right:ye(t.marginRight),bottom:ye(t.marginBottom),left:ye(t.marginLeft)},r={top:ye(t.paddingTop),right:ye(t.paddingRight),bottom:ye(t.paddingBottom),left:ye(t.paddingLeft)},i={top:ye(t.borderTopWidth),right:ye(t.borderRightWidth),bottom:ye(t.borderBottomWidth),left:ye(t.borderLeftWidth)};return ge({borderBox:e,margin:n,padding:r,border:i})},be=function(e){var t=e.getBoundingClientRect(),n=window.getComputedStyle(e);return Ce(t,n)},Se=Number.isNaN||function(e){return"number"==typeof e&&e!=e};function Ee(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(r=e[n],i=t[n],!(r===i||Se(r)&&Se(i)))return!1;var r,i;return!0}const we=function(e,t){var n;void 0===t&&(t=Ee);var r,i=[],a=!1;return function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];return a&&n===this&&t(o,i)||(r=e.apply(this,o),a=!0,n=this,i=o),r}};const _e=function(e){var t=[],n=null,r=function(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];t=i,n||(n=requestAnimationFrame((function(){n=null,e.apply(void 0,t)})))};return r.cancel=function(){n&&(cancelAnimationFrame(n),n=null)},r};function Pe(e,t){}Pe.bind(null,"warn"),Pe.bind(null,"error");function Ne(){}function Ie(e,t,n){var r=t.map((function(t){var r=function(e,t){return(0,a.A)({},e,{},t)}(n,t.options);return e.addEventListener(t.eventName,t.fn,r),function(){e.removeEventListener(t.eventName,t.fn,r)}}));return function(){r.forEach((function(e){e()}))}}var ke=!0,Ae="Invariant failed";function xe(e){this.message=e}function Te(e,t){if(!e)throw new xe(ke?Ae:Ae+": "+(t||""))}xe.prototype.toString=function(){return this.message};var De=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).callbacks=null,t.unbind=Ne,t.onWindowError=function(e){var n=t.getCallbacks();n.isDragging()&&n.tryAbort(),e.error instanceof xe&&e.preventDefault()},t.getCallbacks=function(){if(!t.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return t.callbacks},t.setCallbacks=function(e){t.callbacks=e},t}(0,i.A)(t,e);var n=t.prototype;return n.componentDidMount=function(){this.unbind=Ie(window,[{eventName:"error",fn:this.onWindowError}])},n.componentDidCatch=function(e){if(!(e instanceof xe))throw e;this.setState({})},n.componentWillUnmount=function(){this.unbind()},n.render=function(){return this.props.children(this.setCallbacks)},t}(r.Component),Oe=function(e){return e+1},Re=function(e,t){var n=e.droppableId===t.droppableId,r=Oe(e.index),i=Oe(t.index);return n?"\n      You have moved the item from position "+r+"\n      to position "+i+"\n    ":"\n    You have moved the item from position "+r+"\n    in list "+e.droppableId+"\n    to list "+t.droppableId+"\n    in position "+i+"\n  "},Fe=function(e,t,n){return t.droppableId===n.droppableId?"\n      The item "+e+"\n      has been combined with "+n.draggableId:"\n      The item "+e+"\n      in list "+t.droppableId+"\n      has been combined with "+n.draggableId+"\n      in list "+n.droppableId+"\n    "},Me=function(e){return"\n  The item has returned to its starting position\n  of "+Oe(e.index)+"\n"},Ue={dragHandleUsageInstructions:"\n  Press space bar to start a drag.\n  When dragging you can use the arrow keys to move the item around and escape to cancel.\n  Some screen readers may require you to be in focus mode or to use your pass through key\n",onDragStart:function(e){return"\n  You have lifted an item in position "+Oe(e.source.index)+"\n"},onDragUpdate:function(e){var t=e.destination;if(t)return Re(e.source,t);var n=e.combine;return n?Fe(e.draggableId,e.source,n):"You are over an area that cannot be dropped on"},onDragEnd:function(e){if("CANCEL"===e.reason)return"\n      Movement cancelled.\n      "+Me(e.source)+"\n    ";var t=e.destination,n=e.combine;return t?"\n      You have dropped the item.\n      "+Re(e.source,t)+"\n    ":n?"\n      You have dropped the item.\n      "+Fe(e.draggableId,e.source,n)+"\n    ":"\n    The item has been dropped while not over a drop area.\n    "+Me(e.source)+"\n  "}},He={x:0,y:0},Le=function(e,t){return{x:e.x+t.x,y:e.y+t.y}},Ge=function(e,t){return{x:e.x-t.x,y:e.y-t.y}},Be=function(e,t){return e.x===t.x&&e.y===t.y},We=function(e){return{x:0!==e.x?-e.x:0,y:0!==e.y?-e.y:0}},ze=function(e,t,n){var r;return void 0===n&&(n=0),(r={})[e]=t,r["x"===e?"y":"x"]=n,r},je=function(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))},$e=function(e,t){return Math.min.apply(Math,t.map((function(t){return je(e,t)})))},Ye=function(e){return function(t){return{x:e(t.x),y:e(t.y)}}},qe=function(e,t){return{top:e.top+t.y,left:e.left+t.x,bottom:e.bottom+t.y,right:e.right+t.x}},Ke=function(e){return[{x:e.left,y:e.top},{x:e.right,y:e.top},{x:e.left,y:e.bottom},{x:e.right,y:e.bottom}]},Je=function(e,t){return t&&t.shouldClipSubject?function(e,t){var n=ce({top:Math.max(t.top,e.top),right:Math.min(t.right,e.right),bottom:Math.min(t.bottom,e.bottom),left:Math.max(t.left,e.left)});return n.width<=0||n.height<=0?null:n}(t.pageMarginBox,e):ce(e)},Qe=function(e){var t=e.page,n=e.withPlaceholder,r=e.axis,i=e.frame,o=function(e,t){return t?qe(e,t.scroll.diff.displacement):e}(t.marginBox,i),s=function(e,t,n){var r;return n&&n.increasedBy?(0,a.A)({},e,((r={})[t.end]=e[t.end]+n.increasedBy[t.line],r)):e}(o,r,n);return{page:t,withPlaceholder:n,active:Je(s,i)}},Xe=function(e,t){e.frame||Te(!1);var n=e.frame,r=Ge(t,n.scroll.initial),i=We(r),o=(0,a.A)({},n,{scroll:{initial:n.scroll.initial,current:t,diff:{value:r,displacement:i},max:n.scroll.max}}),s=Qe({page:e.subject.page,withPlaceholder:e.subject.withPlaceholder,axis:e.axis,frame:o});return(0,a.A)({},e,{frame:o,subject:s})};function Ve(e){return Object.values?Object.values(e):Object.keys(e).map((function(t){return e[t]}))}function Ze(e,t){if(e.findIndex)return e.findIndex(t);for(var n=0;n<e.length;n++)if(t(e[n]))return n;return-1}function et(e,t){if(e.find)return e.find(t);var n=Ze(e,t);return-1!==n?e[n]:void 0}function tt(e){return Array.prototype.slice.call(e)}var nt=we((function(e){return e.reduce((function(e,t){return e[t.descriptor.id]=t,e}),{})})),rt=we((function(e){return e.reduce((function(e,t){return e[t.descriptor.id]=t,e}),{})})),it=we((function(e){return Ve(e)})),at=we((function(e){return Ve(e)})),ot=we((function(e,t){var n=at(t).filter((function(t){return e===t.descriptor.droppableId})).sort((function(e,t){return e.descriptor.index-t.descriptor.index}));return n}));function st(e){return e.at&&"REORDER"===e.at.type?e.at.destination:null}function lt(e){return e.at&&"COMBINE"===e.at.type?e.at.combine:null}var dt=we((function(e,t){return t.filter((function(t){return t.descriptor.id!==e.descriptor.id}))})),ut=function(e,t){return e.descriptor.droppableId===t.descriptor.id},ct={point:He,value:0},pt={invisible:{},visible:{},all:[]},ht={displaced:pt,displacedBy:ct,at:null},ft=function(e,t){return function(n){return e<=n&&n<=t}},gt=function(e){var t=ft(e.top,e.bottom),n=ft(e.left,e.right);return function(r){if(t(r.top)&&t(r.bottom)&&n(r.left)&&n(r.right))return!0;var i=t(r.top)||t(r.bottom),a=n(r.left)||n(r.right);if(i&&a)return!0;var o=r.top<e.top&&r.bottom>e.bottom,s=r.left<e.left&&r.right>e.right;return!(!o||!s)||(o&&a||s&&i)}},yt=function(e){var t=ft(e.top,e.bottom),n=ft(e.left,e.right);return function(e){return t(e.top)&&t(e.bottom)&&n(e.left)&&n(e.right)}},mt={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},vt={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"},Ct=function(e){var t=e.target,n=e.destination,r=e.viewport,i=e.withDroppableDisplacement,a=e.isVisibleThroughFrameFn,o=i?function(e,t){var n=t.frame?t.frame.scroll.diff.displacement:He;return qe(e,n)}(t,n):t;return function(e,t,n){return!!t.subject.active&&n(t.subject.active)(e)}(o,n,a)&&function(e,t,n){return n(t)(e)}(o,r,a)},bt=function(e){return Ct((0,a.A)({},e,{isVisibleThroughFrameFn:gt}))},St=function(e){return Ct((0,a.A)({},e,{isVisibleThroughFrameFn:yt}))},Et=function(e,t,n){if("boolean"==typeof n)return n;if(!t)return!0;var r=t.invisible,i=t.visible;if(r[e])return!1;var a=i[e];return!a||a.shouldAnimate};function wt(e){var t=e.afterDragging,n=e.destination,r=e.displacedBy,i=e.viewport,a=e.forceShouldAnimate,o=e.last;return t.reduce((function(e,t){var s=function(e,t){var n=e.page.marginBox,r={top:t.point.y,right:0,bottom:0,left:t.point.x};return ce(pe(n,r))}(t,r),l=t.descriptor.id;if(e.all.push(l),!bt({target:s,destination:n,viewport:i,withDroppableDisplacement:!0}))return e.invisible[t.descriptor.id]=!0,e;var d={draggableId:l,shouldAnimate:Et(l,o,a)};return e.visible[l]=d,e}),{all:[],visible:{},invisible:{}})}function _t(e){var t=e.insideDestination,n=e.inHomeList,r=e.displacedBy,i=e.destination,a=function(e,t){if(!e.length)return 0;var n=e[e.length-1].descriptor.index;return t.inHomeList?n:n+1}(t,{inHomeList:n});return{displaced:pt,displacedBy:r,at:{type:"REORDER",destination:{droppableId:i.descriptor.id,index:a}}}}function Pt(e){var t=e.draggable,n=e.insideDestination,r=e.destination,i=e.viewport,a=e.displacedBy,o=e.last,s=e.index,l=e.forceShouldAnimate,d=ut(t,r);if(null==s)return _t({insideDestination:n,inHomeList:d,displacedBy:a,destination:r});var u=et(n,(function(e){return e.descriptor.index===s}));if(!u)return _t({insideDestination:n,inHomeList:d,displacedBy:a,destination:r});var c=dt(t,n),p=n.indexOf(u);return{displaced:wt({afterDragging:c.slice(p),destination:r,displacedBy:a,last:o,viewport:i.frame,forceShouldAnimate:l}),displacedBy:a,at:{type:"REORDER",destination:{droppableId:r.descriptor.id,index:s}}}}function Nt(e,t){return Boolean(t.effected[e])}var It=function(e){var t=e.isMovingForward,n=e.isInHomeList,r=e.draggable,i=e.draggables,a=e.destination,o=e.insideDestination,s=e.previousImpact,l=e.viewport,d=e.afterCritical,u=s.at;if(u||Te(!1),"REORDER"===u.type){var c=function(e){var t=e.isMovingForward,n=e.isInHomeList,r=e.insideDestination,i=e.location;if(!r.length)return null;var a=i.index,o=t?a+1:a-1,s=r[0].descriptor.index,l=r[r.length-1].descriptor.index;return o<s||o>(n?l:l+1)?null:o}({isMovingForward:t,isInHomeList:n,location:u.destination,insideDestination:o});return null==c?null:Pt({draggable:r,insideDestination:o,destination:a,viewport:l,last:s.displaced,displacedBy:s.displacedBy,index:c})}var p=function(e){var t=e.isMovingForward,n=e.destination,r=e.draggables,i=e.combine,a=e.afterCritical;if(!n.isCombineEnabled)return null;var o=i.draggableId,s=r[o].descriptor.index;return Nt(o,a)?t?s:s-1:t?s+1:s}({isMovingForward:t,destination:a,displaced:s.displaced,draggables:i,combine:u.combine,afterCritical:d});return null==p?null:Pt({draggable:r,insideDestination:o,destination:a,viewport:l,last:s.displaced,displacedBy:s.displacedBy,index:p})},kt=function(e){var t=e.afterCritical,n=e.impact,r=e.draggables,i=lt(n);i||Te(!1);var a=i.draggableId,o=r[a].page.borderBox.center,s=function(e){var t=e.displaced,n=e.afterCritical,r=e.combineWith,i=e.displacedBy,a=Boolean(t.visible[r]||t.invisible[r]);return Nt(r,n)?a?He:We(i.point):a?i.point:He}({displaced:n.displaced,afterCritical:t,combineWith:a,displacedBy:n.displacedBy});return Le(o,s)},At=function(e,t){return t.margin[e.start]+t.borderBox[e.size]/2},xt=function(e,t,n){return t[e.crossAxisStart]+n.margin[e.crossAxisStart]+n.borderBox[e.crossAxisSize]/2},Tt=function(e){var t=e.axis,n=e.moveRelativeTo,r=e.isMoving;return ze(t.line,n.marginBox[t.end]+At(t,r),xt(t,n.marginBox,r))},Dt=function(e){var t=e.axis,n=e.moveRelativeTo,r=e.isMoving;return ze(t.line,n.marginBox[t.start]-function(e,t){return t.margin[e.end]+t.borderBox[e.size]/2}(t,r),xt(t,n.marginBox,r))},Ot=function(e){var t=e.impact,n=e.draggable,r=e.draggables,i=e.droppable,a=e.afterCritical,o=ot(i.descriptor.id,r),s=n.page,l=i.axis;if(!o.length)return function(e){var t=e.axis,n=e.moveInto,r=e.isMoving;return ze(t.line,n.contentBox[t.start]+At(t,r),xt(t,n.contentBox,r))}({axis:l,moveInto:i.page,isMoving:s});var d=t.displaced,u=t.displacedBy,c=d.all[0];if(c){var p=r[c];if(Nt(c,a))return Dt({axis:l,moveRelativeTo:p.page,isMoving:s});var h=me(p.page,u.point);return Dt({axis:l,moveRelativeTo:h,isMoving:s})}var f=o[o.length-1];if(f.descriptor.id===n.descriptor.id)return s.borderBox.center;if(Nt(f.descriptor.id,a)){var g=me(f.page,We(a.displacedBy.point));return Tt({axis:l,moveRelativeTo:g,isMoving:s})}return Tt({axis:l,moveRelativeTo:f.page,isMoving:s})},Rt=function(e,t){var n=e.frame;return n?Le(t,n.scroll.diff.displacement):t},Ft=function(e){var t=function(e){var t=e.impact,n=e.draggable,r=e.droppable,i=e.draggables,a=e.afterCritical,o=n.page.borderBox.center,s=t.at;return r&&s?"REORDER"===s.type?Ot({impact:t,draggable:n,draggables:i,droppable:r,afterCritical:a}):kt({impact:t,draggables:i,afterCritical:a}):o}(e),n=e.droppable;return n?Rt(n,t):t},Mt=function(e,t){var n=Ge(t,e.scroll.initial),r=We(n);return{frame:ce({top:t.y,bottom:t.y+e.frame.height,left:t.x,right:t.x+e.frame.width}),scroll:{initial:e.scroll.initial,max:e.scroll.max,current:t,diff:{value:n,displacement:r}}}};function Ut(e,t){return e.map((function(e){return t[e]}))}var Ht=function(e){var t=e.pageBorderBoxCenter,n=e.draggable,r=function(e,t){return Le(e.scroll.diff.displacement,t)}(e.viewport,t),i=Ge(r,n.page.borderBox.center);return Le(n.client.borderBox.center,i)},Lt=function(e){var t=e.draggable,n=e.destination,r=e.newPageBorderBoxCenter,i=e.viewport,o=e.withDroppableDisplacement,s=e.onlyOnMainAxis,l=void 0!==s&&s,d=Ge(r,t.page.borderBox.center),u={target:qe(t.page.borderBox,d),destination:n,withDroppableDisplacement:o,viewport:i};return l?function(e){return Ct((0,a.A)({},e,{isVisibleThroughFrameFn:(t=e.destination.axis,function(e){var n=ft(e.top,e.bottom),r=ft(e.left,e.right);return function(e){return t===mt?n(e.top)&&n(e.bottom):r(e.left)&&r(e.right)}})}));var t}(u):St(u)},Gt=function(e){var t=e.isMovingForward,n=e.draggable,r=e.destination,i=e.draggables,o=e.previousImpact,s=e.viewport,l=e.previousPageBorderBoxCenter,d=e.previousClientSelection,u=e.afterCritical;if(!r.isEnabled)return null;var c=ot(r.descriptor.id,i),p=ut(n,r),h=function(e){var t=e.isMovingForward,n=e.draggable,r=e.destination,i=e.insideDestination,o=e.previousImpact;if(!r.isCombineEnabled)return null;if(!st(o))return null;function s(e){var t={type:"COMBINE",combine:{draggableId:e,droppableId:r.descriptor.id}};return(0,a.A)({},o,{at:t})}var l=o.displaced.all,d=l.length?l[0]:null;if(t)return d?s(d):null;var u=dt(n,i);if(!d)return u.length?s(u[u.length-1].descriptor.id):null;var c=Ze(u,(function(e){return e.descriptor.id===d}));-1===c&&Te(!1);var p=c-1;return p<0?null:s(u[p].descriptor.id)}({isMovingForward:t,draggable:n,destination:r,insideDestination:c,previousImpact:o})||It({isMovingForward:t,isInHomeList:p,draggable:n,draggables:i,destination:r,insideDestination:c,previousImpact:o,viewport:s,afterCritical:u});if(!h)return null;var f=Ft({impact:h,draggable:n,droppable:r,draggables:i,afterCritical:u});if(Lt({draggable:n,destination:r,newPageBorderBoxCenter:f,viewport:s.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0}))return{clientSelection:Ht({pageBorderBoxCenter:f,draggable:n,viewport:s}),impact:h,scrollJumpRequest:null};var g=Ge(f,l),y=function(e){var t=e.impact,n=e.viewport,r=e.destination,i=e.draggables,o=e.maxScrollChange,s=Mt(n,Le(n.scroll.current,o)),l=r.frame?Xe(r,Le(r.frame.scroll.current,o)):r,d=t.displaced,u=wt({afterDragging:Ut(d.all,i),destination:r,displacedBy:t.displacedBy,viewport:s.frame,last:d,forceShouldAnimate:!1}),c=wt({afterDragging:Ut(d.all,i),destination:l,displacedBy:t.displacedBy,viewport:n.frame,last:d,forceShouldAnimate:!1}),p={},h={},f=[d,u,c];return d.all.forEach((function(e){var t=function(e,t){for(var n=0;n<t.length;n++){var r=t[n].visible[e];if(r)return r}return null}(e,f);t?h[e]=t:p[e]=!0})),(0,a.A)({},t,{displaced:{all:d.all,invisible:p,visible:h}})}({impact:h,viewport:s,destination:r,draggables:i,maxScrollChange:g});return{clientSelection:d,impact:y,scrollJumpRequest:g}},Bt=function(e){var t=e.subject.active;return t||Te(!1),t},Wt=function(e,t){var n=e.page.borderBox.center;return Nt(e.descriptor.id,t)?Ge(n,t.displacedBy.point):n},zt=function(e,t){var n=e.page.borderBox;return Nt(e.descriptor.id,t)?qe(n,We(t.displacedBy.point)):n},jt=we((function(e,t){var n=t[e.line];return{value:n,point:ze(e.line,n)}})),$t=function(e,t){return(0,a.A)({},e,{scroll:(0,a.A)({},e.scroll,{max:t})})},Yt=function(e,t,n){var r=e.frame;ut(t,e)&&Te(!1),e.subject.withPlaceholder&&Te(!1);var i=jt(e.axis,t.displaceBy).point,o=function(e,t,n){var r=e.axis;if("virtual"===e.descriptor.mode)return ze(r.line,t[r.line]);var i=e.subject.page.contentBox[r.size],a=ot(e.descriptor.id,n).reduce((function(e,t){return e+t.client.marginBox[r.size]}),0)+t[r.line]-i;return a<=0?null:ze(r.line,a)}(e,i,n),s={placeholderSize:i,increasedBy:o,oldFrameMaxScroll:e.frame?e.frame.scroll.max:null};if(!r){var l=Qe({page:e.subject.page,withPlaceholder:s,axis:e.axis,frame:e.frame});return(0,a.A)({},e,{subject:l})}var d=o?Le(r.scroll.max,o):r.scroll.max,u=$t(r,d),c=Qe({page:e.subject.page,withPlaceholder:s,axis:e.axis,frame:u});return(0,a.A)({},e,{subject:c,frame:u})},qt=function(e){var t=e.isMovingForward,n=e.previousPageBorderBoxCenter,r=e.draggable,i=e.isOver,a=e.draggables,o=e.droppables,s=e.viewport,l=e.afterCritical,d=function(e){var t=e.isMovingForward,n=e.pageBorderBoxCenter,r=e.source,i=e.droppables,a=e.viewport,o=r.subject.active;if(!o)return null;var s=r.axis,l=ft(o[s.start],o[s.end]),d=it(i).filter((function(e){return e!==r})).filter((function(e){return e.isEnabled})).filter((function(e){return Boolean(e.subject.active)})).filter((function(e){return gt(a.frame)(Bt(e))})).filter((function(e){var n=Bt(e);return t?o[s.crossAxisEnd]<n[s.crossAxisEnd]:n[s.crossAxisStart]<o[s.crossAxisStart]})).filter((function(e){var t=Bt(e),n=ft(t[s.start],t[s.end]);return l(t[s.start])||l(t[s.end])||n(o[s.start])||n(o[s.end])})).sort((function(e,n){var r=Bt(e)[s.crossAxisStart],i=Bt(n)[s.crossAxisStart];return t?r-i:i-r})).filter((function(e,t,n){return Bt(e)[s.crossAxisStart]===Bt(n[0])[s.crossAxisStart]}));if(!d.length)return null;if(1===d.length)return d[0];var u=d.filter((function(e){return ft(Bt(e)[s.start],Bt(e)[s.end])(n[s.line])}));return 1===u.length?u[0]:u.length>1?u.sort((function(e,t){return Bt(e)[s.start]-Bt(t)[s.start]}))[0]:d.sort((function(e,t){var r=$e(n,Ke(Bt(e))),i=$e(n,Ke(Bt(t)));return r!==i?r-i:Bt(e)[s.start]-Bt(t)[s.start]}))[0]}({isMovingForward:t,pageBorderBoxCenter:n,source:i,droppables:o,viewport:s});if(!d)return null;var u=ot(d.descriptor.id,a),c=function(e){var t=e.pageBorderBoxCenter,n=e.viewport,r=e.destination,i=e.insideDestination,a=e.afterCritical,o=i.filter((function(e){return St({target:zt(e,a),destination:r,viewport:n.frame,withDroppableDisplacement:!0})})).sort((function(e,n){var i=je(t,Rt(r,Wt(e,a))),o=je(t,Rt(r,Wt(n,a)));return i<o?-1:o<i?1:e.descriptor.index-n.descriptor.index}));return o[0]||null}({pageBorderBoxCenter:n,viewport:s,destination:d,insideDestination:u,afterCritical:l}),p=function(e){var t=e.previousPageBorderBoxCenter,n=e.moveRelativeTo,r=e.insideDestination,i=e.draggable,a=e.draggables,o=e.destination,s=e.viewport,l=e.afterCritical;if(!n){if(r.length)return null;var d={displaced:pt,displacedBy:ct,at:{type:"REORDER",destination:{droppableId:o.descriptor.id,index:0}}},u=Ft({impact:d,draggable:i,droppable:o,draggables:a,afterCritical:l}),c=ut(i,o)?o:Yt(o,i,a);return Lt({draggable:i,destination:c,newPageBorderBoxCenter:u,viewport:s.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0})?d:null}var p,h=Boolean(t[o.axis.line]<=n.page.borderBox.center[o.axis.line]),f=(p=n.descriptor.index,n.descriptor.id===i.descriptor.id||h?p:p+1),g=jt(o.axis,i.displaceBy);return Pt({draggable:i,insideDestination:r,destination:o,viewport:s,displacedBy:g,last:pt,index:f})}({previousPageBorderBoxCenter:n,destination:d,draggable:r,draggables:a,moveRelativeTo:c,insideDestination:u,viewport:s,afterCritical:l});if(!p)return null;var h=Ft({impact:p,draggable:r,droppable:d,draggables:a,afterCritical:l});return{clientSelection:Ht({pageBorderBoxCenter:h,draggable:r,viewport:s}),impact:p,scrollJumpRequest:null}},Kt=function(e){var t=e.at;return t?"REORDER"===t.type?t.destination.droppableId:t.combine.droppableId:null},Jt=function(e){var t=e.state,n=e.type,r=function(e,t){var n=Kt(e);return n?t[n]:null}(t.impact,t.dimensions.droppables),i=Boolean(r),a=t.dimensions.droppables[t.critical.droppable.id],o=r||a,s=o.axis.direction,l="vertical"===s&&("MOVE_UP"===n||"MOVE_DOWN"===n)||"horizontal"===s&&("MOVE_LEFT"===n||"MOVE_RIGHT"===n);if(l&&!i)return null;var d="MOVE_DOWN"===n||"MOVE_RIGHT"===n,u=t.dimensions.draggables[t.critical.draggable.id],c=t.current.page.borderBoxCenter,p=t.dimensions,h=p.draggables,f=p.droppables;return l?Gt({isMovingForward:d,previousPageBorderBoxCenter:c,draggable:u,destination:o,draggables:h,viewport:t.viewport,previousClientSelection:t.current.client.selection,previousImpact:t.impact,afterCritical:t.afterCritical}):qt({isMovingForward:d,previousPageBorderBoxCenter:c,draggable:u,isOver:o,draggables:h,droppables:f,viewport:t.viewport,afterCritical:t.afterCritical})};function Qt(e){return"DRAGGING"===e.phase||"COLLECTING"===e.phase}function Xt(e){var t=ft(e.top,e.bottom),n=ft(e.left,e.right);return function(e){return t(e.y)&&n(e.x)}}function Vt(e){var t=e.pageBorderBox,n=e.draggable,r=e.droppables,i=it(r).filter((function(e){if(!e.isEnabled)return!1;var n,r,i=e.subject.active;if(!i)return!1;if(r=i,!((n=t).left<r.right&&n.right>r.left&&n.top<r.bottom&&n.bottom>r.top))return!1;if(Xt(i)(t.center))return!0;var a=e.axis,o=i.center[a.crossAxisLine],s=t[a.crossAxisStart],l=t[a.crossAxisEnd],d=ft(i[a.crossAxisStart],i[a.crossAxisEnd]),u=d(s),c=d(l);return!u&&!c||(u?s<o:l>o)}));return i.length?1===i.length?i[0].descriptor.id:function(e){var t=e.pageBorderBox,n=e.draggable,r=e.candidates,i=n.page.borderBox.center,a=r.map((function(e){var n=e.axis,r=ze(e.axis.line,t.center[n.line],e.page.borderBox.center[n.crossAxisLine]);return{id:e.descriptor.id,distance:je(i,r)}})).sort((function(e,t){return t.distance-e.distance}));return a[0]?a[0].id:null}({pageBorderBox:t,draggable:n,candidates:i}):null}var Zt=function(e,t){return ce(qe(e,t))};function en(e){var t=e.displaced,n=e.id;return Boolean(t.visible[n]||t.invisible[n])}var tn=function(e){var t=e.pageOffset,n=e.draggable,r=e.draggables,i=e.droppables,a=e.previousImpact,o=e.viewport,s=e.afterCritical,l=Zt(n.page.borderBox,t),d=Vt({pageBorderBox:l,draggable:n,droppables:i});if(!d)return ht;var u=i[d],c=ot(u.descriptor.id,r),p=function(e,t){var n=e.frame;return n?Zt(t,n.scroll.diff.value):t}(u,l);return function(e){var t=e.draggable,n=e.pageBorderBoxWithDroppableScroll,r=e.previousImpact,i=e.destination,a=e.insideDestination,o=e.afterCritical;if(!i.isCombineEnabled)return null;var s=i.axis,l=jt(i.axis,t.displaceBy),d=l.value,u=n[s.start],c=n[s.end],p=et(dt(t,a),(function(e){var t=e.descriptor.id,n=e.page.borderBox,i=n[s.size]/4,a=Nt(t,o),l=en({displaced:r.displaced,id:t});return a?l?c>n[s.start]+i&&c<n[s.end]-i:u>n[s.start]-d+i&&u<n[s.end]-d-i:l?c>n[s.start]+d+i&&c<n[s.end]+d-i:u>n[s.start]+i&&u<n[s.end]-i}));return p?{displacedBy:l,displaced:r.displaced,at:{type:"COMBINE",combine:{draggableId:p.descriptor.id,droppableId:i.descriptor.id}}}:null}({pageBorderBoxWithDroppableScroll:p,draggable:n,previousImpact:a,destination:u,insideDestination:c,afterCritical:s})||function(e){var t=e.pageBorderBoxWithDroppableScroll,n=e.draggable,r=e.destination,i=e.insideDestination,a=e.last,o=e.viewport,s=e.afterCritical,l=r.axis,d=jt(r.axis,n.displaceBy),u=d.value,c=t[l.start],p=t[l.end],h=function(e){var t=e.draggable,n=e.closest,r=e.inHomeList;return n?r&&n.descriptor.index>t.descriptor.index?n.descriptor.index-1:n.descriptor.index:null}({draggable:n,closest:et(dt(n,i),(function(e){var t=e.descriptor.id,n=e.page.borderBox.center[l.line],r=Nt(t,s),i=en({displaced:a,id:t});return r?i?p<=n:c<n-u:i?p<=n+u:c<n})),inHomeList:ut(n,r)});return Pt({draggable:n,insideDestination:i,destination:r,viewport:o,last:a,displacedBy:d,index:h})}({pageBorderBoxWithDroppableScroll:p,draggable:n,destination:u,insideDestination:c,last:a.displaced,viewport:o,afterCritical:s})},nn=function(e,t){var n;return(0,a.A)({},e,((n={})[t.descriptor.id]=t,n))},rn=function(e){var t=e.previousImpact,n=e.impact,r=e.droppables,i=Kt(t),o=Kt(n);if(!i)return r;if(i===o)return r;var s=r[i];if(!s.subject.withPlaceholder)return r;var l=function(e){var t=e.subject.withPlaceholder;t||Te(!1);var n=e.frame;if(!n){var r=Qe({page:e.subject.page,axis:e.axis,frame:null,withPlaceholder:null});return(0,a.A)({},e,{subject:r})}var i=t.oldFrameMaxScroll;i||Te(!1);var o=$t(n,i),s=Qe({page:e.subject.page,axis:e.axis,frame:o,withPlaceholder:null});return(0,a.A)({},e,{subject:s,frame:o})}(s);return nn(r,l)},an=function(e){var t=e.state,n=e.clientSelection,r=e.dimensions,i=e.viewport,o=e.impact,s=e.scrollJumpRequest,l=i||t.viewport,d=r||t.dimensions,u=n||t.current.client.selection,c=Ge(u,t.initial.client.selection),p={offset:c,selection:u,borderBoxCenter:Le(t.initial.client.borderBoxCenter,c)},h={selection:Le(p.selection,l.scroll.current),borderBoxCenter:Le(p.borderBoxCenter,l.scroll.current),offset:Le(p.offset,l.scroll.diff.value)},f={client:p,page:h};if("COLLECTING"===t.phase)return(0,a.A)({phase:"COLLECTING"},t,{dimensions:d,viewport:l,current:f});var g=d.draggables[t.critical.draggable.id],y=o||tn({pageOffset:h.offset,draggable:g,draggables:d.draggables,droppables:d.droppables,previousImpact:t.impact,viewport:l,afterCritical:t.afterCritical}),m=function(e){var t=e.draggable,n=e.draggables,r=e.droppables,i=e.previousImpact,a=e.impact,o=rn({previousImpact:i,impact:a,droppables:r}),s=Kt(a);if(!s)return o;var l=r[s];if(ut(t,l))return o;if(l.subject.withPlaceholder)return o;var d=Yt(l,t,n);return nn(o,d)}({draggable:g,impact:y,previousImpact:t.impact,draggables:d.draggables,droppables:d.droppables});return(0,a.A)({},t,{current:f,dimensions:{draggables:d.draggables,droppables:m},impact:y,viewport:l,scrollJumpRequest:s||null,forceShouldAnimate:!s&&null})};var on=function(e){var t=e.impact,n=e.viewport,r=e.draggables,i=e.destination,o=e.forceShouldAnimate,s=t.displaced,l=function(e,t){return e.map((function(e){return t[e]}))}(s.all,r),d=wt({afterDragging:l,destination:i,displacedBy:t.displacedBy,viewport:n.frame,forceShouldAnimate:o,last:s});return(0,a.A)({},t,{displaced:d})},sn=function(e){var t=e.impact,n=e.draggable,r=e.droppable,i=e.draggables,a=e.viewport,o=e.afterCritical,s=Ft({impact:t,draggable:n,draggables:i,droppable:r,afterCritical:o});return Ht({pageBorderBoxCenter:s,draggable:n,viewport:a})},ln=function(e){var t=e.state,n=e.dimensions,r=e.viewport;"SNAP"!==t.movementMode&&Te(!1);var i=t.impact,a=r||t.viewport,o=n||t.dimensions,s=o.draggables,l=o.droppables,d=s[t.critical.draggable.id],u=Kt(i);u||Te(!1);var c=l[u],p=on({impact:i,viewport:a,destination:c,draggables:s}),h=sn({impact:p,draggable:d,droppable:c,draggables:s,viewport:a,afterCritical:t.afterCritical});return an({impact:p,clientSelection:h,state:t,dimensions:o,viewport:a})},dn=function(e){var t=e.draggable,n=e.home,r=e.draggables,i=e.viewport,a=jt(n.axis,t.displaceBy),o=ot(n.descriptor.id,r),s=o.indexOf(t);-1===s&&Te(!1);var l,d=o.slice(s+1),u=d.reduce((function(e,t){return e[t.descriptor.id]=!0,e}),{}),c={inVirtualList:"virtual"===n.descriptor.mode,displacedBy:a,effected:u};return{impact:{displaced:wt({afterDragging:d,destination:n,displacedBy:a,last:null,viewport:i.frame,forceShouldAnimate:!1}),displacedBy:a,at:{type:"REORDER",destination:(l=t.descriptor,{index:l.index,droppableId:l.droppableId})}},afterCritical:c}},un=function(e){0},cn=function(e){0},pn=function(e){var t=e.additions,n=e.updatedDroppables,r=e.viewport,i=r.scroll.diff.value;return t.map((function(e){var t=e.descriptor.droppableId,o=function(e){var t=e.frame;return t||Te(!1),t}(n[t]),s=o.scroll.diff.value,l=function(e){var t=e.draggable,n=e.offset,r=e.initialWindowScroll,i=me(t.client,n),o=ve(i,r);return(0,a.A)({},t,{placeholder:(0,a.A)({},t.placeholder,{client:i}),client:i,page:o})}({draggable:e,offset:Le(i,s),initialWindowScroll:r.scroll.initial});return l}))},hn=function(e){return"SNAP"===e.movementMode},fn=function(e,t,n){var r=function(e,t){return{draggables:e.draggables,droppables:nn(e.droppables,t)}}(e.dimensions,t);return!hn(e)||n?an({state:e,dimensions:r}):ln({state:e,dimensions:r})};function gn(e){return e.isDragging&&"SNAP"===e.movementMode?(0,a.A)({phase:"DRAGGING"},e,{scrollJumpRequest:null}):e}var yn={phase:"IDLE",completed:null,shouldFlush:!1},mn=function(e,t){if(void 0===e&&(e=yn),"FLUSH"===t.type)return(0,a.A)({},yn,{shouldFlush:!0});if("INITIAL_PUBLISH"===t.type){"IDLE"!==e.phase&&Te(!1);var n=t.payload,r=n.critical,i=n.clientSelection,o=n.viewport,s=n.dimensions,l=n.movementMode,d=s.draggables[r.draggable.id],u=s.droppables[r.droppable.id],c={selection:i,borderBoxCenter:d.client.borderBox.center,offset:He},p={client:c,page:{selection:Le(c.selection,o.scroll.initial),borderBoxCenter:Le(c.selection,o.scroll.initial),offset:Le(c.selection,o.scroll.diff.value)}},h=it(s.droppables).every((function(e){return!e.isFixedOnPage})),f=dn({draggable:d,home:u,draggables:s.draggables,viewport:o}),g=f.impact;return{phase:"DRAGGING",isDragging:!0,critical:r,movementMode:l,dimensions:s,initial:p,current:p,isWindowScrollAllowed:h,impact:g,afterCritical:f.afterCritical,onLiftImpact:g,viewport:o,scrollJumpRequest:null,forceShouldAnimate:null}}if("COLLECTION_STARTING"===t.type)return"COLLECTING"===e.phase||"DROP_PENDING"===e.phase?e:("DRAGGING"!==e.phase&&Te(!1),(0,a.A)({phase:"COLLECTING"},e,{phase:"COLLECTING"}));if("PUBLISH_WHILE_DRAGGING"===t.type)return"COLLECTING"!==e.phase&&"DROP_PENDING"!==e.phase&&Te(!1),function(e){var t=e.state,n=e.published;un();var r=n.modified.map((function(e){var n=t.dimensions.droppables[e.droppableId];return Xe(n,e.scroll)})),i=(0,a.A)({},t.dimensions.droppables,{},nt(r)),o=rt(pn({additions:n.additions,updatedDroppables:i,viewport:t.viewport})),s=(0,a.A)({},t.dimensions.draggables,{},o);n.removals.forEach((function(e){delete s[e]}));var l={droppables:i,draggables:s},d=Kt(t.impact),u=d?l.droppables[d]:null,c=l.draggables[t.critical.draggable.id],p=l.droppables[t.critical.droppable.id],h=dn({draggable:c,home:p,draggables:s,viewport:t.viewport}),f=h.impact,g=h.afterCritical,y=u&&u.isCombineEnabled?t.impact:f,m=tn({pageOffset:t.current.page.offset,draggable:l.draggables[t.critical.draggable.id],draggables:l.draggables,droppables:l.droppables,previousImpact:y,viewport:t.viewport,afterCritical:g});cn();var v=(0,a.A)({phase:"DRAGGING"},t,{phase:"DRAGGING",impact:m,onLiftImpact:f,dimensions:l,afterCritical:g,forceShouldAnimate:!1});return"COLLECTING"===t.phase?v:(0,a.A)({phase:"DROP_PENDING"},v,{phase:"DROP_PENDING",reason:t.reason,isWaiting:!1})}({state:e,published:t.payload});if("MOVE"===t.type){if("DROP_PENDING"===e.phase)return e;Qt(e)||Te(!1);var y=t.payload.client;return Be(y,e.current.client.selection)?e:an({state:e,clientSelection:y,impact:hn(e)?e.impact:null})}if("UPDATE_DROPPABLE_SCROLL"===t.type){if("DROP_PENDING"===e.phase)return gn(e);if("COLLECTING"===e.phase)return gn(e);Qt(e)||Te(!1);var m=t.payload,v=m.id,C=m.newScroll,b=e.dimensions.droppables[v];if(!b)return e;var S=Xe(b,C);return fn(e,S,!1)}if("UPDATE_DROPPABLE_IS_ENABLED"===t.type){if("DROP_PENDING"===e.phase)return e;Qt(e)||Te(!1);var E=t.payload,w=E.id,_=E.isEnabled,P=e.dimensions.droppables[w];P||Te(!1),P.isEnabled===_&&Te(!1);var N=(0,a.A)({},P,{isEnabled:_});return fn(e,N,!0)}if("UPDATE_DROPPABLE_IS_COMBINE_ENABLED"===t.type){if("DROP_PENDING"===e.phase)return e;Qt(e)||Te(!1);var I=t.payload,k=I.id,A=I.isCombineEnabled,x=e.dimensions.droppables[k];x||Te(!1),x.isCombineEnabled===A&&Te(!1);var T=(0,a.A)({},x,{isCombineEnabled:A});return fn(e,T,!0)}if("MOVE_BY_WINDOW_SCROLL"===t.type){if("DROP_PENDING"===e.phase||"DROP_ANIMATING"===e.phase)return e;Qt(e)||Te(!1),e.isWindowScrollAllowed||Te(!1);var D=t.payload.newScroll;if(Be(e.viewport.scroll.current,D))return gn(e);var O=Mt(e.viewport,D);return hn(e)?ln({state:e,viewport:O}):an({state:e,viewport:O})}if("UPDATE_VIEWPORT_MAX_SCROLL"===t.type){if(!Qt(e))return e;var R=t.payload.maxScroll;if(Be(R,e.viewport.scroll.max))return e;var F=(0,a.A)({},e.viewport,{scroll:(0,a.A)({},e.viewport.scroll,{max:R})});return(0,a.A)({phase:"DRAGGING"},e,{viewport:F})}if("MOVE_UP"===t.type||"MOVE_DOWN"===t.type||"MOVE_LEFT"===t.type||"MOVE_RIGHT"===t.type){if("COLLECTING"===e.phase||"DROP_PENDING"===e.phase)return e;"DRAGGING"!==e.phase&&Te(!1);var M=Jt({state:e,type:t.type});return M?an({state:e,impact:M.impact,clientSelection:M.clientSelection,scrollJumpRequest:M.scrollJumpRequest}):e}if("DROP_PENDING"===t.type){var U=t.payload.reason;return"COLLECTING"!==e.phase&&Te(!1),(0,a.A)({phase:"DROP_PENDING"},e,{phase:"DROP_PENDING",isWaiting:!0,reason:U})}if("DROP_ANIMATE"===t.type){var H=t.payload,L=H.completed,G=H.dropDuration,B=H.newHomeClientOffset;return"DRAGGING"!==e.phase&&"DROP_PENDING"!==e.phase&&Te(!1),{phase:"DROP_ANIMATING",completed:L,dropDuration:G,newHomeClientOffset:B,dimensions:e.dimensions}}return"DROP_COMPLETE"===t.type?{phase:"IDLE",completed:t.payload.completed,shouldFlush:!1}:e},vn=function(e){return{type:"LIFT",payload:e}},Cn=function(e){return{type:"PUBLISH_WHILE_DRAGGING",payload:e}},bn=function(){return{type:"COLLECTION_STARTING",payload:null}},Sn=function(e){return{type:"UPDATE_DROPPABLE_SCROLL",payload:e}},En=function(e){return{type:"UPDATE_DROPPABLE_IS_ENABLED",payload:e}},wn=function(e){return{type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:e}},_n=function(e){return{type:"MOVE",payload:e}},Pn=function(){return{type:"MOVE_UP",payload:null}},Nn=function(){return{type:"MOVE_DOWN",payload:null}},In=function(){return{type:"MOVE_RIGHT",payload:null}},kn=function(){return{type:"MOVE_LEFT",payload:null}},An=function(){return{type:"FLUSH",payload:null}},xn=function(e){return{type:"DROP_COMPLETE",payload:e}},Tn=function(e){return{type:"DROP",payload:e}},Dn=function(){return{type:"DROP_ANIMATION_FINISHED",payload:null}};var On="cubic-bezier(.2,1,.1,1)",Rn={drop:0,combining:.7},Fn={drop:.75},Mn=.2+"s "+"cubic-bezier(0.2, 0, 0, 1)",Un={fluid:"opacity "+Mn,snap:"transform "+Mn+", opacity "+Mn,drop:function(e){var t=e+"s "+On;return"transform "+t+", opacity "+t},outOfTheWay:"transform "+Mn,placeholder:"height "+Mn+", width "+Mn+", margin "+Mn},Hn=function(e){return Be(e,He)?null:"translate("+e.x+"px, "+e.y+"px)"},Ln={moveTo:Hn,drop:function(e,t){var n=Hn(e);return n?t?n+" scale("+Fn.drop+")":n:null}},Gn=.33,Bn=.55,Wn=Bn-Gn,zn=function(e){var t=e.getState,n=e.dispatch;return function(e){return function(r){if("DROP"===r.type){var i=t(),o=r.payload.reason;if("COLLECTING"!==i.phase){if("IDLE"!==i.phase){"DROP_PENDING"===i.phase&&i.isWaiting&&Te(!1),"DRAGGING"!==i.phase&&"DROP_PENDING"!==i.phase&&Te(!1);var s=i.critical,l=i.dimensions,d=l.draggables[i.critical.draggable.id],u=function(e){var t=e.draggables,n=e.reason,r=e.lastImpact,i=e.home,o=e.viewport,s=e.onLiftImpact;return r.at&&"DROP"===n?"REORDER"===r.at.type?{impact:r,didDropInsideDroppable:!0}:{impact:(0,a.A)({},r,{displaced:pt}),didDropInsideDroppable:!0}:{impact:on({draggables:t,impact:s,destination:i,viewport:o,forceShouldAnimate:!0}),didDropInsideDroppable:!1}}({reason:o,lastImpact:i.impact,afterCritical:i.afterCritical,onLiftImpact:i.onLiftImpact,home:i.dimensions.droppables[i.critical.droppable.id],viewport:i.viewport,draggables:i.dimensions.draggables}),c=u.impact,p=u.didDropInsideDroppable,h=p?st(c):null,f=p?lt(c):null,g={index:s.draggable.index,droppableId:s.droppable.id},y={draggableId:d.descriptor.id,type:d.descriptor.type,source:g,reason:o,mode:i.movementMode,destination:h,combine:f},m=function(e){var t=e.impact,n=e.draggable,r=e.dimensions,i=e.viewport,a=e.afterCritical,o=r.draggables,s=r.droppables,l=Kt(t),d=l?s[l]:null,u=s[n.descriptor.droppableId],c=sn({impact:t,draggable:n,draggables:o,afterCritical:a,droppable:d||u,viewport:i});return Ge(c,n.client.borderBox.center)}({impact:c,draggable:d,dimensions:l,viewport:i.viewport,afterCritical:i.afterCritical}),v={critical:i.critical,afterCritical:i.afterCritical,result:y,impact:c};if(!Be(i.current.client.offset,m)||Boolean(y.combine)){var C=function(e){var t=e.current,n=e.destination,r=e.reason,i=je(t,n);if(i<=0)return Gn;if(i>=1500)return Bn;var a=Gn+Wn*(i/1500);return Number(("CANCEL"===r?.6*a:a).toFixed(2))}({current:i.current.client.offset,destination:m,reason:o});n(function(e){return{type:"DROP_ANIMATE",payload:e}}({newHomeClientOffset:m,dropDuration:C,completed:v}))}else n(xn({completed:v}))}}else n(function(e){return{type:"DROP_PENDING",payload:e}}({reason:o}))}else e(r)}}},jn=function(){return{x:window.pageXOffset,y:window.pageYOffset}};function $n(e){var t=e.onWindowScroll;var n=_e((function(){t(jn())})),r=function(e){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(t){t.target!==window&&t.target!==window.document||e()}}}(n),i=Ne;function a(){return i!==Ne}return{start:function(){a()&&Te(!1),i=Ie(window,[r])},stop:function(){a()||Te(!1),n.cancel(),i(),i=Ne},isActive:a}}var Yn=function(e){var t=$n({onWindowScroll:function(t){e.dispatch({type:"MOVE_BY_WINDOW_SCROLL",payload:{newScroll:t}})}});return function(e){return function(n){t.isActive()||"INITIAL_PUBLISH"!==n.type||t.start(),t.isActive()&&function(e){return"DROP_COMPLETE"===e.type||"DROP_ANIMATE"===e.type||"FLUSH"===e.type}(n)&&t.stop(),e(n)}}},qn=function(){var e=[];return{add:function(t){var n=setTimeout((function(){return function(t){var n=Ze(e,(function(e){return e.timerId===t}));-1===n&&Te(!1),e.splice(n,1)[0].callback()}(n)})),r={timerId:n,callback:t};e.push(r)},flush:function(){if(e.length){var t=[].concat(e);e.length=0,t.forEach((function(e){clearTimeout(e.timerId),e.callback()}))}}}},Kn=function(e,t){un(),t(),cn()},Jn=function(e,t){return{draggableId:e.draggable.id,type:e.droppable.type,source:{droppableId:e.droppable.id,index:e.draggable.index},mode:t}},Qn=function(e,t,n,r){if(e){var i=function(e){var t=!1,n=!1,r=setTimeout((function(){n=!0})),i=function(i){t||n||(t=!0,e(i),clearTimeout(r))};return i.wasCalled=function(){return t},i}(n);e(t,{announce:i}),i.wasCalled()||n(r(t))}else n(r(t))},Xn=function(e,t){var n=function(e,t){var n=qn(),r=null,i=function(n){r||Te(!1),r=null,Kn(0,(function(){return Qn(e().onDragEnd,n,t,Ue.onDragEnd)}))};return{beforeCapture:function(t,n){r&&Te(!1),Kn(0,(function(){var r=e().onBeforeCapture;r&&r({draggableId:t,mode:n})}))},beforeStart:function(t,n){r&&Te(!1),Kn(0,(function(){var r=e().onBeforeDragStart;r&&r(Jn(t,n))}))},start:function(i,a){r&&Te(!1);var o=Jn(i,a);r={mode:a,lastCritical:i,lastLocation:o.source,lastCombine:null},n.add((function(){Kn(0,(function(){return Qn(e().onDragStart,o,t,Ue.onDragStart)}))}))},update:function(i,o){var s=st(o),l=lt(o);r||Te(!1);var d=!function(e,t){if(e===t)return!0;var n=e.draggable.id===t.draggable.id&&e.draggable.droppableId===t.draggable.droppableId&&e.draggable.type===t.draggable.type&&e.draggable.index===t.draggable.index,r=e.droppable.id===t.droppable.id&&e.droppable.type===t.droppable.type;return n&&r}(i,r.lastCritical);d&&(r.lastCritical=i);var u,c,p=(c=s,!(null==(u=r.lastLocation)&&null==c||null!=u&&null!=c&&u.droppableId===c.droppableId&&u.index===c.index));p&&(r.lastLocation=s);var h=!function(e,t){return null==e&&null==t||null!=e&&null!=t&&e.draggableId===t.draggableId&&e.droppableId===t.droppableId}(r.lastCombine,l);if(h&&(r.lastCombine=l),d||p||h){var f=(0,a.A)({},Jn(i,r.mode),{combine:l,destination:s});n.add((function(){Kn(0,(function(){return Qn(e().onDragUpdate,f,t,Ue.onDragUpdate)}))}))}},flush:function(){r||Te(!1),n.flush()},drop:i,abort:function(){if(r){var e=(0,a.A)({},Jn(r.lastCritical,r.mode),{combine:null,destination:null,reason:"CANCEL"});i(e)}}}}(e,t);return function(e){return function(t){return function(r){if("BEFORE_INITIAL_CAPTURE"!==r.type){if("INITIAL_PUBLISH"===r.type){var i=r.payload.critical;return n.beforeStart(i,r.payload.movementMode),t(r),void n.start(i,r.payload.movementMode)}if("DROP_COMPLETE"===r.type){var a=r.payload.completed.result;return n.flush(),t(r),void n.drop(a)}if(t(r),"FLUSH"!==r.type){var o=e.getState();"DRAGGING"===o.phase&&n.update(o.critical,o.impact)}else n.abort()}else n.beforeCapture(r.payload.draggableId,r.payload.movementMode)}}}},Vn=function(e){return function(t){return function(n){if("DROP_ANIMATION_FINISHED"===n.type){var r=e.getState();"DROP_ANIMATING"!==r.phase&&Te(!1),e.dispatch(xn({completed:r.completed}))}else t(n)}}},Zn=function(e){var t=null,n=null;return function(r){return function(i){if("FLUSH"!==i.type&&"DROP_COMPLETE"!==i.type&&"DROP_ANIMATION_FINISHED"!==i.type||(n&&(cancelAnimationFrame(n),n=null),t&&(t(),t=null)),r(i),"DROP_ANIMATE"===i.type){var a={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){"DROP_ANIMATING"===e.getState().phase&&e.dispatch({type:"DROP_ANIMATION_FINISHED",payload:null})}};n=requestAnimationFrame((function(){n=null,t=Ie(window,[a])}))}}}},er=function(e){return function(t){return function(n){if(t(n),"PUBLISH_WHILE_DRAGGING"===n.type){var r=e.getState();"DROP_PENDING"===r.phase&&(r.isWaiting||e.dispatch(Tn({reason:r.reason})))}}}},tr=C,nr=function(e){var t,n=e.dimensionMarshal,r=e.focusMarshal,i=e.styleMarshal,a=e.getResponders,o=e.announce,s=e.autoScroller;return y(mn,tr(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),r=function(){throw new Error(c(15))},i={getState:n.getState,dispatch:function(){return r.apply(void 0,arguments)}},a=t.map((function(e){return e(i)}));return r=C.apply(void 0,a)(n.dispatch),u(u({},n),{},{dispatch:r})}}}((t=i,function(){return function(e){return function(n){"INITIAL_PUBLISH"===n.type&&t.dragging(),"DROP_ANIMATE"===n.type&&t.dropping(n.payload.completed.result.reason),"FLUSH"!==n.type&&"DROP_COMPLETE"!==n.type||t.resting(),e(n)}}}),function(e){return function(){return function(t){return function(n){"DROP_COMPLETE"!==n.type&&"FLUSH"!==n.type&&"DROP_ANIMATE"!==n.type||e.stopPublishing(),t(n)}}}}(n),function(e){return function(t){var n=t.getState,r=t.dispatch;return function(t){return function(i){if("LIFT"===i.type){var a=i.payload,o=a.id,s=a.clientSelection,l=a.movementMode,d=n();"DROP_ANIMATING"===d.phase&&r(xn({completed:d.completed})),"IDLE"!==n().phase&&Te(!1),r(An()),r({type:"BEFORE_INITIAL_CAPTURE",payload:{draggableId:o,movementMode:l}});var u={draggableId:o,scrollOptions:{shouldPublishImmediately:"SNAP"===l}},c=e.startPublishing(u),p=c.critical,h=c.dimensions,f=c.viewport;r({type:"INITIAL_PUBLISH",payload:{critical:p,dimensions:h,clientSelection:s,movementMode:l,viewport:f}})}else t(i)}}}}(n),zn,Vn,Zn,er,function(e){return function(t){return function(n){return function(r){if(function(e){return"DROP_COMPLETE"===e.type||"DROP_ANIMATE"===e.type||"FLUSH"===e.type}(r))return e.stop(),void n(r);if("INITIAL_PUBLISH"===r.type){n(r);var i=t.getState();return"DRAGGING"!==i.phase&&Te(!1),void e.start(i)}n(r),e.scroll(t.getState())}}}}(s),Yn,function(e){var t=!1;return function(){return function(n){return function(r){if("INITIAL_PUBLISH"===r.type)return t=!0,e.tryRecordFocus(r.payload.critical.draggable.id),n(r),void e.tryRestoreFocusRecorded();if(n(r),t){if("FLUSH"===r.type)return t=!1,void e.tryRestoreFocusRecorded();if("DROP_COMPLETE"===r.type){t=!1;var i=r.payload.completed.result;i.combine&&e.tryShiftRecord(i.draggableId,i.combine.draggableId),e.tryRestoreFocusRecorded()}}}}}}(r),Xn(a,o))))};var rr=function(e){var t=e.scrollHeight,n=e.scrollWidth,r=e.height,i=e.width,a=Ge({x:n,y:t},{x:i,y:r});return{x:Math.max(0,a.x),y:Math.max(0,a.y)}},ir=function(){var e=document.documentElement;return e||Te(!1),e},ar=function(){var e=ir();return rr({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,width:e.clientWidth,height:e.clientHeight})},or=function(e){var t=e.critical,n=e.scrollOptions,r=e.registry;un();var i,a,o,s,l,d,u,c=(i=jn(),a=ar(),o=i.y,s=i.x,l=ir(),d=l.clientWidth,u=l.clientHeight,{frame:ce({top:o,left:s,right:s+d,bottom:o+u}),scroll:{initial:i,current:i,max:a,diff:{value:He,displacement:He}}}),p=c.scroll.current,h=t.droppable,f=r.droppable.getAllByType(h.type).map((function(e){return e.callbacks.getDimensionAndWatchScroll(p,n)})),g=r.draggable.getAllByType(t.draggable.type).map((function(e){return e.getDimension(p)})),y={draggables:rt(g),droppables:nt(f)};return cn(),{dimensions:y,critical:t,viewport:c}};function sr(e,t,n){return n.descriptor.id!==t.id&&(n.descriptor.type===t.type&&"virtual"===e.droppable.getById(n.descriptor.droppableId).descriptor.mode)}var lr,dr,ur=function(e,t){var n=null,r=function(e){var t=e.registry,n=e.callbacks,r={additions:{},removals:{},modified:{}},i=null,a=function(){i||(n.collectionStarting(),i=requestAnimationFrame((function(){i=null,un();var e=r,a=e.additions,o=e.removals,s=e.modified,l=Object.keys(a).map((function(e){return t.draggable.getById(e).getDimension(He)})).sort((function(e,t){return e.descriptor.index-t.descriptor.index})),d=Object.keys(s).map((function(e){return{droppableId:e,scroll:t.droppable.getById(e).callbacks.getScrollWhileDragging()}})),u={additions:l,removals:Object.keys(o),modified:d};r={additions:{},removals:{},modified:{}},cn(),n.publish(u)})))};return{add:function(e){var t=e.descriptor.id;r.additions[t]=e,r.modified[e.descriptor.droppableId]=!0,r.removals[t]&&delete r.removals[t],a()},remove:function(e){var t=e.descriptor;r.removals[t.id]=!0,r.modified[t.droppableId]=!0,r.additions[t.id]&&delete r.additions[t.id],a()},stop:function(){i&&(cancelAnimationFrame(i),i=null,r={additions:{},removals:{},modified:{}})}}}({callbacks:{publish:t.publishWhileDragging,collectionStarting:t.collectionStarting},registry:e}),i=function(t){n||Te(!1);var i=n.critical.draggable;"ADDITION"===t.type&&sr(e,i,t.value)&&r.add(t.value),"REMOVAL"===t.type&&sr(e,i,t.value)&&r.remove(t.value)},a={updateDroppableIsEnabled:function(r,i){e.droppable.exists(r)||Te(!1),n&&t.updateDroppableIsEnabled({id:r,isEnabled:i})},updateDroppableIsCombineEnabled:function(r,i){n&&(e.droppable.exists(r)||Te(!1),t.updateDroppableIsCombineEnabled({id:r,isCombineEnabled:i}))},scrollDroppable:function(t,r){n&&e.droppable.getById(t).callbacks.scroll(r)},updateDroppableScroll:function(r,i){n&&(e.droppable.exists(r)||Te(!1),t.updateDroppableScroll({id:r,newScroll:i}))},startPublishing:function(t){n&&Te(!1);var r=e.draggable.getById(t.draggableId),a=e.droppable.getById(r.descriptor.droppableId),o={draggable:r.descriptor,droppable:a.descriptor},s=e.subscribe(i);return n={critical:o,unsubscribe:s},or({critical:o,registry:e,scrollOptions:t.scrollOptions})},stopPublishing:function(){if(n){r.stop();var t=n.critical.droppable;e.droppable.getAllByType(t.type).forEach((function(e){return e.callbacks.dragStopped()})),n.unsubscribe(),n=null}}};return a},cr=function(e,t){return"IDLE"===e.phase||"DROP_ANIMATING"===e.phase&&(e.completed.result.draggableId!==t&&"DROP"===e.completed.result.reason)},pr=function(e){window.scrollBy(e.x,e.y)},hr=we((function(e){return it(e).filter((function(e){return!!e.isEnabled&&!!e.frame}))})),fr=function(e){var t=e.center,n=e.destination,r=e.droppables;if(n){var i=r[n];return i.frame?i:null}var a=function(e,t){var n=et(hr(t),(function(t){return t.frame||Te(!1),Xt(t.frame.pageMarginBox)(e)}));return n}(t,r);return a},gr=.25,yr=.05,mr=28,vr=function(e){return Math.pow(e,2)},Cr={stopDampeningAt:1200,accelerateAt:360},br=function(e){var t=e.startOfRange,n=e.endOfRange,r=e.current,i=n-t;return 0===i?0:(r-t)/i},Sr=Cr.accelerateAt,Er=Cr.stopDampeningAt,wr=function(e){var t=e.distanceToEdge,n=e.thresholds,r=e.dragStartTime,i=e.shouldUseTimeDampening,a=function(e,t){if(e>t.startScrollingFrom)return 0;if(e<=t.maxScrollValueAt)return mr;if(e===t.startScrollingFrom)return 1;var n=br({startOfRange:t.maxScrollValueAt,endOfRange:t.startScrollingFrom,current:e}),r=mr*vr(1-n);return Math.ceil(r)}(t,n);return 0===a?0:i?Math.max(function(e,t){var n=t,r=Er,i=Date.now()-n;if(i>=Er)return e;if(i<Sr)return 1;var a=br({startOfRange:Sr,endOfRange:r,current:i}),o=e*vr(a);return Math.ceil(o)}(a,r),1):a},_r=function(e){var t=e.container,n=e.distanceToEdges,r=e.dragStartTime,i=e.axis,a=e.shouldUseTimeDampening,o=function(e,t){return{startScrollingFrom:e[t.size]*gr,maxScrollValueAt:e[t.size]*yr}}(t,i);return n[i.end]<n[i.start]?wr({distanceToEdge:n[i.end],thresholds:o,dragStartTime:r,shouldUseTimeDampening:a}):-1*wr({distanceToEdge:n[i.start],thresholds:o,dragStartTime:r,shouldUseTimeDampening:a})},Pr=Ye((function(e){return 0===e?0:e})),Nr=function(e){var t=e.dragStartTime,n=e.container,r=e.subject,i=e.center,a=e.shouldUseTimeDampening,o={top:i.y-n.top,right:n.right-i.x,bottom:n.bottom-i.y,left:i.x-n.left},s=_r({container:n,distanceToEdges:o,dragStartTime:t,axis:mt,shouldUseTimeDampening:a}),l=_r({container:n,distanceToEdges:o,dragStartTime:t,axis:vt,shouldUseTimeDampening:a}),d=Pr({x:l,y:s});if(Be(d,He))return null;var u=function(e){var t=e.container,n=e.subject,r=e.proposedScroll,i=n.height>t.height,a=n.width>t.width;return a||i?a&&i?null:{x:a?0:r.x,y:i?0:r.y}:r}({container:n,subject:r,proposedScroll:d});return u?Be(u,He)?null:u:null},Ir=Ye((function(e){return 0===e?0:e>0?1:-1})),kr=(lr=function(e,t){return e<0?e:e>t?e-t:0},function(e){var t=e.current,n=e.max,r=e.change,i=Le(t,r),a={x:lr(i.x,n.x),y:lr(i.y,n.y)};return Be(a,He)?null:a}),Ar=function(e){var t=e.max,n=e.current,r=e.change,i={x:Math.max(n.x,t.x),y:Math.max(n.y,t.y)},a=Ir(r),o=kr({max:i,current:n,change:a});return!o||(0!==a.x&&0===o.x||0!==a.y&&0===o.y)},xr=function(e,t){return Ar({current:e.scroll.current,max:e.scroll.max,change:t})},Tr=function(e,t){var n=e.frame;return!!n&&Ar({current:n.scroll.current,max:n.scroll.max,change:t})},Dr=function(e){var t=e.state,n=e.dragStartTime,r=e.shouldUseTimeDampening,i=e.scrollWindow,a=e.scrollDroppable,o=t.current.page.borderBoxCenter,s=t.dimensions.draggables[t.critical.draggable.id].page.marginBox;if(t.isWindowScrollAllowed){var l=function(e){var t=e.viewport,n=e.subject,r=e.center,i=e.dragStartTime,a=e.shouldUseTimeDampening,o=Nr({dragStartTime:i,container:t.frame,subject:n,center:r,shouldUseTimeDampening:a});return o&&xr(t,o)?o:null}({dragStartTime:n,viewport:t.viewport,subject:s,center:o,shouldUseTimeDampening:r});if(l)return void i(l)}var d=fr({center:o,destination:Kt(t.impact),droppables:t.dimensions.droppables});if(d){var u=function(e){var t=e.droppable,n=e.subject,r=e.center,i=e.dragStartTime,a=e.shouldUseTimeDampening,o=t.frame;if(!o)return null;var s=Nr({dragStartTime:i,container:o.pageMarginBox,subject:n,center:r,shouldUseTimeDampening:a});return s&&Tr(t,s)?s:null}({dragStartTime:n,droppable:d,subject:s,center:o,shouldUseTimeDampening:r});u&&a(d.descriptor.id,u)}},Or=function(e){var t=e.move,n=e.scrollDroppable,r=e.scrollWindow,i=function(e,t){if(!Tr(e,t))return t;var r=function(e,t){var n=e.frame;return n&&Tr(e,t)?kr({current:n.scroll.current,max:n.scroll.max,change:t}):null}(e,t);if(!r)return n(e.descriptor.id,t),null;var i=Ge(t,r);return n(e.descriptor.id,i),Ge(t,i)},a=function(e,t,n){if(!e)return n;if(!xr(t,n))return n;var i=function(e,t){if(!xr(e,t))return null;var n=e.scroll.max,r=e.scroll.current;return kr({current:r,max:n,change:t})}(t,n);if(!i)return r(n),null;var a=Ge(n,i);return r(a),Ge(n,a)};return function(e){var n=e.scrollJumpRequest;if(n){var r=Kt(e.impact);r||Te(!1);var o=i(e.dimensions.droppables[r],n);if(o){var s=e.viewport,l=a(e.isWindowScrollAllowed,s,o);l&&function(e,n){var r=Le(e.current.client.selection,n);t({client:r})}(e,l)}}}},Rr=function(e){var t=e.scrollDroppable,n=e.scrollWindow,r=e.move,i=function(e){var t=e.scrollWindow,n=e.scrollDroppable,r=_e(t),i=_e(n),a=null,o=function(e){a||Te(!1);var t=a,n=t.shouldUseTimeDampening,o=t.dragStartTime;Dr({state:e,scrollWindow:r,scrollDroppable:i,dragStartTime:o,shouldUseTimeDampening:n})};return{start:function(e){un(),a&&Te(!1);var t=Date.now(),n=!1,r=function(){n=!0};Dr({state:e,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:r,scrollDroppable:r}),a={dragStartTime:t,shouldUseTimeDampening:n},cn(),n&&o(e)},stop:function(){a&&(r.cancel(),i.cancel(),a=null)},scroll:o}}({scrollWindow:n,scrollDroppable:t}),a=Or({move:r,scrollWindow:n,scrollDroppable:t});return{scroll:function(e){"DRAGGING"===e.phase&&("FLUID"!==e.movementMode?e.scrollJumpRequest&&a(e):i.scroll(e))},start:i.start,stop:i.stop}},Fr="data-rbd",Mr={base:dr=Fr+"-drag-handle",draggableId:dr+"-draggable-id",contextId:dr+"-context-id"},Ur=function(){var e=Fr+"-draggable";return{base:e,contextId:e+"-context-id",id:e+"-id"}}(),Hr=function(){var e=Fr+"-droppable";return{base:e,contextId:e+"-context-id",id:e+"-id"}}(),Lr={contextId:Fr+"-scroll-container-context-id"},Gr=function(e,t){return e.map((function(e){var n=e.styles[t];return n?e.selector+" { "+n+" }":""})).join(" ")},Br=function(e){var t,n,r,i=(t=e,function(e){return"["+e+'="'+t+'"]'}),a=(n="\n      cursor: -webkit-grab;\n      cursor: grab;\n    ",{selector:i(Mr.contextId),styles:{always:"\n          -webkit-touch-callout: none;\n          -webkit-tap-highlight-color: rgba(0,0,0,0);\n          touch-action: manipulation;\n        ",resting:n,dragging:"pointer-events: none;",dropAnimating:n}}),o=[(r="\n      transition: "+Un.outOfTheWay+";\n    ",{selector:i(Ur.contextId),styles:{dragging:r,dropAnimating:r,userCancel:r}}),a,{selector:i(Hr.contextId),styles:{always:"overflow-anchor: none;"}},{selector:"body",styles:{dragging:"\n        cursor: grabbing;\n        cursor: -webkit-grabbing;\n        user-select: none;\n        -webkit-user-select: none;\n        -moz-user-select: none;\n        -ms-user-select: none;\n        overflow-anchor: none;\n      "}}];return{always:Gr(o,"always"),resting:Gr(o,"resting"),dragging:Gr(o,"dragging"),dropAnimating:Gr(o,"dropAnimating"),userCancel:Gr(o,"userCancel")}},Wr="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?r.useLayoutEffect:r.useEffect,zr=function(){var e=document.querySelector("head");return e||Te(!1),e},jr=function(e){var t=document.createElement("style");return e&&t.setAttribute("nonce",e),t.type="text/css",t};var $r=function(e){return e&&e.ownerDocument?e.ownerDocument.defaultView:window};function Yr(e){return e instanceof $r(e).HTMLElement}function qr(e,t){var n="["+Mr.contextId+'="'+e+'"]',r=tt(document.querySelectorAll(n));if(!r.length)return null;var i=et(r,(function(e){return e.getAttribute(Mr.draggableId)===t}));return i&&Yr(i)?i:null}function Kr(){var e={draggables:{},droppables:{}},t=[];function n(e){t.length&&t.forEach((function(t){return t(e)}))}function r(t){return e.draggables[t]||null}function i(t){return e.droppables[t]||null}return{draggable:{register:function(t){e.draggables[t.descriptor.id]=t,n({type:"ADDITION",value:t})},update:function(t,n){var r=e.draggables[n.descriptor.id];r&&r.uniqueId===t.uniqueId&&(delete e.draggables[n.descriptor.id],e.draggables[t.descriptor.id]=t)},unregister:function(t){var i=t.descriptor.id,a=r(i);a&&t.uniqueId===a.uniqueId&&(delete e.draggables[i],n({type:"REMOVAL",value:t}))},getById:function(e){var t=r(e);return t||Te(!1),t},findById:r,exists:function(e){return Boolean(r(e))},getAllByType:function(t){return Ve(e.draggables).filter((function(e){return e.descriptor.type===t}))}},droppable:{register:function(t){e.droppables[t.descriptor.id]=t},unregister:function(t){var n=i(t.descriptor.id);n&&t.uniqueId===n.uniqueId&&delete e.droppables[t.descriptor.id]},getById:function(e){var t=i(e);return t||Te(!1),t},findById:i,exists:function(e){return Boolean(i(e))},getAllByType:function(t){return Ve(e.droppables).filter((function(e){return e.descriptor.type===t}))}},subscribe:function(e){return t.push(e),function(){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}},clean:function(){e.draggables={},e.droppables={},t.length=0}}}var Jr=r.createContext(null),Qr=function(){var e=document.body;return e||Te(!1),e},Xr={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},Vr=function(e){return"rbd-announcement-"+e};var Zr=0,ei={separator:"::"};function ti(e,t){return void 0===t&&(t=ei),le((function(){return""+e+t.separator+Zr++}),[t.separator,e])}var ni=r.createContext(null);function ri(e){0}function ii(e,t){ri()}function ai(e){var t=(0,r.useRef)(e);return(0,r.useEffect)((function(){t.current=e})),t}var oi,si=27,li=32,di=37,ui=38,ci=39,pi=40,hi=((oi={})[13]=!0,oi[9]=!0,oi),fi=function(e){hi[e.keyCode]&&e.preventDefault()},gi=function(){var e="visibilitychange";return"undefined"==typeof document?e:et([e,"ms"+e,"webkit"+e,"moz"+e,"o"+e],(function(e){return"on"+e in document}))||e}(),yi=0,mi=5;var vi,Ci={type:"IDLE"};function bi(e){var t=e.cancel,n=e.completed,r=e.getPhase,i=e.setPhase;return[{eventName:"mousemove",fn:function(e){var t=e.button,n=e.clientX,a=e.clientY;if(t===yi){var o={x:n,y:a},s=r();if("DRAGGING"===s.type)return e.preventDefault(),void s.actions.move(o);"PENDING"!==s.type&&Te(!1);var l=s.point;if(d=l,u=o,Math.abs(u.x-d.x)>=mi||Math.abs(u.y-d.y)>=mi){var d,u;e.preventDefault();var c=s.actions.fluidLift(o);i({type:"DRAGGING",actions:c})}}}},{eventName:"mouseup",fn:function(e){var i=r();"DRAGGING"===i.type?(e.preventDefault(),i.actions.drop({shouldBlockNextClick:!0}),n()):t()}},{eventName:"mousedown",fn:function(e){"DRAGGING"===r().type&&e.preventDefault(),t()}},{eventName:"keydown",fn:function(e){if("PENDING"!==r().type)return e.keyCode===si?(e.preventDefault(),void t()):void fi(e);t()}},{eventName:"resize",fn:t},{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(){"PENDING"===r().type&&t()}},{eventName:"webkitmouseforcedown",fn:function(e){var n=r();"IDLE"===n.type&&Te(!1),n.actions.shouldRespectForcePress()?t():e.preventDefault()}},{eventName:gi,fn:t}]}function Si(e){var t=(0,r.useRef)(Ci),n=(0,r.useRef)(Ne),i=le((function(){return{eventName:"mousedown",fn:function(t){if(!t.defaultPrevented&&t.button===yi&&!(t.ctrlKey||t.metaKey||t.shiftKey||t.altKey)){var r=e.findClosestDraggableId(t);if(r){var i=e.tryGetLock(r,s,{sourceEvent:t});if(i){t.preventDefault();var a={x:t.clientX,y:t.clientY};n.current(),u(i,a)}}}}}}),[e]),a=le((function(){return{eventName:"webkitmouseforcewillbegin",fn:function(t){if(!t.defaultPrevented){var n=e.findClosestDraggableId(t);if(n){var r=e.findOptionsForDraggable(n);r&&(r.shouldRespectForcePress||e.canGetLock(n)&&t.preventDefault())}}}}}),[e]),o=de((function(){n.current=Ie(window,[a,i],{passive:!1,capture:!0})}),[a,i]),s=de((function(){"IDLE"!==t.current.type&&(t.current=Ci,n.current(),o())}),[o]),l=de((function(){var e=t.current;s(),"DRAGGING"===e.type&&e.actions.cancel({shouldBlockNextClick:!0}),"PENDING"===e.type&&e.actions.abort()}),[s]),d=de((function(){var e=bi({cancel:l,completed:s,getPhase:function(){return t.current},setPhase:function(e){t.current=e}});n.current=Ie(window,e,{capture:!0,passive:!1})}),[l,s]),u=de((function(e,n){"IDLE"!==t.current.type&&Te(!1),t.current={type:"PENDING",point:n,actions:e},d()}),[d]);Wr((function(){return o(),function(){n.current()}}),[o])}function Ei(){}var wi=((vi={})[34]=!0,vi[33]=!0,vi[36]=!0,vi[35]=!0,vi);function _i(e,t){function n(){t(),e.cancel()}return[{eventName:"keydown",fn:function(r){return r.keyCode===si?(r.preventDefault(),void n()):r.keyCode===li?(r.preventDefault(),t(),void e.drop()):r.keyCode===pi?(r.preventDefault(),void e.moveDown()):r.keyCode===ui?(r.preventDefault(),void e.moveUp()):r.keyCode===ci?(r.preventDefault(),void e.moveRight()):r.keyCode===di?(r.preventDefault(),void e.moveLeft()):void(wi[r.keyCode]?r.preventDefault():fi(r))}},{eventName:"mousedown",fn:n},{eventName:"mouseup",fn:n},{eventName:"click",fn:n},{eventName:"touchstart",fn:n},{eventName:"resize",fn:n},{eventName:"wheel",fn:n,options:{passive:!0}},{eventName:gi,fn:n}]}function Pi(e){var t=(0,r.useRef)(Ei),n=le((function(){return{eventName:"keydown",fn:function(n){if(!n.defaultPrevented&&n.keyCode===li){var r=e.findClosestDraggableId(n);if(r){var a=e.tryGetLock(r,l,{sourceEvent:n});if(a){n.preventDefault();var o=!0,s=a.snapLift();t.current(),t.current=Ie(window,_i(s,l),{capture:!0,passive:!1})}}}function l(){o||Te(!1),o=!1,t.current(),i()}}}}),[e]),i=de((function(){t.current=Ie(window,[n],{passive:!1,capture:!0})}),[n]);Wr((function(){return i(),function(){t.current()}}),[i])}var Ni={type:"IDLE"},Ii=120,ki=.15;function Ai(e){var t=(0,r.useRef)(Ni),n=(0,r.useRef)(Ne),i=de((function(){return t.current}),[]),a=de((function(e){t.current=e}),[]),o=le((function(){return{eventName:"touchstart",fn:function(t){if(!t.defaultPrevented){var r=e.findClosestDraggableId(t);if(r){var i=e.tryGetLock(r,l,{sourceEvent:t});if(i){var a=t.touches[0],o={x:a.clientX,y:a.clientY};n.current(),p(i,o)}}}}}}),[e]),s=de((function(){n.current=Ie(window,[o],{capture:!0,passive:!1})}),[o]),l=de((function(){var e=t.current;"IDLE"!==e.type&&("PENDING"===e.type&&clearTimeout(e.longPressTimerId),a(Ni),n.current(),s())}),[s,a]),d=de((function(){var e=t.current;l(),"DRAGGING"===e.type&&e.actions.cancel({shouldBlockNextClick:!0}),"PENDING"===e.type&&e.actions.abort()}),[l]),u=de((function(){var e={capture:!0,passive:!1},t={cancel:d,completed:l,getPhase:i},r=Ie(window,function(e){var t=e.cancel,n=e.completed,r=e.getPhase;return[{eventName:"touchmove",options:{capture:!1},fn:function(e){var n=r();if("DRAGGING"===n.type){n.hasMoved=!0;var i=e.touches[0],a={x:i.clientX,y:i.clientY};e.preventDefault(),n.actions.move(a)}else t()}},{eventName:"touchend",fn:function(e){var i=r();"DRAGGING"===i.type?(e.preventDefault(),i.actions.drop({shouldBlockNextClick:!0}),n()):t()}},{eventName:"touchcancel",fn:function(e){"DRAGGING"===r().type?(e.preventDefault(),t()):t()}},{eventName:"touchforcechange",fn:function(e){var n=r();"IDLE"===n.type&&Te(!1);var i=e.touches[0];if(i&&i.force>=ki){var a=n.actions.shouldRespectForcePress();if("PENDING"!==n.type)return a?n.hasMoved?void e.preventDefault():void t():void e.preventDefault();a&&t()}}},{eventName:gi,fn:t}]}(t),e),a=Ie(window,function(e){var t=e.cancel,n=e.getPhase;return[{eventName:"orientationchange",fn:t},{eventName:"resize",fn:t},{eventName:"contextmenu",fn:function(e){e.preventDefault()}},{eventName:"keydown",fn:function(e){"DRAGGING"===n().type?(e.keyCode===si&&e.preventDefault(),t()):t()}},{eventName:gi,fn:t}]}(t),e);n.current=function(){r(),a()}}),[d,i,l]),c=de((function(){var e=i();"PENDING"!==e.type&&Te(!1);var t=e.actions.fluidLift(e.point);a({type:"DRAGGING",actions:t,hasMoved:!1})}),[i,a]),p=de((function(e,t){"IDLE"!==i().type&&Te(!1);var n=setTimeout(c,Ii);a({type:"PENDING",point:t,actions:e,longPressTimerId:n}),u()}),[u,i,a,c]);Wr((function(){return s(),function(){n.current();var e=i();"PENDING"===e.type&&(clearTimeout(e.longPressTimerId),a(Ni))}}),[i,s,a]),Wr((function(){return Ie(window,[{eventName:"touchmove",fn:function(){},options:{capture:!1,passive:!1}}])}),[])}var xi={input:!0,button:!0,textarea:!0,select:!0,option:!0,optgroup:!0,video:!0,audio:!0};function Ti(e,t){if(null==t)return!1;if(Boolean(xi[t.tagName.toLowerCase()]))return!0;var n=t.getAttribute("contenteditable");return"true"===n||""===n||t!==e&&Ti(e,t.parentElement)}function Di(e,t){var n=t.target;return!!Yr(n)&&Ti(e,n)}var Oi=function(e){return ce(e.getBoundingClientRect()).center};var Ri=function(){var e="matches";return"undefined"==typeof document?e:et([e,"msMatchesSelector","webkitMatchesSelector"],(function(e){return e in Element.prototype}))||e}();function Fi(e,t){return null==e?null:e[Ri](t)?e:Fi(e.parentElement,t)}function Mi(e,t){return e.closest?e.closest(t):Fi(e,t)}function Ui(e,t){var n,r=t.target;if(!((n=r)instanceof $r(n).Element))return null;var i=function(e){return"["+Mr.contextId+'="'+e+'"]'}(e),a=Mi(r,i);return a&&Yr(a)?a:null}function Hi(e){e.preventDefault()}function Li(e){var t=e.expected,n=e.phase,r=e.isLockActive;e.shouldWarn;return!!r()&&t===n}function Gi(e){var t=e.lockAPI,n=e.store,r=e.registry,i=e.draggableId;if(t.isClaimed())return!1;var a=r.draggable.findById(i);return!!a&&(!!a.options.isEnabled&&!!cr(n.getState(),i))}function Bi(e){var t=e.lockAPI,n=e.contextId,r=e.store,i=e.registry,o=e.draggableId,s=e.forceSensorStop,l=e.sourceEvent;if(!Gi({lockAPI:t,store:r,registry:i,draggableId:o}))return null;var d=i.draggable.getById(o),u=function(e,t){var n="["+Ur.contextId+'="'+e+'"]',r=et(tt(document.querySelectorAll(n)),(function(e){return e.getAttribute(Ur.id)===t}));return r&&Yr(r)?r:null}(n,d.descriptor.id);if(!u)return null;if(l&&!d.options.canDragInteractiveElements&&Di(u,l))return null;var c=t.claim(s||Ne),p="PRE_DRAG";function h(){return d.options.shouldRespectForcePress}function f(){return t.isActive(c)}var g=function(e,t){Li({expected:e,phase:p,isLockActive:f,shouldWarn:!0})&&r.dispatch(t())}.bind(null,"DRAGGING");function y(e){function n(){t.release(),p="COMPLETED"}function i(t,i){if(void 0===i&&(i={shouldBlockNextClick:!1}),e.cleanup(),i.shouldBlockNextClick){var a=Ie(window,[{eventName:"click",fn:Hi,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(a)}n(),r.dispatch(Tn({reason:t}))}return"PRE_DRAG"!==p&&(n(),"PRE_DRAG"!==p&&Te(!1)),r.dispatch(vn(e.liftActionArgs)),p="DRAGGING",(0,a.A)({isActive:function(){return Li({expected:"DRAGGING",phase:p,isLockActive:f,shouldWarn:!1})},shouldRespectForcePress:h,drop:function(e){return i("DROP",e)},cancel:function(e){return i("CANCEL",e)}},e.actions)}return{isActive:function(){return Li({expected:"PRE_DRAG",phase:p,isLockActive:f,shouldWarn:!1})},shouldRespectForcePress:h,fluidLift:function(e){var t=_e((function(e){g((function(){return _n({client:e})}))})),n=y({liftActionArgs:{id:o,clientSelection:e,movementMode:"FLUID"},cleanup:function(){return t.cancel()},actions:{move:t}});return(0,a.A)({},n,{move:t})},snapLift:function(){var e={moveUp:function(){return g(Pn)},moveRight:function(){return g(In)},moveDown:function(){return g(Nn)},moveLeft:function(){return g(kn)}};return y({liftActionArgs:{id:o,clientSelection:Oi(u),movementMode:"SNAP"},cleanup:Ne,actions:e})},abort:function(){Li({expected:"PRE_DRAG",phase:p,isLockActive:f,shouldWarn:!0})&&t.release()}}}var Wi=[Si,Pi,Ai];function zi(e){var t=e.contextId,n=e.store,i=e.registry,a=e.customSensors,o=e.enableDefaultSensors,s=[].concat(o?Wi:[],a||[]),l=(0,r.useState)((function(){return function(){var e=null;function t(){e||Te(!1),e=null}return{isClaimed:function(){return Boolean(e)},isActive:function(t){return t===e},claim:function(t){e&&Te(!1);var n={abandon:t};return e=n,n},release:t,tryAbandon:function(){e&&(e.abandon(),t())}}}()}))[0],d=de((function(e,t){e.isDragging&&!t.isDragging&&l.tryAbandon()}),[l]);Wr((function(){var e=n.getState();return n.subscribe((function(){var t=n.getState();d(e,t),e=t}))}),[l,n,d]),Wr((function(){return l.tryAbandon}),[l.tryAbandon]);var u=de((function(e){return Gi({lockAPI:l,registry:i,store:n,draggableId:e})}),[l,i,n]),c=de((function(e,r,a){return Bi({lockAPI:l,registry:i,contextId:t,store:n,draggableId:e,forceSensorStop:r,sourceEvent:a&&a.sourceEvent?a.sourceEvent:null})}),[t,l,i,n]),p=de((function(e){return function(e,t){var n=Ui(e,t);return n?n.getAttribute(Mr.draggableId):null}(t,e)}),[t]),h=de((function(e){var t=i.draggable.findById(e);return t?t.options:null}),[i.draggable]),f=de((function(){l.isClaimed()&&(l.tryAbandon(),"IDLE"!==n.getState().phase&&n.dispatch(An()))}),[l,n]),g=de(l.isClaimed,[l]),y=le((function(){return{canGetLock:u,tryGetLock:c,findClosestDraggableId:p,findOptionsForDraggable:h,tryReleaseLock:f,isLockClaimed:g}}),[u,c,p,h,f,g]);ri();for(var m=0;m<s.length;m++)s[m](y)}var ji=function(e){return{onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragEnd:e.onDragEnd,onDragUpdate:e.onDragUpdate}};function $i(e){return e.current||Te(!1),e.current}function Yi(e){var t=e.contextId,n=e.setCallbacks,i=e.sensors,o=e.nonce,s=e.dragHandleUsageInstructions,l=(0,r.useRef)(null);ii();var d=ai(e),u=de((function(){return ji(d.current)}),[d]),c=function(e){var t=le((function(){return Vr(e)}),[e]),n=(0,r.useRef)(null);return(0,r.useEffect)((function(){var e=document.createElement("div");return n.current=e,e.id=t,e.setAttribute("aria-live","assertive"),e.setAttribute("aria-atomic","true"),(0,a.A)(e.style,Xr),Qr().appendChild(e),function(){setTimeout((function(){var t=Qr();t.contains(e)&&t.removeChild(e),e===n.current&&(n.current=null)}))}}),[t]),de((function(e){var t=n.current;t&&(t.textContent=e)}),[])}(t),p=function(e){var t=e.contextId,n=e.text,i=ti("hidden-text",{separator:"-"}),a=le((function(){return"rbd-hidden-text-"+(e={contextId:t,uniqueId:i}).contextId+"-"+e.uniqueId;var e}),[i,t]);return(0,r.useEffect)((function(){var e=document.createElement("div");return e.id=a,e.textContent=n,e.style.display="none",Qr().appendChild(e),function(){var t=Qr();t.contains(e)&&t.removeChild(e)}}),[a,n]),a}({contextId:t,text:s}),h=function(e,t){var n=le((function(){return Br(e)}),[e]),i=(0,r.useRef)(null),a=(0,r.useRef)(null),o=de(we((function(e){var t=a.current;t||Te(!1),t.textContent=e})),[]),s=de((function(e){var t=i.current;t||Te(!1),t.textContent=e}),[]);Wr((function(){(i.current||a.current)&&Te(!1);var r=jr(t),l=jr(t);return i.current=r,a.current=l,r.setAttribute(Fr+"-always",e),l.setAttribute(Fr+"-dynamic",e),zr().appendChild(r),zr().appendChild(l),s(n.always),o(n.resting),function(){var e=function(e){var t=e.current;t||Te(!1),zr().removeChild(t),e.current=null};e(i),e(a)}}),[t,s,o,n.always,n.resting,e]);var l=de((function(){return o(n.dragging)}),[o,n.dragging]),d=de((function(e){o("DROP"!==e?n.userCancel:n.dropAnimating)}),[o,n.dropAnimating,n.userCancel]),u=de((function(){a.current&&o(n.resting)}),[o,n.resting]);return le((function(){return{dragging:l,dropping:d,resting:u}}),[l,d,u])}(t,o),f=de((function(e){$i(l).dispatch(e)}),[]),g=le((function(){return v({publishWhileDragging:Cn,updateDroppableScroll:Sn,updateDroppableIsEnabled:En,updateDroppableIsCombineEnabled:wn,collectionStarting:bn},f)}),[f]),y=function(){var e=le(Kr,[]);return(0,r.useEffect)((function(){return function(){requestAnimationFrame(e.clean)}}),[e]),e}(),m=le((function(){return ur(y,g)}),[y,g]),C=le((function(){return Rr((0,a.A)({scrollWindow:pr,scrollDroppable:m.scrollDroppable},v({move:_n},f)))}),[m.scrollDroppable,f]),b=function(e){var t=(0,r.useRef)({}),n=(0,r.useRef)(null),i=(0,r.useRef)(null),a=(0,r.useRef)(!1),o=de((function(e,n){var r={id:e,focus:n};return t.current[e]=r,function(){var n=t.current;n[e]!==r&&delete n[e]}}),[]),s=de((function(t){var n=qr(e,t);n&&n!==document.activeElement&&n.focus()}),[e]),l=de((function(e,t){n.current===e&&(n.current=t)}),[]),d=de((function(){i.current||a.current&&(i.current=requestAnimationFrame((function(){i.current=null;var e=n.current;e&&s(e)})))}),[s]),u=de((function(e){n.current=null;var t=document.activeElement;t&&t.getAttribute(Mr.draggableId)===e&&(n.current=e)}),[]);return Wr((function(){return a.current=!0,function(){a.current=!1;var e=i.current;e&&cancelAnimationFrame(e)}}),[]),le((function(){return{register:o,tryRecordFocus:u,tryRestoreFocusRecorded:d,tryShiftRecord:l}}),[o,u,d,l])}(t),S=le((function(){return nr({announce:c,autoScroller:C,dimensionMarshal:m,focusMarshal:b,getResponders:u,styleMarshal:h})}),[c,C,m,b,u,h]);l.current=S;var E=de((function(){var e=$i(l);"IDLE"!==e.getState().phase&&e.dispatch(An())}),[]),w=de((function(){var e=$i(l).getState();return e.isDragging||"DROP_ANIMATING"===e.phase}),[]);n(le((function(){return{isDragging:w,tryAbort:E}}),[w,E]));var _=de((function(e){return cr($i(l).getState(),e)}),[]),P=de((function(){return Qt($i(l).getState())}),[]),I=le((function(){return{marshal:m,focus:b,contextId:t,canLift:_,isMovementAllowed:P,dragHandleUsageInstructionsId:p,registry:y}}),[t,m,p,b,_,P,y]);return zi({contextId:t,store:S,registry:y,customSensors:i,enableDefaultSensors:!1!==e.enableDefaultSensors}),(0,r.useEffect)((function(){return E}),[E]),r.createElement(ni.Provider,{value:I},r.createElement(N,{context:Jr,store:S},e.children))}var qi=0;function Ki(){qi=0,Zr=0}function Ji(e){var t=le((function(){return""+qi++}),[]),n=e.dragHandleUsageInstructions||Ue.dragHandleUsageInstructions;return r.createElement(De,null,(function(i){return r.createElement(Yi,{nonce:e.nonce,contextId:t,setCallbacks:i,dragHandleUsageInstructions:n,enableDefaultSensors:e.enableDefaultSensors,sensors:e.sensors,onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragUpdate:e.onDragUpdate,onDragEnd:e.onDragEnd},e.children)}))}var Qi=function(e){return function(t){return e===t}},Xi=Qi("scroll"),Vi=Qi("auto"),Zi=(Qi("visible"),function(e,t){return t(e.overflowX)||t(e.overflowY)}),ea=function(e){var t=window.getComputedStyle(e),n={overflowX:t.overflowX,overflowY:t.overflowY};return Zi(n,Xi)||Zi(n,Vi)},ta=function e(t){return null==t||t===document.body||t===document.documentElement?null:ea(t)?t:e(t.parentElement)},na=function(e){return{x:e.scrollLeft,y:e.scrollTop}},ra=function e(t){return!!t&&("fixed"===window.getComputedStyle(t).position||e(t.parentElement))},ia=function(e){return{closestScrollable:ta(e),isFixedOnPage:ra(e)}},aa=function(e){var t=e.ref,n=e.descriptor,r=e.env,i=e.windowScroll,a=e.direction,o=e.isDropDisabled,s=e.isCombineEnabled,l=e.shouldClipSubject,d=r.closestScrollable,u=function(e,t){var n=be(e);if(!t)return n;if(e!==t)return n;var r=n.paddingBox.top-t.scrollTop,i=n.paddingBox.left-t.scrollLeft,a=r+t.scrollHeight,o=i+t.scrollWidth,s=pe({top:r,right:o,bottom:a,left:i},n.border);return ge({borderBox:s,margin:n.margin,border:n.border,padding:n.padding})}(t,d),c=ve(u,i),p=function(){if(!d)return null;var e=be(d),t={scrollHeight:d.scrollHeight,scrollWidth:d.scrollWidth};return{client:e,page:ve(e,i),scroll:na(d),scrollSize:t,shouldClipSubject:l}}(),h=function(e){var t=e.descriptor,n=e.isEnabled,r=e.isCombineEnabled,i=e.isFixedOnPage,a=e.direction,o=e.client,s=e.page,l=e.closest,d=function(){if(!l)return null;var e=l.scrollSize,t=l.client,n=rr({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,height:t.paddingBox.height,width:t.paddingBox.width});return{pageMarginBox:l.page.marginBox,frameClient:t,scrollSize:e,shouldClipSubject:l.shouldClipSubject,scroll:{initial:l.scroll,current:l.scroll,max:n,diff:{value:He,displacement:He}}}}(),u="vertical"===a?mt:vt;return{descriptor:t,isCombineEnabled:r,isFixedOnPage:i,axis:u,isEnabled:n,client:o,page:s,frame:d,subject:Qe({page:s,withPlaceholder:null,axis:u,frame:d})}}({descriptor:n,isEnabled:!o,isCombineEnabled:s,isFixedOnPage:r.isFixedOnPage,direction:a,client:u,page:c,closest:p});return h},oa={passive:!1},sa={passive:!0},la=function(e){return e.shouldPublishImmediately?oa:sa};function da(e){var t=(0,r.useContext)(e);return t||Te(!1),t}var ua=function(e){return e&&e.env.closestScrollable||null};function ca(){}var pa={width:0,height:0,margin:{top:0,right:0,bottom:0,left:0}},ha=function(e){var t=e.isAnimatingOpenOnMount,n=e.placeholder,r=e.animate,i=function(e){var t=e.isAnimatingOpenOnMount,n=e.placeholder,r=e.animate;return t||"close"===r?pa:{height:n.client.borderBox.height,width:n.client.borderBox.width,margin:n.client.margin}}({isAnimatingOpenOnMount:t,placeholder:n,animate:r});return{display:n.display,boxSizing:"border-box",width:i.width,height:i.height,marginTop:i.margin.top,marginRight:i.margin.right,marginBottom:i.margin.bottom,marginLeft:i.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:"none"!==r?Un.placeholder:null}};var fa=r.memo((function(e){var t=(0,r.useRef)(null),n=de((function(){t.current&&(clearTimeout(t.current),t.current=null)}),[]),i=e.animate,a=e.onTransitionEnd,o=e.onClose,s=e.contextId,l=(0,r.useState)("open"===e.animate),d=l[0],u=l[1];(0,r.useEffect)((function(){return d?"open"!==i?(n(),u(!1),ca):t.current?ca:(t.current=setTimeout((function(){t.current=null,u(!1)})),n):ca}),[i,d,n]);var c=de((function(e){"height"===e.propertyName&&(a(),"close"===i&&o())}),[i,o,a]),p=ha({isAnimatingOpenOnMount:d,animate:e.animate,placeholder:e.placeholder});return r.createElement(e.placeholder.tagName,{style:p,"data-rbd-placeholder-context-id":s,onTransitionEnd:c,ref:e.innerRef})})),ga=r.createContext(null);var ya=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).state={isVisible:Boolean(t.props.on),data:t.props.on,animate:t.props.shouldAnimate&&t.props.on?"open":"none"},t.onClose=function(){"close"===t.state.animate&&t.setState({isVisible:!1})},t}return(0,i.A)(t,e),t.getDerivedStateFromProps=function(e,t){return e.shouldAnimate?e.on?{isVisible:!0,data:e.on,animate:"open"}:t.isVisible?{isVisible:!0,data:t.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:Boolean(e.on),data:e.on,animate:"none"}},t.prototype.render=function(){if(!this.state.isVisible)return null;var e={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(e)},t}(r.PureComponent),ma={dragging:5e3,dropAnimating:4500},va=function(e,t){return t?Un.drop(t.duration):e?Un.snap:Un.fluid},Ca=function(e,t){return e?t?Rn.drop:Rn.combining:null},ba=function(e){return null!=e.forceShouldAnimate?e.forceShouldAnimate:"SNAP"===e.mode};function Sa(e){return"DRAGGING"===e.type?function(e){var t=e.dimension.client,n=e.offset,r=e.combineWith,i=e.dropping,a=Boolean(r),o=ba(e),s=Boolean(i),l=s?Ln.drop(n,a):Ln.moveTo(n);return{position:"fixed",top:t.marginBox.top,left:t.marginBox.left,boxSizing:"border-box",width:t.borderBox.width,height:t.borderBox.height,transition:va(o,i),transform:l,opacity:Ca(a,s),zIndex:s?ma.dropAnimating:ma.dragging,pointerEvents:"none"}}(e):(t=e,{transform:Ln.moveTo(t.offset),transition:t.shouldAnimateDisplacement?null:"none"});var t}function Ea(e){var t=ti("draggable"),n=e.descriptor,i=e.registry,a=e.getDraggableRef,o=e.canDragInteractiveElements,s=e.shouldRespectForcePress,l=e.isEnabled,d=le((function(){return{canDragInteractiveElements:o,shouldRespectForcePress:s,isEnabled:l}}),[o,l,s]),u=de((function(e){var t=a();return t||Te(!1),function(e,t,n){void 0===n&&(n=He);var r=window.getComputedStyle(t),i=t.getBoundingClientRect(),a=Ce(i,r),o=ve(a,n);return{descriptor:e,placeholder:{client:a,tagName:t.tagName.toLowerCase(),display:r.display},displaceBy:{x:a.marginBox.width,y:a.marginBox.height},client:a,page:o}}(n,t,e)}),[n,a]),c=le((function(){return{uniqueId:t,descriptor:n,options:d,getDimension:u}}),[n,u,d,t]),p=(0,r.useRef)(c),h=(0,r.useRef)(!0);Wr((function(){return i.draggable.register(p.current),function(){return i.draggable.unregister(p.current)}}),[i.draggable]),Wr((function(){if(h.current)h.current=!1;else{var e=p.current;p.current=c,i.draggable.update(c,e)}}),[c,i.draggable])}function wa(e,t,n){ii()}function _a(e){e.preventDefault()}var Pa=function(e,t){return e===t},Na=function(e){var t=e.combine,n=e.destination;return n?n.droppableId:t?t.droppableId:null};function Ia(e){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:e,combineWith:null}}var ka={mapped:{type:"SECONDARY",offset:He,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:Ia(null)}};var Aa=ie((function(){var e,t,n,r=(e=we((function(e,t){return{x:e,y:t}})),t=we((function(e,t,n,r,i){return{isDragging:!0,isClone:t,isDropAnimating:Boolean(i),dropAnimation:i,mode:e,draggingOver:n,combineWith:r,combineTargetFor:null}})),n=we((function(e,n,r,i,a,o,s){return{mapped:{type:"DRAGGING",dropping:null,draggingOver:a,combineWith:o,mode:n,offset:e,dimension:r,forceShouldAnimate:s,snapshot:t(n,i,a,o,null)}}})),function(r,i){if(r.isDragging){if(r.critical.draggable.id!==i.draggableId)return null;var a=r.current.client.offset,o=r.dimensions.draggables[i.draggableId],s=Kt(r.impact),l=(u=r.impact).at&&"COMBINE"===u.at.type?u.at.combine.draggableId:null,d=r.forceShouldAnimate;return n(e(a.x,a.y),r.movementMode,o,i.isClone,s,l,d)}var u;if("DROP_ANIMATING"===r.phase){var c=r.completed;if(c.result.draggableId!==i.draggableId)return null;var p=i.isClone,h=r.dimensions.draggables[i.draggableId],f=c.result,g=f.mode,y=Na(f),m=function(e){return e.combine?e.combine.draggableId:null}(f),v={duration:r.dropDuration,curve:On,moveTo:r.newHomeClientOffset,opacity:m?Rn.drop:null,scale:m?Fn.drop:null};return{mapped:{type:"DRAGGING",offset:r.newHomeClientOffset,dimension:h,dropping:v,draggingOver:y,combineWith:m,mode:g,forceShouldAnimate:null,snapshot:t(g,p,y,m,v)}}}return null}),i=function(){var e=we((function(e,t){return{x:e,y:t}})),t=we(Ia),n=we((function(e,n,r){return void 0===n&&(n=null),{mapped:{type:"SECONDARY",offset:e,combineTargetFor:n,shouldAnimateDisplacement:r,snapshot:t(n)}}})),r=function(e){return e?n(He,e,!0):null},i=function(t,i,a,o){var s=a.displaced.visible[t],l=Boolean(o.inVirtualList&&o.effected[t]),d=lt(a),u=d&&d.draggableId===t?i:null;if(!s){if(!l)return r(u);if(a.displaced.invisible[t])return null;var c=We(o.displacedBy.point),p=e(c.x,c.y);return n(p,u,!0)}if(l)return r(u);var h=a.displacedBy.point,f=e(h.x,h.y);return n(f,u,s.shouldAnimate)};return function(e,t){if(e.isDragging)return e.critical.draggable.id===t.draggableId?null:i(t.draggableId,e.critical.draggable.id,e.impact,e.afterCritical);if("DROP_ANIMATING"===e.phase){var n=e.completed;return n.result.draggableId===t.draggableId?null:i(t.draggableId,n.result.draggableId,n.impact,n.afterCritical)}return null}}();return function(e,t){return r(e,t)||i(e,t)||ka}}),{dropAnimationFinished:Dn},null,{context:Jr,pure:!0,areStatePropsEqual:Pa})((function(e){var t=(0,r.useRef)(null),n=de((function(e){t.current=e}),[]),i=de((function(){return t.current}),[]),a=da(ni),o=a.contextId,s=a.dragHandleUsageInstructionsId,l=a.registry,d=da(ga),u=d.type,c=d.droppableId,p=le((function(){return{id:e.draggableId,index:e.index,type:u,droppableId:c}}),[e.draggableId,e.index,u,c]),h=e.children,f=e.draggableId,g=e.isEnabled,y=e.shouldRespectForcePress,m=e.canDragInteractiveElements,v=e.isClone,C=e.mapped,b=e.dropAnimationFinished;wa(),ri(),v||Ea(le((function(){return{descriptor:p,registry:l,getDraggableRef:i,canDragInteractiveElements:m,shouldRespectForcePress:y,isEnabled:g}}),[p,l,i,m,y,g]));var S=le((function(){return g?{tabIndex:0,role:"button","aria-describedby":s,"data-rbd-drag-handle-draggable-id":f,"data-rbd-drag-handle-context-id":o,draggable:!1,onDragStart:_a}:null}),[o,s,f,g]),E=de((function(e){"DRAGGING"===C.type&&C.dropping&&"transform"===e.propertyName&&b()}),[b,C]),w=le((function(){var e=Sa(C),t="DRAGGING"===C.type&&C.dropping?E:null;return{innerRef:n,draggableProps:{"data-rbd-draggable-context-id":o,"data-rbd-draggable-id":f,style:e,onTransitionEnd:t},dragHandleProps:S}}),[o,S,f,C,E,n]),_=le((function(){return{draggableId:p.id,type:p.type,source:{index:p.index,droppableId:p.droppableId}}}),[p.droppableId,p.id,p.index,p.type]);return h(w,C.snapshot,_)}));function xa(e){return da(ga).isUsingCloneFor!==e.draggableId||e.isClone?r.createElement(Aa,e):null}function Ta(e){var t="boolean"!=typeof e.isDragDisabled||!e.isDragDisabled,n=Boolean(e.disableInteractiveElementBlocking),i=Boolean(e.shouldRespectForcePress);return r.createElement(xa,(0,a.A)({},e,{isClone:!1,isEnabled:t,canDragInteractiveElements:n,shouldRespectForcePress:i}))}var Da=function(e,t){return e===t.droppable.type},Oa=function(e,t){return t.draggables[e.draggable.id]};var Ra={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:function(){return document.body||Te(!1),document.body}},Fa=ie((function(){var e={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},t=(0,a.A)({},e,{shouldAnimatePlaceholder:!1}),n=we((function(e){return{draggableId:e.id,type:e.type,source:{index:e.index,droppableId:e.droppableId}}})),r=we((function(r,i,a,o,s,l){var d=s.descriptor.id;if(s.descriptor.droppableId===r){var u=l?{render:l,dragging:n(s.descriptor)}:null,c={isDraggingOver:a,draggingOverWith:a?d:null,draggingFromThisWith:d,isUsingPlaceholder:!0};return{placeholder:s.placeholder,shouldAnimatePlaceholder:!1,snapshot:c,useClone:u}}if(!i)return t;if(!o)return e;var p={isDraggingOver:a,draggingOverWith:d,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:s.placeholder,shouldAnimatePlaceholder:!0,snapshot:p,useClone:null}}));return function(n,i){var a=i.droppableId,o=i.type,s=!i.isDropDisabled,l=i.renderClone;if(n.isDragging){var d=n.critical;if(!Da(o,d))return t;var u=Oa(d,n.dimensions),c=Kt(n.impact)===a;return r(a,s,c,c,u,l)}if("DROP_ANIMATING"===n.phase){var p=n.completed;if(!Da(o,p.critical))return t;var h=Oa(p.critical,n.dimensions);return r(a,s,Na(p.result)===a,Kt(p.impact)===a,h,l)}if("IDLE"===n.phase&&n.completed&&!n.shouldFlush){var f=n.completed;if(!Da(o,f.critical))return t;var g=Kt(f.impact)===a,y=Boolean(f.impact.at&&"COMBINE"===f.impact.at.type),m=f.critical.droppable.id===a;return g?y?e:t:m?e:t}return t}}),{updateViewportMaxScroll:function(e){return{type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:e}}},null,{context:Jr,pure:!0,areStatePropsEqual:Pa})((function(e){var t=(0,r.useContext)(ni);t||Te(!1);var n=t.contextId,i=t.isMovementAllowed,a=(0,r.useRef)(null),o=(0,r.useRef)(null),s=e.children,l=e.droppableId,d=e.type,u=e.mode,c=e.direction,p=e.ignoreContainerClipping,h=e.isDropDisabled,f=e.isCombineEnabled,g=e.snapshot,y=e.useClone,m=e.updateViewportMaxScroll,v=e.getContainerForClone,C=de((function(){return a.current}),[]),b=de((function(e){a.current=e}),[]),S=(de((function(){return o.current}),[]),de((function(e){o.current=e}),[]));ii();var E=de((function(){i()&&m({maxScroll:ar()})}),[i,m]);!function(e){var t=(0,r.useRef)(null),n=da(ni),i=ti("droppable"),a=n.registry,o=n.marshal,s=ai(e),l=le((function(){return{id:e.droppableId,type:e.type,mode:e.mode}}),[e.droppableId,e.mode,e.type]),d=(0,r.useRef)(l),u=le((function(){return we((function(e,n){t.current||Te(!1);var r={x:e,y:n};o.updateDroppableScroll(l.id,r)}))}),[l.id,o]),c=de((function(){var e=t.current;return e&&e.env.closestScrollable?na(e.env.closestScrollable):He}),[]),p=de((function(){var e=c();u(e.x,e.y)}),[c,u]),h=le((function(){return _e(p)}),[p]),f=de((function(){var e=t.current,n=ua(e);e&&n||Te(!1),e.scrollOptions.shouldPublishImmediately?p():h()}),[h,p]),g=de((function(e,r){t.current&&Te(!1);var i=s.current,a=i.getDroppableRef();a||Te(!1);var o=ia(a),d={ref:a,descriptor:l,env:o,scrollOptions:r};t.current=d;var u=aa({ref:a,descriptor:l,env:o,windowScroll:e,direction:i.direction,isDropDisabled:i.isDropDisabled,isCombineEnabled:i.isCombineEnabled,shouldClipSubject:!i.ignoreContainerClipping}),c=o.closestScrollable;return c&&(c.setAttribute(Lr.contextId,n.contextId),c.addEventListener("scroll",f,la(d.scrollOptions))),u}),[n.contextId,l,f,s]),y=de((function(){var e=t.current,n=ua(e);return e&&n||Te(!1),na(n)}),[]),m=de((function(){var e=t.current;e||Te(!1);var n=ua(e);t.current=null,n&&(h.cancel(),n.removeAttribute(Lr.contextId),n.removeEventListener("scroll",f,la(e.scrollOptions)))}),[f,h]),v=de((function(e){var n=t.current;n||Te(!1);var r=ua(n);r||Te(!1),r.scrollTop+=e.y,r.scrollLeft+=e.x}),[]),C=le((function(){return{getDimensionAndWatchScroll:g,getScrollWhileDragging:y,dragStopped:m,scroll:v}}),[m,g,y,v]),b=le((function(){return{uniqueId:i,descriptor:l,callbacks:C}}),[C,l,i]);Wr((function(){return d.current=b.descriptor,a.droppable.register(b),function(){t.current&&m(),a.droppable.unregister(b)}}),[C,l,m,b,o,a.droppable]),Wr((function(){t.current&&o.updateDroppableIsEnabled(d.current.id,!e.isDropDisabled)}),[e.isDropDisabled,o]),Wr((function(){t.current&&o.updateDroppableIsCombineEnabled(d.current.id,e.isCombineEnabled)}),[e.isCombineEnabled,o])}({droppableId:l,type:d,mode:u,direction:c,isDropDisabled:h,isCombineEnabled:f,ignoreContainerClipping:p,getDroppableRef:C});var w=r.createElement(ya,{on:e.placeholder,shouldAnimate:e.shouldAnimatePlaceholder},(function(e){var t=e.onClose,i=e.data,a=e.animate;return r.createElement(fa,{placeholder:i,onClose:t,innerRef:S,animate:a,contextId:n,onTransitionEnd:E})})),_=le((function(){return{innerRef:b,placeholder:w,droppableProps:{"data-rbd-droppable-id":l,"data-rbd-droppable-context-id":n}}}),[n,l,w,b]),P=y?y.dragging.draggableId:null,N=le((function(){return{droppableId:l,type:d,isUsingCloneFor:P}}),[l,P,d]);return r.createElement(ga.Provider,{value:N},s(_,g),function(){if(!y)return null;var e=y.dragging,t=y.render,n=r.createElement(xa,{draggableId:e.draggableId,index:e.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},(function(n,r){return t(n,r,e)}));return oe.createPortal(n,v())}())}));Fa.defaultProps=Ra},7285:(e,t,n)=>{"use strict";n.d(t,{A:()=>h});var r=n(6942),i=n.n(r),a=n(6540),o=n(5067),s=n(923),l=n(5258),d=n(8073),u=n(4848);const c={[o.ns]:"show",[o._K]:"show"},p=a.forwardRef((({className:e,children:t,transitionClasses:n={},onEnter:r,...o},p)=>{const h={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1,...o},f=(0,a.useCallback)(((e,t)=>{(0,l.A)(e),null==r||r(e,t)}),[r]);return(0,u.jsx)(d.A,{ref:p,addEndListener:s.A,...h,onEnter:f,childRef:t.ref,children:(r,o)=>a.cloneElement(t,{...o,className:i()("fade",e,t.props.className,c[r],n[r])})})}));p.displayName="Fade";const h=p},8231:(e,t,n)=>{"use strict";n.d(t,{A:()=>T});var r=n(6540),i=n(6942),a=n.n(i),o=n(961),s=n(1244),l=n(3804),d=n(2955),u=n(1284),c=n(1625),p=n(7895),h=n(1289),f=n(4024);const g=()=>{};const y=function(e,t,{disabled:n,clickTrigger:i}={}){const a=t||g;(0,h.A)(e,a,{disabled:n,clickTrigger:i});const o=(0,p.A)((e=>{(0,f.v)(e)&&a(e)}));(0,r.useEffect)((()=>{if(n||null==e)return;const t=(0,c.A)((0,h.j)(e));let r=(t.defaultView||window).event;const i=(0,u.A)(t,"keyup",(e=>{e!==r?o(e):r=void 0}));return()=>{i()}}),[e,n,o])};var m=n(4561),v=n(8415),C=n(6500);const b=r.forwardRef(((e,t)=>{const{flip:n,offset:i,placement:a,containerPadding:u,popperConfig:c={},transition:p,runTransition:h}=e,[f,g]=(0,s.A)(),[b,S]=(0,s.A)(),E=(0,l.A)(g,t),w=(0,m.A)(e.container),_=(0,m.A)(e.target),[P,N]=(0,r.useState)(!e.show),I=(0,d.A)(_,f,(0,v.Ay)({placement:a,enableEvents:!!e.show,containerPadding:u||5,flip:n,offset:i,arrowElement:b,popperConfig:c}));e.show&&P&&N(!1);const k=e.show||!P;if(y(f,e.onHide,{disabled:!e.rootClose||e.rootCloseDisabled,clickTrigger:e.rootCloseEvent}),!k)return null;const{onExit:A,onExiting:x,onEnter:T,onEntering:D,onEntered:O}=e;let R=e.children(Object.assign({},I.attributes.popper,{style:I.styles.popper,ref:E}),{popper:I,placement:a,show:!!e.show,arrowProps:Object.assign({},I.attributes.arrow,{style:I.styles.arrow,ref:S})});return R=(0,C.Yc)(p,h,{in:!!e.show,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:R,onExit:A,onExiting:x,onExited:(...t)=>{N(!0),e.onExited&&e.onExited(...t)},onEnter:T,onEntering:D,onEntered:O}),w?o.createPortal(R,w):null}));b.displayName="Overlay";const S=b;var E=n(1706),w=n(4243),_=n(6519),P=n(8594),N=n(3524);var I=n(7285),k=n(9185),A=n(4848);const x=r.forwardRef((({children:e,transition:t=I.A,popperConfig:n={},rootClose:i=!1,placement:o="top",show:s=!1,...d},u)=>{const c=(0,r.useRef)({}),[h,f]=(0,r.useState)(null),[g,y]=function(e){const t=(0,r.useRef)(null),n=(0,_.oU)(void 0,"popover"),i=(0,_.oU)(void 0,"tooltip"),a=(0,r.useMemo)((()=>({name:"offset",options:{offset:()=>{if(e)return e;if(t.current){if((0,w.A)(t.current,n))return P.A.POPPER_OFFSET;if((0,w.A)(t.current,i))return N.default.TOOLTIP_OFFSET}return[0,0]}}})),[e,n,i]);return[t,[a]]}(d.offset),m=(0,l.A)(u,g),v=!0===t?I.A:t||void 0,C=(0,p.A)((e=>{f(e),null==n||null==n.onFirstUpdate||n.onFirstUpdate(e)}));return(0,E.A)((()=>{h&&d.target&&(null==c.current.scheduleUpdate||c.current.scheduleUpdate())}),[h,d.target]),(0,r.useEffect)((()=>{s||f(null)}),[s]),(0,A.jsx)(S,{...d,ref:m,popperConfig:{...n,modifiers:y.concat(n.modifiers||[]),onFirstUpdate:C},transition:v,rootClose:i,placement:o,show:s,children:(i,{arrowProps:o,popper:s,show:l})=>{var d;!function(e,t){const{ref:n}=e,{ref:r}=t;e.ref=n.__wrapped||(n.__wrapped=e=>n((0,k.A)(e))),t.ref=r.__wrapped||(r.__wrapped=e=>r((0,k.A)(e)))}(i,o);const u=null==s?void 0:s.placement,p=Object.assign(c.current,{state:null==s?void 0:s.state,scheduleUpdate:null==s?void 0:s.update,placement:u,outOfBoundaries:(null==s||null==(d=s.state)||null==(d=d.modifiersData.hide)?void 0:d.isReferenceHidden)||!1,strategy:n.strategy}),f=!!h;return"function"==typeof e?e({...i,placement:u,show:l,...!t&&l&&{className:"show"},popper:p,arrowProps:o,hasDoneInitialMeasure:f}):r.cloneElement(e,{...i,placement:u,arrowProps:o,popper:p,hasDoneInitialMeasure:f,className:a()(e.props.className,!t&&l&&"show"),style:{...e.props.style,...i.style}})}})}));x.displayName="Overlay";const T=x},1015:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>f});var r=n(6406),i=n(5556),a=n.n(i),o=n(6540),s=n(9567),l=(n(9771),n(1558)),d=n(3804),u=n(8231),c=n(9185),p=n(4848);function h(e,t,n){const[i]=t,a=i.currentTarget,o=i.relatedTarget||i.nativeEvent[n];o&&o===a||(0,r.A)(a,o)||e(...t)}a().oneOf(["click","hover","focus"]);const f=({trigger:e=["hover","focus"],overlay:t,children:n,popperConfig:r={},show:i,defaultShow:a=!1,onToggle:f,delay:g,placement:y,flip:m=y&&-1!==y.indexOf("auto"),...v})=>{const C=(0,o.useRef)(null),b=(0,d.A)(C,n.ref),S=(0,s.A)(),E=(0,o.useRef)(""),[w,_]=(0,l.iC)(i,a,f),P=function(e){return e&&"object"==typeof e?e:{show:e,hide:e}}(g),{onFocus:N,onBlur:I,onClick:k}="function"!=typeof n?o.Children.only(n).props:{},A=(0,o.useCallback)((()=>{S.clear(),E.current="show",P.show?S.set((()=>{"show"===E.current&&_(!0)}),P.show):_(!0)}),[P.show,_,S]),x=(0,o.useCallback)((()=>{S.clear(),E.current="hide",P.hide?S.set((()=>{"hide"===E.current&&_(!1)}),P.hide):_(!1)}),[P.hide,_,S]),T=(0,o.useCallback)(((...e)=>{A(),null==N||N(...e)}),[A,N]),D=(0,o.useCallback)(((...e)=>{x(),null==I||I(...e)}),[x,I]),O=(0,o.useCallback)(((...e)=>{_(!w),null==k||k(...e)}),[k,_,w]),R=(0,o.useCallback)(((...e)=>{h(A,e,"fromElement")}),[A]),F=(0,o.useCallback)(((...e)=>{h(x,e,"toElement")}),[x]),M=null==e?[]:[].concat(e),U={ref:e=>{b((0,c.A)(e))}};return-1!==M.indexOf("click")&&(U.onClick=O),-1!==M.indexOf("focus")&&(U.onFocus=T,U.onBlur=D),-1!==M.indexOf("hover")&&(U.onMouseOver=R,U.onMouseOut=F),(0,p.jsxs)(p.Fragment,{children:["function"==typeof n?n(U):(0,o.cloneElement)(n,U),(0,p.jsx)(u.A,{...v,show:w,onHide:x,flip:m,placement:y,popperConfig:r,target:C.current,children:t})]})}},8594:(e,t,n)=>{"use strict";n.d(t,{A:()=>h});var r=n(6942),i=n.n(r),a=n(6540),o=n(6519),s=n(1195),l=n(1826),d=n(7190),u=n(2363),c=n(4848);const p=a.forwardRef((({bsPrefix:e,placement:t="right",className:n,style:r,children:a,body:s,arrowProps:p,hasDoneInitialMeasure:h,popper:f,show:g,...y},m)=>{const v=(0,o.oU)(e,"popover"),C=(0,o.Wz)(),[b]=(null==t?void 0:t.split("-"))||[],S=(0,d.G)(b,C);let E=r;return g&&!h&&(E={...r,...(0,u.A)(null==f?void 0:f.strategy)}),(0,c.jsxs)("div",{ref:m,role:"tooltip",style:E,"x-placement":b,className:i()(n,v,b&&`bs-popover-${S}`),...y,children:[(0,c.jsx)("div",{className:"popover-arrow",...p}),s?(0,c.jsx)(l.A,{children:a}):a]})})),h=Object.assign(p,{Header:s.A,Body:l.A,POPPER_OFFSET:[0,8]})},1826:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var r=n(6540),i=n(6942),a=n.n(i),o=n(6519),s=n(4848);const l=r.forwardRef((({className:e,bsPrefix:t,as:n="div",...r},i)=>(t=(0,o.oU)(t,"popover-body"),(0,s.jsx)(n,{ref:i,className:a()(e,t),...r}))));l.displayName="PopoverBody";const d=l},1195:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var r=n(6540),i=n(6942),a=n.n(i),o=n(6519),s=n(4848);const l=r.forwardRef((({className:e,bsPrefix:t,as:n="div",...r},i)=>(t=(0,o.oU)(t,"popover-header"),(0,s.jsx)(n,{ref:i,className:a()(e,t),...r}))));l.displayName="PopoverHeader";const d=l},6519:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>f,Jm:()=>p,Jy:()=>a,Wz:()=>h,ff:()=>o,gy:()=>c,oU:()=>u});var r=n(6540),i=n(4848);const a=["xxl","xl","lg","md","sm","xs"],o="xs",s=r.createContext({prefixes:{},breakpoints:a,minBreakpoint:o}),{Consumer:l,Provider:d}=s;function u(e,t){const{prefixes:n}=(0,r.useContext)(s);return e||n[t]||t}function c(){const{breakpoints:e}=(0,r.useContext)(s);return e}function p(){const{minBreakpoint:e}=(0,r.useContext)(s);return e}function h(){const{dir:e}=(0,r.useContext)(s);return"rtl"===e}const f=function({prefixes:e={},breakpoints:t=a,minBreakpoint:n=o,dir:s,children:l}){const u=(0,r.useMemo)((()=>({prefixes:{...e},breakpoints:t,minBreakpoint:n,dir:s})),[e,t,n,s]);return(0,i.jsx)(d,{value:u,children:l})}},3524:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(6942),i=n.n(r),a=n(6540),o=n(6519),s=n(7190),l=n(2363),d=n(4848);const u=a.forwardRef((({bsPrefix:e,placement:t="right",className:n,style:r,children:a,arrowProps:u,hasDoneInitialMeasure:c,popper:p,show:h,...f},g)=>{e=(0,o.oU)(e,"tooltip");const y=(0,o.Wz)(),[m]=(null==t?void 0:t.split("-"))||[],v=(0,s.G)(m,y);let C=r;return h&&!c&&(C={...r,...(0,l.A)(null==p?void 0:p.strategy)}),(0,d.jsxs)("div",{ref:g,style:C,role:"tooltip","x-placement":m,className:i()(n,e,`bs-tooltip-${v}`),...f,children:[(0,d.jsx)("div",{className:"tooltip-arrow",...u}),(0,d.jsx)("div",{className:`${e}-inner`,children:a})]})}));u.displayName="Tooltip";const c=Object.assign(u,{TOOLTIP_OFFSET:[0,6]})},8073:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var r=n(6540),i=n(5067),a=n(3804),o=n(9185),s=n(4848);const l=r.forwardRef((({onEnter:e,onEntering:t,onEntered:n,onExit:l,onExiting:d,onExited:u,addEndListener:c,children:p,childRef:h,...f},g)=>{const y=(0,r.useRef)(null),m=(0,a.A)(y,h),v=e=>{m((0,o.A)(e))},C=e=>t=>{e&&y.current&&e(y.current,t)},b=(0,r.useCallback)(C(e),[e]),S=(0,r.useCallback)(C(t),[t]),E=(0,r.useCallback)(C(n),[n]),w=(0,r.useCallback)(C(l),[l]),_=(0,r.useCallback)(C(d),[d]),P=(0,r.useCallback)(C(u),[u]),N=(0,r.useCallback)(C(c),[c]);return(0,s.jsx)(i.Ay,{ref:g,...f,onEnter:b,onEntered:E,onEntering:S,onExit:w,onExited:P,onExiting:_,addEndListener:N,nodeRef:y,children:"function"==typeof p?(e,t)=>p(e,{...t,ref:v}):r.cloneElement(p,{ref:v})})}))},2363:(e,t,n)=>{"use strict";function r(e="absolute"){return{position:e,top:"0",left:"0",opacity:"0",pointerEvents:"none"}}n.d(t,{A:()=>r})},7190:(e,t,n)=>{"use strict";n.d(t,{G:()=>i});var r=n(6540);r.Component;function i(e,t){let n=e;return"left"===e?n=t?"end":"start":"right"===e&&(n=t?"start":"end"),n}},8576:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Accordion:()=>M,AccordionBody:()=>I,AccordionButton:()=>x,AccordionCollapse:()=>w,AccordionContext:()=>S,AccordionHeader:()=>D,AccordionItem:()=>R,Alert:()=>de,AlertHeading:()=>B,AlertLink:()=>te,Anchor:()=>ue,Badge:()=>pe,Breadcrumb:()=>ye,BreadcrumbItem:()=>fe,Button:()=>ve,ButtonGroup:()=>be,ButtonToolbar:()=>Ee,Card:()=>Ye,CardBody:()=>_e,CardFooter:()=>Ne,CardGroup:()=>Ke,CardHeader:()=>xe,CardImg:()=>De,CardImgOverlay:()=>Re,CardLink:()=>Me,CardSubtitle:()=>Le,CardText:()=>Be,CardTitle:()=>je,Carousel:()=>it,CarouselCaption:()=>Ve,CarouselItem:()=>et,CloseButton:()=>se,Col:()=>st,Collapse:()=>v,Container:()=>dt,Dropdown:()=>Nn,DropdownButton:()=>Tn,DropdownDivider:()=>an,DropdownHeader:()=>sn,DropdownItem:()=>dn,DropdownItemText:()=>cn,DropdownMenu:()=>En,DropdownToggle:()=>_n,Fade:()=>ne.A,Figure:()=>Gn,FigureCaption:()=>Hn,FigureImage:()=>Mn,FloatingLabel:()=>fr,Form:()=>mr,FormCheck:()=>Qn,FormControl:()=>Vn,FormFloating:()=>er,FormGroup:()=>nr,FormLabel:()=>ir,FormSelect:()=>lr,FormText:()=>ur,Image:()=>Rn,InputGroup:()=>Sr,ListGroup:()=>Fr,ListGroupItem:()=>Or,Modal:()=>ki,ModalBody:()=>pi,ModalDialog:()=>gi,ModalFooter:()=>mi,ModalHeader:()=>Si,ModalTitle:()=>_i,Nav:()=>Ri,NavDropdown:()=>pa,NavItem:()=>xi,NavLink:()=>Di,Navbar:()=>ua,NavbarBrand:()=>Mi,NavbarCollapse:()=>Hi,NavbarOffcanvas:()=>oa,NavbarText:()=>la,NavbarToggle:()=>Gi,Offcanvas:()=>ia,OffcanvasBody:()=>Yi,OffcanvasHeader:()=>Xi,OffcanvasTitle:()=>ea,OffcanvasToggling:()=>Ji,Overlay:()=>ha.A,OverlayTrigger:()=>fa.default,PageItem:()=>ya,Pagination:()=>_a,Placeholder:()=>Aa,PlaceholderButton:()=>Ia,Popover:()=>xa.A,PopoverBody:()=>Ta.A,PopoverHeader:()=>Da.A,ProgressBar:()=>Ua,Ratio:()=>Ha,Row:()=>Ga,SSRProvider:()=>Ya,Spinner:()=>Wa,SplitButton:()=>$a,Stack:()=>Ja,Tab:()=>go,TabContainer:()=>so,TabContent:()=>uo,TabPane:()=>po,Table:()=>mo,Tabs:()=>So,ThemeProvider:()=>s.Ay,Toast:()=>To,ToastBody:()=>Ao,ToastContainer:()=>Ro,ToastHeader:()=>Io,ToggleButton:()=>Uo,ToggleButtonGroup:()=>Lo,Tooltip:()=>Go.default,useAccordionButton:()=>k});var r=n(6942),i=n.n(r),a=n(6540),o=n(1558),s=n(6519),l=n(2660),d=n(5067),u=n(923);const c=function(...e){return e.filter((e=>null!=e)).reduce(((e,t)=>{if("function"!=typeof t)throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return null===e?t:function(...n){e.apply(this,n),t.apply(this,n)}}),null)};var p=n(5258),h=n(8073),f=n(4848);const g={height:["marginTop","marginBottom"],width:["marginLeft","marginRight"]};function y(e,t){const n=t[`offset${e[0].toUpperCase()}${e.slice(1)}`],r=g[e];return n+parseInt((0,l.A)(t,r[0]),10)+parseInt((0,l.A)(t,r[1]),10)}const m={[d.kp]:"collapse",[d.ze]:"collapsing",[d.ns]:"collapsing",[d._K]:"collapse show"},v=a.forwardRef((({onEnter:e,onEntering:t,onEntered:n,onExit:r,onExiting:o,className:s,children:l,dimension:d="height",in:g=!1,timeout:v=300,mountOnEnter:C=!1,unmountOnExit:b=!1,appear:S=!1,getDimensionValue:E=y,...w},_)=>{const P="function"==typeof d?d():d,N=(0,a.useMemo)((()=>c((e=>{e.style[P]="0"}),e)),[P,e]),I=(0,a.useMemo)((()=>c((e=>{const t=`scroll${P[0].toUpperCase()}${P.slice(1)}`;e.style[P]=`${e[t]}px`}),t)),[P,t]),k=(0,a.useMemo)((()=>c((e=>{e.style[P]=null}),n)),[P,n]),A=(0,a.useMemo)((()=>c((e=>{e.style[P]=`${E(P,e)}px`,(0,p.A)(e)}),r)),[r,E,P]),x=(0,a.useMemo)((()=>c((e=>{e.style[P]=null}),o)),[P,o]);return(0,f.jsx)(h.A,{ref:_,addEndListener:u.A,...w,"aria-expanded":w.role?g:null,onEnter:N,onEntering:I,onEntered:k,onExit:A,onExiting:x,childRef:l.ref,in:g,timeout:v,mountOnEnter:C,unmountOnExit:b,appear:S,children:(e,t)=>a.cloneElement(l,{...t,className:i()(s,l.props.className,m[e],"width"===P&&"collapse-horizontal")})})}));function C(e,t){return Array.isArray(e)?e.includes(t):e===t}const b=a.createContext({});b.displayName="AccordionContext";const S=b,E=a.forwardRef((({as:e="div",bsPrefix:t,className:n,children:r,eventKey:o,...l},d)=>{const{activeEventKey:u}=(0,a.useContext)(S);return t=(0,s.oU)(t,"accordion-collapse"),(0,f.jsx)(v,{ref:d,in:C(u,o),...l,className:i()(n,t),children:(0,f.jsx)(e,{children:a.Children.only(r)})})}));E.displayName="AccordionCollapse";const w=E,_=a.createContext({eventKey:""});_.displayName="AccordionItemContext";const P=_,N=a.forwardRef((({as:e="div",bsPrefix:t,className:n,onEnter:r,onEntering:o,onEntered:l,onExit:d,onExiting:u,onExited:c,...p},h)=>{t=(0,s.oU)(t,"accordion-body");const{eventKey:g}=(0,a.useContext)(P);return(0,f.jsx)(w,{eventKey:g,onEnter:r,onEntering:o,onEntered:l,onExit:d,onExiting:u,onExited:c,children:(0,f.jsx)(e,{ref:h,...p,className:i()(n,t)})})}));N.displayName="AccordionBody";const I=N;function k(e,t){const{activeEventKey:n,onSelect:r,alwaysOpen:i}=(0,a.useContext)(S);return a=>{let o=e===n?null:e;i&&(o=Array.isArray(n)?n.includes(e)?n.filter((t=>t!==e)):[...n,e]:[e]),null==r||r(o,a),null==t||t(a)}}const A=a.forwardRef((({as:e="button",bsPrefix:t,className:n,onClick:r,...o},l)=>{t=(0,s.oU)(t,"accordion-button");const{eventKey:d}=(0,a.useContext)(P),u=k(d,r),{activeEventKey:c}=(0,a.useContext)(S);return"button"===e&&(o.type="button"),(0,f.jsx)(e,{ref:l,onClick:u,...o,"aria-expanded":Array.isArray(c)?c.includes(d):d===c,className:i()(n,t,!C(c,d)&&"collapsed")})}));A.displayName="AccordionButton";const x=A,T=a.forwardRef((({as:e="h2",bsPrefix:t,className:n,children:r,onClick:a,...o},l)=>(t=(0,s.oU)(t,"accordion-header"),(0,f.jsx)(e,{ref:l,...o,className:i()(n,t),children:(0,f.jsx)(x,{onClick:a,children:r})}))));T.displayName="AccordionHeader";const D=T,O=a.forwardRef((({as:e="div",bsPrefix:t,className:n,eventKey:r,...o},l)=>{t=(0,s.oU)(t,"accordion-item");const d=(0,a.useMemo)((()=>({eventKey:r})),[r]);return(0,f.jsx)(P.Provider,{value:d,children:(0,f.jsx)(e,{ref:l,...o,className:i()(n,t)})})}));O.displayName="AccordionItem";const R=O,F=a.forwardRef(((e,t)=>{const{as:n="div",activeKey:r,bsPrefix:l,className:d,onSelect:u,flush:c,alwaysOpen:p,...h}=(0,o.Zw)(e,{activeKey:"onSelect"}),g=(0,s.oU)(l,"accordion"),y=(0,a.useMemo)((()=>({activeEventKey:r,onSelect:u,alwaysOpen:p})),[r,u,p]);return(0,f.jsx)(S.Provider,{value:y,children:(0,f.jsx)(n,{ref:t,...h,className:i()(d,g,c&&`${g}-flush`)})})}));F.displayName="Accordion";const M=Object.assign(F,{Button:x,Collapse:w,Item:R,Header:D,Body:I});var U=n(7895);const H=e=>a.forwardRef(((t,n)=>(0,f.jsx)("div",{...t,ref:n,className:i()(t.className,e)}))),L=H("h4");L.displayName="DivStyledAsH4";const G=a.forwardRef((({className:e,bsPrefix:t,as:n=L,...r},a)=>(t=(0,s.oU)(t,"alert-heading"),(0,f.jsx)(n,{ref:a,className:i()(e,t),...r}))));G.displayName="AlertHeading";const B=G;var W=n(1244),z=n(3713);var j=n(8880);function $(e){const t=(0,a.useRef)(null);return(0,a.useEffect)((()=>{t.current=e})),t.current}var Y=n(1706);new WeakMap;const q=["as","disabled"];function K({tagName:e,disabled:t,href:n,target:r,rel:i,role:a,onClick:o,tabIndex:s=0,type:l}){e||(e=null!=n||null!=r||null!=i?"a":"button");const d={tagName:e};if("button"===e)return[{type:l||"button",disabled:t},d];const u=r=>{(t||"a"===e&&function(e){return!e||"#"===e.trim()}(n))&&r.preventDefault(),t?r.stopPropagation():null==o||o(r)};return"a"===e&&(n||(n="#"),t&&(n=void 0)),[{role:null!=a?a:"button",disabled:void 0,tabIndex:t?void 0:s,href:n,target:"a"===e?r:void 0,"aria-disabled":t||void 0,rel:"a"===e?i:void 0,onClick:u,onKeyDown:e=>{" "===e.key&&(e.preventDefault(),u(e))}},d]}const J=a.forwardRef(((e,t)=>{let{as:n,disabled:r}=e,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,q);const[a,{tagName:o}]=K(Object.assign({tagName:n,disabled:r},i));return(0,f.jsx)(o,Object.assign({},i,a,{ref:t}))}));J.displayName="Button";const Q=J,X=["onKeyDown"];const V=a.forwardRef(((e,t)=>{let{onKeyDown:n}=e,r=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,X);const[i]=K(Object.assign({tagName:"a"},r)),a=(0,U.A)((e=>{i.onKeyDown(e),null==n||n(e)}));return(o=r.href)&&"#"!==o.trim()&&"button"!==r.role?(0,f.jsx)("a",Object.assign({ref:t},r,{onKeyDown:n})):(0,f.jsx)("a",Object.assign({ref:t},r,i,{onKeyDown:a}));var o}));V.displayName="Anchor";const Z=V,ee=a.forwardRef((({className:e,bsPrefix:t,as:n=Z,...r},a)=>(t=(0,s.oU)(t,"alert-link"),(0,f.jsx)(n,{ref:a,className:i()(e,t),...r}))));ee.displayName="AlertLink";const te=ee;var ne=n(7285),re=n(5556),ie=n.n(re);const ae={"aria-label":ie().string,onClick:ie().func,variant:ie().oneOf(["white"])},oe=a.forwardRef((({className:e,variant:t,"aria-label":n="Close",...r},a)=>(0,f.jsx)("button",{ref:a,type:"button",className:i()("btn-close",t&&`btn-close-${t}`,e),"aria-label":n,...r})));oe.displayName="CloseButton",oe.propTypes=ae;const se=oe,le=a.forwardRef(((e,t)=>{const{bsPrefix:n,show:r=!0,closeLabel:a="Close alert",closeVariant:l,className:d,children:u,variant:c="primary",onClose:p,dismissible:h,transition:g=ne.A,...y}=(0,o.Zw)(e,{show:"onClose"}),m=(0,s.oU)(n,"alert"),v=(0,U.A)((e=>{p&&p(!1,e)})),C=!0===g?ne.A:g,b=(0,f.jsxs)("div",{role:"alert",...C?void 0:y,ref:t,className:i()(d,m,c&&`${m}-${c}`,h&&`${m}-dismissible`),children:[h&&(0,f.jsx)(se,{onClick:v,"aria-label":a,variant:l}),u]});return C?(0,f.jsx)(C,{unmountOnExit:!0,...y,ref:void 0,in:r,children:b}):r?b:null}));le.displayName="Alert";const de=Object.assign(le,{Link:te,Heading:B}),ue=Z,ce=a.forwardRef((({bsPrefix:e,bg:t="primary",pill:n=!1,text:r,className:a,as:o="span",...l},d)=>{const u=(0,s.oU)(e,"badge");return(0,f.jsx)(o,{ref:d,...l,className:i()(a,u,n&&"rounded-pill",r&&`text-${r}`,t&&`bg-${t}`)})}));ce.displayName="Badge";const pe=ce,he=a.forwardRef((({bsPrefix:e,active:t=!1,children:n,className:r,as:a="li",linkAs:o=Z,linkProps:l={},href:d,title:u,target:c,...p},h)=>{const g=(0,s.oU)(e,"breadcrumb-item");return(0,f.jsx)(a,{ref:h,...p,className:i()(g,r,{active:t}),"aria-current":t?"page":void 0,children:t?n:(0,f.jsx)(o,{...l,href:d,title:u,target:c,children:n})})}));he.displayName="BreadcrumbItem";const fe=he,ge=a.forwardRef((({bsPrefix:e,className:t,listProps:n={},children:r,label:a="breadcrumb",as:o="nav",...l},d)=>{const u=(0,s.oU)(e,"breadcrumb");return(0,f.jsx)(o,{"aria-label":a,className:t,ref:d,...l,children:(0,f.jsx)("ol",{...n,className:i()(u,null==n?void 0:n.className),children:r})})}));ge.displayName="Breadcrumb";const ye=Object.assign(ge,{Item:fe}),me=a.forwardRef((({as:e,bsPrefix:t,variant:n="primary",size:r,active:a=!1,disabled:o=!1,className:l,...d},u)=>{const c=(0,s.oU)(t,"btn"),[p,{tagName:h}]=K({tagName:e,disabled:o,...d}),g=h;return(0,f.jsx)(g,{...p,...d,ref:u,disabled:o,className:i()(l,c,a&&"active",n&&`${c}-${n}`,r&&`${c}-${r}`,d.href&&o&&"disabled")})}));me.displayName="Button";const ve=me,Ce=a.forwardRef((({bsPrefix:e,size:t,vertical:n=!1,className:r,role:a="group",as:o="div",...l},d)=>{const u=(0,s.oU)(e,"btn-group");let c=u;return n&&(c=`${u}-vertical`),(0,f.jsx)(o,{...l,ref:d,role:a,className:i()(r,c,t&&`${u}-${t}`)})}));Ce.displayName="ButtonGroup";const be=Ce,Se=a.forwardRef((({bsPrefix:e,className:t,role:n="toolbar",...r},a)=>{const o=(0,s.oU)(e,"btn-toolbar");return(0,f.jsx)("div",{...r,ref:a,className:i()(t,o),role:n})}));Se.displayName="ButtonToolbar";const Ee=Se,we=a.forwardRef((({className:e,bsPrefix:t,as:n="div",...r},a)=>(t=(0,s.oU)(t,"card-body"),(0,f.jsx)(n,{ref:a,className:i()(e,t),...r}))));we.displayName="CardBody";const _e=we,Pe=a.forwardRef((({className:e,bsPrefix:t,as:n="div",...r},a)=>(t=(0,s.oU)(t,"card-footer"),(0,f.jsx)(n,{ref:a,className:i()(e,t),...r}))));Pe.displayName="CardFooter";const Ne=Pe,Ie=a.createContext(null);Ie.displayName="CardHeaderContext";const ke=Ie,Ae=a.forwardRef((({bsPrefix:e,className:t,as:n="div",...r},o)=>{const l=(0,s.oU)(e,"card-header"),d=(0,a.useMemo)((()=>({cardHeaderBsPrefix:l})),[l]);return(0,f.jsx)(ke.Provider,{value:d,children:(0,f.jsx)(n,{ref:o,...r,className:i()(t,l)})})}));Ae.displayName="CardHeader";const xe=Ae,Te=a.forwardRef((({bsPrefix:e,className:t,variant:n,as:r="img",...a},o)=>{const l=(0,s.oU)(e,"card-img");return(0,f.jsx)(r,{ref:o,className:i()(n?`${l}-${n}`:l,t),...a})}));Te.displayName="CardImg";const De=Te,Oe=a.forwardRef((({className:e,bsPrefix:t,as:n="div",...r},a)=>(t=(0,s.oU)(t,"card-img-overlay"),(0,f.jsx)(n,{ref:a,className:i()(e,t),...r}))));Oe.displayName="CardImgOverlay";const Re=Oe,Fe=a.forwardRef((({className:e,bsPrefix:t,as:n="a",...r},a)=>(t=(0,s.oU)(t,"card-link"),(0,f.jsx)(n,{ref:a,className:i()(e,t),...r}))));Fe.displayName="CardLink";const Me=Fe,Ue=H("h6"),He=a.forwardRef((({className:e,bsPrefix:t,as:n=Ue,...r},a)=>(t=(0,s.oU)(t,"card-subtitle"),(0,f.jsx)(n,{ref:a,className:i()(e,t),...r}))));He.displayName="CardSubtitle";const Le=He,Ge=a.forwardRef((({className:e,bsPrefix:t,as:n="p",...r},a)=>(t=(0,s.oU)(t,"card-text"),(0,f.jsx)(n,{ref:a,className:i()(e,t),...r}))));Ge.displayName="CardText";const Be=Ge,We=H("h5"),ze=a.forwardRef((({className:e,bsPrefix:t,as:n=We,...r},a)=>(t=(0,s.oU)(t,"card-title"),(0,f.jsx)(n,{ref:a,className:i()(e,t),...r}))));ze.displayName="CardTitle";const je=ze,$e=a.forwardRef((({bsPrefix:e,className:t,bg:n,text:r,border:a,body:o=!1,children:l,as:d="div",...u},c)=>{const p=(0,s.oU)(e,"card");return(0,f.jsx)(d,{ref:c,...u,className:i()(t,p,n&&`bg-${n}`,r&&`text-${r}`,a&&`border-${a}`),children:o?(0,f.jsx)(_e,{children:l}):l})}));$e.displayName="Card";const Ye=Object.assign($e,{Img:De,Title:je,Subtitle:Le,Body:_e,Link:Me,Text:Be,Header:xe,Footer:Ne,ImgOverlay:Re}),qe=a.forwardRef((({className:e,bsPrefix:t,as:n="div",...r},a)=>(t=(0,s.oU)(t,"card-group"),(0,f.jsx)(n,{ref:a,className:i()(e,t),...r}))));qe.displayName="CardGroup";const Ke=qe;const Je=function(e,t){const n=(0,a.useRef)(!0);(0,a.useEffect)((()=>{if(!n.current)return e();n.current=!1}),t)};var Qe=n(9567);const Xe=a.forwardRef((({className:e,bsPrefix:t,as:n="div",...r},a)=>(t=(0,s.oU)(t,"carousel-caption"),(0,f.jsx)(n,{ref:a,className:i()(e,t),...r}))));Xe.displayName="CarouselCaption";const Ve=Xe,Ze=a.forwardRef((({as:e="div",bsPrefix:t,className:n,...r},a)=>{const o=i()(n,(0,s.oU)(t,"carousel-item"));return(0,f.jsx)(e,{ref:a,...r,className:o})}));Ze.displayName="CarouselItem";const et=Ze;function tt(e,t){let n=0;return a.Children.map(e,(e=>a.isValidElement(e)?t(e,n++):e))}function nt(e,t){let n=0;a.Children.forEach(e,(e=>{a.isValidElement(e)&&t(e,n++)}))}const rt=a.forwardRef((({defaultActiveIndex:e=0,...t},n)=>{const{as:r="div",bsPrefix:l,slide:d=!0,fade:c=!1,controls:g=!0,indicators:y=!0,indicatorLabels:m=[],activeIndex:v,onSelect:C,onSlide:b,onSlid:S,interval:E=5e3,keyboard:w=!0,onKeyDown:_,pause:P="hover",onMouseOver:N,onMouseOut:I,wrap:k=!0,touch:A=!0,onTouchStart:x,onTouchMove:T,onTouchEnd:D,prevIcon:O=(0,f.jsx)("span",{"aria-hidden":"true",className:"carousel-control-prev-icon"}),prevLabel:R="Previous",nextIcon:F=(0,f.jsx)("span",{"aria-hidden":"true",className:"carousel-control-next-icon"}),nextLabel:M="Next",variant:H,className:L,children:G,...B}=(0,o.Zw)({defaultActiveIndex:e,...t},{activeIndex:"onSelect"}),W=(0,s.oU)(l,"carousel"),j=(0,s.Wz)(),$=(0,a.useRef)(null),[Y,q]=(0,a.useState)("next"),[K,J]=(0,a.useState)(!1),[Q,X]=(0,a.useState)(!1),[V,ee]=(0,a.useState)(v||0);(0,a.useEffect)((()=>{Q||v===V||($.current?q($.current):q((v||0)>V?"next":"prev"),d&&X(!0),ee(v||0))}),[v,Q,V,d]),(0,a.useEffect)((()=>{$.current&&($.current=null)}));let te,ne=0;nt(G,((e,t)=>{++ne,t===v&&(te=e.props.interval)}));const re=(0,z.A)(te),ie=(0,a.useCallback)((e=>{if(Q)return;let t=V-1;if(t<0){if(!k)return;t=ne-1}$.current="prev",null==C||C(t,e)}),[Q,V,C,k,ne]),ae=(0,U.A)((e=>{if(Q)return;let t=V+1;if(t>=ne){if(!k)return;t=0}$.current="next",null==C||C(t,e)})),oe=(0,a.useRef)();(0,a.useImperativeHandle)(n,(()=>({element:oe.current,prev:ie,next:ae})));const se=(0,U.A)((()=>{!document.hidden&&function(e){if(!(e&&e.style&&e.parentNode&&e.parentNode.style))return!1;const t=getComputedStyle(e);return"none"!==t.display&&"hidden"!==t.visibility&&"none"!==getComputedStyle(e.parentNode).display}(oe.current)&&(j?ie():ae())})),le="next"===Y?"start":"end";Je((()=>{d||(null==b||b(V,le),null==S||S(V,le))}),[V]);const de=`${W}-item-${Y}`,ue=`${W}-item-${le}`,ce=(0,a.useCallback)((e=>{(0,p.A)(e),null==b||b(V,le)}),[b,V,le]),pe=(0,a.useCallback)((()=>{X(!1),null==S||S(V,le)}),[S,V,le]),he=(0,a.useCallback)((e=>{if(w&&!/input|textarea/i.test(e.target.tagName))switch(e.key){case"ArrowLeft":return e.preventDefault(),void(j?ae(e):ie(e));case"ArrowRight":return e.preventDefault(),void(j?ie(e):ae(e))}null==_||_(e)}),[w,_,ie,ae,j]),fe=(0,a.useCallback)((e=>{"hover"===P&&J(!0),null==N||N(e)}),[P,N]),ge=(0,a.useCallback)((e=>{J(!1),null==I||I(e)}),[I]),ye=(0,a.useRef)(0),me=(0,a.useRef)(0),ve=(0,Qe.A)(),Ce=(0,a.useCallback)((e=>{ye.current=e.touches[0].clientX,me.current=0,"hover"===P&&J(!0),null==x||x(e)}),[P,x]),be=(0,a.useCallback)((e=>{e.touches&&e.touches.length>1?me.current=0:me.current=e.touches[0].clientX-ye.current,null==T||T(e)}),[T]),Se=(0,a.useCallback)((e=>{if(A){const t=me.current;Math.abs(t)>40&&(t>0?ie(e):ae(e))}"hover"===P&&ve.set((()=>{J(!1)}),E||void 0),null==D||D(e)}),[A,P,ie,ae,ve,E,D]),Ee=null!=E&&!K&&!Q,we=(0,a.useRef)();(0,a.useEffect)((()=>{var e,t;if(!Ee)return;const n=j?ie:ae;return we.current=window.setInterval(document.visibilityState?se:n,null!=(e=null!=(t=re.current)?t:E)?e:void 0),()=>{null!==we.current&&clearInterval(we.current)}}),[Ee,ie,ae,re,E,se,j]);const _e=(0,a.useMemo)((()=>y&&Array.from({length:ne},((e,t)=>e=>{null==C||C(t,e)}))),[y,ne,C]);return(0,f.jsxs)(r,{ref:oe,...B,onKeyDown:he,onMouseOver:fe,onMouseOut:ge,onTouchStart:Ce,onTouchMove:be,onTouchEnd:Se,className:i()(L,W,d&&"slide",c&&`${W}-fade`,H&&`${W}-${H}`),children:[y&&(0,f.jsx)("div",{className:`${W}-indicators`,children:tt(G,((e,t)=>(0,f.jsx)("button",{type:"button","data-bs-target":"","aria-label":null!=m&&m.length?m[t]:`Slide ${t+1}`,className:t===V?"active":void 0,onClick:_e?_e[t]:void 0,"aria-current":t===V},t)))}),(0,f.jsx)("div",{className:`${W}-inner`,children:tt(G,((e,t)=>{const n=t===V;return d?(0,f.jsx)(h.A,{in:n,onEnter:n?ce:void 0,onEntered:n?pe:void 0,addEndListener:u.A,children:(t,r)=>a.cloneElement(e,{...r,className:i()(e.props.className,n&&"entered"!==t&&de,("entered"===t||"exiting"===t)&&"active",("entering"===t||"exiting"===t)&&ue)})}):a.cloneElement(e,{className:i()(e.props.className,n&&"active")})}))}),g&&(0,f.jsxs)(f.Fragment,{children:[(k||0!==v)&&(0,f.jsxs)(Z,{className:`${W}-control-prev`,onClick:ie,children:[O,R&&(0,f.jsx)("span",{className:"visually-hidden",children:R})]}),(k||v!==ne-1)&&(0,f.jsxs)(Z,{className:`${W}-control-next`,onClick:ae,children:[F,M&&(0,f.jsx)("span",{className:"visually-hidden",children:M})]})]})]})}));rt.displayName="Carousel";const it=Object.assign(rt,{Caption:Ve,Item:et});function at({as:e,bsPrefix:t,className:n,...r}){t=(0,s.oU)(t,"col");const a=(0,s.gy)(),o=(0,s.Jm)(),l=[],d=[];return a.forEach((e=>{const n=r[e];let i,a,s;delete r[e],"object"==typeof n&&null!=n?({span:i,offset:a,order:s}=n):i=n;const u=e!==o?`-${e}`:"";i&&l.push(!0===i?`${t}${u}`:`${t}${u}-${i}`),null!=s&&d.push(`order${u}-${s}`),null!=a&&d.push(`offset${u}-${a}`)})),[{...r,className:i()(n,...l,...d)},{as:e,bsPrefix:t,spans:l}]}const ot=a.forwardRef(((e,t)=>{const[{className:n,...r},{as:a="div",bsPrefix:o,spans:s}]=at(e);return(0,f.jsx)(a,{...r,ref:t,className:i()(n,!s.length&&o)})}));ot.displayName="Col";const st=ot,lt=a.forwardRef((({bsPrefix:e,fluid:t=!1,as:n="div",className:r,...a},o)=>{const l=(0,s.oU)(e,"container"),d="string"==typeof t?`-${t}`:"-fluid";return(0,f.jsx)(n,{ref:o,...a,className:i()(r,t?`${l}${d}`:l)})}));lt.displayName="Container";const dt=lt;var ut=Function.prototype.bind.call(Function.prototype.call,[].slice);function ct(e,t){return ut(e.querySelectorAll(t))}var pt=n(8394);function ht(e,t,n){const r=(0,a.useRef)(void 0!==e),[i,o]=(0,a.useState)(t),s=void 0!==e,l=r.current;return r.current=s,!s&&l&&i!==t&&o(t),[s?e:i,(0,a.useCallback)(((...e)=>{const[t,...r]=e;let i=null==n?void 0:n(t,...r);return o(t),i}),[n])]}function ft(){const[,e]=(0,a.useReducer)((e=>!e),!1);return e}const gt=a.createContext(null);var yt=n(2955),mt=n(1289),vt=n(8415);const Ct=["children","usePopper"];const bt=()=>{};function St(e={}){const t=(0,a.useContext)(gt),[n,r]=(0,W.A)(),i=(0,a.useRef)(!1),{flip:o,offset:s,rootCloseEvent:l,fixed:d=!1,placement:u,popperConfig:c={},enableEventListeners:p=!0,usePopper:h=!!t}=e,f=null==(null==t?void 0:t.show)?!!e.show:t.show;f&&!i.current&&(i.current=!0);const{placement:g,setMenu:y,menuElement:m,toggleElement:v}=t||{},C=(0,yt.A)(v,m,(0,vt.Ay)({placement:u||g||"bottom-start",enabled:h,enableEvents:null==p?f:p,offset:s,flip:o,fixed:d,arrowElement:n,popperConfig:c})),b=Object.assign({ref:y||bt,"aria-labelledby":null==v?void 0:v.id},C.attributes.popper,{style:C.styles.popper}),S={show:f,placement:g,hasShown:i.current,toggle:null==t?void 0:t.toggle,popper:h?C:null,arrowProps:h?Object.assign({ref:r},C.attributes.arrow,{style:C.styles.arrow}):{}};return(0,mt.A)(m,(e=>{null==t||t.toggle(!1,e)}),{clickTrigger:l,disabled:!f}),[b,S]}function Et(e){let{children:t,usePopper:n=!0}=e,r=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,Ct);const[i,a]=St(Object.assign({},r,{usePopper:n}));return(0,f.jsx)(f.Fragment,{children:t(i,a)})}Et.displayName="DropdownMenu";const wt=Et,_t={prefix:String(Math.round(1e10*Math.random())),current:0},Pt=a.createContext(_t),Nt=a.createContext(!1);function It(e){let t=(0,a.useContext)(Pt),n=Tt(t===_t),[r,i]=(0,a.useState)(!0),o=(0,a.useMemo)((()=>({prefix:t===_t?"":`${t.prefix}-${n}`,current:0})),[t,n]);return"undefined"!=typeof document&&(0,a.useLayoutEffect)((()=>{i(!1)}),[]),a.createElement(Pt.Provider,{value:o},a.createElement(Nt.Provider,{value:r},e.children))}let kt=!1;let At=Boolean("undefined"!=typeof window&&window.document&&window.document.createElement),xt=new WeakMap;function Tt(e=!1){let t=(0,a.useContext)(Pt),n=(0,a.useRef)(null);if(null===n.current&&!e){var r,i;let e=null===(i=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED)||void 0===i||null===(r=i.ReactCurrentOwner)||void 0===r?void 0:r.current;if(e){let n=xt.get(e);null==n?xt.set(e,{id:t.current,state:e.memoizedState}):e.memoizedState!==n.state&&(t.current=n.id,xt.delete(e))}n.current=++t.current}return n.current}const Dt="function"==typeof a.useId?function(e){let t=a.useId(),[n]=(0,a.useState)("function"==typeof a.useSyncExternalStore?a.useSyncExternalStore(Ft,Ot,Rt):(0,a.useContext)(Nt)),r=n?"react-aria":`react-aria${_t.prefix}`;return e||`${r}-${t}`}:function(e){let t=(0,a.useContext)(Pt);t!==_t||At||console.warn("When server rendering, you must wrap your application in an <SSRProvider> to ensure consistent ids are generated between the client and server.");let n=Tt(!!e),r=`react-aria${t.prefix}`;return e||`${r}-${n}`};function Ot(){return!1}function Rt(){return!0}function Ft(e){return()=>{}}const Mt=e=>{var t;return"menu"===(null==(t=e.getAttribute("role"))?void 0:t.toLowerCase())},Ut=()=>{};function Ht(){const e=Dt(),{show:t=!1,toggle:n=Ut,setToggle:r,menuElement:i}=(0,a.useContext)(gt)||{},o=(0,a.useCallback)((e=>{n(!t,e)}),[t,n]),s={id:e,ref:r||Ut,onClick:o,"aria-expanded":!!t};return i&&Mt(i)&&(s["aria-haspopup"]=!0),[s,{show:t,toggle:n}]}function Lt({children:e}){const[t,n]=Ht();return(0,f.jsx)(f.Fragment,{children:e(t,n)})}Lt.displayName="DropdownToggle";const Gt=Lt,Bt=(e,t=null)=>null!=e?String(e):t||null,Wt=a.createContext(null),zt=a.createContext(null);zt.displayName="NavContext";const jt=zt,$t="data-rr-ui-";function Yt(e){return`${$t}${e}`}const qt=["eventKey","disabled","onClick","active","as"];function Kt({key:e,href:t,active:n,disabled:r,onClick:i}){const o=(0,a.useContext)(Wt),s=(0,a.useContext)(jt),{activeKey:l}=s||{},d=Bt(e,t),u=null==n&&null!=e?Bt(l)===d:n;return[{onClick:(0,U.A)((e=>{r||(null==i||i(e),o&&!e.isPropagationStopped()&&o(d,e))})),"aria-disabled":r||void 0,"aria-selected":u,[Yt("dropdown-item")]:""},{isActive:u}]}const Jt=a.forwardRef(((e,t)=>{let{eventKey:n,disabled:r,onClick:i,active:a,as:o=Q}=e,s=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,qt);const[l]=Kt({key:n,href:s.href,disabled:r,onClick:i,active:a});return(0,f.jsx)(o,Object.assign({},s,{ref:t},l))}));Jt.displayName="DropdownItem";const Qt=Jt;var Xt=n(2810);function Vt(){const e=ft(),t=(0,a.useRef)(null),n=(0,a.useCallback)((n=>{t.current=n,e()}),[e]);return[t,n]}function Zt({defaultShow:e,show:t,onSelect:n,onToggle:r,itemSelector:i=`* [${Yt("dropdown-item")}]`,focusFirstItemOnShow:o,placement:s="bottom-start",children:l}){const d=(0,Xt.A)(),[u,c]=ht(t,e,r),[p,h]=Vt(),g=p.current,[y,m]=Vt(),v=y.current,C=$(u),b=(0,a.useRef)(null),S=(0,a.useRef)(!1),E=(0,a.useContext)(Wt),w=(0,a.useCallback)(((e,t,n=(null==t?void 0:t.type))=>{c(e,{originalEvent:t,source:n})}),[c]),_=(0,U.A)(((e,t)=>{null==n||n(e,t),w(!1,t,"select"),t.isPropagationStopped()||null==E||E(e,t)})),P=(0,a.useMemo)((()=>({toggle:w,placement:s,show:u,menuElement:g,toggleElement:v,setMenu:h,setToggle:m})),[w,s,u,g,v,h,m]);g&&C&&!u&&(S.current=g.contains(g.ownerDocument.activeElement));const N=(0,U.A)((()=>{v&&v.focus&&v.focus()})),I=(0,U.A)((()=>{const e=b.current;let t=o;if(null==t&&(t=!(!p.current||!Mt(p.current))&&"keyboard"),!1===t||"keyboard"===t&&!/^key.+$/.test(e))return;const n=ct(p.current,i)[0];n&&n.focus&&n.focus()}));(0,a.useEffect)((()=>{u?I():S.current&&(S.current=!1,N())}),[u,S,N,I]),(0,a.useEffect)((()=>{b.current=null}));const k=(e,t)=>{if(!p.current)return null;const n=ct(p.current,i);let r=n.indexOf(e)+t;return r=Math.max(0,Math.min(r,n.length)),n[r]};return function(e,t,n,r=!1){const i=(0,U.A)(n);(0,a.useEffect)((()=>{const n="function"==typeof e?e():e;return n.addEventListener(t,i,r),()=>n.removeEventListener(t,i,r)}),[e])}((0,a.useCallback)((()=>d.document),[d]),"keydown",(e=>{var t,n;const{key:r}=e,i=e.target,a=null==(t=p.current)?void 0:t.contains(i),o=null==(n=y.current)?void 0:n.contains(i);if(/input|textarea/i.test(i.tagName)&&(" "===r||"Escape"!==r&&a||"Escape"===r&&"search"===i.type))return;if(!a&&!o)return;if(!("Tab"!==r||p.current&&u))return;b.current=e.type;const s={originalEvent:e,source:e.type};switch(r){case"ArrowUp":{const t=k(i,-1);return t&&t.focus&&t.focus(),void e.preventDefault()}case"ArrowDown":if(e.preventDefault(),u){const e=k(i,1);e&&e.focus&&e.focus()}else c(!0,s);return;case"Tab":(0,pt.Ay)(i.ownerDocument,"keyup",(e=>{var t;("Tab"!==e.key||e.target)&&null!=(t=p.current)&&t.contains(e.target)||c(!1,s)}),{once:!0});break;case"Escape":"Escape"===r&&(e.preventDefault(),e.stopPropagation()),c(!1,s)}})),(0,f.jsx)(Wt.Provider,{value:_,children:(0,f.jsx)(gt.Provider,{value:P,children:l})})}Zt.displayName="Dropdown",Zt.Menu=wt,Zt.Toggle=Gt,Zt.Item=Qt;const en=Zt,tn=a.createContext({});tn.displayName="DropdownContext";const nn=tn,rn=a.forwardRef((({className:e,bsPrefix:t,as:n="hr",role:r="separator",...a},o)=>(t=(0,s.oU)(t,"dropdown-divider"),(0,f.jsx)(n,{ref:o,className:i()(e,t),role:r,...a}))));rn.displayName="DropdownDivider";const an=rn,on=a.forwardRef((({className:e,bsPrefix:t,as:n="div",role:r="heading",...a},o)=>(t=(0,s.oU)(t,"dropdown-header"),(0,f.jsx)(n,{ref:o,className:i()(e,t),role:r,...a}))));on.displayName="DropdownHeader";const sn=on,ln=a.forwardRef((({bsPrefix:e,className:t,eventKey:n,disabled:r=!1,onClick:a,active:o,as:l=Z,...d},u)=>{const c=(0,s.oU)(e,"dropdown-item"),[p,h]=Kt({key:n,href:d.href,disabled:r,onClick:a,active:o});return(0,f.jsx)(l,{...d,...p,ref:u,className:i()(t,c,h.isActive&&"active",r&&"disabled")})}));ln.displayName="DropdownItem";const dn=ln,un=a.forwardRef((({className:e,bsPrefix:t,as:n="span",...r},a)=>(t=(0,s.oU)(t,"dropdown-item-text"),(0,f.jsx)(n,{ref:a,className:i()(e,t),...r}))));un.displayName="DropdownItemText";const cn=un;var pn=n(3804);n(9771);const hn=a.createContext(null);hn.displayName="InputGroupContext";const fn=hn,gn=a.createContext(null);gn.displayName="NavbarContext";const yn=gn;var mn=n(311),vn=n.n(mn);function Cn(e,t){return e}function bn(e,t,n){let r=e?n?"bottom-start":"bottom-end":n?"bottom-end":"bottom-start";return"up"===t?r=e?n?"top-start":"top-end":n?"top-end":"top-start":"end"===t?r=e?n?"left-end":"right-end":n?"left-start":"right-start":"start"===t?r=e?n?"right-end":"left-end":n?"right-start":"left-start":"down-centered"===t?r="bottom":"up-centered"===t&&(r="top"),r}const Sn=a.forwardRef((({bsPrefix:e,className:t,align:n,rootCloseEvent:r,flip:o=!0,show:l,renderOnMount:d,as:u="div",popperConfig:c,variant:p,...h},g)=>{let y=!1;const m=(0,a.useContext)(yn),v=(0,s.oU)(e,"dropdown-menu"),{align:C,drop:b,isRTL:S}=(0,a.useContext)(nn);n=n||C;const E=(0,a.useContext)(fn),w=[];if(n)if("object"==typeof n){const e=Object.keys(n);if(e.length){const t=e[0],r=n[t];y="start"===r,w.push(`${v}-${t}-${r}`)}}else"end"===n&&(y=!0);const _=bn(y,b,S),[P,{hasShown:N,popper:I,show:k,toggle:A}]=St({flip:o,rootCloseEvent:r,show:l,usePopper:!m&&0===w.length,offset:[0,2],popperConfig:c,placement:_});if(P.ref=(0,pn.A)(Cn(g),P.ref),(0,Y.A)((()=>{k&&(null==I||I.update())}),[k]),!N&&!d&&!E)return null;"string"!=typeof u&&(P.show=k,P.close=()=>null==A?void 0:A(!1),P.align=n);let x=h.style;return null!=I&&I.placement&&(x={...h.style,...P.style},h["x-placement"]=I.placement),(0,f.jsx)(u,{...h,...P,style:x,...(w.length||m)&&{"data-bs-popper":"static"},className:i()(t,v,k&&"show",y&&`${v}-end`,p&&`${v}-${p}`,...w)})}));Sn.displayName="DropdownMenu";const En=Sn,wn=a.forwardRef((({bsPrefix:e,split:t,className:n,childBsPrefix:r,as:o=ve,...l},d)=>{const u=(0,s.oU)(e,"dropdown-toggle"),c=(0,a.useContext)(gt);void 0!==r&&(l.bsPrefix=r);const[p]=Ht();return p.ref=(0,pn.A)(p.ref,Cn(d)),(0,f.jsx)(o,{className:i()(n,u,t&&`${u}-split`,(null==c?void 0:c.show)&&"show"),...p,...l})}));wn.displayName="DropdownToggle";const _n=wn,Pn=a.forwardRef(((e,t)=>{const{bsPrefix:n,drop:r="down",show:l,className:d,align:u="start",onSelect:c,onToggle:p,focusFirstItemOnShow:h,as:g="div",navbar:y,autoClose:m=!0,...v}=(0,o.Zw)(e,{show:"onToggle"}),C=(0,a.useContext)(fn),b=(0,s.oU)(n,"dropdown"),S=(0,s.Wz)(),E=(0,U.A)(((e,t)=>{var n;var r;(null==(n=t.originalEvent)||null==(n=n.target)?void 0:n.classList.contains("dropdown-toggle"))&&"mousedown"===t.source||(t.originalEvent.currentTarget!==document||"keydown"===t.source&&"Escape"!==t.originalEvent.key||(t.source="rootClose"),r=t.source,(!1===m?"click"===r:"inside"===m?"rootClose"!==r:"outside"!==m||"select"!==r)&&(null==p||p(e,t)))})),w=bn("end"===u,r,S),_=(0,a.useMemo)((()=>({align:u,drop:r,isRTL:S})),[u,r,S]),P={down:b,"down-centered":`${b}-center`,up:"dropup","up-centered":"dropup-center dropup",end:"dropend",start:"dropstart"};return(0,f.jsx)(nn.Provider,{value:_,children:(0,f.jsx)(en,{placement:w,show:l,onSelect:c,onToggle:E,focusFirstItemOnShow:h,itemSelector:`.${b}-item:not(.disabled):not(:disabled)`,children:C?v.children:(0,f.jsx)(g,{...v,ref:t,className:i()(d,l&&"show",P[r])})})})}));Pn.displayName="Dropdown";const Nn=Object.assign(Pn,{Toggle:_n,Menu:En,Item:dn,ItemText:cn,Divider:an,Header:sn}),In=ie().oneOf(["start","end"]),kn=ie().oneOfType([In,ie().shape({sm:In}),ie().shape({md:In}),ie().shape({lg:In}),ie().shape({xl:In}),ie().shape({xxl:In}),ie().object]),An={id:ie().string,href:ie().string,onClick:ie().func,title:ie().node.isRequired,disabled:ie().bool,align:kn,menuRole:ie().string,renderMenuOnMount:ie().bool,rootCloseEvent:ie().string,menuVariant:ie().oneOf(["dark"]),flip:ie().bool,bsPrefix:ie().string,variant:ie().string,size:ie().string},xn=a.forwardRef((({title:e,children:t,bsPrefix:n,rootCloseEvent:r,variant:i,size:a,menuRole:o,renderMenuOnMount:s,disabled:l,href:d,id:u,menuVariant:c,flip:p,...h},g)=>(0,f.jsxs)(Nn,{ref:g,...h,children:[(0,f.jsx)(_n,{id:u,href:d,size:a,variant:i,disabled:l,childBsPrefix:n,children:e}),(0,f.jsx)(En,{role:o,renderOnMount:s,rootCloseEvent:r,variant:c,flip:p,children:t})]})));xn.displayName="DropdownButton",xn.propTypes=An;const Tn=xn,Dn={bsPrefix:ie().string,fluid:ie().bool,rounded:ie().bool,roundedCircle:ie().bool,thumbnail:ie().bool},On=a.forwardRef((({bsPrefix:e,className:t,fluid:n=!1,rounded:r=!1,roundedCircle:a=!1,thumbnail:o=!1,...l},d)=>(e=(0,s.oU)(e,"img"),(0,f.jsx)("img",{ref:d,...l,className:i()(t,n&&`${e}-fluid`,r&&"rounded",a&&"rounded-circle",o&&`${e}-thumbnail`)}))));On.displayName="Image";const Rn=On,Fn=a.forwardRef((({className:e,fluid:t=!0,...n},r)=>(0,f.jsx)(Rn,{ref:r,...n,fluid:t,className:i()(e,"figure-img")})));Fn.displayName="FigureImage",Fn.propTypes=Dn;const Mn=Fn,Un=a.forwardRef((({className:e,bsPrefix:t,as:n="figcaption",...r},a)=>(t=(0,s.oU)(t,"figure-caption"),(0,f.jsx)(n,{ref:a,className:i()(e,t),...r}))));Un.displayName="FigureCaption";const Hn=Un,Ln=a.forwardRef((({className:e,bsPrefix:t,as:n="figure",...r},a)=>(t=(0,s.oU)(t,"figure"),(0,f.jsx)(n,{ref:a,className:i()(e,t),...r}))));Ln.displayName="Figure";const Gn=Object.assign(Ln,{Image:Mn,Caption:Hn}),Bn={type:ie().string,tooltip:ie().bool,as:ie().elementType},Wn=a.forwardRef((({as:e="div",className:t,type:n="valid",tooltip:r=!1,...a},o)=>(0,f.jsx)(e,{...a,ref:o,className:i()(t,`${n}-${r?"tooltip":"feedback"}`)})));Wn.displayName="Feedback",Wn.propTypes=Bn;const zn=Wn,jn=a.createContext({}),$n=a.forwardRef((({id:e,bsPrefix:t,className:n,type:r="checkbox",isValid:o=!1,isInvalid:l=!1,as:d="input",...u},c)=>{const{controlId:p}=(0,a.useContext)(jn);return t=(0,s.oU)(t,"form-check-input"),(0,f.jsx)(d,{...u,ref:c,type:r,id:e||p,className:i()(n,t,o&&"is-valid",l&&"is-invalid")})}));$n.displayName="FormCheckInput";const Yn=$n,qn=a.forwardRef((({bsPrefix:e,className:t,htmlFor:n,...r},o)=>{const{controlId:l}=(0,a.useContext)(jn);return e=(0,s.oU)(e,"form-check-label"),(0,f.jsx)("label",{...r,ref:o,htmlFor:n||l,className:i()(t,e)})}));qn.displayName="FormCheckLabel";const Kn=qn,Jn=a.forwardRef((({id:e,bsPrefix:t,bsSwitchPrefix:n,inline:r=!1,reverse:o=!1,disabled:l=!1,isValid:d=!1,isInvalid:u=!1,feedbackTooltip:c=!1,feedback:p,feedbackType:h,className:g,style:y,title:m="",type:v="checkbox",label:C,children:b,as:S="input",...E},w)=>{t=(0,s.oU)(t,"form-check"),n=(0,s.oU)(n,"form-switch");const{controlId:_}=(0,a.useContext)(jn),P=(0,a.useMemo)((()=>({controlId:e||_})),[_,e]),N=!b&&null!=C&&!1!==C||function(e,t){return a.Children.toArray(e).some((e=>a.isValidElement(e)&&e.type===t))}(b,Kn),I=(0,f.jsx)(Yn,{...E,type:"switch"===v?"checkbox":v,ref:w,isValid:d,isInvalid:u,disabled:l,as:S});return(0,f.jsx)(jn.Provider,{value:P,children:(0,f.jsx)("div",{style:y,className:i()(g,N&&t,r&&`${t}-inline`,o&&`${t}-reverse`,"switch"===v&&n),children:b||(0,f.jsxs)(f.Fragment,{children:[I,N&&(0,f.jsx)(Kn,{title:m,children:C}),p&&(0,f.jsx)(zn,{type:h,tooltip:c,children:p})]})})})}));Jn.displayName="FormCheck";const Qn=Object.assign(Jn,{Input:Yn,Label:Kn}),Xn=a.forwardRef((({bsPrefix:e,type:t,size:n,htmlSize:r,id:o,className:l,isValid:d=!1,isInvalid:u=!1,plaintext:c,readOnly:p,as:h="input",...g},y)=>{const{controlId:m}=(0,a.useContext)(jn);return e=(0,s.oU)(e,"form-control"),(0,f.jsx)(h,{...g,type:t,size:r,ref:y,readOnly:p,id:o||m,className:i()(l,c?`${e}-plaintext`:e,n&&`${e}-${n}`,"color"===t&&`${e}-color`,d&&"is-valid",u&&"is-invalid")})}));Xn.displayName="FormControl";const Vn=Object.assign(Xn,{Feedback:zn}),Zn=a.forwardRef((({className:e,bsPrefix:t,as:n="div",...r},a)=>(t=(0,s.oU)(t,"form-floating"),(0,f.jsx)(n,{ref:a,className:i()(e,t),...r}))));Zn.displayName="FormFloating";const er=Zn,tr=a.forwardRef((({controlId:e,as:t="div",...n},r)=>{const i=(0,a.useMemo)((()=>({controlId:e})),[e]);return(0,f.jsx)(jn.Provider,{value:i,children:(0,f.jsx)(t,{...n,ref:r})})}));tr.displayName="FormGroup";const nr=tr,rr=a.forwardRef((({as:e="label",bsPrefix:t,column:n=!1,visuallyHidden:r=!1,className:o,htmlFor:l,...d},u)=>{const{controlId:c}=(0,a.useContext)(jn);t=(0,s.oU)(t,"form-label");let p="col-form-label";"string"==typeof n&&(p=`${p} ${p}-${n}`);const h=i()(o,t,r&&"visually-hidden",n&&p);return l=l||c,n?(0,f.jsx)(st,{ref:u,as:"label",className:h,htmlFor:l,...d}):(0,f.jsx)(e,{ref:u,className:h,htmlFor:l,...d})}));rr.displayName="FormLabel";const ir=rr,ar=a.forwardRef((({bsPrefix:e,className:t,id:n,...r},o)=>{const{controlId:l}=(0,a.useContext)(jn);return e=(0,s.oU)(e,"form-range"),(0,f.jsx)("input",{...r,type:"range",ref:o,className:i()(t,e),id:n||l})}));ar.displayName="FormRange";const or=ar,sr=a.forwardRef((({bsPrefix:e,size:t,htmlSize:n,className:r,isValid:o=!1,isInvalid:l=!1,id:d,...u},c)=>{const{controlId:p}=(0,a.useContext)(jn);return e=(0,s.oU)(e,"form-select"),(0,f.jsx)("select",{...u,size:n,ref:c,className:i()(r,e,t&&`${e}-${t}`,o&&"is-valid",l&&"is-invalid"),id:d||p})}));sr.displayName="FormSelect";const lr=sr,dr=a.forwardRef((({bsPrefix:e,className:t,as:n="small",muted:r,...a},o)=>(e=(0,s.oU)(e,"form-text"),(0,f.jsx)(n,{...a,ref:o,className:i()(t,e,r&&"text-muted")}))));dr.displayName="FormText";const ur=dr,cr=a.forwardRef(((e,t)=>(0,f.jsx)(Qn,{...e,ref:t,type:"switch"})));cr.displayName="Switch";const pr=Object.assign(cr,{Input:Qn.Input,Label:Qn.Label}),hr=a.forwardRef((({bsPrefix:e,className:t,children:n,controlId:r,label:a,...o},l)=>(e=(0,s.oU)(e,"form-floating"),(0,f.jsxs)(nr,{ref:l,className:i()(t,e),controlId:r,...o,children:[n,(0,f.jsx)("label",{htmlFor:r,children:a})]}))));hr.displayName="FloatingLabel";const fr=hr,gr={_ref:ie().any,validated:ie().bool,as:ie().elementType},yr=a.forwardRef((({className:e,validated:t,as:n="form",...r},a)=>(0,f.jsx)(n,{...r,ref:a,className:i()(e,t&&"was-validated")})));yr.displayName="Form",yr.propTypes=gr;const mr=Object.assign(yr,{Group:nr,Control:Vn,Floating:er,Check:Qn,Switch:pr,Label:ir,Text:ur,Range:or,Select:lr,FloatingLabel:fr}),vr=a.forwardRef((({className:e,bsPrefix:t,as:n="span",...r},a)=>(t=(0,s.oU)(t,"input-group-text"),(0,f.jsx)(n,{ref:a,className:i()(e,t),...r}))));vr.displayName="InputGroupText";const Cr=vr,br=a.forwardRef((({bsPrefix:e,size:t,hasValidation:n,className:r,as:o="div",...l},d)=>{e=(0,s.oU)(e,"input-group");const u=(0,a.useMemo)((()=>({})),[]);return(0,f.jsx)(fn.Provider,{value:u,children:(0,f.jsx)(o,{ref:d,...l,className:i()(r,e,t&&`${e}-${t}`,n&&"has-validation")})})}));br.displayName="InputGroup";const Sr=Object.assign(br,{Text:Cr,Radio:e=>(0,f.jsx)(Cr,{children:(0,f.jsx)(Yn,{type:"radio",...e})}),Checkbox:e=>(0,f.jsx)(Cr,{children:(0,f.jsx)(Yn,{type:"checkbox",...e})})}),Er=a.createContext(null),wr=["as","active","eventKey"];function _r({key:e,onClick:t,active:n,id:r,role:i,disabled:o}){const s=(0,a.useContext)(Wt),l=(0,a.useContext)(jt),d=(0,a.useContext)(Er);let u=n;const c={role:i};if(l){i||"tablist"!==l.role||(c.role="tab");const t=l.getControllerId(null!=e?e:null),a=l.getControlledId(null!=e?e:null);c[Yt("event-key")]=e,c.id=t||r,u=null==n&&null!=e?l.activeKey===e:n,!u&&(null!=d&&d.unmountOnExit||null!=d&&d.mountOnEnter)||(c["aria-controls"]=a)}return"tab"===c.role&&(c["aria-selected"]=u,u||(c.tabIndex=-1),o&&(c.tabIndex=-1,c["aria-disabled"]=!0)),c.onClick=(0,U.A)((n=>{o||(null==t||t(n),null!=e&&s&&!n.isPropagationStopped()&&s(e,n))})),[c,{isActive:u}]}const Pr=a.forwardRef(((e,t)=>{let{as:n=Q,active:r,eventKey:i}=e,a=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,wr);const[o,s]=_r(Object.assign({key:Bt(i,a.href),active:r},a));return o[Yt("active")]=s.isActive,(0,f.jsx)(n,Object.assign({},a,o,{ref:t}))}));Pr.displayName="NavItem";const Nr=Pr,Ir=["as","onSelect","activeKey","role","onKeyDown"];const kr=()=>{},Ar=Yt("event-key"),xr=a.forwardRef(((e,t)=>{let{as:n="div",onSelect:r,activeKey:i,role:o,onKeyDown:s}=e,l=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,Ir);const d=ft(),u=(0,a.useRef)(!1),c=(0,a.useContext)(Wt),p=(0,a.useContext)(Er);let h,g;p&&(o=o||"tablist",i=p.activeKey,h=p.getControlledId,g=p.getControllerId);const y=(0,a.useRef)(null),m=e=>{const t=y.current;if(!t)return null;const n=ct(t,`[${Ar}]:not([aria-disabled=true])`),r=t.querySelector("[aria-selected=true]");if(!r||r!==document.activeElement)return null;const i=n.indexOf(r);if(-1===i)return null;let a=i+e;return a>=n.length&&(a=0),a<0&&(a=n.length-1),n[a]},v=(e,t)=>{null!=e&&(null==r||r(e,t),null==c||c(e,t))};(0,a.useEffect)((()=>{if(y.current&&u.current){const e=y.current.querySelector(`[${Ar}][aria-selected=true]`);null==e||e.focus()}u.current=!1}));const C=(0,pn.A)(t,y);return(0,f.jsx)(Wt.Provider,{value:v,children:(0,f.jsx)(jt.Provider,{value:{role:o,activeKey:Bt(i),getControlledId:h||kr,getControllerId:g||kr},children:(0,f.jsx)(n,Object.assign({},l,{onKeyDown:e=>{if(null==s||s(e),!p)return;let t;switch(e.key){case"ArrowLeft":case"ArrowUp":t=m(-1);break;case"ArrowRight":case"ArrowDown":t=m(1);break;default:return}var n;t&&(e.preventDefault(),v(t.dataset[(n="EventKey",`rrUi${n}`)]||null,e),u.current=!0,d())},ref:C,role:o}))})})}));xr.displayName="Nav";const Tr=Object.assign(xr,{Item:Nr}),Dr=a.forwardRef((({bsPrefix:e,active:t,disabled:n,eventKey:r,className:a,variant:o,action:l,as:d,...u},c)=>{e=(0,s.oU)(e,"list-group-item");const[p,h]=_r({key:Bt(r,u.href),active:t,...u}),g=(0,U.A)((e=>{if(n)return e.preventDefault(),void e.stopPropagation();p.onClick(e)}));n&&void 0===u.tabIndex&&(u.tabIndex=-1,u["aria-disabled"]=!0);const y=d||(l?u.href?"a":"button":"div");return(0,f.jsx)(y,{ref:c,...u,...p,onClick:g,className:i()(a,e,h.isActive&&"active",n&&"disabled",o&&`${e}-${o}`,l&&`${e}-action`)})}));Dr.displayName="ListGroupItem";const Or=Dr,Rr=a.forwardRef(((e,t)=>{const{className:n,bsPrefix:r,variant:a,horizontal:l,numbered:d,as:u="div",...c}=(0,o.Zw)(e,{activeKey:"onSelect"}),p=(0,s.oU)(r,"list-group");let h;return l&&(h=!0===l?"horizontal":`horizontal-${l}`),(0,f.jsx)(Tr,{ref:t,...c,as:u,className:i()(n,p,a&&`${p}-${a}`,h&&`${p}-${h}`,d&&`${p}-numbered`)})}));Rr.displayName="ListGroup";const Fr=Object.assign(Rr,{Item:Or});var Mr,Ur=n(7828),Hr=n(1625),Lr=n(5019);function Gr(e){if((!Mr&&0!==Mr||e)&&Ur.A){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),Mr=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return Mr}var Br=n(1577),Wr=n(5797);function zr(e){void 0===e&&(e=(0,Hr.A)());try{var t=e.activeElement;return t&&t.nodeName?t:null}catch(t){return e.body}}var jr=n(6406),$r=n(1284),Yr=n(961);const qr=Yt("modal-open");const Kr=class ModalManager{constructor({ownerDocument:e,handleContainerOverflow:t=!0,isRTL:n=!1}={}){this.handleContainerOverflow=t,this.isRTL=n,this.modals=[],this.ownerDocument=e}getScrollbarWidth(){return function(e=document){const t=e.defaultView;return Math.abs(t.innerWidth-e.documentElement.clientWidth)}(this.ownerDocument)}getElement(){return(this.ownerDocument||document).body}setModalAttributes(e){}removeModalAttributes(e){}setContainerStyle(e){const t={overflow:"hidden"},n=this.isRTL?"paddingLeft":"paddingRight",r=this.getElement();e.style={overflow:r.style.overflow,[n]:r.style[n]},e.scrollBarWidth&&(t[n]=`${parseInt((0,l.A)(r,n)||"0",10)+e.scrollBarWidth}px`),r.setAttribute(qr,""),(0,l.A)(r,t)}reset(){[...this.modals].forEach((e=>this.remove(e)))}removeContainerStyle(e){const t=this.getElement();t.removeAttribute(qr),Object.assign(t.style,e.style)}add(e){let t=this.modals.indexOf(e);return-1!==t?t:(t=this.modals.length,this.modals.push(e),this.setModalAttributes(e),0!==t||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),t)}remove(e){const t=this.modals.indexOf(e);-1!==t&&(this.modals.splice(t,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(e))}isTopModal(e){return!!this.modals.length&&this.modals[this.modals.length-1]===e}};var Jr=n(4561),Qr=n(6500),Xr=n(4024);const Vr=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","runTransition","backdropTransition","runBackdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];let Zr;function ei(e){const t=(0,Xt.A)(),n=e||function(e){return Zr||(Zr=new Kr({ownerDocument:null==e?void 0:e.document})),Zr}(t),r=(0,a.useRef)({dialog:null,backdrop:null});return Object.assign(r.current,{add:()=>n.add(r.current),remove:()=>n.remove(r.current),isTopModal:()=>n.isTopModal(r.current),setDialogRef:(0,a.useCallback)((e=>{r.current.dialog=e}),[]),setBackdropRef:(0,a.useCallback)((e=>{r.current.backdrop=e}),[])})}const ti=(0,a.forwardRef)(((e,t)=>{let{show:n=!1,role:r="dialog",className:i,style:o,children:s,backdrop:l=!0,keyboard:d=!0,onBackdropClick:u,onEscapeKeyDown:c,transition:p,runTransition:h,backdropTransition:g,runBackdropTransition:y,autoFocus:m=!0,enforceFocus:v=!0,restoreFocus:C=!0,restoreFocusOptions:b,renderDialog:S,renderBackdrop:E=e=>(0,f.jsx)("div",Object.assign({},e)),manager:w,container:_,onShow:P,onHide:N=()=>{},onExit:I,onExited:k,onExiting:A,onEnter:x,onEntering:T,onEntered:D}=e,O=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,Vr);const R=(0,Xt.A)(),F=(0,Jr.A)(_),M=ei(w),H=(0,j.A)(),L=$(n),[G,B]=(0,a.useState)(!n),W=(0,a.useRef)(null);(0,a.useImperativeHandle)(t,(()=>M),[M]),Ur.A&&!L&&n&&(W.current=zr(null==R?void 0:R.document)),n&&G&&B(!1);const z=(0,U.A)((()=>{if(M.add(),X.current=(0,$r.A)(document,"keydown",J),Q.current=(0,$r.A)(document,"focus",(()=>setTimeout(q)),!0),P&&P(),m){var e,t;const n=zr(null!=(e=null==(t=M.dialog)?void 0:t.ownerDocument)?e:null==R?void 0:R.document);M.dialog&&n&&!(0,jr.A)(M.dialog,n)&&(W.current=n,M.dialog.focus())}})),Y=(0,U.A)((()=>{var e;(M.remove(),null==X.current||X.current(),null==Q.current||Q.current(),C)&&(null==(e=W.current)||null==e.focus||e.focus(b),W.current=null)}));(0,a.useEffect)((()=>{n&&F&&z()}),[n,F,z]),(0,a.useEffect)((()=>{G&&Y()}),[G,Y]),(0,Br.A)((()=>{Y()}));const q=(0,U.A)((()=>{if(!v||!H()||!M.isTopModal())return;const e=zr(null==R?void 0:R.document);M.dialog&&e&&!(0,jr.A)(M.dialog,e)&&M.dialog.focus()})),K=(0,U.A)((e=>{e.target===e.currentTarget&&(null==u||u(e),!0===l&&N())})),J=(0,U.A)((e=>{d&&(0,Xr.v)(e)&&M.isTopModal()&&(null==c||c(e),e.defaultPrevented||N())})),Q=(0,a.useRef)(),X=(0,a.useRef)();if(!F)return null;const V=Object.assign({role:r,ref:M.setDialogRef,"aria-modal":"dialog"===r||void 0},O,{style:o,className:i,tabIndex:-1});let Z=S?S(V):(0,f.jsx)("div",Object.assign({},V,{children:a.cloneElement(s,{role:"document"})}));Z=(0,Qr.Yc)(p,h,{unmountOnExit:!0,mountOnEnter:!0,appear:!0,in:!!n,onExit:I,onExiting:A,onExited:(...e)=>{B(!0),null==k||k(...e)},onEnter:x,onEntering:T,onEntered:D,children:Z});let ee=null;return l&&(ee=E({ref:M.setBackdropRef,onClick:K}),ee=(0,Qr.Yc)(g,y,{in:!!n,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:ee})),(0,f.jsx)(f.Fragment,{children:Yr.createPortal((0,f.jsxs)(f.Fragment,{children:[ee,Z]}),F)})}));ti.displayName="Modal";const ni=Object.assign(ti,{Manager:Kr});var ri=n(922),ii=n(8995);const ai=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",oi=".sticky-top",si=".navbar-toggler";class BootstrapModalManager extends Kr{adjustAndStore(e,t,n){const r=t.style[e];t.dataset[e]=r,(0,l.A)(t,{[e]:`${parseFloat((0,l.A)(t,e))+n}px`})}restore(e,t){const n=t.dataset[e];void 0!==n&&(delete t.dataset[e],(0,l.A)(t,{[e]:n}))}setContainerStyle(e){super.setContainerStyle(e);const t=this.getElement();if((0,ri.A)(t,"modal-open"),!e.scrollBarWidth)return;const n=this.isRTL?"paddingLeft":"paddingRight",r=this.isRTL?"marginLeft":"marginRight";ct(t,ai).forEach((t=>this.adjustAndStore(n,t,e.scrollBarWidth))),ct(t,oi).forEach((t=>this.adjustAndStore(r,t,-e.scrollBarWidth))),ct(t,si).forEach((t=>this.adjustAndStore(r,t,e.scrollBarWidth)))}removeContainerStyle(e){super.removeContainerStyle(e);const t=this.getElement();(0,ii.A)(t,"modal-open");const n=this.isRTL?"paddingLeft":"paddingRight",r=this.isRTL?"marginLeft":"marginRight";ct(t,ai).forEach((e=>this.restore(n,e))),ct(t,oi).forEach((e=>this.restore(r,e))),ct(t,si).forEach((e=>this.restore(r,e)))}}let li;function di(e){return li||(li=new BootstrapModalManager(e)),li}const ui=BootstrapModalManager,ci=a.forwardRef((({className:e,bsPrefix:t,as:n="div",...r},a)=>(t=(0,s.oU)(t,"modal-body"),(0,f.jsx)(n,{ref:a,className:i()(e,t),...r}))));ci.displayName="ModalBody";const pi=ci,hi=a.createContext({onHide(){}}),fi=a.forwardRef((({bsPrefix:e,className:t,contentClassName:n,centered:r,size:a,fullscreen:o,children:l,scrollable:d,...u},c)=>{const p=`${e=(0,s.oU)(e,"modal")}-dialog`,h="string"==typeof o?`${e}-fullscreen-${o}`:`${e}-fullscreen`;return(0,f.jsx)("div",{...u,ref:c,className:i()(p,t,a&&`${e}-${a}`,r&&`${p}-centered`,d&&`${p}-scrollable`,o&&h),children:(0,f.jsx)("div",{className:i()(`${e}-content`,n),children:l})})}));fi.displayName="ModalDialog";const gi=fi,yi=a.forwardRef((({className:e,bsPrefix:t,as:n="div",...r},a)=>(t=(0,s.oU)(t,"modal-footer"),(0,f.jsx)(n,{ref:a,className:i()(e,t),...r}))));yi.displayName="ModalFooter";const mi=yi,vi=a.forwardRef((({closeLabel:e="Close",closeVariant:t,closeButton:n=!1,onHide:r,children:i,...o},s)=>{const l=(0,a.useContext)(hi),d=(0,U.A)((()=>{null==l||l.onHide(),null==r||r()}));return(0,f.jsxs)("div",{ref:s,...o,children:[i,n&&(0,f.jsx)(se,{"aria-label":e,variant:t,onClick:d})]})})),Ci=vi,bi=a.forwardRef((({bsPrefix:e,className:t,closeLabel:n="Close",closeButton:r=!1,...a},o)=>(e=(0,s.oU)(e,"modal-header"),(0,f.jsx)(Ci,{ref:o,...a,className:i()(t,e),closeLabel:n,closeButton:r}))));bi.displayName="ModalHeader";const Si=bi,Ei=H("h4"),wi=a.forwardRef((({className:e,bsPrefix:t,as:n=Ei,...r},a)=>(t=(0,s.oU)(t,"modal-title"),(0,f.jsx)(n,{ref:a,className:i()(e,t),...r}))));wi.displayName="ModalTitle";const _i=wi;function Pi(e){return(0,f.jsx)(ne.A,{...e,timeout:null})}function Ni(e){return(0,f.jsx)(ne.A,{...e,timeout:null})}const Ii=a.forwardRef((({bsPrefix:e,className:t,style:n,dialogClassName:r,contentClassName:o,children:l,dialogAs:d=gi,"data-bs-theme":u,"aria-labelledby":c,"aria-describedby":p,"aria-label":h,show:g=!1,animation:y=!0,backdrop:m=!0,keyboard:v=!0,onEscapeKeyDown:C,onShow:b,onHide:S,container:E,autoFocus:w=!0,enforceFocus:_=!0,restoreFocus:P=!0,restoreFocusOptions:N,onEntered:I,onExit:k,onExiting:A,onEnter:x,onEntering:T,onExited:D,backdropClassName:O,manager:R,...F},M)=>{const[H,L]=(0,a.useState)({}),[G,B]=(0,a.useState)(!1),z=(0,a.useRef)(!1),j=(0,a.useRef)(!1),$=(0,a.useRef)(null),[Y,q]=(0,W.A)(),K=(0,pn.A)(M,q),J=(0,U.A)(S),Q=(0,s.Wz)();e=(0,s.oU)(e,"modal");const X=(0,a.useMemo)((()=>({onHide:J})),[J]);function V(){return R||di({isRTL:Q})}function Z(e){if(!Ur.A)return;const t=V().getScrollbarWidth()>0,n=e.scrollHeight>(0,Hr.A)(e).documentElement.clientHeight;L({paddingRight:t&&!n?Gr():void 0,paddingLeft:!t&&n?Gr():void 0})}const ee=(0,U.A)((()=>{Y&&Z(Y.dialog)}));(0,Br.A)((()=>{(0,Lr.A)(window,"resize",ee),null==$.current||$.current()}));const te=()=>{z.current=!0},ne=e=>{z.current&&Y&&e.target===Y.dialog&&(j.current=!0),z.current=!1},re=()=>{B(!0),$.current=(0,Wr.A)(Y.dialog,(()=>{B(!1)}))},ie=e=>{"static"!==m?j.current||e.target!==e.currentTarget?j.current=!1:null==S||S():(e=>{e.target===e.currentTarget&&re()})(e)},ae=(0,a.useCallback)((t=>(0,f.jsx)("div",{...t,className:i()(`${e}-backdrop`,O,!y&&"show")})),[y,O,e]),oe={...n,...H};oe.display="block";return(0,f.jsx)(hi.Provider,{value:X,children:(0,f.jsx)(ni,{show:g,ref:K,backdrop:m,container:E,keyboard:!0,autoFocus:w,enforceFocus:_,restoreFocus:P,restoreFocusOptions:N,onEscapeKeyDown:e=>{v?null==C||C(e):(e.preventDefault(),"static"===m&&re())},onShow:b,onHide:S,onEnter:(e,t)=>{e&&Z(e),null==x||x(e,t)},onEntering:(e,t)=>{null==T||T(e,t),(0,pt.Ay)(window,"resize",ee)},onEntered:I,onExit:e=>{null==$.current||$.current(),null==k||k(e)},onExiting:A,onExited:e=>{e&&(e.style.display=""),null==D||D(e),(0,Lr.A)(window,"resize",ee)},manager:V(),transition:y?Pi:void 0,backdropTransition:y?Ni:void 0,renderBackdrop:ae,renderDialog:n=>(0,f.jsx)("div",{role:"dialog",...n,style:oe,className:i()(t,e,G&&`${e}-static`,!y&&"show"),onClick:m?ie:void 0,onMouseUp:ne,"data-bs-theme":u,"aria-label":h,"aria-labelledby":c,"aria-describedby":p,children:(0,f.jsx)(d,{...F,onMouseDown:te,className:r,contentClassName:o,children:l})})})})}));Ii.displayName="Modal";const ki=Object.assign(Ii,{Body:pi,Header:Si,Title:_i,Footer:mi,Dialog:gi,TRANSITION_DURATION:300,BACKDROP_TRANSITION_DURATION:150});n(2816);const Ai=a.forwardRef((({className:e,bsPrefix:t,as:n="div",...r},a)=>(t=(0,s.oU)(t,"nav-item"),(0,f.jsx)(n,{ref:a,className:i()(e,t),...r}))));Ai.displayName="NavItem";const xi=Ai,Ti=a.forwardRef((({bsPrefix:e,className:t,as:n=Z,active:r,eventKey:a,disabled:o=!1,...l},d)=>{e=(0,s.oU)(e,"nav-link");const[u,c]=_r({key:Bt(a,l.href),active:r,disabled:o,...l});return(0,f.jsx)(n,{...l,...u,ref:d,disabled:o,className:i()(t,e,o&&"disabled",c.isActive&&"active")})}));Ti.displayName="NavLink";const Di=Ti,Oi=a.forwardRef(((e,t)=>{const{as:n="div",bsPrefix:r,variant:l,fill:d=!1,justify:u=!1,navbar:c,navbarScroll:p,className:h,activeKey:g,...y}=(0,o.Zw)(e,{activeKey:"onSelect"}),m=(0,s.oU)(r,"nav");let v,C,b=!1;const S=(0,a.useContext)(yn),E=(0,a.useContext)(ke);return S?(v=S.bsPrefix,b=null==c||c):E&&({cardHeaderBsPrefix:C}=E),(0,f.jsx)(Tr,{as:n,ref:t,activeKey:g,className:i()(h,{[m]:!b,[`${v}-nav`]:b,[`${v}-nav-scroll`]:b&&p,[`${C}-${l}`]:!!C,[`${m}-${l}`]:!!l,[`${m}-fill`]:d,[`${m}-justified`]:u}),...y})}));Oi.displayName="Nav";const Ri=Object.assign(Oi,{Item:xi,Link:Di}),Fi=a.forwardRef((({bsPrefix:e,className:t,as:n,...r},a)=>{e=(0,s.oU)(e,"navbar-brand");const o=n||(r.href?"a":"span");return(0,f.jsx)(o,{...r,ref:a,className:i()(t,e)})}));Fi.displayName="NavbarBrand";const Mi=Fi,Ui=a.forwardRef((({children:e,bsPrefix:t,...n},r)=>{t=(0,s.oU)(t,"navbar-collapse");const i=(0,a.useContext)(yn);return(0,f.jsx)(v,{in:!(!i||!i.expanded),...n,children:(0,f.jsx)("div",{ref:r,className:t,children:e})})}));Ui.displayName="NavbarCollapse";const Hi=Ui,Li=a.forwardRef((({bsPrefix:e,className:t,children:n,label:r="Toggle navigation",as:o="button",onClick:l,...d},u)=>{e=(0,s.oU)(e,"navbar-toggler");const{onToggle:c,expanded:p}=(0,a.useContext)(yn)||{},h=(0,U.A)((e=>{l&&l(e),c&&c()}));return"button"===o&&(d.type="button"),(0,f.jsx)(o,{...d,ref:u,onClick:h,"aria-label":r,className:i()(t,e,!p&&"collapsed"),children:n||(0,f.jsx)("span",{className:`${e}-icon`})})}));Li.displayName="NavbarToggle";const Gi=Li,Bi=new WeakMap,Wi=(e,t)=>{if(!e||!t)return;const n=Bi.get(t)||new Map;Bi.set(t,n);let r=n.get(e);return r||(r=t.matchMedia(e),r.refCount=0,n.set(r.media,r)),r};function zi(e,t=("undefined"==typeof window?void 0:window)){const n=Wi(e,t),[r,i]=(0,a.useState)((()=>!!n&&n.matches));return(0,Y.A)((()=>{let n=Wi(e,t);if(!n)return i(!1);let r=Bi.get(t);const a=()=>{i(n.matches)};return n.refCount++,n.addListener(a),a(),()=>{n.removeListener(a),n.refCount--,n.refCount<=0&&(null==r||r.delete(n.media)),n=void 0}}),[e]),r}const ji=function(e){const t=Object.keys(e);function n(e,t){return e===t?t:e?`${e} and ${t}`:t}function r(n){const r=function(e){return t[Math.min(t.indexOf(e)+1,t.length-1)]}(n);let i=e[r];return i="number"==typeof i?i-.2+"px":`calc(${i} - 0.2px)`,`(max-width: ${i})`}return function(t,i,o){let s;return"object"==typeof t?(s=t,o=i,i=!0):(i=i||!0,s={[t]:i}),zi((0,a.useMemo)((()=>Object.entries(s).reduce(((t,[i,a])=>("up"!==a&&!0!==a||(t=n(t,function(t){let n=e[t];return"number"==typeof n&&(n=`${n}px`),`(min-width: ${n})`}(i))),"down"!==a&&!0!==a||(t=n(t,r(i))),t)),"")),[JSON.stringify(s)]),o)}}({xs:0,sm:576,md:768,lg:992,xl:1200,xxl:1400}),$i=a.forwardRef((({className:e,bsPrefix:t,as:n="div",...r},a)=>(t=(0,s.oU)(t,"offcanvas-body"),(0,f.jsx)(n,{ref:a,className:i()(e,t),...r}))));$i.displayName="OffcanvasBody";const Yi=$i,qi={[d.ns]:"show",[d._K]:"show"},Ki=a.forwardRef((({bsPrefix:e,className:t,children:n,in:r=!1,mountOnEnter:o=!1,unmountOnExit:l=!1,appear:c=!1,...p},g)=>(e=(0,s.oU)(e,"offcanvas"),(0,f.jsx)(h.A,{ref:g,addEndListener:u.A,in:r,mountOnEnter:o,unmountOnExit:l,appear:c,...p,childRef:n.ref,children:(r,o)=>a.cloneElement(n,{...o,className:i()(t,n.props.className,(r===d.ns||r===d.ze)&&`${e}-toggling`,qi[r])})}))));Ki.displayName="OffcanvasToggling";const Ji=Ki,Qi=a.forwardRef((({bsPrefix:e,className:t,closeLabel:n="Close",closeButton:r=!1,...a},o)=>(e=(0,s.oU)(e,"offcanvas-header"),(0,f.jsx)(Ci,{ref:o,...a,className:i()(t,e),closeLabel:n,closeButton:r}))));Qi.displayName="OffcanvasHeader";const Xi=Qi,Vi=H("h5"),Zi=a.forwardRef((({className:e,bsPrefix:t,as:n=Vi,...r},a)=>(t=(0,s.oU)(t,"offcanvas-title"),(0,f.jsx)(n,{ref:a,className:i()(e,t),...r}))));Zi.displayName="OffcanvasTitle";const ea=Zi;function ta(e){return(0,f.jsx)(Ji,{...e})}function na(e){return(0,f.jsx)(ne.A,{...e})}const ra=a.forwardRef((({bsPrefix:e,className:t,children:n,"aria-labelledby":r,placement:o="start",responsive:l,show:d=!1,backdrop:u=!0,keyboard:c=!0,scroll:p=!1,onEscapeKeyDown:h,onShow:g,onHide:y,container:m,autoFocus:v=!0,enforceFocus:C=!0,restoreFocus:b=!0,restoreFocusOptions:S,onEntered:E,onExit:w,onExiting:_,onEnter:P,onEntering:N,onExited:I,backdropClassName:k,manager:A,renderStaticNode:x=!1,...T},D)=>{const O=(0,a.useRef)();e=(0,s.oU)(e,"offcanvas");const{onToggle:R}=(0,a.useContext)(yn)||{},[F,M]=(0,a.useState)(!1),H=ji(l||"xs","up");(0,a.useEffect)((()=>{M(l?d&&!H:d)}),[d,l,H]);const L=(0,U.A)((()=>{null==R||R(),null==y||y()})),G=(0,a.useMemo)((()=>({onHide:L})),[L]);const B=(0,a.useCallback)((t=>(0,f.jsx)("div",{...t,className:i()(`${e}-backdrop`,k)})),[k,e]),W=a=>(0,f.jsx)("div",{...a,...T,className:i()(t,l?`${e}-${l}`:e,`${e}-${o}`),"aria-labelledby":r,children:n});return(0,f.jsxs)(f.Fragment,{children:[!F&&(l||x)&&W({}),(0,f.jsx)(hi.Provider,{value:G,children:(0,f.jsx)(ni,{show:F,ref:D,backdrop:u,container:m,keyboard:c,autoFocus:v,enforceFocus:C&&!p,restoreFocus:b,restoreFocusOptions:S,onEscapeKeyDown:h,onShow:g,onHide:L,onEnter:(e,...t)=>{e&&(e.style.visibility="visible"),null==P||P(e,...t)},onEntering:N,onEntered:E,onExit:w,onExiting:_,onExited:(e,...t)=>{e&&(e.style.visibility=""),null==I||I(...t)},manager:A||(p?(O.current||(O.current=new ui({handleContainerOverflow:!1})),O.current):di()),transition:ta,backdropTransition:na,renderBackdrop:B,renderDialog:W})})]})}));ra.displayName="Offcanvas";const ia=Object.assign(ra,{Body:Yi,Header:Xi,Title:ea}),aa=a.forwardRef(((e,t)=>{const n=(0,a.useContext)(yn);return(0,f.jsx)(ia,{ref:t,show:!(null==n||!n.expanded),...e,renderStaticNode:!0})}));aa.displayName="NavbarOffcanvas";const oa=aa,sa=a.forwardRef((({className:e,bsPrefix:t,as:n="span",...r},a)=>(t=(0,s.oU)(t,"navbar-text"),(0,f.jsx)(n,{ref:a,className:i()(e,t),...r}))));sa.displayName="NavbarText";const la=sa,da=a.forwardRef(((e,t)=>{const{bsPrefix:n,expand:r=!0,variant:l="light",bg:d,fixed:u,sticky:c,className:p,as:h="nav",expanded:g,onToggle:y,onSelect:m,collapseOnSelect:v=!1,...C}=(0,o.Zw)(e,{expanded:"onToggle"}),b=(0,s.oU)(n,"navbar"),S=(0,a.useCallback)(((...e)=>{null==m||m(...e),v&&g&&(null==y||y(!1))}),[m,v,g,y]);void 0===C.role&&"nav"!==h&&(C.role="navigation");let E=`${b}-expand`;"string"==typeof r&&(E=`${E}-${r}`);const w=(0,a.useMemo)((()=>({onToggle:()=>null==y?void 0:y(!g),bsPrefix:b,expanded:!!g,expand:r})),[b,g,r,y]);return(0,f.jsx)(yn.Provider,{value:w,children:(0,f.jsx)(Wt.Provider,{value:S,children:(0,f.jsx)(h,{ref:t,...C,className:i()(p,b,r&&E,l&&`${b}-${l}`,d&&`bg-${d}`,c&&`sticky-${c}`,u&&`fixed-${u}`)})})})}));da.displayName="Navbar";const ua=Object.assign(da,{Brand:Mi,Collapse:Hi,Offcanvas:oa,Text:la,Toggle:Gi}),ca=a.forwardRef((({id:e,title:t,children:n,bsPrefix:r,className:a,rootCloseEvent:o,menuRole:l,disabled:d,active:u,renderMenuOnMount:c,menuVariant:p,...h},g)=>{const y=(0,s.oU)(void 0,"nav-item");return(0,f.jsxs)(Nn,{ref:g,...h,className:i()(a,y),children:[(0,f.jsx)(Nn.Toggle,{id:e,eventKey:null,active:u,disabled:d,childBsPrefix:r,as:Di,children:t}),(0,f.jsx)(Nn.Menu,{role:l,renderOnMount:c,rootCloseEvent:o,variant:p,children:n})]})}));ca.displayName="NavDropdown";const pa=Object.assign(ca,{Item:Nn.Item,ItemText:Nn.ItemText,Divider:Nn.Divider,Header:Nn.Header});var ha=n(8231),fa=n(1015);const ga=a.forwardRef((({active:e=!1,disabled:t=!1,className:n,style:r,activeLabel:a="(current)",children:o,linkStyle:s,linkClassName:l,as:d=Z,...u},c)=>{const p=e||t?"span":d;return(0,f.jsx)("li",{ref:c,style:r,className:i()(n,"page-item",{active:e,disabled:t}),children:(0,f.jsxs)(p,{className:i()("page-link",l),style:s,...u,children:[o,e&&a&&(0,f.jsx)("span",{className:"visually-hidden",children:a})]})})}));ga.displayName="PageItem";const ya=ga;function ma(e,t,n=e){const r=a.forwardRef((({children:e,...r},i)=>(0,f.jsxs)(ga,{...r,ref:i,children:[(0,f.jsx)("span",{"aria-hidden":"true",children:e||t}),(0,f.jsx)("span",{className:"visually-hidden",children:n})]})));return r.displayName=e,r}const va=ma("First","«"),Ca=ma("Prev","‹","Previous"),ba=ma("Ellipsis","…","More"),Sa=ma("Next","›"),Ea=ma("Last","»"),wa=a.forwardRef((({bsPrefix:e,className:t,size:n,...r},a)=>{const o=(0,s.oU)(e,"pagination");return(0,f.jsx)("ul",{ref:a,...r,className:i()(t,o,n&&`${o}-${n}`)})}));wa.displayName="Pagination";const _a=Object.assign(wa,{First:va,Prev:Ca,Ellipsis:ba,Item:ya,Next:Sa,Last:Ea});function Pa({animation:e,bg:t,bsPrefix:n,size:r,...a}){n=(0,s.oU)(n,"placeholder");const[{className:o,...l}]=at(a);return{...l,className:i()(o,e?`${n}-${e}`:n,r&&`${n}-${r}`,t&&`bg-${t}`)}}const Na=a.forwardRef(((e,t)=>{const n=Pa(e);return(0,f.jsx)(ve,{...n,ref:t,disabled:!0,tabIndex:-1})}));Na.displayName="PlaceholderButton";const Ia=Na,ka=a.forwardRef((({as:e="span",...t},n)=>{const r=Pa(t);return(0,f.jsx)(e,{...r,ref:n})}));ka.displayName="Placeholder";const Aa=Object.assign(ka,{Button:Ia});var xa=n(8594),Ta=n(1826),Da=n(1195);const Oa=1e3;function Ra(e,t,n){const r=(e-t)/(n-t)*100;return Math.round(r*Oa)/Oa}function Fa({min:e,now:t,max:n,label:r,visuallyHidden:a,striped:o,animated:s,className:l,style:d,variant:u,bsPrefix:c,...p},h){return(0,f.jsx)("div",{ref:h,...p,role:"progressbar",className:i()(l,`${c}-bar`,{[`bg-${u}`]:u,[`${c}-bar-animated`]:s,[`${c}-bar-striped`]:s||o}),style:{width:`${Ra(t,e,n)}%`,...d},"aria-valuenow":t,"aria-valuemin":e,"aria-valuemax":n,children:a?(0,f.jsx)("span",{className:"visually-hidden",children:r}):r})}const Ma=a.forwardRef((({isChild:e=!1,...t},n)=>{const r={min:0,max:100,animated:!1,visuallyHidden:!1,striped:!1,...t};if(r.bsPrefix=(0,s.oU)(r.bsPrefix,"progress"),e)return Fa(r,n);const{min:o,now:l,max:d,label:u,visuallyHidden:c,striped:p,animated:h,bsPrefix:g,variant:y,className:m,children:v,...C}=r;return(0,f.jsx)("div",{ref:n,...C,className:i()(m,g),children:v?tt(v,(e=>(0,a.cloneElement)(e,{isChild:!0}))):Fa({min:o,now:l,max:d,label:u,visuallyHidden:c,striped:p,animated:h,bsPrefix:g,variant:y},n)})}));Ma.displayName="ProgressBar";const Ua=Ma;const Ha=a.forwardRef((({bsPrefix:e,className:t,children:n,aspectRatio:r="1x1",style:o,...l},d)=>{e=(0,s.oU)(e,"ratio");const u="number"==typeof r;return(0,f.jsx)("div",{ref:d,...l,style:{...o,...u&&{"--bs-aspect-ratio":(c=r,c<=0?"100%":c<1?100*c+"%":`${c}%`)}},className:i()(e,t,!u&&`${e}-${r}`),children:a.Children.only(n)});var c})),La=a.forwardRef((({bsPrefix:e,className:t,as:n="div",...r},a)=>{const o=(0,s.oU)(e,"row"),l=(0,s.gy)(),d=(0,s.Jm)(),u=`${o}-cols`,c=[];return l.forEach((e=>{const t=r[e];let n;delete r[e],null!=t&&"object"==typeof t?({cols:n}=t):n=t;const i=e!==d?`-${e}`:"";null!=n&&c.push(`${u}${i}-${n}`)})),(0,f.jsx)(n,{ref:a,...r,className:i()(t,o,...c)})}));La.displayName="Row";const Ga=La,Ba=a.forwardRef((({bsPrefix:e,variant:t,animation:n="border",size:r,as:a="div",className:o,...l},d)=>{const u=`${e=(0,s.oU)(e,"spinner")}-${n}`;return(0,f.jsx)(a,{ref:d,...l,className:i()(o,u,r&&`${u}-${r}`,t&&`text-${t}`)})}));Ba.displayName="Spinner";const Wa=Ba,za={id:ie().string,toggleLabel:ie().string,href:ie().string,target:ie().string,onClick:ie().func,title:ie().node.isRequired,type:ie().string,disabled:ie().bool,align:kn,menuRole:ie().string,renderMenuOnMount:ie().bool,rootCloseEvent:ie().string,flip:ie().bool,bsPrefix:ie().string,variant:ie().string,size:ie().string},ja=a.forwardRef((({id:e,bsPrefix:t,size:n,variant:r,title:i,type:a="button",toggleLabel:o="Toggle dropdown",children:s,onClick:l,href:d,target:u,menuRole:c,renderMenuOnMount:p,rootCloseEvent:h,flip:g,...y},m)=>(0,f.jsxs)(Nn,{ref:m,...y,as:be,children:[(0,f.jsx)(ve,{size:n,variant:r,disabled:y.disabled,bsPrefix:t,href:d,target:u,onClick:l,type:a,children:i}),(0,f.jsx)(Nn.Toggle,{split:!0,id:e,size:n,variant:r,disabled:y.disabled,childBsPrefix:t,children:(0,f.jsx)("span",{className:"visually-hidden",children:o})}),(0,f.jsx)(Nn.Menu,{role:c,renderOnMount:p,rootCloseEvent:h,flip:g,children:s})]})));ja.propTypes=za,ja.displayName="SplitButton";const $a=ja,Ya=function(e){return"function"==typeof a.useId?(kt||(console.warn("In React 18, SSRProvider is not necessary and is a noop. You can remove it from your app."),kt=!0),a.createElement(a.Fragment,null,e.children)):a.createElement(It,e)};function qa(e,t=s.Jy,n=s.ff){const r=[];return Object.entries(e).forEach((([e,i])=>{null!=i&&("object"==typeof i?t.forEach((t=>{const a=i[t];if(null!=a){const i=t!==n?`-${t}`:"";r.push(`${e}${i}-${a}`)}})):r.push(`${e}-${i}`))})),r}const Ka=a.forwardRef((({as:e="div",bsPrefix:t,className:n,direction:r,gap:a,...o},l)=>{t=(0,s.oU)(t,"horizontal"===r?"hstack":"vstack");const d=(0,s.gy)(),u=(0,s.Jm)();return(0,f.jsx)(e,{...o,ref:l,className:i()(n,t,...qa({gap:a},d,u))})}));Ka.displayName="Stack";const Ja=Ka;var Qa=n(8978);const Xa=["active","eventKey","mountOnEnter","transition","unmountOnExit","role","onEnter","onEntering","onEntered","onExit","onExiting","onExited"],Va=["activeKey","getControlledId","getControllerId"],Za=["as"];function eo(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}function to(e){let{active:t,eventKey:n,mountOnEnter:r,transition:i,unmountOnExit:o,role:s="tabpanel",onEnter:l,onEntering:d,onEntered:u,onExit:c,onExiting:p,onExited:h}=e,f=eo(e,Xa);const g=(0,a.useContext)(Er);if(!g)return[Object.assign({},f,{role:s}),{eventKey:n,isActive:t,mountOnEnter:r,transition:i,unmountOnExit:o,onEnter:l,onEntering:d,onEntered:u,onExit:c,onExiting:p,onExited:h}];const{activeKey:y,getControlledId:m,getControllerId:v}=g,C=eo(g,Va),b=Bt(n);return[Object.assign({},f,{role:s,id:m(n),"aria-labelledby":v(n)}),{eventKey:n,isActive:null==t&&null!=b?Bt(y)===b:t,transition:i||C.transition,mountOnEnter:null!=r?r:C.mountOnEnter,unmountOnExit:null!=o?o:C.unmountOnExit,onEnter:l,onEntering:d,onEntered:u,onExit:c,onExiting:p,onExited:h}]}const no=a.forwardRef(((e,t)=>{let{as:n="div"}=e,r=eo(e,Za);const[i,{isActive:a,onEnter:o,onEntering:s,onEntered:l,onExit:d,onExiting:u,onExited:c,mountOnEnter:p,unmountOnExit:h,transition:g=Qa.A}]=to(r);return(0,f.jsx)(Er.Provider,{value:null,children:(0,f.jsx)(Wt.Provider,{value:null,children:(0,f.jsx)(g,{in:a,onEnter:o,onEntering:s,onEntered:l,onExit:d,onExiting:u,onExited:c,mountOnEnter:p,unmountOnExit:h,children:(0,f.jsx)(n,Object.assign({},i,{ref:t,hidden:!a,"aria-hidden":!a}))})})})}));no.displayName="TabPanel";const ro=e=>{const{id:t,generateChildId:n,onSelect:r,activeKey:i,defaultActiveKey:o,transition:s,mountOnEnter:l,unmountOnExit:d,children:u}=e,[c,p]=ht(i,o,r),h=Dt(t),g=(0,a.useMemo)((()=>n||((e,t)=>h?`${h}-${t}-${e}`:null)),[h,n]),y=(0,a.useMemo)((()=>({onSelect:p,activeKey:c,transition:s,mountOnEnter:l||!1,unmountOnExit:d||!1,getControlledId:e=>g(e,"tabpane"),getControllerId:e=>g(e,"tab")})),[p,c,s,l,d,g]);return(0,f.jsx)(Er.Provider,{value:y,children:(0,f.jsx)(Wt.Provider,{value:p||null,children:u})})};ro.Panel=no;const io=ro;function ao(e){return"boolean"==typeof e?e?ne.A:Qa.A:e}const oo=({transition:e,...t})=>(0,f.jsx)(io,{...t,transition:ao(e)});oo.displayName="TabContainer";const so=oo,lo=a.forwardRef((({className:e,bsPrefix:t,as:n="div",...r},a)=>(t=(0,s.oU)(t,"tab-content"),(0,f.jsx)(n,{ref:a,className:i()(e,t),...r}))));lo.displayName="TabContent";const uo=lo,co=a.forwardRef((({bsPrefix:e,transition:t,...n},r)=>{const[{className:a,as:o="div",...l},{isActive:d,onEnter:u,onEntering:c,onEntered:p,onExit:h,onExiting:g,onExited:y,mountOnEnter:m,unmountOnExit:v,transition:C=ne.A}]=to({...n,transition:ao(t)}),b=(0,s.oU)(e,"tab-pane");return(0,f.jsx)(Er.Provider,{value:null,children:(0,f.jsx)(Wt.Provider,{value:null,children:(0,f.jsx)(C,{in:d,onEnter:u,onEntering:c,onEntered:p,onExit:h,onExiting:g,onExited:y,mountOnEnter:m,unmountOnExit:v,children:(0,f.jsx)(o,{...l,ref:r,className:i()(a,b,d&&"active")})})})})}));co.displayName="TabPane";const po=co,ho={eventKey:ie().oneOfType([ie().string,ie().number]),title:ie().node.isRequired,disabled:ie().bool,tabClassName:ie().string,tabAttrs:ie().object},fo=()=>{throw new Error("ReactBootstrap: The `Tab` component is not meant to be rendered! It's an abstract component that is only valid as a direct Child of the `Tabs` Component. For custom tabs components use TabPane and TabsContainer directly")};fo.propTypes=ho;const go=Object.assign(fo,{Container:so,Content:uo,Pane:po}),yo=a.forwardRef((({bsPrefix:e,className:t,striped:n,bordered:r,borderless:a,hover:o,size:l,variant:d,responsive:u,...c},p)=>{const h=(0,s.oU)(e,"table"),g=i()(t,h,d&&`${h}-${d}`,l&&`${h}-${l}`,n&&`${h}-${"string"==typeof n?`striped-${n}`:"striped"}`,r&&`${h}-bordered`,a&&`${h}-borderless`,o&&`${h}-hover`),y=(0,f.jsx)("table",{...c,className:g,ref:p});if(u){let e=`${h}-responsive`;return"string"==typeof u&&(e=`${e}-${u}`),(0,f.jsx)("div",{className:e,children:y})}return y})),mo=yo;function vo(e){let t;return nt(e,(e=>{null==t&&(t=e.props.eventKey)})),t}function Co(e){const{title:t,eventKey:n,disabled:r,tabClassName:i,tabAttrs:a,id:o}=e.props;return null==t?null:(0,f.jsx)(xi,{as:"li",role:"presentation",children:(0,f.jsx)(Di,{as:"button",type:"button",eventKey:n,disabled:r,id:o,className:i,...a,children:t})})}const bo=e=>{const{id:t,onSelect:n,transition:r,mountOnEnter:i=!1,unmountOnExit:a=!1,variant:s="tabs",children:l,activeKey:d=vo(l),...u}=(0,o.Zw)(e,{activeKey:"onSelect"});return(0,f.jsxs)(io,{id:t,activeKey:d,onSelect:n,transition:ao(r),mountOnEnter:i,unmountOnExit:a,children:[(0,f.jsx)(Ri,{id:t,...u,role:"tablist",as:"ul",variant:s,children:tt(l,Co)}),(0,f.jsx)(uo,{children:tt(l,(e=>{const t={...e.props};return delete t.title,delete t.disabled,delete t.tabClassName,delete t.tabAttrs,(0,f.jsx)(po,{...t})}))})]})};bo.displayName="Tabs";const So=bo,Eo={[d.ns]:"showing",[d.ze]:"showing show"},wo=a.forwardRef(((e,t)=>(0,f.jsx)(ne.A,{...e,ref:t,transitionClasses:Eo})));wo.displayName="ToastFade";const _o=wo,Po=a.createContext({onClose(){}}),No=a.forwardRef((({bsPrefix:e,closeLabel:t="Close",closeVariant:n,closeButton:r=!0,className:o,children:l,...d},u)=>{e=(0,s.oU)(e,"toast-header");const c=(0,a.useContext)(Po),p=(0,U.A)((e=>{null==c||null==c.onClose||c.onClose(e)}));return(0,f.jsxs)("div",{ref:u,...d,className:i()(e,o),children:[l,r&&(0,f.jsx)(se,{"aria-label":t,variant:n,onClick:p,"data-dismiss":"toast"})]})}));No.displayName="ToastHeader";const Io=No,ko=a.forwardRef((({className:e,bsPrefix:t,as:n="div",...r},a)=>(t=(0,s.oU)(t,"toast-body"),(0,f.jsx)(n,{ref:a,className:i()(e,t),...r}))));ko.displayName="ToastBody";const Ao=ko,xo=a.forwardRef((({bsPrefix:e,className:t,transition:n=_o,show:r=!0,animation:o=!0,delay:l=5e3,autohide:d=!1,onClose:u,onEntered:c,onExit:p,onExiting:h,onEnter:g,onEntering:y,onExited:m,bg:v,...C},b)=>{e=(0,s.oU)(e,"toast");const S=(0,a.useRef)(l),E=(0,a.useRef)(u);(0,a.useEffect)((()=>{S.current=l,E.current=u}),[l,u]);const w=(0,Qe.A)(),_=!(!d||!r),P=(0,a.useCallback)((()=>{_&&(null==E.current||E.current())}),[_]);(0,a.useEffect)((()=>{w.set(P,S.current)}),[w,P]);const N=(0,a.useMemo)((()=>({onClose:u})),[u]),I=!(!n||!o),k=(0,f.jsx)("div",{...C,ref:b,className:i()(e,t,v&&`bg-${v}`,!I&&(r?"show":"hide")),role:"alert","aria-live":"assertive","aria-atomic":"true"});return(0,f.jsx)(Po.Provider,{value:N,children:I&&n?(0,f.jsx)(n,{in:r,onEnter:g,onEntering:y,onEntered:c,onExit:p,onExiting:h,onExited:m,unmountOnExit:!0,children:k}):k})}));xo.displayName="Toast";const To=Object.assign(xo,{Body:Ao,Header:Io}),Do={"top-start":"top-0 start-0","top-center":"top-0 start-50 translate-middle-x","top-end":"top-0 end-0","middle-start":"top-50 start-0 translate-middle-y","middle-center":"top-50 start-50 translate-middle","middle-end":"top-50 end-0 translate-middle-y","bottom-start":"bottom-0 start-0","bottom-center":"bottom-0 start-50 translate-middle-x","bottom-end":"bottom-0 end-0"},Oo=a.forwardRef((({bsPrefix:e,position:t,containerPosition:n,className:r,as:a="div",...o},l)=>(e=(0,s.oU)(e,"toast-container"),(0,f.jsx)(a,{ref:l,...o,className:i()(e,t&&Do[t],n&&`position-${n}`,r)}))));Oo.displayName="ToastContainer";const Ro=Oo,Fo=()=>{},Mo=a.forwardRef((({bsPrefix:e,name:t,className:n,checked:r,type:a,onChange:o,value:l,disabled:d,id:u,inputRef:c,...p},h)=>(e=(0,s.oU)(e,"btn-check"),(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("input",{className:e,name:t,type:a,value:l,ref:c,autoComplete:"off",checked:!!r,disabled:!!d,onChange:o||Fo,id:u}),(0,f.jsx)(ve,{...p,ref:h,className:i()(n,d&&"disabled"),type:void 0,role:void 0,as:"label",htmlFor:u})]}))));Mo.displayName="ToggleButton";const Uo=Mo,Ho=a.forwardRef(((e,t)=>{const{children:n,type:r="radio",name:i,value:s,onChange:l,vertical:d=!1,...u}=(0,o.Zw)(e,{value:"onChange"}),p=()=>null==s?[]:[].concat(s);return"radio"!==r||i||vn()(!1),(0,f.jsx)(be,{...u,ref:t,vertical:d,children:tt(n,(e=>{const t=p(),{value:n,onChange:o}=e.props;return a.cloneElement(e,{type:r,name:e.name||i,checked:-1!==t.indexOf(n),onChange:c(o,(e=>((e,t)=>{if(!l)return;const n=p(),i=-1!==n.indexOf(e);"radio"!==r?l(i?n.filter((t=>t!==e)):[...n,e],t):i||l(e,t)})(n,e)))})}))})})),Lo=Object.assign(Ho,{Button:Uo});var Go=n(3524)},9185:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(961);function i(e){return e&&"setState"in e?r.findDOMNode(e):null!=e?e:null}},923:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(2660),i=n(5797);function a(e,t){const n=(0,r.A)(e,t)||"",i=-1===n.indexOf("ms")?1e3:1;return parseFloat(n)*i}function o(e,t){const n=a(e,"transitionDuration"),r=a(e,"transitionDelay"),o=(0,i.A)(e,(n=>{n.target===e&&(o(),t(n))}),n+r)}},5258:(e,t,n)=>{"use strict";function r(e){e.offsetHeight}n.d(t,{A:()=>r})},2551:(e,t,n)=>{"use strict";var r=n(6540),i=n(9982);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,s={};function l(e,t){d(e,t),d(e+"Capture",t)}function d(e,t){for(s[e]=t,e=0;e<t.length;e++)o.add(t[e])}var u=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),c=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h={},f={};function g(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){y[e]=new g(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];y[t]=new g(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){y[e]=new g(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){y[e]=new g(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){y[e]=new g(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){y[e]=new g(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){y[e]=new g(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){y[e]=new g(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){y[e]=new g(e,5,!1,e.toLowerCase(),null,!1,!1)}));var m=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function C(e,t,n,r){var i=y.hasOwnProperty(t)?y[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null==t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!c.call(f,e)||!c.call(h,e)&&(p.test(e)?f[e]=!0:(h[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(m,v);y[t]=new g(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(m,v);y[t]=new g(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(m,v);y[t]=new g(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){y[e]=new g(e,1,!1,e.toLowerCase(),null,!1,!1)})),y.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){y[e]=new g(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,S=Symbol.for("react.element"),E=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),P=Symbol.for("react.profiler"),N=Symbol.for("react.provider"),I=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),x=Symbol.for("react.suspense_list"),T=Symbol.for("react.memo"),D=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var O=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var R=Symbol.iterator;function F(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=R&&e[R]||e["@@iterator"])?e:null}var M,U=Object.assign;function H(e){if(void 0===M)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var L=!1;function G(e,t){if(!e||L)return"";L=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(e){var r=e}Reflect.construct(e,[],t)}else{try{t.call()}catch(e){r=e}e.call(t.prototype)}else{try{throw Error()}catch(e){r=e}e()}}catch(t){if(t&&r&&"string"==typeof t.stack){for(var i=t.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,s=a.length-1;1<=o&&0<=s&&i[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(i[o]!==a[s]){if(1!==o||1!==s)do{if(o--,0>--s||i[o]!==a[s]){var l="\n"+i[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=s);break}}}finally{L=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?H(e):""}function B(e){switch(e.tag){case 5:return H(e.type);case 16:return H("Lazy");case 13:return H("Suspense");case 19:return H("SuspenseList");case 0:case 2:case 15:return e=G(e.type,!1);case 11:return e=G(e.type.render,!1);case 1:return e=G(e.type,!0);default:return""}}function W(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case w:return"Fragment";case E:return"Portal";case P:return"Profiler";case _:return"StrictMode";case A:return"Suspense";case x:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case I:return(e.displayName||"Context")+".Consumer";case N:return(e._context.displayName||"Context")+".Provider";case k:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case T:return null!==(t=e.displayName||null)?t:W(e.type)||"Memo";case D:t=e._payload,e=e._init;try{return W(e(t))}catch(e){}}return null}function z(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return W(t);case 8:return t===_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t}return null}function j(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function $(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Y(e){e._valueTracker||(e._valueTracker=function(e){var t=$(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function q(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=$(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function K(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function J(e,t){var n=t.checked;return U({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Q(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=j(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&C(e,"checked",t,!1)}function V(e,t){X(e,t);var n=j(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,j(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&K(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+j(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return U({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:j(n)}}function ae(e,t){var n=j(t.value),r=j(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var de,ue,ce=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((de=de||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=de.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function pe(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var he={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fe=["Webkit","ms","Moz","O"];function ge(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||he.hasOwnProperty(e)&&he[e]?(""+t).trim():t+"px"}function ye(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ge(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(he).forEach((function(e){fe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),he[t]=he[e]}))}));var me=U({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(me[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(a(62))}}function Ce(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function Se(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ee=null,we=null,_e=null;function Pe(e){if(e=Ci(e)){if("function"!=typeof Ee)throw Error(a(280));var t=e.stateNode;t&&(t=Si(t),Ee(e.stateNode,e.type,t))}}function Ne(e){we?_e?_e.push(e):_e=[e]:we=e}function Ie(){if(we){var e=we,t=_e;if(_e=we=null,Pe(e),t)for(e=0;e<t.length;e++)Pe(t[e])}}function ke(e,t){return e(t)}function Ae(){}var xe=!1;function Te(e,t,n){if(xe)return e(t,n);xe=!0;try{return ke(e,t,n)}finally{xe=!1,(null!==we||null!==_e)&&(Ae(),Ie())}}function De(e,t){var n=e.stateNode;if(null===n)return null;var r=Si(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(a(231,t,typeof n));return n}var Oe=!1;if(u)try{var Re={};Object.defineProperty(Re,"passive",{get:function(){Oe=!0}}),window.addEventListener("test",Re,Re),window.removeEventListener("test",Re,Re)}catch(ue){Oe=!1}function Fe(e,t,n,r,i,a,o,s,l){var d=Array.prototype.slice.call(arguments,3);try{t.apply(n,d)}catch(e){this.onError(e)}}var Me=!1,Ue=null,He=!1,Le=null,Ge={onError:function(e){Me=!0,Ue=e}};function Be(e,t,n,r,i,a,o,s,l){Me=!1,Ue=null,Fe.apply(Ge,arguments)}function We(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{!!(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function ze(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function je(e){if(We(e)!==e)throw Error(a(188))}function $e(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=We(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return je(i),e;if(o===r)return je(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,l=i.child;l;){if(l===n){s=!0,n=i,r=o;break}if(l===r){s=!0,r=i,n=o;break}l=l.sibling}if(!s){for(l=o.child;l;){if(l===n){s=!0,n=o,r=i;break}if(l===r){s=!0,r=o,n=i;break}l=l.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?Ye(e):null}function Ye(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ye(e);if(null!==t)return t;e=e.sibling}return null}var qe=i.unstable_scheduleCallback,Ke=i.unstable_cancelCallback,Je=i.unstable_shouldYield,Qe=i.unstable_requestPaint,Xe=i.unstable_now,Ve=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(st(e)/lt|0)|0},st=Math.log,lt=Math.LN2;var dt=64,ut=4194304;function ct(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function pt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var s=o&~i;0!==s?r=ct(s):0!==(a&=o)&&(r=ct(a))}else 0!==(o=n&~i)?r=ct(o):0!==a&&(r=ct(a));if(0===r)return 0;if(0!==t&&t!==r&&!(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&4194240&a))return t;if(4&r&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function ht(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ft(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function gt(){var e=dt;return!(4194240&(dt<<=1))&&(dt=64),e}function yt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function mt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var Ct=0;function bt(e){return 1<(e&=-e)?4<e?268435455&e?16:536870912:4:1}var St,Et,wt,_t,Pt,Nt=!1,It=[],kt=null,At=null,xt=null,Tt=new Map,Dt=new Map,Ot=[],Rt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ft(e,t){switch(e){case"focusin":case"focusout":kt=null;break;case"dragenter":case"dragleave":At=null;break;case"mouseover":case"mouseout":xt=null;break;case"pointerover":case"pointerout":Tt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dt.delete(t.pointerId)}}function Mt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=Ci(t))&&Et(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ut(e){var t=vi(e.target);if(null!==t){var n=We(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=ze(n)))return e.blockedOn=t,void Pt(e.priority,(function(){wt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ht(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Jt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=Ci(n))&&Et(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Lt(e,t,n){Ht(e)&&n.delete(t)}function Gt(){Nt=!1,null!==kt&&Ht(kt)&&(kt=null),null!==At&&Ht(At)&&(At=null),null!==xt&&Ht(xt)&&(xt=null),Tt.forEach(Lt),Dt.forEach(Lt)}function Bt(e,t){e.blockedOn===t&&(e.blockedOn=null,Nt||(Nt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Gt)))}function Wt(e){function t(t){return Bt(t,e)}if(0<It.length){Bt(It[0],e);for(var n=1;n<It.length;n++){var r=It[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==kt&&Bt(kt,e),null!==At&&Bt(At,e),null!==xt&&Bt(xt,e),Tt.forEach(t),Dt.forEach(t),n=0;n<Ot.length;n++)(r=Ot[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Ot.length&&null===(n=Ot[0]).blockedOn;)Ut(n),null===n.blockedOn&&Ot.shift()}var zt=b.ReactCurrentBatchConfig,jt=!0;function $t(e,t,n,r){var i=Ct,a=zt.transition;zt.transition=null;try{Ct=1,qt(e,t,n,r)}finally{Ct=i,zt.transition=a}}function Yt(e,t,n,r){var i=Ct,a=zt.transition;zt.transition=null;try{Ct=4,qt(e,t,n,r)}finally{Ct=i,zt.transition=a}}function qt(e,t,n,r){if(jt){var i=Jt(e,t,n,r);if(null===i)jr(e,t,r,Kt,n),Ft(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return kt=Mt(kt,e,t,n,r,i),!0;case"dragenter":return At=Mt(At,e,t,n,r,i),!0;case"mouseover":return xt=Mt(xt,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Tt.set(a,Mt(Tt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Dt.set(a,Mt(Dt.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Ft(e,r),4&t&&-1<Rt.indexOf(e)){for(;null!==i;){var a=Ci(i);if(null!==a&&St(a),null===(a=Jt(e,t,n,r))&&jr(e,t,r,Kt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else jr(e,t,r,null,n)}}var Kt=null;function Jt(e,t,n,r){if(Kt=null,null!==(e=vi(e=Se(r))))if(null===(t=We(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=ze(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Kt=e,null}function Qt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ve()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Xt=null,Vt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Vt,r=n.length,i="value"in Xt?Xt.value:Xt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return U(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,sn,ln,dn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=an(dn),cn=U({},dn,{view:0,detail:0}),pn=an(cn),hn=U({},cn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Pn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(on=e.screenX-ln.screenX,sn=e.screenY-ln.screenY):sn=on=0,ln=e),on)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),fn=an(hn),gn=an(U({},hn,{dataTransfer:0})),yn=an(U({},cn,{relatedTarget:0})),mn=an(U({},dn,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=U({},dn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Cn=an(vn),bn=an(U({},dn,{data:0})),Sn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},En={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _n(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=wn[e])&&!!t[e]}function Pn(){return _n}var Nn=U({},cn,{key:function(e){if(e.key){var t=Sn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?En[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Pn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),In=an(Nn),kn=an(U({},hn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),An=an(U({},cn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Pn})),xn=an(U({},dn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Tn=U({},hn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Dn=an(Tn),On=[9,13,27,32],Rn=u&&"CompositionEvent"in window,Fn=null;u&&"documentMode"in document&&(Fn=document.documentMode);var Mn=u&&"TextEvent"in window&&!Fn,Un=u&&(!Rn||Fn&&8<Fn&&11>=Fn),Hn=String.fromCharCode(32),Ln=!1;function Gn(e,t){switch(e){case"keyup":return-1!==On.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bn(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var Wn=!1;var zn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!zn[e.type]:"textarea"===t}function $n(e,t,n,r){Ne(r),0<(t=Yr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Yn=null,qn=null;function Kn(e){Hr(e,0)}function Jn(e){if(q(bi(e)))return e}function Qn(e,t){if("change"===e)return t}var Xn=!1;if(u){var Vn;if(u){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"==typeof er.oninput}Vn=Zn}else Vn=!1;Xn=Vn&&(!document.documentMode||9<document.documentMode)}function tr(){Yn&&(Yn.detachEvent("onpropertychange",nr),qn=Yn=null)}function nr(e){if("value"===e.propertyName&&Jn(qn)){var t=[];$n(t,qn,e,Se(e)),Te(Kn,t)}}function rr(e,t,n){"focusin"===e?(tr(),qn=n,(Yn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Jn(qn)}function ar(e,t){if("click"===e)return Jn(t)}function or(e,t){if("input"===e||"change"===e)return Jn(t)}var sr="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t};function lr(e,t){if(sr(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!c.call(t,i)||!sr(e[i],t[i]))return!1}return!0}function dr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=dr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=dr(r)}}function cr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?cr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function pr(){for(var e=window,t=K();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(e){n=!1}if(!n)break;t=K((e=t.contentWindow).document)}return t}function hr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function fr(e){var t=pr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&cr(n.ownerDocument.documentElement,n)){if(null!==r&&hr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=ur(n,a);var o=ur(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"==typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var gr=u&&"documentMode"in document&&11>=document.documentMode,yr=null,mr=null,vr=null,Cr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;Cr||null==yr||yr!==K(r)||("selectionStart"in(r=yr)&&hr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},vr&&lr(vr,r)||(vr=r,0<(r=Yr(mr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=yr)))}function Sr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Er={animationend:Sr("Animation","AnimationEnd"),animationiteration:Sr("Animation","AnimationIteration"),animationstart:Sr("Animation","AnimationStart"),transitionend:Sr("Transition","TransitionEnd")},wr={},_r={};function Pr(e){if(wr[e])return wr[e];if(!Er[e])return e;var t,n=Er[e];for(t in n)if(n.hasOwnProperty(t)&&t in _r)return wr[e]=n[t];return e}u&&(_r=document.createElement("div").style,"AnimationEvent"in window||(delete Er.animationend.animation,delete Er.animationiteration.animation,delete Er.animationstart.animation),"TransitionEvent"in window||delete Er.transitionend.transition);var Nr=Pr("animationend"),Ir=Pr("animationiteration"),kr=Pr("animationstart"),Ar=Pr("transitionend"),xr=new Map,Tr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Dr(e,t){xr.set(e,t),l(t,[e])}for(var Or=0;Or<Tr.length;Or++){var Rr=Tr[Or];Dr(Rr.toLowerCase(),"on"+(Rr[0].toUpperCase()+Rr.slice(1)))}Dr(Nr,"onAnimationEnd"),Dr(Ir,"onAnimationIteration"),Dr(kr,"onAnimationStart"),Dr("dblclick","onDoubleClick"),Dr("focusin","onFocus"),Dr("focusout","onBlur"),Dr(Ar,"onTransitionEnd"),d("onMouseEnter",["mouseout","mouseover"]),d("onMouseLeave",["mouseout","mouseover"]),d("onPointerEnter",["pointerout","pointerover"]),d("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Fr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Fr));function Ur(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,s,l,d){if(Be.apply(this,arguments),Me){if(!Me)throw Error(a(198));var u=Ue;Me=!1,Ue=null,He||(He=!0,Le=u)}}(r,t,void 0,e),e.currentTarget=null}function Hr(e,t){t=!!(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],l=s.instance,d=s.currentTarget;if(s=s.listener,l!==a&&i.isPropagationStopped())break e;Ur(i,s,d),a=l}else for(o=0;o<r.length;o++){if(l=(s=r[o]).instance,d=s.currentTarget,s=s.listener,l!==a&&i.isPropagationStopped())break e;Ur(i,s,d),a=l}}}if(He)throw e=Le,He=!1,Le=null,e}function Lr(e,t){var n=t[gi];void 0===n&&(n=t[gi]=new Set);var r=e+"__bubble";n.has(r)||(zr(t,e,2,!1),n.add(r))}function Gr(e,t,n){var r=0;t&&(r|=4),zr(n,e,r,t)}var Br="_reactListening"+Math.random().toString(36).slice(2);function Wr(e){if(!e[Br]){e[Br]=!0,o.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||Gr(t,!1,e),Gr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Br]||(t[Br]=!0,Gr("selectionchange",!1,t))}}function zr(e,t,n,r){switch(Qt(t)){case 1:var i=$t;break;case 4:i=Yt;break;default:i=qt}n=i.bind(null,t,n,e),i=void 0,!Oe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function jr(e,t,n,r,i){var a=r;if(!(1&t||2&t||null===r))e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;o=o.return}for(;null!==s;){if(null===(o=vi(s)))return;if(5===(l=o.tag)||6===l){r=a=o;continue e}s=s.parentNode}}r=r.return}Te((function(){var r=a,i=Se(n),o=[];e:{var s=xr.get(e);if(void 0!==s){var l=un,d=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=In;break;case"focusin":d="focus",l=yn;break;case"focusout":d="blur",l=yn;break;case"beforeblur":case"afterblur":l=yn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=fn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=An;break;case Nr:case Ir:case kr:l=mn;break;case Ar:l=xn;break;case"scroll":l=pn;break;case"wheel":l=Dn;break;case"copy":case"cut":case"paste":l=Cn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=kn}var u=!!(4&t),c=!u&&"scroll"===e,p=u?null!==s?s+"Capture":null:s;u=[];for(var h,f=r;null!==f;){var g=(h=f).stateNode;if(5===h.tag&&null!==g&&(h=g,null!==p&&(null!=(g=De(f,p))&&u.push($r(f,g,h)))),c)break;f=f.return}0<u.length&&(s=new l(s,d,null,n,i),o.push({event:s,listeners:u}))}}if(!(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===be||!(d=n.relatedTarget||n.fromElement)||!vi(d)&&!d[fi])&&(l||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,l?(l=r,null!==(d=(d=n.relatedTarget||n.toElement)?vi(d):null)&&(d!==(c=We(d))||5!==d.tag&&6!==d.tag)&&(d=null)):(l=null,d=r),l!==d)){if(u=fn,g="onMouseLeave",p="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(u=kn,g="onPointerLeave",p="onPointerEnter",f="pointer"),c=null==l?s:bi(l),h=null==d?s:bi(d),(s=new u(g,f+"leave",l,n,i)).target=c,s.relatedTarget=h,g=null,vi(i)===r&&((u=new u(p,f+"enter",d,n,i)).target=h,u.relatedTarget=c,g=u),c=g,l&&d)e:{for(p=d,f=0,h=u=l;h;h=qr(h))f++;for(h=0,g=p;g;g=qr(g))h++;for(;0<f-h;)u=qr(u),f--;for(;0<h-f;)p=qr(p),h--;for(;f--;){if(u===p||null!==p&&u===p.alternate)break e;u=qr(u),p=qr(p)}u=null}else u=null;null!==l&&Kr(o,s,l,u,!1),null!==d&&null!==c&&Kr(o,c,d,u,!0)}if("select"===(l=(s=r?bi(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var y=Qn;else if(jn(s))if(Xn)y=or;else{y=ir;var m=rr}else(l=s.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(y=ar);switch(y&&(y=y(e,r))?$n(o,y,n,i):(m&&m(e,s,r),"focusout"===e&&(m=s._wrapperState)&&m.controlled&&"number"===s.type&&ee(s,"number",s.value)),m=r?bi(r):window,e){case"focusin":(jn(m)||"true"===m.contentEditable)&&(yr=m,mr=r,vr=null);break;case"focusout":vr=mr=yr=null;break;case"mousedown":Cr=!0;break;case"contextmenu":case"mouseup":case"dragend":Cr=!1,br(o,n,i);break;case"selectionchange":if(gr)break;case"keydown":case"keyup":br(o,n,i)}var v;if(Rn)e:{switch(e){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else Wn?Gn(e,n)&&(C="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(C="onCompositionStart");C&&(Un&&"ko"!==n.locale&&(Wn||"onCompositionStart"!==C?"onCompositionEnd"===C&&Wn&&(v=en()):(Vt="value"in(Xt=i)?Xt.value:Xt.textContent,Wn=!0)),0<(m=Yr(r,C)).length&&(C=new bn(C,e,null,n,i),o.push({event:C,listeners:m}),v?C.data=v:null!==(v=Bn(n))&&(C.data=v))),(v=Mn?function(e,t){switch(e){case"compositionend":return Bn(t);case"keypress":return 32!==t.which?null:(Ln=!0,Hn);case"textInput":return(e=t.data)===Hn&&Ln?null:e;default:return null}}(e,n):function(e,t){if(Wn)return"compositionend"===e||!Rn&&Gn(e,t)?(e=en(),Zt=Vt=Xt=null,Wn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Un&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Yr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=v))}Hr(o,t)}))}function $r(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Yr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=De(e,n))&&r.unshift($r(e,a,i)),null!=(a=De(e,t))&&r.push($r(e,a,i))),e=e.return}return r}function qr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Kr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var s=n,l=s.alternate,d=s.stateNode;if(null!==l&&l===r)break;5===s.tag&&null!==d&&(s=d,i?null!=(l=De(n,a))&&o.unshift($r(n,l,s)):i||null!=(l=De(n,a))&&o.push($r(n,l,s))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Jr=/\r\n?/g,Qr=/\u0000|\uFFFD/g;function Xr(e){return("string"==typeof e?e:""+e).replace(Jr,"\n").replace(Qr,"")}function Vr(e,t,n){if(t=Xr(t),Xr(e)!==t&&n)throw Error(a(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"==typeof setTimeout?setTimeout:void 0,ii="function"==typeof clearTimeout?clearTimeout:void 0,ai="function"==typeof Promise?Promise:void 0,oi="function"==typeof queueMicrotask?queueMicrotask:void 0!==ai?function(e){return ai.resolve(null).then(e).catch(si)}:ri;function si(e){setTimeout((function(){throw e}))}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Wt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Wt(t)}function di(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var ci=Math.random().toString(36).slice(2),pi="__reactFiber$"+ci,hi="__reactProps$"+ci,fi="__reactContainer$"+ci,gi="__reactEvents$"+ci,yi="__reactListeners$"+ci,mi="__reactHandles$"+ci;function vi(e){var t=e[pi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[fi]||n[pi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ui(e);null!==e;){if(n=e[pi])return n;e=ui(e)}return t}n=(e=n).parentNode}return null}function Ci(e){return!(e=e[pi]||e[fi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function Si(e){return e[hi]||null}var Ei=[],wi=-1;function _i(e){return{current:e}}function Pi(e){0>wi||(e.current=Ei[wi],Ei[wi]=null,wi--)}function Ni(e,t){wi++,Ei[wi]=e.current,e.current=t}var Ii={},ki=_i(Ii),Ai=_i(!1),xi=Ii;function Ti(e,t){var n=e.type.contextTypes;if(!n)return Ii;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Di(e){return null!=(e=e.childContextTypes)}function Oi(){Pi(Ai),Pi(ki)}function Ri(e,t,n){if(ki.current!==Ii)throw Error(a(168));Ni(ki,t),Ni(Ai,n)}function Fi(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,z(e)||"Unknown",i));return U({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ii,xi=ki.current,Ni(ki,e),Ni(Ai,Ai.current),!0}function Ui(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Fi(e,t,xi),r.__reactInternalMemoizedMergedChildContext=e,Pi(Ai),Pi(ki),Ni(ki,e)):Pi(Ai),Ni(Ai,n)}var Hi=null,Li=!1,Gi=!1;function Bi(e){null===Hi?Hi=[e]:Hi.push(e)}function Wi(){if(!Gi&&null!==Hi){Gi=!0;var e=0,t=Ct;try{var n=Hi;for(Ct=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Hi=null,Li=!1}catch(t){throw null!==Hi&&(Hi=Hi.slice(e+1)),qe(Ze,Wi),t}finally{Ct=t,Gi=!1}}return null}var zi=[],ji=0,$i=null,Yi=0,qi=[],Ki=0,Ji=null,Qi=1,Xi="";function Vi(e,t){zi[ji++]=Yi,zi[ji++]=$i,$i=e,Yi=t}function Zi(e,t,n){qi[Ki++]=Qi,qi[Ki++]=Xi,qi[Ki++]=Ji,Ji=e;var r=Qi;e=Xi;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Qi=1<<32-ot(t)+i|n<<i|r,Xi=a+e}else Qi=1<<a|n<<i|r,Xi=e}function ea(e){null!==e.return&&(Vi(e,1),Zi(e,1,0))}function ta(e){for(;e===$i;)$i=zi[--ji],zi[ji]=null,Yi=zi[--ji],zi[ji]=null;for(;e===Ji;)Ji=qi[--Ki],qi[Ki]=null,Xi=qi[--Ki],qi[Ki]=null,Qi=qi[--Ki],qi[Ki]=null}var na=null,ra=null,ia=!1,aa=null;function oa(e,t){var n=Td(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function sa(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=di(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Ji?{id:Qi,overflow:Xi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Td(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function la(e){return!(!(1&e.mode)||128&e.flags)}function da(e){if(ia){var t=ra;if(t){var n=t;if(!sa(e,t)){if(la(e))throw Error(a(418));t=di(n.nextSibling);var r=na;t&&sa(e,t)?oa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(la(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function ua(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function ca(e){if(e!==na)return!1;if(!ia)return ua(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ra)){if(la(e))throw pa(),Error(a(418));for(;t;)oa(e,t),t=di(t.nextSibling)}if(ua(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=di(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?di(e.stateNode.nextSibling):null;return!0}function pa(){for(var e=ra;e;)e=di(e.nextSibling)}function ha(){ra=na=null,ia=!1}function fa(e){null===aa?aa=[e]:aa.push(e)}var ga=b.ReactCurrentBatchConfig;function ya(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!=typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function ma(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function va(e){return(0,e._init)(e._payload)}function Ca(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Od(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Ud(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n,r){var a=n.type;return a===w?c(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"==typeof a&&null!==a&&a.$$typeof===D&&va(a)===t.type)?((r=i(t,n.props)).ref=ya(e,t,n),r.return=e,r):((r=Rd(n.type,n.key,n.props,null,e.mode,r)).ref=ya(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Hd(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function c(e,t,n,r,a){return null===t||7!==t.tag?((t=Fd(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function p(e,t,n){if("string"==typeof t&&""!==t||"number"==typeof t)return(t=Ud(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case S:return(n=Rd(t.type,t.key,t.props,null,e.mode,n)).ref=ya(e,null,t),n.return=e,n;case E:return(t=Hd(t,e.mode,n)).return=e,t;case D:return p(e,(0,t._init)(t._payload),n)}if(te(t)||F(t))return(t=Fd(t,e.mode,n,null)).return=e,t;ma(e,t)}return null}function h(e,t,n,r){var i=null!==t?t.key:null;if("string"==typeof n&&""!==n||"number"==typeof n)return null!==i?null:l(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case S:return n.key===i?d(e,t,n,r):null;case E:return n.key===i?u(e,t,n,r):null;case D:return h(e,t,(i=n._init)(n._payload),r)}if(te(n)||F(n))return null!==i?null:c(e,t,n,r,null);ma(e,n)}return null}function f(e,t,n,r,i){if("string"==typeof r&&""!==r||"number"==typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case S:return d(t,e=e.get(null===r.key?n:r.key)||null,r,i);case E:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case D:return f(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||F(r))return c(t,e=e.get(n)||null,r,i,null);ma(t,r)}return null}function g(i,a,s,l){for(var d=null,u=null,c=a,g=a=0,y=null;null!==c&&g<s.length;g++){c.index>g?(y=c,c=null):y=c.sibling;var m=h(i,c,s[g],l);if(null===m){null===c&&(c=y);break}e&&c&&null===m.alternate&&t(i,c),a=o(m,a,g),null===u?d=m:u.sibling=m,u=m,c=y}if(g===s.length)return n(i,c),ia&&Vi(i,g),d;if(null===c){for(;g<s.length;g++)null!==(c=p(i,s[g],l))&&(a=o(c,a,g),null===u?d=c:u.sibling=c,u=c);return ia&&Vi(i,g),d}for(c=r(i,c);g<s.length;g++)null!==(y=f(c,i,g,s[g],l))&&(e&&null!==y.alternate&&c.delete(null===y.key?g:y.key),a=o(y,a,g),null===u?d=y:u.sibling=y,u=y);return e&&c.forEach((function(e){return t(i,e)})),ia&&Vi(i,g),d}function y(i,s,l,d){var u=F(l);if("function"!=typeof u)throw Error(a(150));if(null==(l=u.call(l)))throw Error(a(151));for(var c=u=null,g=s,y=s=0,m=null,v=l.next();null!==g&&!v.done;y++,v=l.next()){g.index>y?(m=g,g=null):m=g.sibling;var C=h(i,g,v.value,d);if(null===C){null===g&&(g=m);break}e&&g&&null===C.alternate&&t(i,g),s=o(C,s,y),null===c?u=C:c.sibling=C,c=C,g=m}if(v.done)return n(i,g),ia&&Vi(i,y),u;if(null===g){for(;!v.done;y++,v=l.next())null!==(v=p(i,v.value,d))&&(s=o(v,s,y),null===c?u=v:c.sibling=v,c=v);return ia&&Vi(i,y),u}for(g=r(i,g);!v.done;y++,v=l.next())null!==(v=f(g,i,y,v.value,d))&&(e&&null!==v.alternate&&g.delete(null===v.key?y:v.key),s=o(v,s,y),null===c?u=v:c.sibling=v,c=v);return e&&g.forEach((function(e){return t(i,e)})),ia&&Vi(i,y),u}return function e(r,a,o,l){if("object"==typeof o&&null!==o&&o.type===w&&null===o.key&&(o=o.props.children),"object"==typeof o&&null!==o){switch(o.$$typeof){case S:e:{for(var d=o.key,u=a;null!==u;){if(u.key===d){if((d=o.type)===w){if(7===u.tag){n(r,u.sibling),(a=i(u,o.props.children)).return=r,r=a;break e}}else if(u.elementType===d||"object"==typeof d&&null!==d&&d.$$typeof===D&&va(d)===u.type){n(r,u.sibling),(a=i(u,o.props)).ref=ya(r,u,o),a.return=r,r=a;break e}n(r,u);break}t(r,u),u=u.sibling}o.type===w?((a=Fd(o.props.children,r.mode,l,o.key)).return=r,r=a):((l=Rd(o.type,o.key,o.props,null,r.mode,l)).ref=ya(r,a,o),l.return=r,r=l)}return s(r);case E:e:{for(u=o.key;null!==a;){if(a.key===u){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Hd(o,r.mode,l)).return=r,r=a}return s(r);case D:return e(r,a,(u=o._init)(o._payload),l)}if(te(o))return g(r,a,o,l);if(F(o))return y(r,a,o,l);ma(r,o)}return"string"==typeof o&&""!==o||"number"==typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=Ud(o,r.mode,l)).return=r,r=a),s(r)):n(r,a)}}var ba=Ca(!0),Sa=Ca(!1),Ea=_i(null),wa=null,_a=null,Pa=null;function Na(){Pa=_a=wa=null}function Ia(e){var t=Ea.current;Pi(Ea),e._currentValue=t}function ka(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Aa(e,t){wa=e,Pa=_a=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(!!(e.lanes&t)&&(Cs=!0),e.firstContext=null)}function xa(e){var t=e._currentValue;if(Pa!==e)if(e={context:e,memoizedValue:t,next:null},null===_a){if(null===wa)throw Error(a(308));_a=e,wa.dependencies={lanes:0,firstContext:e}}else _a=_a.next=e;return t}var Ta=null;function Da(e){null===Ta?Ta=[e]:Ta.push(e)}function Oa(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Da(t)):(n.next=i.next,i.next=n),t.interleaved=n,Ra(e,r)}function Ra(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Fa=!1;function Ma(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ua(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ha(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function La(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,2&kl){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Ra(e,n)}return null===(i=r.interleaved)?(t.next=t,Da(r)):(t.next=i.next,i.next=t),r.interleaved=t,Ra(e,n)}function Ga(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}function Ba(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Wa(e,t,n,r){var i=e.updateQueue;Fa=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var l=s,d=l.next;l.next=null,null===o?a=d:o.next=d,o=l;var u=e.alternate;null!==u&&((s=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===s?u.firstBaseUpdate=d:s.next=d,u.lastBaseUpdate=l))}if(null!==a){var c=i.baseState;for(o=0,u=d=l=null,s=a;;){var p=s.lane,h=s.eventTime;if((r&p)===p){null!==u&&(u=u.next={eventTime:h,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var f=e,g=s;switch(p=t,h=n,g.tag){case 1:if("function"==typeof(f=g.payload)){c=f.call(h,c,p);break e}c=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null==(p="function"==typeof(f=g.payload)?f.call(h,c,p):f))break e;c=U({},c,p);break e;case 2:Fa=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(p=i.effects)?i.effects=[s]:p.push(s))}else h={eventTime:h,lane:p,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===u?(d=u=h,l=c):u=u.next=h,o|=p;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(p=s).next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}if(null===u&&(l=c),i.baseState=l,i.firstBaseUpdate=d,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Ml|=o,e.lanes=o,e.memoizedState=c}}function za(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!=typeof i)throw Error(a(191,i));i.call(r)}}}var ja={},$a=_i(ja),Ya=_i(ja),qa=_i(ja);function Ka(e){if(e===ja)throw Error(a(174));return e}function Ja(e,t){switch(Ni(qa,t),Ni(Ya,e),Ni($a,ja),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Pi($a),Ni($a,t)}function Qa(){Pi($a),Pi(Ya),Pi(qa)}function Xa(e){Ka(qa.current);var t=Ka($a.current),n=le(t,e.type);t!==n&&(Ni(Ya,e),Ni($a,n))}function Va(e){Ya.current===e&&(Pi($a),Pi(Ya))}var Za=_i(0);function eo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(128&t.flags)return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var to=[];function no(){for(var e=0;e<to.length;e++)to[e]._workInProgressVersionPrimary=null;to.length=0}var ro=b.ReactCurrentDispatcher,io=b.ReactCurrentBatchConfig,ao=0,oo=null,so=null,lo=null,uo=!1,co=!1,po=0,ho=0;function fo(){throw Error(a(321))}function go(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function yo(e,t,n,r,i,o){if(ao=o,oo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ro.current=null===e||null===e.memoizedState?Zo:es,e=n(r,i),co){o=0;do{if(co=!1,po=0,25<=o)throw Error(a(301));o+=1,lo=so=null,t.updateQueue=null,ro.current=ts,e=n(r,i)}while(co)}if(ro.current=Vo,t=null!==so&&null!==so.next,ao=0,lo=so=oo=null,uo=!1,t)throw Error(a(300));return e}function mo(){var e=0!==po;return po=0,e}function vo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===lo?oo.memoizedState=lo=e:lo=lo.next=e,lo}function Co(){if(null===so){var e=oo.alternate;e=null!==e?e.memoizedState:null}else e=so.next;var t=null===lo?oo.memoizedState:lo.next;if(null!==t)lo=t,so=e;else{if(null===e)throw Error(a(310));e={memoizedState:(so=e).memoizedState,baseState:so.baseState,baseQueue:so.baseQueue,queue:so.queue,next:null},null===lo?oo.memoizedState=lo=e:lo=lo.next=e}return lo}function bo(e,t){return"function"==typeof t?t(e):t}function So(e){var t=Co(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=so,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var l=s=null,d=null,u=o;do{var c=u.lane;if((ao&c)===c)null!==d&&(d=d.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var p={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===d?(l=d=p,s=r):d=d.next=p,oo.lanes|=c,Ml|=c}u=u.next}while(null!==u&&u!==o);null===d?s=r:d.next=l,sr(r,t.memoizedState)||(Cs=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=d,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,oo.lanes|=o,Ml|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Eo(e){var t=Co(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{o=e(o,s.action),s=s.next}while(s!==i);sr(o,t.memoizedState)||(Cs=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function wo(){}function _o(e,t){var n=oo,r=Co(),i=t(),o=!sr(r.memoizedState,i);if(o&&(r.memoizedState=i,Cs=!0),r=r.queue,Mo(Io.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==lo&&1&lo.memoizedState.tag){if(n.flags|=2048,To(9,No.bind(null,n,r,i,t),void 0,null),null===Al)throw Error(a(349));30&ao||Po(n,t,i)}return i}function Po(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=oo.updateQueue)?(t={lastEffect:null,stores:null},oo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function No(e,t,n,r){t.value=n,t.getSnapshot=r,ko(t)&&Ao(e)}function Io(e,t,n){return n((function(){ko(t)&&Ao(e)}))}function ko(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sr(e,n)}catch(e){return!0}}function Ao(e){var t=Ra(e,1);null!==t&&nd(t,e,1,-1)}function xo(e){var t=vo();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bo,lastRenderedState:e},t.queue=e,e=e.dispatch=Ko.bind(null,oo,e),[t.memoizedState,e]}function To(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=oo.updateQueue)?(t={lastEffect:null,stores:null},oo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Do(){return Co().memoizedState}function Oo(e,t,n,r){var i=vo();oo.flags|=e,i.memoizedState=To(1|t,n,void 0,void 0===r?null:r)}function Ro(e,t,n,r){var i=Co();r=void 0===r?null:r;var a=void 0;if(null!==so){var o=so.memoizedState;if(a=o.destroy,null!==r&&go(r,o.deps))return void(i.memoizedState=To(t,n,a,r))}oo.flags|=e,i.memoizedState=To(1|t,n,a,r)}function Fo(e,t){return Oo(8390656,8,e,t)}function Mo(e,t){return Ro(2048,8,e,t)}function Uo(e,t){return Ro(4,2,e,t)}function Ho(e,t){return Ro(4,4,e,t)}function Lo(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Go(e,t,n){return n=null!=n?n.concat([e]):null,Ro(4,4,Lo.bind(null,t,e),n)}function Bo(){}function Wo(e,t){var n=Co();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&go(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function zo(e,t){var n=Co();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&go(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function jo(e,t,n){return 21&ao?(sr(n,t)||(n=gt(),oo.lanes|=n,Ml|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Cs=!0),e.memoizedState=n)}function $o(e,t){var n=Ct;Ct=0!==n&&4>n?n:4,e(!0);var r=io.transition;io.transition={};try{e(!1),t()}finally{Ct=n,io.transition=r}}function Yo(){return Co().memoizedState}function qo(e,t,n){var r=td(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Jo(e))Qo(t,n);else if(null!==(n=Oa(e,t,n,r))){nd(n,e,r,ed()),Xo(n,t,r)}}function Ko(e,t,n){var r=td(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Jo(e))Qo(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,s=a(o,n);if(i.hasEagerState=!0,i.eagerState=s,sr(s,o)){var l=t.interleaved;return null===l?(i.next=i,Da(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(e){}null!==(n=Oa(e,t,i,r))&&(nd(n,e,r,i=ed()),Xo(n,t,r))}}function Jo(e){var t=e.alternate;return e===oo||null!==t&&t===oo}function Qo(e,t){co=uo=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Xo(e,t,n){if(4194240&n){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}var Vo={readContext:xa,useCallback:fo,useContext:fo,useEffect:fo,useImperativeHandle:fo,useInsertionEffect:fo,useLayoutEffect:fo,useMemo:fo,useReducer:fo,useRef:fo,useState:fo,useDebugValue:fo,useDeferredValue:fo,useTransition:fo,useMutableSource:fo,useSyncExternalStore:fo,useId:fo,unstable_isNewReconciler:!1},Zo={readContext:xa,useCallback:function(e,t){return vo().memoizedState=[e,void 0===t?null:t],e},useContext:xa,useEffect:Fo,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,Oo(4194308,4,Lo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Oo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Oo(4,2,e,t)},useMemo:function(e,t){var n=vo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=vo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=qo.bind(null,oo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},vo().memoizedState=e},useState:xo,useDebugValue:Bo,useDeferredValue:function(e){return vo().memoizedState=e},useTransition:function(){var e=xo(!1),t=e[0];return e=$o.bind(null,e[1]),vo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=oo,i=vo();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Al)throw Error(a(349));30&ao||Po(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Fo(Io.bind(null,r,o,e),[e]),r.flags|=2048,To(9,No.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=vo(),t=Al.identifierPrefix;if(ia){var n=Xi;t=":"+t+"R"+(n=(Qi&~(1<<32-ot(Qi)-1)).toString(32)+n),0<(n=po++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=ho++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},es={readContext:xa,useCallback:Wo,useContext:xa,useEffect:Mo,useImperativeHandle:Go,useInsertionEffect:Uo,useLayoutEffect:Ho,useMemo:zo,useReducer:So,useRef:Do,useState:function(){return So(bo)},useDebugValue:Bo,useDeferredValue:function(e){return jo(Co(),so.memoizedState,e)},useTransition:function(){return[So(bo)[0],Co().memoizedState]},useMutableSource:wo,useSyncExternalStore:_o,useId:Yo,unstable_isNewReconciler:!1},ts={readContext:xa,useCallback:Wo,useContext:xa,useEffect:Mo,useImperativeHandle:Go,useInsertionEffect:Uo,useLayoutEffect:Ho,useMemo:zo,useReducer:Eo,useRef:Do,useState:function(){return Eo(bo)},useDebugValue:Bo,useDeferredValue:function(e){var t=Co();return null===so?t.memoizedState=e:jo(t,so.memoizedState,e)},useTransition:function(){return[Eo(bo)[0],Co().memoizedState]},useMutableSource:wo,useSyncExternalStore:_o,useId:Yo,unstable_isNewReconciler:!1};function ns(e,t){if(e&&e.defaultProps){for(var n in t=U({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function rs(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:U({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var is={isMounted:function(e){return!!(e=e._reactInternals)&&We(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ed(),i=td(e),a=Ha(r,i);a.payload=t,null!=n&&(a.callback=n),null!==(t=La(e,a,i))&&(nd(t,e,i,r),Ga(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ed(),i=td(e),a=Ha(r,i);a.tag=1,a.payload=t,null!=n&&(a.callback=n),null!==(t=La(e,a,i))&&(nd(t,e,i,r),Ga(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ed(),r=td(e),i=Ha(n,r);i.tag=2,null!=t&&(i.callback=t),null!==(t=La(e,i,r))&&(nd(t,e,r,n),Ga(t,e,r))}};function as(e,t,n,r,i,a,o){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,a))}function os(e,t,n){var r=!1,i=Ii,a=t.contextType;return"object"==typeof a&&null!==a?a=xa(a):(i=Di(t)?xi:ki.current,a=(r=null!=(r=t.contextTypes))?Ti(e,i):Ii),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=is,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function ss(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&is.enqueueReplaceState(t,t.state,null)}function ls(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Ma(e);var a=t.contextType;"object"==typeof a&&null!==a?i.context=xa(a):(a=Di(t)?xi:ki.current,i.context=Ti(e,a)),i.state=e.memoizedState,"function"==typeof(a=t.getDerivedStateFromProps)&&(rs(e,t,a,n),i.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(t=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&is.enqueueReplaceState(i,i.state,null),Wa(e,n,i,r),i.state=e.memoizedState),"function"==typeof i.componentDidMount&&(e.flags|=4194308)}function ds(e,t){try{var n="",r=t;do{n+=B(r),r=r.return}while(r);var i=n}catch(e){i="\nError generating stack: "+e.message+"\n"+e.stack}return{value:e,source:t,stack:i,digest:null}}function us(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function cs(e,t){try{console.error(t.value)}catch(e){setTimeout((function(){throw e}))}}var ps="function"==typeof WeakMap?WeakMap:Map;function hs(e,t,n){(n=Ha(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){jl||(jl=!0,$l=r),cs(0,t)},n}function fs(e,t,n){(n=Ha(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){cs(0,t)}}var a=e.stateNode;return null!==a&&"function"==typeof a.componentDidCatch&&(n.callback=function(){cs(0,t),"function"!=typeof r&&(null===Yl?Yl=new Set([this]):Yl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function gs(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ps;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Pd.bind(null,e,t,n),t.then(e,e))}function ys(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ms(e,t,n,r,i){return 1&e.mode?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Ha(-1,1)).tag=2,La(n,t,1))),n.lanes|=1),e)}var vs=b.ReactCurrentOwner,Cs=!1;function bs(e,t,n,r){t.child=null===e?Sa(t,null,n,r):ba(t,e.child,n,r)}function Ss(e,t,n,r,i){n=n.render;var a=t.ref;return Aa(t,i),r=yo(e,t,n,r,a,i),n=mo(),null===e||Cs?(ia&&n&&ea(t),t.flags|=1,bs(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,js(e,t,i))}function Es(e,t,n,r,i){if(null===e){var a=n.type;return"function"!=typeof a||Dd(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Rd(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,ws(e,t,a,r,i))}if(a=e.child,!(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(o,r)&&e.ref===t.ref)return js(e,t,i)}return t.flags|=1,(e=Od(a,r)).ref=t.ref,e.return=t,t.child=e}function ws(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(lr(a,r)&&e.ref===t.ref){if(Cs=!1,t.pendingProps=r=a,!(e.lanes&i))return t.lanes=e.lanes,js(e,t,i);131072&e.flags&&(Cs=!0)}}return Ns(e,t,n,r,i)}function _s(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(1&t.mode){if(!(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ni(Ol,Dl),Dl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Ni(Ol,Dl),Dl|=r}else t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ni(Ol,Dl),Dl|=n;else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Ni(Ol,Dl),Dl|=r;return bs(e,t,i,n),t.child}function Ps(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ns(e,t,n,r,i){var a=Di(n)?xi:ki.current;return a=Ti(t,a),Aa(t,i),n=yo(e,t,n,r,a,i),r=mo(),null===e||Cs?(ia&&r&&ea(t),t.flags|=1,bs(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,js(e,t,i))}function Is(e,t,n,r,i){if(Di(n)){var a=!0;Mi(t)}else a=!1;if(Aa(t,i),null===t.stateNode)zs(e,t),os(t,n,r),ls(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var l=o.context,d=n.contextType;"object"==typeof d&&null!==d?d=xa(d):d=Ti(t,d=Di(n)?xi:ki.current);var u=n.getDerivedStateFromProps,c="function"==typeof u||"function"==typeof o.getSnapshotBeforeUpdate;c||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(s!==r||l!==d)&&ss(t,o,r,d),Fa=!1;var p=t.memoizedState;o.state=p,Wa(t,r,o,i),l=t.memoizedState,s!==r||p!==l||Ai.current||Fa?("function"==typeof u&&(rs(t,n,u,r),l=t.memoizedState),(s=Fa||as(t,n,s,r,p,l,d))?(c||"function"!=typeof o.UNSAFE_componentWillMount&&"function"!=typeof o.componentWillMount||("function"==typeof o.componentWillMount&&o.componentWillMount(),"function"==typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"==typeof o.componentDidMount&&(t.flags|=4194308)):("function"==typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=d,r=s):("function"==typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Ua(e,t),s=t.memoizedProps,d=t.type===t.elementType?s:ns(t.type,s),o.props=d,c=t.pendingProps,p=o.context,"object"==typeof(l=n.contextType)&&null!==l?l=xa(l):l=Ti(t,l=Di(n)?xi:ki.current);var h=n.getDerivedStateFromProps;(u="function"==typeof h||"function"==typeof o.getSnapshotBeforeUpdate)||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(s!==c||p!==l)&&ss(t,o,r,l),Fa=!1,p=t.memoizedState,o.state=p,Wa(t,r,o,i);var f=t.memoizedState;s!==c||p!==f||Ai.current||Fa?("function"==typeof h&&(rs(t,n,h,r),f=t.memoizedState),(d=Fa||as(t,n,d,r,p,f,l)||!1)?(u||"function"!=typeof o.UNSAFE_componentWillUpdate&&"function"!=typeof o.componentWillUpdate||("function"==typeof o.componentWillUpdate&&o.componentWillUpdate(r,f,l),"function"==typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,f,l)),"function"==typeof o.componentDidUpdate&&(t.flags|=4),"function"==typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof o.componentDidUpdate||s===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),"function"!=typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),o.props=r,o.state=f,o.context=l,r=d):("function"!=typeof o.componentDidUpdate||s===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),"function"!=typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),r=!1)}return ks(e,t,n,r,a,i)}function ks(e,t,n,r,i,a){Ps(e,t);var o=!!(128&t.flags);if(!r&&!o)return i&&Ui(t,n,!1),js(e,t,a);r=t.stateNode,vs.current=t;var s=o&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=ba(t,e.child,null,a),t.child=ba(t,null,s,a)):bs(e,t,s,a),t.memoizedState=r.state,i&&Ui(t,n,!0),t.child}function As(e){var t=e.stateNode;t.pendingContext?Ri(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ri(0,t.context,!1),Ja(e,t.containerInfo)}function xs(e,t,n,r,i){return ha(),fa(i),t.flags|=256,bs(e,t,n,r),t.child}var Ts,Ds,Os,Rs,Fs={dehydrated:null,treeContext:null,retryLane:0};function Ms(e){return{baseLanes:e,cachePool:null,transitions:null}}function Us(e,t,n){var r,i=t.pendingProps,o=Za.current,s=!1,l=!!(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&!!(2&o)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ni(Za,1&o),null===e)return da(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(1&t.mode?"$!"===e.data?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(l=i.children,e=i.fallback,s?(i=t.mode,s=t.child,l={mode:"hidden",children:l},1&i||null===s?s=Md(l,i,0,null):(s.childLanes=0,s.pendingProps=l),e=Fd(e,i,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Ms(n),t.memoizedState=Fs,e):Hs(t,l));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,s){if(n)return 256&t.flags?(t.flags&=-257,Ls(e,t,s,r=us(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Md({mode:"visible",children:r.children},i,0,null),(o=Fd(o,i,s,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,1&t.mode&&ba(t,e.child,null,s),t.child.memoizedState=Ms(s),t.memoizedState=Fs,o);if(!(1&t.mode))return Ls(e,t,s,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,Ls(e,t,s,r=us(o=Error(a(419)),r,void 0))}if(l=!!(s&e.childLanes),Cs||l){if(null!==(r=Al)){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=i&(r.suspendedLanes|s)?0:i)&&i!==o.retryLane&&(o.retryLane=i,Ra(e,i),nd(r,e,i,-1))}return gd(),Ls(e,t,s,r=us(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Id.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ra=di(i.nextSibling),na=t,ia=!0,aa=null,null!==e&&(qi[Ki++]=Qi,qi[Ki++]=Xi,qi[Ki++]=Ji,Qi=e.id,Xi=e.overflow,Ji=t),t=Hs(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,o,n);if(s){s=i.fallback,l=t.mode,r=(o=e.child).sibling;var d={mode:"hidden",children:i.children};return 1&l||t.child===o?(i=Od(o,d)).subtreeFlags=14680064&o.subtreeFlags:((i=t.child).childLanes=0,i.pendingProps=d,t.deletions=null),null!==r?s=Od(r,s):(s=Fd(s,l,n,null)).flags|=2,s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,l=null===(l=e.child.memoizedState)?Ms(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},s.memoizedState=l,s.childLanes=e.childLanes&~n,t.memoizedState=Fs,i}return e=(s=e.child).sibling,i=Od(s,{mode:"visible",children:i.children}),!(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Hs(e,t){return(t=Md({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Ls(e,t,n,r){return null!==r&&fa(r),ba(t,e.child,null,n),(e=Hs(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Gs(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),ka(e.return,t,n)}function Bs(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function Ws(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(bs(e,t,r.children,n),2&(r=Za.current))r=1&r|2,t.flags|=128;else{if(null!==e&&128&e.flags)e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Gs(e,n,t);else if(19===e.tag)Gs(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ni(Za,r),1&t.mode)switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===eo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Bs(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===eo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Bs(t,!0,n,null,a);break;case"together":Bs(t,!1,null,null,void 0);break;default:t.memoizedState=null}else t.memoizedState=null;return t.child}function zs(e,t){!(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function js(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ml|=t.lanes,!(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Od(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Od(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function $s(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ys(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function qs(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ys(t),null;case 1:case 17:return Di(t.type)&&Oi(),Ys(t),null;case 3:return r=t.stateNode,Qa(),Pi(Ai),Pi(ki),no(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ca(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&!(256&t.flags)||(t.flags|=1024,null!==aa&&(od(aa),aa=null))),Ds(e,t),Ys(t),null;case 5:Va(t);var i=Ka(qa.current);if(n=t.type,null!==e&&null!=t.stateNode)Os(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Ys(t),null}if(e=Ka($a.current),ca(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[pi]=t,r[hi]=o,e=!!(1&t.mode),n){case"dialog":Lr("cancel",r),Lr("close",r);break;case"iframe":case"object":case"embed":Lr("load",r);break;case"video":case"audio":for(i=0;i<Fr.length;i++)Lr(Fr[i],r);break;case"source":Lr("error",r);break;case"img":case"image":case"link":Lr("error",r),Lr("load",r);break;case"details":Lr("toggle",r);break;case"input":Q(r,o),Lr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Lr("invalid",r);break;case"textarea":ie(r,o),Lr("invalid",r)}for(var l in ve(n,o),i=null,o)if(o.hasOwnProperty(l)){var d=o[l];"children"===l?"string"==typeof d?r.textContent!==d&&(!0!==o.suppressHydrationWarning&&Vr(r.textContent,d,e),i=["children",d]):"number"==typeof d&&r.textContent!==""+d&&(!0!==o.suppressHydrationWarning&&Vr(r.textContent,d,e),i=["children",""+d]):s.hasOwnProperty(l)&&null!=d&&"onScroll"===l&&Lr("scroll",r)}switch(n){case"input":Y(r),Z(r,o,!0);break;case"textarea":Y(r),oe(r);break;case"select":case"option":break;default:"function"==typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[pi]=t,e[hi]=r,Ts(e,t,!1,!1),t.stateNode=e;e:{switch(l=Ce(n,r),n){case"dialog":Lr("cancel",e),Lr("close",e),i=r;break;case"iframe":case"object":case"embed":Lr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Fr.length;i++)Lr(Fr[i],e);i=r;break;case"source":Lr("error",e),i=r;break;case"img":case"image":case"link":Lr("error",e),Lr("load",e),i=r;break;case"details":Lr("toggle",e),i=r;break;case"input":Q(e,r),i=J(e,r),Lr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=U({},r,{value:void 0}),Lr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Lr("invalid",e)}for(o in ve(n,i),d=i)if(d.hasOwnProperty(o)){var u=d[o];"style"===o?ye(e,u):"dangerouslySetInnerHTML"===o?null!=(u=u?u.__html:void 0)&&ce(e,u):"children"===o?"string"==typeof u?("textarea"!==n||""!==u)&&pe(e,u):"number"==typeof u&&pe(e,""+u):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(s.hasOwnProperty(o)?null!=u&&"onScroll"===o&&Lr("scroll",e):null!=u&&C(e,o,u,l))}switch(n){case"input":Y(e),Z(e,r,!1);break;case"textarea":Y(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+j(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"==typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ys(t),null;case 6:if(e&&null!=t.stateNode)Rs(e,t,e.memoizedProps,r);else{if("string"!=typeof r&&null===t.stateNode)throw Error(a(166));if(n=Ka(qa.current),Ka($a.current),ca(t)){if(r=t.stateNode,n=t.memoizedProps,r[pi]=t,(o=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Vr(r.nodeValue,n,!!(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Vr(r.nodeValue,n,!!(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[pi]=t,t.stateNode=r}return Ys(t),null;case 13:if(Pi(Za),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&1&t.mode&&!(128&t.flags))pa(),ha(),t.flags|=98560,o=!1;else if(o=ca(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[pi]=t}else ha(),!(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ys(t),o=!1}else null!==aa&&(od(aa),aa=null),o=!0;if(!o)return 65536&t.flags?t:null}return 128&t.flags?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,1&t.mode&&(null===e||1&Za.current?0===Rl&&(Rl=3):gd())),null!==t.updateQueue&&(t.flags|=4),Ys(t),null);case 4:return Qa(),Ds(e,t),null===e&&Wr(t.stateNode.containerInfo),Ys(t),null;case 10:return Ia(t.type._context),Ys(t),null;case 19:if(Pi(Za),null===(o=t.memoizedState))return Ys(t),null;if(r=!!(128&t.flags),null===(l=o.rendering))if(r)$s(o,!1);else{if(0!==Rl||null!==e&&128&e.flags)for(e=t.child;null!==e;){if(null!==(l=eo(e))){for(t.flags|=128,$s(o,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ni(Za,1&Za.current|2),t.child}e=e.sibling}null!==o.tail&&Xe()>Wl&&(t.flags|=128,r=!0,$s(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=eo(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),$s(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!ia)return Ys(t),null}else 2*Xe()-o.renderingStartTime>Wl&&1073741824!==n&&(t.flags|=128,r=!0,$s(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=o.last)?n.sibling=l:t.child=l,o.last=l)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Xe(),t.sibling=null,n=Za.current,Ni(Za,r?1&n|2:1&n),t):(Ys(t),null);case 22:case 23:return cd(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&1&t.mode?!!(1073741824&Dl)&&(Ys(t),6&t.subtreeFlags&&(t.flags|=8192)):Ys(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Ks(e,t){switch(ta(t),t.tag){case 1:return Di(t.type)&&Oi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Qa(),Pi(Ai),Pi(ki),no(),65536&(e=t.flags)&&!(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Va(t),null;case 13:if(Pi(Za),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));ha()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Pi(Za),null;case 4:return Qa(),null;case 10:return Ia(t.type._context),null;case 22:case 23:return cd(),null;default:return null}}Ts=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ds=function(){},Os=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Ka($a.current);var a,o=null;switch(n){case"input":i=J(e,i),r=J(e,r),o=[];break;case"select":i=U({},i,{value:void 0}),r=U({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!=typeof i.onClick&&"function"==typeof r.onClick&&(e.onclick=Zr)}for(u in ve(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(s.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var d=r[u];if(l=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&d!==l&&(null!=d||null!=l))if("style"===u)if(l){for(a in l)!l.hasOwnProperty(a)||d&&d.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in d)d.hasOwnProperty(a)&&l[a]!==d[a]&&(n||(n={}),n[a]=d[a])}else n||(o||(o=[]),o.push(u,n)),n=d;else"dangerouslySetInnerHTML"===u?(d=d?d.__html:void 0,l=l?l.__html:void 0,null!=d&&l!==d&&(o=o||[]).push(u,d)):"children"===u?"string"!=typeof d&&"number"!=typeof d||(o=o||[]).push(u,""+d):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(s.hasOwnProperty(u)?(null!=d&&"onScroll"===u&&Lr("scroll",e),o||l===d||(o=[])):(o=o||[]).push(u,d))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}},Rs=function(e,t,n,r){n!==r&&(t.flags|=4)};var Js=!1,Qs=!1,Xs="function"==typeof WeakSet?WeakSet:Set,Vs=null;function Zs(e,t){var n=e.ref;if(null!==n)if("function"==typeof n)try{n(null)}catch(n){_d(e,t,n)}else n.current=null}function el(e,t,n){try{n()}catch(n){_d(e,t,n)}}var tl=!1;function nl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&el(t,n,a)}i=i.next}while(i!==r)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function il(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"==typeof t?t(e):t.current=e}}function al(e){var t=e.alternate;null!==t&&(e.alternate=null,al(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[pi],delete t[hi],delete t[gi],delete t[yi],delete t[mi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ol(e){return 5===e.tag||3===e.tag||4===e.tag}function sl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ol(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!=(n=n._reactRootContainer)||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function dl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(dl(e,t,n),e=e.sibling;null!==e;)dl(e,t,n),e=e.sibling}var ul=null,cl=!1;function pl(e,t,n){for(n=n.child;null!==n;)hl(e,t,n),n=n.sibling}function hl(e,t,n){if(at&&"function"==typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(e){}switch(n.tag){case 5:Qs||Zs(n,t);case 6:var r=ul,i=cl;ul=null,pl(e,t,n),cl=i,null!==(ul=r)&&(cl?(e=ul,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ul.removeChild(n.stateNode));break;case 18:null!==ul&&(cl?(e=ul,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),Wt(e)):li(ul,n.stateNode));break;case 4:r=ul,i=cl,ul=n.stateNode.containerInfo,cl=!0,pl(e,t,n),ul=r,cl=i;break;case 0:case 11:case 14:case 15:if(!Qs&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(2&a||4&a)&&el(n,t,o),i=i.next}while(i!==r)}pl(e,t,n);break;case 1:if(!Qs&&(Zs(n,t),"function"==typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(e){_d(n,t,e)}pl(e,t,n);break;case 21:pl(e,t,n);break;case 22:1&n.mode?(Qs=(r=Qs)||null!==n.memoizedState,pl(e,t,n),Qs=r):pl(e,t,n);break;default:pl(e,t,n)}}function fl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Xs),t.forEach((function(t){var r=kd.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function gl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,s=t,l=s;e:for(;null!==l;){switch(l.tag){case 5:ul=l.stateNode,cl=!1;break e;case 3:case 4:ul=l.stateNode.containerInfo,cl=!0;break e}l=l.return}if(null===ul)throw Error(a(160));hl(o,s,i),ul=null,cl=!1;var d=i.alternate;null!==d&&(d.return=null),i.return=null}catch(e){_d(i,t,e)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)yl(t,e),t=t.sibling}function yl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gl(t,e),ml(e),4&r){try{nl(3,e,e.return),rl(3,e)}catch(t){_d(e,e.return,t)}try{nl(5,e,e.return)}catch(t){_d(e,e.return,t)}}break;case 1:gl(t,e),ml(e),512&r&&null!==n&&Zs(n,n.return);break;case 5:if(gl(t,e),ml(e),512&r&&null!==n&&Zs(n,n.return),32&e.flags){var i=e.stateNode;try{pe(i,"")}catch(t){_d(e,e.return,t)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,s=null!==n?n.memoizedProps:o,l=e.type,d=e.updateQueue;if(e.updateQueue=null,null!==d)try{"input"===l&&"radio"===o.type&&null!=o.name&&X(i,o),Ce(l,s);var u=Ce(l,o);for(s=0;s<d.length;s+=2){var c=d[s],p=d[s+1];"style"===c?ye(i,p):"dangerouslySetInnerHTML"===c?ce(i,p):"children"===c?pe(i,p):C(i,c,p,u)}switch(l){case"input":V(i,o);break;case"textarea":ae(i,o);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var f=o.value;null!=f?ne(i,!!o.multiple,f,!1):h!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[hi]=o}catch(t){_d(e,e.return,t)}}break;case 6:if(gl(t,e),ml(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(t){_d(e,e.return,t)}}break;case 3:if(gl(t,e),ml(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Wt(t.containerInfo)}catch(t){_d(e,e.return,t)}break;case 4:default:gl(t,e),ml(e);break;case 13:gl(t,e),ml(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(Bl=Xe())),4&r&&fl(e);break;case 22:if(c=null!==n&&null!==n.memoizedState,1&e.mode?(Qs=(u=Qs)||c,gl(t,e),Qs=u):gl(t,e),ml(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!c&&1&e.mode)for(Vs=e,c=e.child;null!==c;){for(p=Vs=c;null!==Vs;){switch(f=(h=Vs).child,h.tag){case 0:case 11:case 14:case 15:nl(4,h,h.return);break;case 1:Zs(h,h.return);var g=h.stateNode;if("function"==typeof g.componentWillUnmount){r=h,n=h.return;try{t=r,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(e){_d(r,n,e)}}break;case 5:Zs(h,h.return);break;case 22:if(null!==h.memoizedState){Sl(p);continue}}null!==f?(f.return=h,Vs=f):Sl(p)}c=c.sibling}e:for(c=null,p=e;;){if(5===p.tag){if(null===c){c=p;try{i=p.stateNode,u?"function"==typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(l=p.stateNode,s=null!=(d=p.memoizedProps.style)&&d.hasOwnProperty("display")?d.display:null,l.style.display=ge("display",s))}catch(t){_d(e,e.return,t)}}}else if(6===p.tag){if(null===c)try{p.stateNode.nodeValue=u?"":p.memoizedProps}catch(t){_d(e,e.return,t)}}else if((22!==p.tag&&23!==p.tag||null===p.memoizedState||p===e)&&null!==p.child){p.child.return=p,p=p.child;continue}if(p===e)break e;for(;null===p.sibling;){if(null===p.return||p.return===e)break e;c===p&&(c=null),p=p.return}c===p&&(c=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:gl(t,e),ml(e),4&r&&fl(e);case 21:}}function ml(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ol(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(pe(i,""),r.flags&=-33),dl(e,sl(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;ll(e,sl(e),o);break;default:throw Error(a(161))}}catch(t){_d(e,e.return,t)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function vl(e,t,n){Vs=e,Cl(e,t,n)}function Cl(e,t,n){for(var r=!!(1&e.mode);null!==Vs;){var i=Vs,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Js;if(!o){var s=i.alternate,l=null!==s&&null!==s.memoizedState||Qs;s=Js;var d=Qs;if(Js=o,(Qs=l)&&!d)for(Vs=i;null!==Vs;)l=(o=Vs).child,22===o.tag&&null!==o.memoizedState?El(i):null!==l?(l.return=o,Vs=l):El(i);for(;null!==a;)Vs=a,Cl(a,t,n),a=a.sibling;Vs=i,Js=s,Qs=d}bl(e)}else 8772&i.subtreeFlags&&null!==a?(a.return=i,Vs=a):bl(e)}}function bl(e){for(;null!==Vs;){var t=Vs;if(8772&t.flags){var n=t.alternate;try{if(8772&t.flags)switch(t.tag){case 0:case 11:case 15:Qs||rl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Qs)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ns(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&za(t,o,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}za(t,s,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var d=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&n.focus();break;case"img":d.src&&(n.src=d.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var c=u.memoizedState;if(null!==c){var p=c.dehydrated;null!==p&&Wt(p)}}}break;default:throw Error(a(163))}Qs||512&t.flags&&il(t)}catch(e){_d(t,t.return,e)}}if(t===e){Vs=null;break}if(null!==(n=t.sibling)){n.return=t.return,Vs=n;break}Vs=t.return}}function Sl(e){for(;null!==Vs;){var t=Vs;if(t===e){Vs=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Vs=n;break}Vs=t.return}}function El(e){for(;null!==Vs;){var t=Vs;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(e){_d(t,n,e)}break;case 1:var r=t.stateNode;if("function"==typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(e){_d(t,i,e)}}var a=t.return;try{il(t)}catch(e){_d(t,a,e)}break;case 5:var o=t.return;try{il(t)}catch(e){_d(t,o,e)}}}catch(e){_d(t,t.return,e)}if(t===e){Vs=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Vs=s;break}Vs=t.return}}var wl,_l=Math.ceil,Pl=b.ReactCurrentDispatcher,Nl=b.ReactCurrentOwner,Il=b.ReactCurrentBatchConfig,kl=0,Al=null,xl=null,Tl=0,Dl=0,Ol=_i(0),Rl=0,Fl=null,Ml=0,Ul=0,Hl=0,Ll=null,Gl=null,Bl=0,Wl=1/0,zl=null,jl=!1,$l=null,Yl=null,ql=!1,Kl=null,Jl=0,Ql=0,Xl=null,Vl=-1,Zl=0;function ed(){return 6&kl?Xe():-1!==Vl?Vl:Vl=Xe()}function td(e){return 1&e.mode?2&kl&&0!==Tl?Tl&-Tl:null!==ga.transition?(0===Zl&&(Zl=gt()),Zl):0!==(e=Ct)?e:e=void 0===(e=window.event)?16:Qt(e.type):1}function nd(e,t,n,r){if(50<Ql)throw Ql=0,Xl=null,Error(a(185));mt(e,n,r),2&kl&&e===Al||(e===Al&&(!(2&kl)&&(Ul|=n),4===Rl&&sd(e,Tl)),rd(e,r),1===n&&0===kl&&!(1&t.mode)&&(Wl=Xe()+500,Li&&Wi()))}function rd(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),s=1<<o,l=i[o];-1===l?s&n&&!(s&r)||(i[o]=ht(s,t)):l<=t&&(e.expiredLanes|=s),a&=~s}}(e,t);var r=pt(e,e===Al?Tl:0);if(0===r)null!==n&&Ke(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ke(n),1===t)0===e.tag?function(e){Li=!0,Bi(e)}(ld.bind(null,e)):Bi(ld.bind(null,e)),oi((function(){!(6&kl)&&Wi()})),n=null;else{switch(bt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Ad(n,id.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function id(e,t){if(Vl=-1,Zl=0,6&kl)throw Error(a(327));var n=e.callbackNode;if(Ed()&&e.callbackNode!==n)return null;var r=pt(e,e===Al?Tl:0);if(0===r)return null;if(30&r||r&e.expiredLanes||t)t=yd(e,r);else{t=r;var i=kl;kl|=2;var o=fd();for(Al===e&&Tl===t||(zl=null,Wl=Xe()+500,pd(e,t));;)try{vd();break}catch(t){hd(e,t)}Na(),Pl.current=o,kl=i,null!==xl?t=0:(Al=null,Tl=0,t=Rl)}if(0!==t){if(2===t&&(0!==(i=ft(e))&&(r=i,t=ad(e,i))),1===t)throw n=Fl,pd(e,0),sd(e,r),rd(e,Xe()),n;if(6===t)sd(e,r);else{if(i=e.current.alternate,!(30&r||function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!sr(a(),i))return!1}catch(e){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)||(t=yd(e,r),2===t&&(o=ft(e),0!==o&&(r=o,t=ad(e,o))),1!==t)))throw n=Fl,pd(e,0),sd(e,r),rd(e,Xe()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:Sd(e,Gl,zl);break;case 3:if(sd(e,r),(130023424&r)===r&&10<(t=Bl+500-Xe())){if(0!==pt(e,0))break;if(((i=e.suspendedLanes)&r)!==r){ed(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(Sd.bind(null,e,Gl,zl),t);break}Sd(e,Gl,zl);break;case 4:if(sd(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-ot(r);o=1<<s,(s=t[s])>i&&(i=s),r&=~o}if(r=i,10<(r=(120>(r=Xe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*_l(r/1960))-r)){e.timeoutHandle=ri(Sd.bind(null,e,Gl,zl),r);break}Sd(e,Gl,zl);break;default:throw Error(a(329))}}}return rd(e,Xe()),e.callbackNode===n?id.bind(null,e):null}function ad(e,t){var n=Ll;return e.current.memoizedState.isDehydrated&&(pd(e,t).flags|=256),2!==(e=yd(e,t))&&(t=Gl,Gl=n,null!==t&&od(t)),e}function od(e){null===Gl?Gl=e:Gl.push.apply(Gl,e)}function sd(e,t){for(t&=~Hl,t&=~Ul,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function ld(e){if(6&kl)throw Error(a(327));Ed();var t=pt(e,0);if(!(1&t))return rd(e,Xe()),null;var n=yd(e,t);if(0!==e.tag&&2===n){var r=ft(e);0!==r&&(t=r,n=ad(e,r))}if(1===n)throw n=Fl,pd(e,0),sd(e,t),rd(e,Xe()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Sd(e,Gl,zl),rd(e,Xe()),null}function dd(e,t){var n=kl;kl|=1;try{return e(t)}finally{0===(kl=n)&&(Wl=Xe()+500,Li&&Wi())}}function ud(e){null!==Kl&&0===Kl.tag&&!(6&kl)&&Ed();var t=kl;kl|=1;var n=Il.transition,r=Ct;try{if(Il.transition=null,Ct=1,e)return e()}finally{Ct=r,Il.transition=n,!(6&(kl=t))&&Wi()}}function cd(){Dl=Ol.current,Pi(Ol)}function pd(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==xl)for(n=xl.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!=(r=r.type.childContextTypes)&&Oi();break;case 3:Qa(),Pi(Ai),Pi(ki),no();break;case 5:Va(r);break;case 4:Qa();break;case 13:case 19:Pi(Za);break;case 10:Ia(r.type._context);break;case 22:case 23:cd()}n=n.return}if(Al=e,xl=e=Od(e.current,null),Tl=Dl=t,Rl=0,Fl=null,Hl=Ul=Ml=0,Gl=Ll=null,null!==Ta){for(t=0;t<Ta.length;t++)if(null!==(r=(n=Ta[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}Ta=null}return e}function hd(e,t){for(;;){var n=xl;try{if(Na(),ro.current=Vo,uo){for(var r=oo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}uo=!1}if(ao=0,lo=so=oo=null,co=!1,po=0,Nl.current=null,null===n||null===n.return){Rl=1,Fl=t,xl=null;break}e:{var o=e,s=n.return,l=n,d=t;if(t=Tl,l.flags|=32768,null!==d&&"object"==typeof d&&"function"==typeof d.then){var u=d,c=l,p=c.tag;if(!(1&c.mode||0!==p&&11!==p&&15!==p)){var h=c.alternate;h?(c.updateQueue=h.updateQueue,c.memoizedState=h.memoizedState,c.lanes=h.lanes):(c.updateQueue=null,c.memoizedState=null)}var f=ys(s);if(null!==f){f.flags&=-257,ms(f,s,l,0,t),1&f.mode&&gs(o,u,t),d=u;var g=(t=f).updateQueue;if(null===g){var y=new Set;y.add(d),t.updateQueue=y}else g.add(d);break e}if(!(1&t)){gs(o,u,t),gd();break e}d=Error(a(426))}else if(ia&&1&l.mode){var m=ys(s);if(null!==m){!(65536&m.flags)&&(m.flags|=256),ms(m,s,l,0,t),fa(ds(d,l));break e}}o=d=ds(d,l),4!==Rl&&(Rl=2),null===Ll?Ll=[o]:Ll.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ba(o,hs(0,d,t));break e;case 1:l=d;var v=o.type,C=o.stateNode;if(!(128&o.flags||"function"!=typeof v.getDerivedStateFromError&&(null===C||"function"!=typeof C.componentDidCatch||null!==Yl&&Yl.has(C)))){o.flags|=65536,t&=-t,o.lanes|=t,Ba(o,fs(o,l,t));break e}}o=o.return}while(null!==o)}bd(n)}catch(e){t=e,xl===n&&null!==n&&(xl=n=n.return);continue}break}}function fd(){var e=Pl.current;return Pl.current=Vo,null===e?Vo:e}function gd(){0!==Rl&&3!==Rl&&2!==Rl||(Rl=4),null===Al||!(268435455&Ml)&&!(268435455&Ul)||sd(Al,Tl)}function yd(e,t){var n=kl;kl|=2;var r=fd();for(Al===e&&Tl===t||(zl=null,pd(e,t));;)try{md();break}catch(t){hd(e,t)}if(Na(),kl=n,Pl.current=r,null!==xl)throw Error(a(261));return Al=null,Tl=0,Rl}function md(){for(;null!==xl;)Cd(xl)}function vd(){for(;null!==xl&&!Je();)Cd(xl)}function Cd(e){var t=wl(e.alternate,e,Dl);e.memoizedProps=e.pendingProps,null===t?bd(e):xl=t,Nl.current=null}function bd(e){var t=e;do{var n=t.alternate;if(e=t.return,32768&t.flags){if(null!==(n=Ks(n,t)))return n.flags&=32767,void(xl=n);if(null===e)return Rl=6,void(xl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}else if(null!==(n=qs(n,t,Dl)))return void(xl=n);if(null!==(t=t.sibling))return void(xl=t);xl=t=e}while(null!==t);0===Rl&&(Rl=5)}function Sd(e,t,n){var r=Ct,i=Il.transition;try{Il.transition=null,Ct=1,function(e,t,n,r){do{Ed()}while(null!==Kl);if(6&kl)throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===Al&&(xl=Al=null,Tl=0),!(2064&n.subtreeFlags)&&!(2064&n.flags)||ql||(ql=!0,Ad(tt,(function(){return Ed(),null}))),o=!!(15990&n.flags),!!(15990&n.subtreeFlags)||o){o=Il.transition,Il.transition=null;var s=Ct;Ct=1;var l=kl;kl|=4,Nl.current=null,function(e,t){if(ei=jt,hr(e=pr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(e){n=null;break e}var s=0,l=-1,d=-1,u=0,c=0,p=e,h=null;t:for(;;){for(var f;p!==n||0!==i&&3!==p.nodeType||(l=s+i),p!==o||0!==r&&3!==p.nodeType||(d=s+r),3===p.nodeType&&(s+=p.nodeValue.length),null!==(f=p.firstChild);)h=p,p=f;for(;;){if(p===e)break t;if(h===n&&++u===i&&(l=s),h===o&&++c===r&&(d=s),null!==(f=p.nextSibling))break;h=(p=h).parentNode}p=f}n=-1===l||-1===d?null:{start:l,end:d}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},jt=!1,Vs=t;null!==Vs;)if(e=(t=Vs).child,1028&t.subtreeFlags&&null!==e)e.return=t,Vs=e;else for(;null!==Vs;){t=Vs;try{var g=t.alternate;if(1024&t.flags)switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==g){var y=g.memoizedProps,m=g.memoizedState,v=t.stateNode,C=v.getSnapshotBeforeUpdate(t.elementType===t.type?y:ns(t.type,y),m);v.__reactInternalSnapshotBeforeUpdate=C}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(a(163))}}catch(e){_d(t,t.return,e)}if(null!==(e=t.sibling)){e.return=t.return,Vs=e;break}Vs=t.return}g=tl,tl=!1}(e,n),yl(n,e),fr(ti),jt=!!ei,ti=ei=null,e.current=n,vl(n,e,i),Qe(),kl=l,Ct=s,Il.transition=o}else e.current=n;if(ql&&(ql=!1,Kl=e,Jl=i),o=e.pendingLanes,0===o&&(Yl=null),function(e){if(at&&"function"==typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,!(128&~e.current.flags))}catch(e){}}(n.stateNode),rd(e,Xe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(jl)throw jl=!1,e=$l,$l=null,e;!!(1&Jl)&&0!==e.tag&&Ed(),o=e.pendingLanes,1&o?e===Xl?Ql++:(Ql=0,Xl=e):Ql=0,Wi()}(e,t,n,r)}finally{Il.transition=i,Ct=r}return null}function Ed(){if(null!==Kl){var e=bt(Jl),t=Il.transition,n=Ct;try{if(Il.transition=null,Ct=16>e?16:e,null===Kl)var r=!1;else{if(e=Kl,Kl=null,Jl=0,6&kl)throw Error(a(331));var i=kl;for(kl|=4,Vs=e.current;null!==Vs;){var o=Vs,s=o.child;if(16&Vs.flags){var l=o.deletions;if(null!==l){for(var d=0;d<l.length;d++){var u=l[d];for(Vs=u;null!==Vs;){var c=Vs;switch(c.tag){case 0:case 11:case 15:nl(8,c,o)}var p=c.child;if(null!==p)p.return=c,Vs=p;else for(;null!==Vs;){var h=(c=Vs).sibling,f=c.return;if(al(c),c===u){Vs=null;break}if(null!==h){h.return=f,Vs=h;break}Vs=f}}}var g=o.alternate;if(null!==g){var y=g.child;if(null!==y){g.child=null;do{var m=y.sibling;y.sibling=null,y=m}while(null!==y)}}Vs=o}}if(2064&o.subtreeFlags&&null!==s)s.return=o,Vs=s;else e:for(;null!==Vs;){if(2048&(o=Vs).flags)switch(o.tag){case 0:case 11:case 15:nl(9,o,o.return)}var v=o.sibling;if(null!==v){v.return=o.return,Vs=v;break e}Vs=o.return}}var C=e.current;for(Vs=C;null!==Vs;){var b=(s=Vs).child;if(2064&s.subtreeFlags&&null!==b)b.return=s,Vs=b;else e:for(s=C;null!==Vs;){if(2048&(l=Vs).flags)try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(e){_d(l,l.return,e)}if(l===s){Vs=null;break e}var S=l.sibling;if(null!==S){S.return=l.return,Vs=S;break e}Vs=l.return}}if(kl=i,Wi(),at&&"function"==typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(e){}r=!0}return r}finally{Ct=n,Il.transition=t}}return!1}function wd(e,t,n){e=La(e,t=hs(0,t=ds(n,t),1),1),t=ed(),null!==e&&(mt(e,1,t),rd(e,t))}function _d(e,t,n){if(3===e.tag)wd(e,e,n);else for(;null!==t;){if(3===t.tag){wd(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===Yl||!Yl.has(r))){t=La(t,e=fs(t,e=ds(n,e),1),1),e=ed(),null!==t&&(mt(t,1,e),rd(t,e));break}}t=t.return}}function Pd(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ed(),e.pingedLanes|=e.suspendedLanes&n,Al===e&&(Tl&n)===n&&(4===Rl||3===Rl&&(130023424&Tl)===Tl&&500>Xe()-Bl?pd(e,0):Hl|=n),rd(e,t)}function Nd(e,t){0===t&&(1&e.mode?(t=ut,!(130023424&(ut<<=1))&&(ut=4194304)):t=1);var n=ed();null!==(e=Ra(e,t))&&(mt(e,t,n),rd(e,n))}function Id(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Nd(e,n)}function kd(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Nd(e,n)}function Ad(e,t){return qe(e,t)}function xd(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Td(e,t,n,r){return new xd(e,t,n,r)}function Dd(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Od(e,t){var n=e.alternate;return null===n?((n=Td(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Rd(e,t,n,r,i,o){var s=2;if(r=e,"function"==typeof e)Dd(e)&&(s=1);else if("string"==typeof e)s=5;else e:switch(e){case w:return Fd(n.children,i,o,t);case _:s=8,i|=8;break;case P:return(e=Td(12,n,t,2|i)).elementType=P,e.lanes=o,e;case A:return(e=Td(13,n,t,i)).elementType=A,e.lanes=o,e;case x:return(e=Td(19,n,t,i)).elementType=x,e.lanes=o,e;case O:return Md(n,i,o,t);default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case N:s=10;break e;case I:s=9;break e;case k:s=11;break e;case T:s=14;break e;case D:s=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Td(s,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Fd(e,t,n,r){return(e=Td(7,e,r,t)).lanes=n,e}function Md(e,t,n,r){return(e=Td(22,e,r,t)).elementType=O,e.lanes=n,e.stateNode={isHidden:!1},e}function Ud(e,t,n){return(e=Td(6,e,null,t)).lanes=n,e}function Hd(e,t,n){return(t=Td(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Ld(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yt(0),this.expirationTimes=yt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Gd(e,t,n,r,i,a,o,s,l){return e=new Ld(e,t,n,s,l),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Td(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ma(a),e}function Bd(e){if(!e)return Ii;e:{if(We(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Di(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Di(n))return Fi(e,n,t)}return t}function Wd(e,t,n,r,i,a,o,s,l){return(e=Gd(n,r,!0,e,0,a,0,s,l)).context=Bd(null),n=e.current,(a=Ha(r=ed(),i=td(n))).callback=null!=t?t:null,La(n,a,i),e.current.lanes=i,mt(e,i,r),rd(e,r),e}function zd(e,t,n,r){var i=t.current,a=ed(),o=td(i);return n=Bd(n),null===t.context?t.context=n:t.pendingContext=n,(t=Ha(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=La(i,t,o))&&(nd(e,i,o,a),Ga(e,i,o)),o}function jd(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function $d(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Yd(e,t){$d(e,t),(e=e.alternate)&&$d(e,t)}wl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ai.current)Cs=!0;else{if(!(e.lanes&n||128&t.flags))return Cs=!1,function(e,t,n){switch(t.tag){case 3:As(t),ha();break;case 5:Xa(t);break;case 1:Di(t.type)&&Mi(t);break;case 4:Ja(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ni(Ea,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ni(Za,1&Za.current),t.flags|=128,null):n&t.child.childLanes?Us(e,t,n):(Ni(Za,1&Za.current),null!==(e=js(e,t,n))?e.sibling:null);Ni(Za,1&Za.current);break;case 19:if(r=!!(n&t.childLanes),128&e.flags){if(r)return Ws(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ni(Za,Za.current),r)break;return null;case 22:case 23:return t.lanes=0,_s(e,t,n)}return js(e,t,n)}(e,t,n);Cs=!!(131072&e.flags)}else Cs=!1,ia&&1048576&t.flags&&Zi(t,Yi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;zs(e,t),e=t.pendingProps;var i=Ti(t,ki.current);Aa(t,n),i=yo(null,t,r,e,i,n);var o=mo();return t.flags|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Di(r)?(o=!0,Mi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Ma(t),i.updater=is,t.stateNode=i,i._reactInternals=t,ls(t,r,e,n),t=ks(null,t,r,!0,o,n)):(t.tag=0,ia&&o&&ea(t),bs(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(zs(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"==typeof e)return Dd(e)?1:0;if(null!=e){if((e=e.$$typeof)===k)return 11;if(e===T)return 14}return 2}(r),e=ns(r,e),i){case 0:t=Ns(null,t,r,e,n);break e;case 1:t=Is(null,t,r,e,n);break e;case 11:t=Ss(null,t,r,e,n);break e;case 14:t=Es(null,t,r,ns(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ns(e,t,r,i=t.elementType===r?i:ns(r,i),n);case 1:return r=t.type,i=t.pendingProps,Is(e,t,r,i=t.elementType===r?i:ns(r,i),n);case 3:e:{if(As(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,Ua(e,t),Wa(t,r,null,n);var s=t.memoizedState;if(r=s.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=xs(e,t,r,n,i=ds(Error(a(423)),t));break e}if(r!==i){t=xs(e,t,r,n,i=ds(Error(a(424)),t));break e}for(ra=di(t.stateNode.containerInfo.firstChild),na=t,ia=!0,aa=null,n=Sa(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(ha(),r===i){t=js(e,t,n);break e}bs(e,t,r,n)}t=t.child}return t;case 5:return Xa(t),null===e&&da(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,s=i.children,ni(r,i)?s=null:null!==o&&ni(r,o)&&(t.flags|=32),Ps(e,t),bs(e,t,s,n),t.child;case 6:return null===e&&da(t),null;case 13:return Us(e,t,n);case 4:return Ja(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=ba(t,null,r,n):bs(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Ss(e,t,r,i=t.elementType===r?i:ns(r,i),n);case 7:return bs(e,t,t.pendingProps,n),t.child;case 8:case 12:return bs(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,s=i.value,Ni(Ea,r._currentValue),r._currentValue=s,null!==o)if(sr(o.value,s)){if(o.children===i.children&&!Ai.current){t=js(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var l=o.dependencies;if(null!==l){s=o.child;for(var d=l.firstContext;null!==d;){if(d.context===r){if(1===o.tag){(d=Ha(-1,n&-n)).tag=2;var u=o.updateQueue;if(null!==u){var c=(u=u.shared).pending;null===c?d.next=d:(d.next=c.next,c.next=d),u.pending=d}}o.lanes|=n,null!==(d=o.alternate)&&(d.lanes|=n),ka(o.return,n,t),l.lanes|=n;break}d=d.next}}else if(10===o.tag)s=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(s=o.return))throw Error(a(341));s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),ka(s,n,t),s=o.sibling}else s=o.child;if(null!==s)s.return=o;else for(s=o;null!==s;){if(s===t){s=null;break}if(null!==(o=s.sibling)){o.return=s.return,s=o;break}s=s.return}o=s}bs(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Aa(t,n),r=r(i=xa(i)),t.flags|=1,bs(e,t,r,n),t.child;case 14:return i=ns(r=t.type,t.pendingProps),Es(e,t,r,i=ns(r.type,i),n);case 15:return ws(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ns(r,i),zs(e,t),t.tag=1,Di(r)?(e=!0,Mi(t)):e=!1,Aa(t,n),os(t,r,i),ls(t,r,i,n),ks(null,t,r,!0,e,n);case 19:return Ws(e,t,n);case 22:return _s(e,t,n)}throw Error(a(156,t.tag))};var qd="function"==typeof reportError?reportError:function(e){console.error(e)};function Kd(e){this._internalRoot=e}function Jd(e){this._internalRoot=e}function Qd(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Xd(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Vd(){}function Zd(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"==typeof i){var s=i;i=function(){var e=jd(o);s.call(e)}}zd(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"==typeof r){var a=r;r=function(){var e=jd(o);a.call(e)}}var o=Wd(t,r,e,0,null,!1,0,"",Vd);return e._reactRootContainer=o,e[fi]=o.current,Wr(8===e.nodeType?e.parentNode:e),ud(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"==typeof r){var s=r;r=function(){var e=jd(l);s.call(e)}}var l=Gd(e,0,!1,null,0,!1,0,"",Vd);return e._reactRootContainer=l,e[fi]=l.current,Wr(8===e.nodeType?e.parentNode:e),ud((function(){zd(t,l,n,r)})),l}(n,t,e,i,r);return jd(o)}Jd.prototype.render=Kd.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));zd(e,t,null,null)},Jd.prototype.unmount=Kd.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;ud((function(){zd(null,e,null,null)})),t[fi]=null}},Jd.prototype.unstable_scheduleHydration=function(e){if(e){var t=_t();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ot.length&&0!==t&&t<Ot[n].priority;n++);Ot.splice(n,0,e),0===n&&Ut(e)}},St=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ct(t.pendingLanes);0!==n&&(vt(t,1|n),rd(t,Xe()),!(6&kl)&&(Wl=Xe()+500,Wi()))}break;case 13:ud((function(){var t=Ra(e,1);if(null!==t){var n=ed();nd(t,e,1,n)}})),Yd(e,1)}},Et=function(e){if(13===e.tag){var t=Ra(e,134217728);if(null!==t)nd(t,e,134217728,ed());Yd(e,134217728)}},wt=function(e){if(13===e.tag){var t=td(e),n=Ra(e,t);if(null!==n)nd(n,e,t,ed());Yd(e,t)}},_t=function(){return Ct},Pt=function(e,t){var n=Ct;try{return Ct=e,t()}finally{Ct=n}},Ee=function(e,t,n){switch(t){case"input":if(V(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=Si(r);if(!i)throw Error(a(90));q(r),V(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},ke=dd,Ae=ud;var eu={usingClientEntryPoint:!1,Events:[Ci,bi,Si,Ne,Ie,dd]},tu={findFiberByHostInstance:vi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nu={bundleType:tu.bundleType,version:tu.version,rendererPackageName:tu.rendererPackageName,rendererConfig:tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=$e(e))?null:e.stateNode},findFiberByHostInstance:tu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ru.isDisabled&&ru.supportsFiber)try{it=ru.inject(nu),at=ru}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Qd(t))throw Error(a(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:E,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Qd(e))throw Error(a(299));var n=!1,r="",i=qd;return null!=t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Gd(e,1,!1,null,0,n,0,r,i),e[fi]=t.current,Wr(8===e.nodeType?e.parentNode:e),new Kd(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=$e(t))?null:e.stateNode},t.flushSync=function(e){return ud(e)},t.hydrate=function(e,t,n){if(!Xd(t))throw Error(a(200));return Zd(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Qd(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",s=qd;if(null!=n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=Wd(t,null,e,1,null!=n?n:null,i,0,o,s),e[fi]=t.current,Wr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Jd(t)},t.render=function(e,t,n){if(!Xd(t))throw Error(a(200));return Zd(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Xd(e))throw Error(a(40));return!!e._reactRootContainer&&(ud((function(){Zd(null,null,e,!1,(function(){e._reactRootContainer=null,e[fi]=null}))})),!0)},t.unstable_batchedUpdates=dd,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Xd(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return Zd(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},961:(e,t,n)=>{"use strict";!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),e.exports=n(2551)},2799:(e,t)=>{"use strict";var n="function"==typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,l=n?Symbol.for("react.provider"):60109,d=n?Symbol.for("react.context"):60110,u=n?Symbol.for("react.async_mode"):60111,c=n?Symbol.for("react.concurrent_mode"):60111,p=n?Symbol.for("react.forward_ref"):60112,h=n?Symbol.for("react.suspense"):60113,f=n?Symbol.for("react.suspense_list"):60120,g=n?Symbol.for("react.memo"):60115,y=n?Symbol.for("react.lazy"):60116,m=n?Symbol.for("react.block"):60121,v=n?Symbol.for("react.fundamental"):60117,C=n?Symbol.for("react.responder"):60118,b=n?Symbol.for("react.scope"):60119;function S(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case u:case c:case a:case s:case o:case h:return e;default:switch(e=e&&e.$$typeof){case d:case p:case y:case g:case l:return e;default:return t}}case i:return t}}}function E(e){return S(e)===c}t.AsyncMode=u,t.ConcurrentMode=c,t.ContextConsumer=d,t.ContextProvider=l,t.Element=r,t.ForwardRef=p,t.Fragment=a,t.Lazy=y,t.Memo=g,t.Portal=i,t.Profiler=s,t.StrictMode=o,t.Suspense=h,t.isAsyncMode=function(e){return E(e)||S(e)===u},t.isConcurrentMode=E,t.isContextConsumer=function(e){return S(e)===d},t.isContextProvider=function(e){return S(e)===l},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return S(e)===p},t.isFragment=function(e){return S(e)===a},t.isLazy=function(e){return S(e)===y},t.isMemo=function(e){return S(e)===g},t.isPortal=function(e){return S(e)===i},t.isProfiler=function(e){return S(e)===s},t.isStrictMode=function(e){return S(e)===o},t.isSuspense=function(e){return S(e)===h},t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===a||e===c||e===s||e===o||e===h||e===f||"object"==typeof e&&null!==e&&(e.$$typeof===y||e.$$typeof===g||e.$$typeof===l||e.$$typeof===d||e.$$typeof===p||e.$$typeof===v||e.$$typeof===C||e.$$typeof===b||e.$$typeof===m)},t.typeOf=S},4363:(e,t,n)=>{"use strict";e.exports=n(2799)},8989:(e,t)=>{"use strict";var n=60103,r=60106,i=60107,a=60108,o=60114,s=60109,l=60110,d=60112,u=60113,c=60120,p=60115,h=60116,f=60121,g=60122,y=60117,m=60129,v=60131;if("function"==typeof Symbol&&Symbol.for){var C=Symbol.for;n=C("react.element"),r=C("react.portal"),i=C("react.fragment"),a=C("react.strict_mode"),o=C("react.profiler"),s=C("react.provider"),l=C("react.context"),d=C("react.forward_ref"),u=C("react.suspense"),c=C("react.suspense_list"),p=C("react.memo"),h=C("react.lazy"),f=C("react.block"),g=C("react.server.block"),y=C("react.fundamental"),m=C("react.debug_trace_mode"),v=C("react.legacy_hidden")}function b(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case i:case o:case a:case u:case c:return e;default:switch(e=e&&e.$$typeof){case l:case d:case h:case p:case s:return e;default:return t}}case r:return t}}}t.isContextConsumer=function(e){return b(e)===l}},4737:(e,t,n)=>{"use strict";e.exports=n(8989)},3671:(e,t,n)=>{e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=8)}([function(e,t,n){e.exports=n(6)()},function(e,t){e.exports=n(6540)},function(e,t,n){e.exports=function(e,t){var n=["abcdefghijklmnopqrstuvwxyz","ABCDEFGHIJKLMNOPQRSTUVWXYZ","0123456789","~!@#$%^&()_+-={}[];',"],r="";(t=t||"aA0").split("").forEach((function(e){isNaN(parseInt(e))?/[a-z]/.test(e)?r+=n[0]:/[A-Z]/.test(e)?r+=n[1]:r+=n[3]:r+=n[2]})),e=e||30;for(var i="";e--;)i+=r.charAt(Math.floor(Math.random()*r.length));return i}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){"use strict";e.exports=function(e,t,n,r,i,a,o,s){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var d=[n,r,i,a,o,s],u=0;(l=new Error(t.replace(/%s/g,(function(){return d[u++]})))).name="Invariant Violation"}throw l.framesToPop=1,l}}},function(e,t,n){"use strict";function r(e){return function(){return e}}var i=function(){};i.thatReturns=r,i.thatReturnsFalse=r(!1),i.thatReturnsTrue=r(!0),i.thatReturnsNull=r(null),i.thatReturnsThis=function(){return this},i.thatReturnsArgument=function(e){return e},e.exports=i},function(e,t,n){"use strict";var r=n(5),i=n(4),a=n(3);e.exports=function(){function e(e,t,n,r,o,s){s!==a&&i(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};return n.checkPropTypes=r,n.PropTypes=n,n}},function(e,t,n){"use strict";n.r(t);var r=n(1),i=n.n(r),a=n(0),o=n.n(a),s=n(2),l=n.n(s),d=function(){function e(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));c.call(n);var r=n.props,i=r.isResponsive,a=r.startAt,o=r.endAt,s=r.fps,d=r.steps,u=r.direction;return n.id="react-responsive-spritesheet--"+l()(8),n.spriteEl=n.spriteElContainer=n.spriteElMove=n.imageSprite=n.cols=n.rows=null,n.intervalSprite=!1,n.isResponsive=i,n.startAt=n.setStartAt(a),n.endAt=n.setEndAt(o),n.fps=s,n.steps=d,n.completeLoopCicles=0,n.isPlaying=!1,n.spriteScale=1,n.direction=n.setDirection(u),n.frame=n.startAt?n.startAt:"rewind"===n.direction?n.steps-1:0,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.Component),d(t,[{key:"componentDidMount",value:function(){this.init()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.resize)}},{key:"setFps",value:function(e){this.fps=e,this.setIntervalPlayFunctions()}},{key:"setInstance",value:function(){return{play:this.play,pause:this.pause,goToAndPlay:this.goToAndPlay,goToAndPause:this.goToAndPause,setStartAt:this.setStartAt,setEndAt:this.setEndAt,setFps:this.setFps,setDirection:this.setDirection,getInfo:this.getInfo}}},{key:"render",value:function(){return this.renderElements()}}]),t}(),c=function(){var e=this;this.renderElements=function(){var t=e.props,n=t.image,r=t.className,a=t.style,o=t.widthFrame,s=t.heightFrame,l=t.background,d=t.backgroundSize,u=t.backgroundRepeat,c=t.backgroundPosition,p=t.onClick,h=t.onDoubleClick,f=t.onMouseMove,g=t.onMouseEnter,y=t.onMouseLeave,m=t.onMouseOver,v=t.onMouseOut,C=t.onMouseDown,b=t.onMouseUp,S={position:"relative",overflow:"hidden",width:o+"px",height:s+"px",transform:"scale("+e.spriteScale+")",transformOrigin:"0 0",backgroundImage:"url("+l+")",backgroundSize:d,backgroundRepeat:u,backgroundPosition:c},E=i.a.createElement("div",{className:"react-responsive-spritesheet-container__move",style:{overflow:"hidden",backgroundRepeat:"no-repeat",display:"table-cell",backgroundImage:"url("+n+")",width:o+"px",height:s+"px",transformOrigin:"0 50%"}}),w=i.a.createElement("div",{className:"react-responsive-spritesheet-container",style:S},E);return i.a.createElement("div",{className:"react-responsive-spritesheet "+e.id+" "+r,style:a,onClick:function(){return p(e.setInstance())},onDoubleClick:function(){return h(e.setInstance())},onMouseMove:function(){return f(e.setInstance())},onMouseEnter:function(){return g(e.setInstance())},onMouseLeave:function(){return y(e.setInstance())},onMouseOver:function(){return m(e.setInstance())},onMouseOut:function(){return v(e.setInstance())},onMouseDown:function(){return C(e.setInstance())},onMouseUp:function(){return b(e.setInstance())}},w)},this.init=function(){var t=e.props,n=t.image,r=t.widthFrame,i=t.heightFrame,a=t.autoplay,o=t.getInstance,s=t.onInit,l=new Image;l.src=n,l.onload=function(){if(document&&document.querySelector("."+e.id)){e.imageSprite=l,e.cols=e.imageSprite.width===r?1:e.imageSprite.width/r,e.rows=e.imageSprite.height===i?1:e.imageSprite.height/i,e.spriteEl=document.querySelector("."+e.id),e.spriteElContainer=e.spriteEl.querySelector(".react-responsive-spritesheet-container"),e.spriteElMove=e.spriteElContainer.querySelector(".react-responsive-spritesheet-container__move"),e.resize(!1),window.addEventListener("resize",e.resize),e.moveImage(!1),setTimeout((function(){e.resize(!1)}),10),!1!==a&&e.play(!0);var t=e.setInstance();o(t),s(t)}},l.onerror=function(){throw new Error("Failed to load image "+l.src)}},this.resize=function(){var t=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],n=e.props,r=n.widthFrame,i=n.onResize;e.isResponsive&&(e.spriteScale=e.spriteEl.offsetWidth/r,e.spriteElContainer.style.transform="scale("+e.spriteScale+")",e.spriteEl.style.height=e.getInfo("height")+"px",t&&i&&i(e.setInstance()))},this.play=function(){var t=0<arguments.length&&void 0!==arguments[0]&&arguments[0],n=e.props,r=n.onPlay,i=n.timeout;e.isPlaying||setTimeout((function(){r(e.setInstance()),e.setIntervalPlayFunctions(),e.isPlaying=!0}),t?i:0)},this.setIntervalPlayFunctions=function(){e.intervalSprite&&clearInterval(e.intervalSprite),e.intervalSprite=setInterval((function(){e.isPlaying&&e.moveImage()}),1e3/e.fps)},this.moveImage=function(){var t=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],n=e.props,r=n.onEnterFrame,i=n.onEachFrame,a=n.loop,o=n.onLoopComplete,s=Math.floor(e.frame/e.cols),l=e.frame-e.cols*s;e.spriteElMove.style.backgroundPosition="-"+e.props.widthFrame*l+"px -"+e.props.heightFrame*s+"px",r&&r.map((function(t){t.frame===e.frame&&t.callback&&t.callback()})),t&&("rewind"===e.direction?e.frame-=1:e.frame+=1,i&&i(e.setInstance())),e.isPlaying&&("forward"===e.direction&&(e.frame===e.steps||e.frame===e.endAt)||"rewind"===e.direction&&(-1===e.frame||e.frame===e.endAt))&&(a?(o&&o(e.setInstance()),e.completeLoopCicles+=1,e.frame=e.startAt?e.startAt:"rewind"===e.direction?e.steps-1:0):e.pause())},this.pause=function(){var t=e.props.onPause;e.isPlaying=!1,clearInterval(e.intervalSprite),t(e.setInstance())},this.goToAndPlay=function(t){e.frame=t||e.frame,e.play()},this.goToAndPause=function(t){e.pause(),e.frame=t||e.frame,e.moveImage()},this.setStartAt=function(t){return e.startAt=t?t-1:0,e.startAt},this.setEndAt=function(t){return e.endAt=t,e.endAt},this.setDirection=function(t){return e.direction="rewind"===t?"rewind":"forward",e.direction},this.getInfo=function(t){switch(t){case"direction":return e.direction;case"frame":return e.frame;case"fps":return e.fps;case"steps":return e.steps;case"width":return e.spriteElContainer.getBoundingClientRect().width;case"height":return e.spriteElContainer.getBoundingClientRect().height;case"scale":return e.spriteScale;case"isPlaying":return e.isPlaying;case"isPaused":return!e.isPlaying;case"completeLoopCicles":return e.completeLoopCicles;default:throw new Error("Invalid param `"+t+"` requested by Spritesheet.getinfo(). See the documentation on https://github.com/danilosetra/react-responsive-spritesheet")}}};u.propTypes={className:o.a.string,style:o.a.object,image:o.a.string.isRequired,widthFrame:o.a.number.isRequired,heightFrame:o.a.number.isRequired,isResponsive:o.a.bool,steps:o.a.number.isRequired,fps:o.a.number.isRequired,direction:o.a.string,timeout:o.a.number,autoplay:o.a.bool,loop:o.a.bool,startAt:o.a.number,endAt:o.a.oneOfType([o.a.oneOf([!1]),o.a.number]),background:o.a.string,backgroundSize:o.a.string,backgroundRepeat:o.a.string,backgroundPosition:o.a.string,getInstance:o.a.func,onClick:o.a.func,onDoubleClick:o.a.func,onMouseMove:o.a.func,onMouseEnter:o.a.func,onMouseLeave:o.a.func,onMouseOver:o.a.func,onMouseOut:o.a.func,onMouseDown:o.a.func,onMouseUp:o.a.func,onInit:o.a.func,onResize:o.a.oneOfType([o.a.oneOf([!1]),o.a.func]),onPlay:o.a.func,onPause:o.a.func,onLoopComplete:o.a.oneOfType([o.a.oneOf([!1]),o.a.func]),onEachFrame:o.a.oneOfType([o.a.oneOf([!1]),o.a.func]),onEnterFrame:o.a.oneOfType([o.a.oneOf([!1]),o.a.array])},u.defaultProps={className:"",style:{},isResponsive:!0,direction:"forward",timeout:0,autoplay:!0,loop:!1,startAt:0,endAt:!1,background:"",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"",getInstance:function(){},onClick:function(){},onDoubleClick:function(){},onMouseMove:function(){},onMouseEnter:function(){},onMouseLeave:function(){},onMouseOver:function(){},onMouseOut:function(){},onMouseDown:function(){},onMouseUp:function(){},onInit:function(){},onResize:!1,onPlay:function(){},onPause:function(){},onLoopComplete:!1,onEachFrame:!1,onEnterFrame:!1},t.default=u},function(e,t,n){e.exports=n(7)}])},5067:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>m,_K:()=>h,kp:()=>c,ns:()=>p,ze:()=>f});var r=n(8587),i=n(5540),a=n(6540),o=n(961),s=n(3642),l=n(7241),d=n(2403),u="unmounted",c="exited",p="entering",h="entered",f="exiting",g=function(e){function t(t,n){var r;r=e.call(this,t,n)||this;var i,a=n&&!n.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?a?(i=c,r.appearStatus=p):i=h:i=t.unmountOnExit||t.mountOnEnter?u:c,r.state={status:i},r.nextCallback=null,r}(0,i.A)(t,e),t.getDerivedStateFromProps=function(e,t){return e.in&&t.status===u?{status:c}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==p&&n!==h&&(t=p):n!==p&&n!==h||(t=f)}this.updateStatus(!1,t)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!=typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},n.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t)if(this.cancelNextCallback(),t===p){if(this.props.unmountOnExit||this.props.mountOnEnter){var n=this.props.nodeRef?this.props.nodeRef.current:o.findDOMNode(this);n&&(0,d.F)(n)}this.performEnter(e)}else this.performExit();else this.props.unmountOnExit&&this.state.status===c&&this.setState({status:u})},n.performEnter=function(e){var t=this,n=this.props.enter,r=this.context?this.context.isMounting:e,i=this.props.nodeRef?[r]:[o.findDOMNode(this),r],a=i[0],l=i[1],d=this.getTimeouts(),u=r?d.appear:d.enter;!e&&!n||s.A.disabled?this.safeSetState({status:h},(function(){t.props.onEntered(a)})):(this.props.onEnter(a,l),this.safeSetState({status:p},(function(){t.props.onEntering(a,l),t.onTransitionEnd(u,(function(){t.safeSetState({status:h},(function(){t.props.onEntered(a,l)}))}))})))},n.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),r=this.props.nodeRef?void 0:o.findDOMNode(this);t&&!s.A.disabled?(this.props.onExit(r),this.safeSetState({status:f},(function(){e.props.onExiting(r),e.onTransitionEnd(n.exit,(function(){e.safeSetState({status:c},(function(){e.props.onExited(r)}))}))}))):this.safeSetState({status:c},(function(){e.props.onExited(r)}))},n.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},n.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},n.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:o.findDOMNode(this),r=null==e&&!this.props.addEndListener;if(n&&!r){if(this.props.addEndListener){var i=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],a=i[0],s=i[1];this.props.addEndListener(a,s)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},n.render=function(){var e=this.state.status;if(e===u)return null;var t=this.props,n=t.children,i=(t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef,(0,r.A)(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return a.createElement(l.A.Provider,{value:null},"function"==typeof n?n(e,i):a.cloneElement(a.Children.only(n),i))},t}(a.Component);function y(){}g.contextType=l.A,g.propTypes={},g.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:y,onEntering:y,onEntered:y,onExit:y,onExiting:y,onExited:y},g.UNMOUNTED=u,g.EXITED=c,g.ENTERING=p,g.ENTERED=h,g.EXITING=f;const m=g},7241:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=n(6540).createContext(null)},3642:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r={disabled:!1}},2974:(e,t,n)=>{"use strict";n.r(t),n.d(t,{CSSTransition:()=>h,ReplaceTransition:()=>w,SwitchTransition:()=>D,Transition:()=>d.Ay,TransitionGroup:()=>S,config:()=>O.A});var r=n(8168),i=n(8587),a=n(5540),o=n(922),s=n(8995),l=n(6540),d=n(5067),u=n(2403),c=function(e,t){return e&&t&&t.split(" ").forEach((function(t){return(0,s.A)(e,t)}))},p=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).appliedClasses={appear:{},enter:{},exit:{}},t.onEnter=function(e,n){var r=t.resolveArguments(e,n),i=r[0],a=r[1];t.removeClasses(i,"exit"),t.addClass(i,a?"appear":"enter","base"),t.props.onEnter&&t.props.onEnter(e,n)},t.onEntering=function(e,n){var r=t.resolveArguments(e,n),i=r[0],a=r[1]?"appear":"enter";t.addClass(i,a,"active"),t.props.onEntering&&t.props.onEntering(e,n)},t.onEntered=function(e,n){var r=t.resolveArguments(e,n),i=r[0],a=r[1]?"appear":"enter";t.removeClasses(i,a),t.addClass(i,a,"done"),t.props.onEntered&&t.props.onEntered(e,n)},t.onExit=function(e){var n=t.resolveArguments(e)[0];t.removeClasses(n,"appear"),t.removeClasses(n,"enter"),t.addClass(n,"exit","base"),t.props.onExit&&t.props.onExit(e)},t.onExiting=function(e){var n=t.resolveArguments(e)[0];t.addClass(n,"exit","active"),t.props.onExiting&&t.props.onExiting(e)},t.onExited=function(e){var n=t.resolveArguments(e)[0];t.removeClasses(n,"exit"),t.addClass(n,"exit","done"),t.props.onExited&&t.props.onExited(e)},t.resolveArguments=function(e,n){return t.props.nodeRef?[t.props.nodeRef.current,e]:[e,n]},t.getClassNames=function(e){var n=t.props.classNames,r="string"==typeof n,i=r?""+(r&&n?n+"-":"")+e:n[e];return{baseClassName:i,activeClassName:r?i+"-active":n[e+"Active"],doneClassName:r?i+"-done":n[e+"Done"]}},t}(0,a.A)(t,e);var n=t.prototype;return n.addClass=function(e,t,n){var r=this.getClassNames(t)[n+"ClassName"],i=this.getClassNames("enter").doneClassName;"appear"===t&&"done"===n&&i&&(r+=" "+i),"active"===n&&e&&(0,u.F)(e),r&&(this.appliedClasses[t][n]=r,function(e,t){e&&t&&t.split(" ").forEach((function(t){return(0,o.A)(e,t)}))}(e,r))},n.removeClasses=function(e,t){var n=this.appliedClasses[t],r=n.base,i=n.active,a=n.done;this.appliedClasses[t]={},r&&c(e,r),i&&c(e,i),a&&c(e,a)},n.render=function(){var e=this.props,t=(e.classNames,(0,i.A)(e,["classNames"]));return l.createElement(d.Ay,(0,r.A)({},t,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},t}(l.Component);p.defaultProps={classNames:""},p.propTypes={};const h=p;var f=n(961);var g=n(7241);function y(e,t){var n=Object.create(null);return e&&l.Children.map(e,(function(e){return e})).forEach((function(e){n[e.key]=function(e){return t&&(0,l.isValidElement)(e)?t(e):e}(e)})),n}function m(e,t,n){return null!=n[t]?n[t]:e.props[t]}function v(e,t,n){var r=y(e.children),i=function(e,t){function n(n){return n in t?t[n]:e[n]}e=e||{},t=t||{};var r,i=Object.create(null),a=[];for(var o in e)o in t?a.length&&(i[o]=a,a=[]):a.push(o);var s={};for(var l in t){if(i[l])for(r=0;r<i[l].length;r++){var d=i[l][r];s[i[l][r]]=n(d)}s[l]=n(l)}for(r=0;r<a.length;r++)s[a[r]]=n(a[r]);return s}(t,r);return Object.keys(i).forEach((function(a){var o=i[a];if((0,l.isValidElement)(o)){var s=a in t,d=a in r,u=t[a],c=(0,l.isValidElement)(u)&&!u.props.in;!d||s&&!c?d||!s||c?d&&s&&(0,l.isValidElement)(u)&&(i[a]=(0,l.cloneElement)(o,{onExited:n.bind(null,o),in:u.props.in,exit:m(o,"exit",e),enter:m(o,"enter",e)})):i[a]=(0,l.cloneElement)(o,{in:!1}):i[a]=(0,l.cloneElement)(o,{onExited:n.bind(null,o),in:!0,exit:m(o,"exit",e),enter:m(o,"enter",e)})}})),i}var C=Object.values||function(e){return Object.keys(e).map((function(t){return e[t]}))},b=function(e){function t(t,n){var r,i=(r=e.call(this,t,n)||this).handleExited.bind(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(r));return r.state={contextValue:{isMounting:!0},handleExited:i,firstRender:!0},r}(0,a.A)(t,e);var n=t.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(e,t){var n,r,i=t.children,a=t.handleExited;return{children:t.firstRender?(n=e,r=a,y(n.children,(function(e){return(0,l.cloneElement)(e,{onExited:r.bind(null,e),in:!0,appear:m(e,"appear",n),enter:m(e,"enter",n),exit:m(e,"exit",n)})}))):v(e,i,a),firstRender:!1}},n.handleExited=function(e,t){var n=y(this.props.children);e.key in n||(e.props.onExited&&e.props.onExited(t),this.mounted&&this.setState((function(t){var n=(0,r.A)({},t.children);return delete n[e.key],{children:n}})))},n.render=function(){var e=this.props,t=e.component,n=e.childFactory,r=(0,i.A)(e,["component","childFactory"]),a=this.state.contextValue,o=C(this.state.children).map(n);return delete r.appear,delete r.enter,delete r.exit,null===t?l.createElement(g.A.Provider,{value:a},o):l.createElement(g.A.Provider,{value:a},l.createElement(t,r,o))},t}(l.Component);b.propTypes={},b.defaultProps={component:"div",childFactory:function(e){return e}};const S=b;var E=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handleEnter=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.handleLifecycle("onEnter",0,n)},t.handleEntering=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.handleLifecycle("onEntering",0,n)},t.handleEntered=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.handleLifecycle("onEntered",0,n)},t.handleExit=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.handleLifecycle("onExit",1,n)},t.handleExiting=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.handleLifecycle("onExiting",1,n)},t.handleExited=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.handleLifecycle("onExited",1,n)},t}(0,a.A)(t,e);var n=t.prototype;return n.handleLifecycle=function(e,t,n){var r,i=this.props.children,a=l.Children.toArray(i)[t];if(a.props[e]&&(r=a.props)[e].apply(r,n),this.props[e]){var o=a.props.nodeRef?void 0:f.findDOMNode(this);this.props[e](o)}},n.render=function(){var e=this.props,t=e.children,n=e.in,r=(0,i.A)(e,["children","in"]),a=l.Children.toArray(t),o=a[0],s=a[1];return delete r.onEnter,delete r.onEntering,delete r.onEntered,delete r.onExit,delete r.onExiting,delete r.onExited,l.createElement(S,r,n?l.cloneElement(o,{key:"first",onEnter:this.handleEnter,onEntering:this.handleEntering,onEntered:this.handleEntered}):l.cloneElement(s,{key:"second",onEnter:this.handleExit,onEntering:this.handleExiting,onEntered:this.handleExited}))},t}(l.Component);E.propTypes={};const w=E;var _,P;var N="out-in",I="in-out",k=function(e,t,n){return function(){var r;e.props[t]&&(r=e.props)[t].apply(r,arguments),n()}},A=((_={})[N]=function(e){var t=e.current,n=e.changeState;return l.cloneElement(t,{in:!1,onExited:k(t,"onExited",(function(){n(d.ns,null)}))})},_[I]=function(e){var t=e.current,n=e.changeState,r=e.children;return[t,l.cloneElement(r,{in:!0,onEntered:k(r,"onEntered",(function(){n(d.ns)}))})]},_),x=((P={})[N]=function(e){var t=e.children,n=e.changeState;return l.cloneElement(t,{in:!0,onEntered:k(t,"onEntered",(function(){n(d._K,l.cloneElement(t,{in:!0}))}))})},P[I]=function(e){var t=e.current,n=e.children,r=e.changeState;return[l.cloneElement(t,{in:!1,onExited:k(t,"onExited",(function(){r(d._K,l.cloneElement(n,{in:!0}))}))}),l.cloneElement(n,{in:!0})]},P),T=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).state={status:d._K,current:null},t.appeared=!1,t.changeState=function(e,n){void 0===n&&(n=t.state.current),t.setState({status:e,current:n})},t}(0,a.A)(t,e);var n=t.prototype;return n.componentDidMount=function(){this.appeared=!0},t.getDerivedStateFromProps=function(e,t){return null==e.children?{current:null}:t.status===d.ns&&e.mode===I?{status:d.ns}:!t.current||(n=t.current,r=e.children,n===r||l.isValidElement(n)&&l.isValidElement(r)&&null!=n.key&&n.key===r.key)?{current:l.cloneElement(e.children,{in:!0})}:{status:d.ze};var n,r},n.render=function(){var e,t=this.props,n=t.children,r=t.mode,i=this.state,a=i.status,o=i.current,s={children:n,current:o,changeState:this.changeState,status:a};switch(a){case d.ns:e=x[r](s);break;case d.ze:e=A[r](s);break;case d._K:e=o}return l.createElement(g.A.Provider,{value:{isMounting:!this.appeared}},e)},t}(l.Component);T.propTypes={},T.defaultProps={mode:N};const D=T;var O=n(3642)},2403:(e,t,n)=>{"use strict";n.d(t,{F:()=>r});var r=function(e){return e.scrollTop}},1020:(e,t,n)=>{"use strict";var r=n(6540),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function d(e,t,n){var r,a={},d=null,u=null;for(r in void 0!==n&&(d=""+n),void 0!==t.key&&(d=""+t.key),void 0!==t.ref&&(u=t.ref),t)o.call(t,r)&&!l.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:d,ref:u,props:a,_owner:s.current}}t.Fragment=a,t.jsx=d,t.jsxs=d},5287:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),l=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),h=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,y={};function m(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||f}function v(){}function C(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||f}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=m.prototype;var b=C.prototype=new v;b.constructor=C,g(b,m.prototype),b.isPureReactComponent=!0;var S=Array.isArray,E=Object.prototype.hasOwnProperty,w={current:null},_={key:!0,ref:!0,__self:!0,__source:!0};function P(e,t,r){var i,a={},o=null,s=null;if(null!=t)for(i in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)E.call(t,i)&&!_.hasOwnProperty(i)&&(a[i]=t[i]);var l=arguments.length-2;if(1===l)a.children=r;else if(1<l){for(var d=Array(l),u=0;u<l;u++)d[u]=arguments[u+2];a.children=d}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===a[i]&&(a[i]=l[i]);return{$$typeof:n,type:e,key:o,ref:s,props:a,_owner:w.current}}function N(e){return"object"==typeof e&&null!==e&&e.$$typeof===n}var I=/\/+/g;function k(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function A(e,t,i,a,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var l=!1;if(null===e)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return o=o(l=e),e=""===a?"."+k(l,0):a,S(o)?(i="",null!=e&&(i=e.replace(I,"$&/")+"/"),A(o,t,i,"",(function(e){return e}))):null!=o&&(N(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(I,"$&/")+"/")+e)),t.push(o)),1;if(l=0,a=""===a?".":a+":",S(e))for(var d=0;d<e.length;d++){var u=a+k(s=e[d],d);l+=A(s,t,i,u,o)}else if(u=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=h&&e[h]||e["@@iterator"])?e:null}(e),"function"==typeof u)for(e=u.call(e),d=0;!(s=e.next()).done;)l+=A(s=s.value,t,i,u=a+k(s,d++),o);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function x(e,t,n){if(null==e)return e;var r=[],i=0;return A(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function T(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var D={current:null},O={transition:null},R={ReactCurrentDispatcher:D,ReactCurrentBatchConfig:O,ReactCurrentOwner:w};function F(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:x,forEach:function(e,t,n){x(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return x(e,(function(){t++})),t},toArray:function(e){return x(e,(function(e){return e}))||[]},only:function(e){if(!N(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=m,t.Fragment=i,t.Profiler=o,t.PureComponent=C,t.StrictMode=a,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R,t.act=F,t.cloneElement=function(e,t,r){if(null==e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=g({},e.props),a=e.key,o=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,s=w.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(d in t)E.call(t,d)&&!_.hasOwnProperty(d)&&(i[d]=void 0===t[d]&&void 0!==l?l[d]:t[d])}var d=arguments.length-2;if(1===d)i.children=r;else if(1<d){l=Array(d);for(var u=0;u<d;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:s}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=P,t.createFactory=function(e){var t=P.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:d,render:e}},t.isValidElement=N,t.lazy=function(e){return{$$typeof:p,_payload:{_status:-1,_result:e},_init:T}},t.memo=function(e,t){return{$$typeof:c,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=O.transition;O.transition={};try{e()}finally{O.transition=t}},t.unstable_act=F,t.useCallback=function(e,t){return D.current.useCallback(e,t)},t.useContext=function(e){return D.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return D.current.useDeferredValue(e)},t.useEffect=function(e,t){return D.current.useEffect(e,t)},t.useId=function(){return D.current.useId()},t.useImperativeHandle=function(e,t,n){return D.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return D.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return D.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return D.current.useMemo(e,t)},t.useReducer=function(e,t,n){return D.current.useReducer(e,t,n)},t.useRef=function(e){return D.current.useRef(e)},t.useState=function(e){return D.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return D.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return D.current.useTransition()},t.version="18.3.1"},6540:(e,t,n)=>{"use strict";e.exports=n(5287)},4848:(e,t,n)=>{"use strict";e.exports=n(1020)},7463:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var s=2*(r+1)-1,l=e[s],d=s+1,u=e[d];if(0>a(l,n))d<i&&0>a(u,l)?(e[r]=u,e[d]=n,r=d):(e[r]=l,e[s]=n,r=s);else{if(!(d<i&&0>a(u,n)))break e;e[r]=u,e[d]=n,r=d}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"==typeof performance&&"function"==typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var d=[],u=[],c=1,p=null,h=3,f=!1,g=!1,y=!1,m="function"==typeof setTimeout?setTimeout:null,v="function"==typeof clearTimeout?clearTimeout:null,C="undefined"!=typeof setImmediate?setImmediate:null;function b(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(d,t)}t=r(u)}}function S(e){if(y=!1,b(e),!g)if(null!==r(d))g=!0,O(E);else{var t=r(u);null!==t&&R(S,t.startTime-e)}}function E(e,n){g=!1,y&&(y=!1,v(N),N=-1),f=!0;var a=h;try{for(b(n),p=r(d);null!==p&&(!(p.expirationTime>n)||e&&!A());){var o=p.callback;if("function"==typeof o){p.callback=null,h=p.priorityLevel;var s=o(p.expirationTime<=n);n=t.unstable_now(),"function"==typeof s?p.callback=s:p===r(d)&&i(d),b(n)}else i(d);p=r(d)}if(null!==p)var l=!0;else{var c=r(u);null!==c&&R(S,c.startTime-n),l=!1}return l}finally{p=null,h=a,f=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var w,_=!1,P=null,N=-1,I=5,k=-1;function A(){return!(t.unstable_now()-k<I)}function x(){if(null!==P){var e=t.unstable_now();k=e;var n=!0;try{n=P(!0,e)}finally{n?w():(_=!1,P=null)}}else _=!1}if("function"==typeof C)w=function(){C(x)};else if("undefined"!=typeof MessageChannel){var T=new MessageChannel,D=T.port2;T.port1.onmessage=x,w=function(){D.postMessage(null)}}else w=function(){m(x,0)};function O(e){P=e,_||(_=!0,w())}function R(e,n){N=m((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){g||f||(g=!0,O(E))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return r(d)},t.unstable_next=function(e){switch(h){case 1:case 2:case 3:var t=3;break;default:t=h}var n=h;h=t;try{return e()}finally{h=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=h;h=e;try{return t()}finally{h=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"==typeof a&&null!==a?a="number"==typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:c++,callback:i,priorityLevel:e,startTime:a,expirationTime:s=a+s,sortIndex:-1},a>o?(e.sortIndex=a,n(u,e),null===r(d)&&e===r(u)&&(y?(v(N),N=-1):y=!0,R(S,a-o))):(e.sortIndex=s,n(d,e),g||f||(g=!0,O(E))),e},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(e){var t=h;return function(){var n=h;h=t;try{return e.apply(this,arguments)}finally{h=n}}}},9982:(e,t,n)=>{"use strict";e.exports=n(7463)},1502:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(6540),i=n(3014),a=n(2497),o=n(7859),s=n(7562),l=n(2400),d=n(787),u=n(5706),c=n(2886),p=n(3632),h=n(9852),f=n(6069),g=n(6615);n(6095),n(7822);class App extends r.Component{constructor(e){super(e),this.setPlayer=e=>{localStorage.setItem("id",e.id),this.setState({myself:e})},this.doLogin=e=>{console.log("Logging in...",e);let t=new l.LoginMessage(e.id),n=s.Serde.serialize(t);console.log(t),console.log(typeof t),console.log(t.constructor.name),console.log(n),this.state.socket.send(n)};let t=new WebSocket("ws://"+location.host),n=this.getPlayer();this.resetPubsub(),t.addEventListener("message",(e=>{let t=s.Serde.deserialize(e.data);if("LoginMessage"===t.constructor.name){let e=t;e.error&&(console.error(e.error),this.setState({error:e.error})),this.setPlayer(e)}else this.pubsub.publish(t)})),n.id&&t.addEventListener("open",(()=>{this.doLogin(n)})),this.state={socket:t,context:null,myself:this.getPlayer(),pregame:null,error:null}}resetPubsub(){this.pubsub=new d.default,this.pubsub.on(c.GameContext,(e=>{(0,u.checkNotNull)(this.state.myself),console.log("Received Game Context",e),this.resetPubsub(),this.setState({context:new o.default(e,this.state.myself,this.state.socket,e.gameMode),pregame:null})})),this.pubsub.on(p.Circus,(e=>{console.log("Received Pregame",e),this.state.context&&this.resetPubsub(),this.setState({pregame:e,context:null})})),this.pubsub.on(f.PlaySound,(e=>{console.log("[UIBoard] Play Sound ",e.path),g.audioManager.play(e.path)}))}getPlayer(){return{id:localStorage.getItem("id")}}renderPrep(){return r.createElement(h.default,{pubsub:this.pubsub,circus:this.state.pregame,socket:this.state.socket,myId:this.state.myself.id})}renderGame(){return r.createElement(i.default,{context:this.state.context,pubsub:this.pubsub,myId:this.state.myself.id})}doRender(){return this.state.context?this.renderGame():this.state.pregame?this.renderPrep():r.createElement(a.default,{myself:this.state.myself,onDone:this.doLogin,error:this.state.error})}render(){return r.createElement("div",{className:"occupy"},this.doRender())}}t.default=App},7859:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(2886),i=n(739),a=n(8264),o=n(1480),s=n(8651);n(1613);const l=n(7562),d=n(9222);class GameClientContext extends r.GameContext{constructor(e,t,n,r){super(e.playerInfos,r),this.socket=n,this.currentDriver=a.NoActionDriver.INSTANCE,this.getMyDistanceTo=e=>this.computeDistance(this.myself.player.id,e),this.myself=this.playerInfos.find((e=>e.player.id===t.id)),this.cardManager=d.GameMode.get(r).cardManager,d.GameMode.get(r).initClient(),this.currentDriver=a.NoActionDriver.INSTANCE}setHint(e){if(e){if(console.warn("Getting Server Hint",e),this.currentDriver!==a.NoActionDriver.INSTANCE)throw`Invalid State: There is an existing action driver. Cannot start new action when current one is not complete! ${this.currentDriver}`;if(this.serverHint=e,e.hint.hintType===i.HintType.UI_PANEL)return;this.currentDriver=s.playerActionDriverProvider.getDriver(e.hint,this)}else this.serverHint=null,this.currentDriver=a.NoActionDriver.INSTANCE}getCurrentDriver(){return this.currentDriver}canBeClicked(e,t){return this.currentDriver.canBeClicked({actionArea:e,itemId:t},this)}isSelected(e,t){return this.currentDriver.isSelected({actionArea:e,itemId:t},this)}onClicked(e,t){this.currentDriver.onClicked({actionArea:e,itemId:t},this)===a.ClickActionResult.DONE&&(this.currentDriver=a.NoActionDriver.INSTANCE)}getButtons(){return this.currentDriver.getUsableButtons(this)}getMsg(){return this.currentDriver.getHintMsg(this)}interpret(e,t=null){t=t||this.myself;let n=this.cardManager.getCard(e);if(!n)throw`Unable to find this card!! ${e}`;return super.interpretCard(t.player.id,n)}submitAction(e){console.warn("[Client] Submitting Action To Server",this.serverHint.hintId,e),this.socket.send(l.Serde.serialize(new o.PlayerActionTransit(this.serverHint.hintId,e)))}sendToServer(e){console.warn("[Client] Submitting Stuff To Server",e),this.socket.send(l.Serde.serialize(e))}}t.default=GameClientContext},1456:function(e,t,n){"use strict";var r=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let[t,n]=i.useState(!1);i.useEffect((()=>{n(!0),setTimeout((()=>{n(!1)}),500)}),[e.style.backgroundImage]);let{style:a}=e,o=r(e,["style"]);return i.createElement("div",Object.assign({className:"card-avatar "+(t?"img-flashing":"")},o),i.createElement("div",{className:"img",style:a}))};const i=n(6540)},6095:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});n(2655)("flash-border")},6615:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.audioManager=void 0;t.audioManager=new class AudioManager{constructor(){this.cache=new Map}stop(e){let t=this.cache.get(e);t.pause(),t.currentTime=0}pause(e){this.cache.get(e).pause()}play(e,t=!1,n=null){try{let r;return this.cache.has(e)?r=this.cache.get(e):(r=new Audio(e),this.cache.set(e,r)),n&&(r.onended=n),r.loop=t,void r.play()}catch(t){console.error("No Such Sound ",e)}}}},6613:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let[t,n]=r.useState([]),[s,l]=r.useState(!1),d=()=>{console.log("Finishing",t);let n=t.map((e=>({rowName:e[0],idx:Number(e[1])})));e.onSelectionDone(n)};return r.createElement("div",{className:"card-selection-container"},r.createElement("div",{className:"card-selection-hint center"},e.title),Object.keys(e.rowsOfCard).map((o=>r.createElement("div",{className:"card-selection-row",key:o},r.createElement("div",{className:"row-name center"},o),r.createElement("div",{className:"row-of-cards"},e.rowsOfCard[o].map(((s,u)=>{let c=t.findIndex((e=>e[0]===o&&e[1]===u));return r.createElement("div",{className:"card-wrapper",key:u},r.createElement(i.default,{card:s,isShown:!0,elementStatus:c>-1?a.ElementStatus.SELECTED:a.ElementStatus.UNSELECTED,nodescript:!0,onMouseClick:()=>n((t=>(c>-1?t.splice(c,1):t.push([o,u]),t.length===e.chooseSize?1===e.chooseSize?d():l(!0):l(!1),[...t])))}))})))))),e.chooseSize>1&&r.createElement("div",{className:"button-container"},r.createElement(o.default,{display:"确定",disabled:!s,onClick:d})))},t.DuoCardSelection=function(e){let[t,n]=r.useState([]),[s,l]=r.useState(!1),d=()=>{console.log("Finishing",t);let n=t.map((e=>({rowName:e[0],idx:Number(e[1]),isLeft:e[2]})));e.onSelectionDone(n)};const u=(o,s)=>(u,c)=>{let p=t.findIndex((e=>e[0]===s&&e[1]===c)),h=u.description?a.ElementStatus.DISABLED:p>-1?a.ElementStatus.SELECTED:a.ElementStatus.UNSELECTED;return r.createElement(i.default,{card:u,isShown:!0,key:c,elementStatus:h,onMouseClick:()=>!u.description&&n((t=>(p>-1?t.splice(p,1):t.push([s,c,o]),t.length===e.chooseSize?1===e.chooseSize?d():l(!0):l(!1),[...t])))})};return r.createElement("div",{className:"duo-card-selection-container"},r.createElement("div",{className:"duo-card-selection-hint center"},e.title),r.createElement("table",null,r.createElement("tbody",null,r.createElement("tr",null,r.createElement("td",null),r.createElement("td",{className:"title"},e.titleLeft),r.createElement("td",{className:"title"},e.titleRight)),Object.keys(e.rowsOfCard).map((t=>r.createElement("tr",{key:t},r.createElement("td",{className:"row-name"},t),r.createElement("td",null,r.createElement("div",{className:"row-of-cards"},e.rowsOfCard[t][0].map(u(!0,t)))),r.createElement("td",null,r.createElement("div",{className:"row-of-cards"},e.rowsOfCard[t][1].map(u(!1,t))))))))),r.createElement("div",{className:"button-container"},e.chooseSize>1&&r.createElement(o.default,{display:"确定",disabled:!s,onClick:d}),e.canCancel&&r.createElement(o.default,{display:"取消",disabled:!1,onClick:d})))};const r=n(6540),i=n(5538),a=n(3014);n(1782);const o=n(7176)},6203:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{l(r.next(e))}catch(e){a(e)}}function s(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.customUIRegistry=t.CustomUIData=void 0;const i=n(6540),a=n(5538),o=n(3014),s=n(8514),l=n(1073),d=n(7176),u=n(5706),c=n(8158);class CustomUIData{constructor(e,t){this.type=e,this.data=t}}t.CustomUIData=CustomUIData,CustomUIData.STOP="stop";t.customUIRegistry=new class CustomUIRegistry{constructor(){this.map=new Map}register(e,t){if(this.map.has(e))throw`${e} is already registered!`;this.map.set(e,t)}get(e,t){if(!this.map.has(e))throw`${e} is not registered!`;return this.map.get(e)(t)}};class Wugu extends i.Component{render(){let{commonUI:e,requestData:t,consumer:n}=this.props;return i.createElement("div",{className:"cards-container wugu-container"},i.createElement("div",{className:"cards-container-title center"},e.title),i.createElement("div",{className:"cards"},e.cards.map((e=>{let r=o.ElementStatus.DISABLED;return e.description||(r=o.ElementStatus.NORMAL,t&&(r=o.ElementStatus.UNSELECTED)),i.createElement(a.default,{key:e.id,card:e,isShown:!0,elementStatus:r,onMouseClick:()=>!e.description&&t&&n(e.id)})}))))}}t.customUIRegistry.register("wugu",(e=>i.createElement(Wugu,Object.assign({},e))));const p=192;class GuanXing extends i.Component{constructor(e){super(e),this.onDragEvent=e=>{this.props.requestData?console.log("Ignoring my own movement",e):e.fromPos===l.TOP||e.fromPos===l.BTM?(console.log("adding new event",e),this.toProcess.enqueue(e)):console.error("Not My Action!!!",e,this.props.requestData)},this.inited=!1,this.toProcess=new c.AsyncBlockingQueue,this.sensor=e=>r(this,void 0,void 0,(function*(){if(!this.inited)for(this.inited=!0;;){let t=yield this.toProcess.dequeue(),n=0,r=0;t.fromPos!==t.toPos&&(r=t.fromPos===l.TOP?p:-192),n=(t.to-t.from)*a.CardWidth;let i=e.tryGetLock(t.item).fluidLift({x:0,y:0});for(let e=0;e<20;e++)yield(0,u.wait)((()=>i.move({x:n*e/19,y:r*e/19})),20);i.drop()}})),this.onDragEnd=e=>{if(console.log(e),!e.destination)return;let t=new l.CardMovementEvent(e.draggableId,e.source.droppableId,e.destination.droppableId,e.source.index,e.destination.index);this.props.requestData&&this.props.consumer(t,!0),this.setState((e=>(t.applyToTopBtm(e.top,e.btm),e)))},this.style={display:"flex",width:a.CardWidth*e.commonUI.size+"px",height:"154px"},this.state={top:[...e.commonUI.top],btm:[...e.commonUI.btm]}}componentDidMount(){this.props.pubsub.on(l.CardMovementEvent,this.onDragEvent)}componentWillUnmount(){this.props.pubsub.off(l.CardMovementEvent,this.onDragEvent)}render(){let{commonUI:e,consumer:t}=this.props,{top:n,btm:r}=this.state,u=e.isController;return i.createElement("div",{className:"cards-container"},i.createElement("div",{className:"cards-container-title center"},e.title),i.createElement(s.DragDropContext,{onDragEnd:this.onDragEnd,sensors:u?[]:[this.sensor],enableDefaultSensors:!!u},i.createElement("div",{className:"row-title center"},"牌堆顶"),i.createElement(s.Droppable,{droppableId:l.TOP,direction:"horizontal",type:"guanxing"},((e,t)=>i.createElement("div",Object.assign({ref:e.innerRef,style:this.style},e.droppableProps,{className:"cards"}),n.map(((e,t)=>{let n=e[1];return i.createElement(s.Draggable,{key:e[0],draggableId:e[0],index:t},((e,t)=>i.createElement("div",Object.assign({ref:e.innerRef},e.draggableProps,e.dragHandleProps),i.createElement(a.default,{card:n,isShown:!0,elementStatus:o.ElementStatus.NORMAL}))))})),e.placeholder))),i.createElement("div",{className:"row-title center"},"牌堆底"),i.createElement(s.Droppable,{droppableId:l.BTM,direction:"horizontal",type:"guanxing"},((e,t)=>i.createElement("div",Object.assign({ref:e.innerRef,style:this.style},e.droppableProps,{className:"cards"}),r.map(((e,t)=>{let n=e[1];return i.createElement(s.Draggable,{key:e[0],draggableId:e[0],index:t},((e,t)=>i.createElement("div",Object.assign({ref:e.innerRef},e.draggableProps,e.dragHandleProps),i.createElement(a.default,{key:n.id,card:n,isShown:!0,elementStatus:o.ElementStatus.NORMAL}))))})),e.placeholder)))),u&&i.createElement("div",{className:"center button-container"},i.createElement(d.default,{disabled:!1,display:"观星完毕",onClick:()=>t(!0)})))}}t.customUIRegistry.register("guanxing",(e=>i.createElement(GuanXing,Object.assign({},e))));class XunXun extends i.Component{constructor(e){super(e),this.onDragEvent=e=>{this.props.requestData?console.log("Ignoring my own movement",e):e.fromPos===l.TOP||e.fromPos===l.BTM?(console.log("adding new event",e),this.toProcess.enqueue(e)):console.error("Not My Action!!!",e,this.props.requestData)},this.inited=!1,this.toProcess=new c.AsyncBlockingQueue,this.sensor=e=>r(this,void 0,void 0,(function*(){if(!this.inited)for(this.inited=!0;;){let t=yield this.toProcess.dequeue(),n=0,r=0;t.fromPos!==t.toPos&&(r=t.fromPos===l.TOP?p:-192),n=(t.to-t.from)*a.CardWidth;let i=e.tryGetLock(t.item).fluidLift({x:0,y:0});for(let e=0;e<20;e++)yield(0,u.wait)((()=>i.move({x:n*e/19,y:r*e/19})),20);i.drop()}})),this.onDragEnd=e=>{if(console.log(e),!e.destination)return;let t=new l.CardMovementEvent(e.draggableId,e.source.droppableId,e.destination.droppableId,e.source.index,e.destination.index);this.props.requestData&&this.props.consumer(t,!0),this.setState((e=>(t.applyToTopBtm(e.top,e.btm),e)))},this.style={display:"flex",width:"460px",height:"154px"},this.state={top:[...e.commonUI.top],btm:[...e.commonUI.btm]}}componentDidMount(){this.props.pubsub.on(l.CardMovementEvent,this.onDragEvent)}componentWillUnmount(){this.props.pubsub.off(l.CardMovementEvent,this.onDragEvent)}render(){let{commonUI:e,consumer:t}=this.props,{top:n,btm:r}=this.state,u=e.isController;return console.log(this.style),i.createElement("div",{className:"cards-container"},i.createElement("div",{className:"cards-container-title center"},e.title),i.createElement(s.DragDropContext,{onDragEnd:this.onDragEnd,sensors:u?[]:[this.sensor],enableDefaultSensors:!!u},i.createElement("div",{className:"row-title center"},"牌堆顶(请留下两张于牌堆顶)"),i.createElement(s.Droppable,{droppableId:l.TOP,direction:"horizontal",type:"guanxing"},((e,t)=>i.createElement("div",Object.assign({ref:e.innerRef,style:this.style},e.droppableProps,{className:"cards"}),n.map(((e,t)=>{let n=e[1];return i.createElement(s.Draggable,{key:e[0],draggableId:e[0],index:t},((e,t)=>i.createElement("div",Object.assign({ref:e.innerRef},e.draggableProps,e.dragHandleProps),i.createElement(a.default,{card:n,isShown:!0,elementStatus:o.ElementStatus.NORMAL}))))})),e.placeholder))),i.createElement("div",{className:"row-title center"},"牌堆底"),i.createElement(s.Droppable,{droppableId:l.BTM,direction:"horizontal",type:"guanxing"},((e,t)=>i.createElement("div",Object.assign({ref:e.innerRef,style:this.style},e.droppableProps,{className:"cards"}),r.map(((e,t)=>{let n=e[1];return i.createElement(s.Draggable,{key:e[0],draggableId:e[0],index:t},((e,t)=>i.createElement("div",Object.assign({ref:e.innerRef},e.draggableProps,e.dragHandleProps),i.createElement(a.default,{key:n.id,card:n,isShown:!0,elementStatus:o.ElementStatus.NORMAL}))))})),e.placeholder)))),u&&i.createElement("div",{className:"center button-container"},i.createElement(d.default,{disabled:2!==n.length,display:"恂恂完毕",onClick:()=>t(!0)})))}}t.customUIRegistry.register("xunxun",(e=>i.createElement(XunXun,Object.assign({},e))));class CardFight extends i.Component{renderCard(e){return e?i.createElement(a.default,{card:e,isShown:!0,elementStatus:o.ElementStatus.NORMAL}):i.createElement(a.UICardHolder,null)}render(){let e,{commonUI:t,requestData:n,consumer:r}=this.props,a=t.cardLeft,o=t.cardRight,{numberLeft:s,numberRight:l}=t;return s&&l&&(e=s>l?"win":"lose"),i.createElement("div",{className:"cf-container"},i.createElement("div",{className:"cf-title center"},t.title),i.createElement("div",{className:"cf-cards"},i.createElement("div",{className:"left"},this.renderCard(a),e&&i.createElement("div",{className:"occupy win-lose "+e})),i.createElement("div",null,"v.s."),this.renderCard(o)))}}t.customUIRegistry.register("card-fight",(e=>i.createElement(CardFight,Object.assign({},e))))},4805:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let t=e.items.map(((t,n)=>"card"===e.mode?r.createElement(i.default,{card:t,key:n,isShown:!0,elementStatus:a.ElementStatus.NORMAL,nodescript:!0}):r.createElement(s.default,{key:n,general:t}))),n="general"===e.mode?{height:"220px"}:{};return r.createElement("div",{className:"card-selection-container"},r.createElement("div",{className:"card-selection-hint center"},e.title),r.createElement("div",{className:"card-selection-row"},r.createElement("div",{className:"row-of-cards",style:n},t)),r.createElement("div",{className:"button-container"},r.createElement(o.default,{display:"观看完毕",disabled:!1,onClick:()=>e.onSelectionDone("ignored")})))};const r=n(6540),i=n(5538),a=n(3014);n(1782);const o=n(7176),s=n(3215)},696:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return r.createElement("div",{className:"game-result"},r.createElement("div",{className:"title center"},"牌局结束",0===e.winners.length?"(平局)":""),r.createElement("div",{className:"results"},r.createElement("div",{key:"heading",className:"row heading"},r.createElement("div",{className:"player-name"},"玩家"),r.createElement("div",{className:"col"}),r.createElement("div",{className:"col-2"},"胜利场数"),r.createElement("div",{className:"col"},"击杀"),r.createElement("div",{className:"col"},"伤害"),r.createElement("div",{className:"col"},"治愈")),e.stats.map((t=>{let n=e.winners.findIndex((e=>e===t.playerId))>-1,i=n?"row winner":"row";return r.createElement("div",{className:i,key:t.playerId},r.createElement("div",{className:"player-name"},t.playerId),r.createElement("div",{className:"col"},n?"胜利!":""),r.createElement("div",{className:"col-2"},t.wins),r.createElement("div",{className:"col"},t.kill,"(",t.thisRound.kill,")"),r.createElement("div",{className:"col"},t.totalDamage,"(",t.thisRound.totalDamage,")"),r.createElement("div",{className:"col"},t.totalHeal,"(",t.thisRound.totalHeal,")"))}))),r.createElement("div",{className:"button-container center"},r.createElement(i.default,{display:"再来一局",disabled:!1,onClick:()=>e.onSelectionDone("ignored")})))};const r=n(6540);n(1782);const i=n(7176)},3215:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(!e.general)return r.createElement("div",{className:"general-ui"});let t=Math.floor(e.general.hp),n=1===Math.round(2*(e.general.hp-t));return s(e.general,r.createElement("div",{className:"general-ui noselect"},r.createElement("div",{className:"avatar"},r.createElement("div",{style:(0,i.toGeneralCardStyle)(e.general.id)})),r.createElement("div",{className:"frame occupy "+e.general.faction.image}),r.createElement("div",{className:"general-name"},e.general.name),r.createElement("div",{className:"hp-container"},new Array(t).fill(1).map(((e,t)=>r.createElement("img",{key:t,className:"hp",src:"icons/yy_green.png"}))),n&&r.createElement("img",{className:"hp",src:"icons/yy_green_half.png"}))))},t.wrapGeneral=s;const r=n(6540),i=n(1633);n(7638);const a=n(8576),o=n(5167);function s(e,t){if(e){let n=t=>r.createElement(a.Tooltip,Object.assign({},t),r.createElement("p",null,"【"+e.name+"】"),e.abilities.map((e=>r.createElement("p",{key:e},"【"+e+"】 "+o.describer.get(e)))));return r.createElement(a.OverlayTrigger,{placement:"auto",overlay:n,delay:{show:1e3,hide:200}},t)}return t}},8113:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(6540),i=n(6613),a=n(6203),o=n(4805),s=n(696),l=n(1073),d=n(1480),u=n(5538);class UIMounter extends r.Component{renderSelection(){let e=this.props.customRequest;switch(e.mode){case"choose":return r.createElement(i.default,Object.assign({},e.data,{onSelectionDone:this.props.consumer}));case"duo-choose":return r.createElement(i.DuoCardSelection,Object.assign({},e.data,{onSelectionDone:this.props.consumer}));case"display":return r.createElement(o.default,Object.assign({},e.data,{onSelectionDone:this.props.consumer}));case"game-end":return r.createElement(s.default,Object.assign({},e.data,{onSelectionDone:this.props.consumer}));default:throw"Unknown..."+e.mode}}renderCommonUI(){let{customRequest:e,commonUI:t,consumer:n,pubsub:r}=this.props;return console.log(t,e),a.customUIRegistry.get(t.type,{commonUI:t.data,requestData:null==e?void 0:e.data,consumer:n,pubsub:r})}render(){let{customRequest:e,commonUI:t,context:n}=this.props;if(t&&t.type!==a.CustomUIData.STOP)return r.createElement("div",{className:"occupy ui-mounter center"},this.renderCommonUI());if(e)return r.createElement("div",{className:"occupy ui-mounter center"},this.renderSelection());let i=n.getCurrentDriver();return i.getAllAreas().has(d.UIPosition.ON_MY_GENERAL)?r.createElement("div",{className:"occupy ui-mounter center"},r.createElement(c,{context:n,target:l.CardPos.ON_GENERAL,checker:this.props.onGeneralChecker})):i.getAllAreas().has(d.UIPosition.ON_MY_SUB_GENERAL)?r.createElement("div",{className:"occupy ui-mounter center"},r.createElement(c,{context:n,target:l.CardPos.ON_SUB_GENERAL,checker:this.props.onSubGeneralChecker})):null}}function c(e){return r.createElement("div",{className:"card-selection-container"},r.createElement("div",{className:"card-selection-hint center"},e.context.getCurrentDriver().getHintMsg(e.context)),r.createElement("div",{className:"card-selection-row"},r.createElement("div",{className:"row-of-cards"},e.context.myself.getCards(e.target).map((t=>{let n=e.checker.getStatus(t.id);return r.createElement("div",{className:"card-wrapper",key:t.id},r.createElement(u.default,{card:t,isShown:!0,elementStatus:n,nodescript:!0,onMouseClick:()=>n.isSelectable&&e.checker.onClicked(t.id)}))})))))}t.default=UIMounter},5776:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(6540),i=n(2831);n(5223);const a=n(1831),o=n(4701),s=16/60*1e3;let l=0;class EffectProducer extends r.Component{constructor(e){super(e),this.state={rays:new Map,texts:new Map,sheets:new Map}}processEffect(e){var t;let n=this.props.screenPosObtainer,r=l++,i=(0,o.getEffect)(e.sourceText,(()=>{this.setState((e=>(e.sheets.delete(r),e)))}));if(i){let t=n.getPos(a.CENTER),o=n.getPos(e.sourcePlayer),s=140,l=t.x-o.x,d=t.y-o.y,u=Math.sqrt(l*l/(l*l+d*d)),c={x:o.x+s*u*Math.sign(l),y:o.y+s*Math.sqrt(1-u*u)*Math.sign(d)};this.setState((e=>(e.sheets.set(r,[c,i]),e)))}else this.flashText(n.getPos(e.sourcePlayer),e.sourceText);null===(t=e.targetPlayers)||void 0===t||t.forEach((t=>{this.drawRay(n.getPos(e.sourcePlayer),n.getPos(t))})),e.secondary&&e.targetPlayers&&e.targetPlayers.length>0&&setTimeout((()=>{this.drawRay(n.getPos(e.targetPlayers[0]),n.getPos(e.secondary))}),1500)}drawRay(e,t){let n=(0,i.v4)(),r=e.x,a=e.y,o=t.x,s=t.y,l=Math.sqrt((r-o)*(r-o)+(a-s)*(a-s));this.setState((r=>(r.rays.set(n,{from:e,to:t,dashArray:4*l,dashOffset:4*l}),r)),(()=>{setTimeout((()=>this.setState((r=>{if(r.rays.has(n))return r.rays.set(n,{from:e,to:t,dashArray:4*l,dashOffset:-1*l}),r}))),20)})),setTimeout((()=>{this.setState((e=>(e.rays.delete(n),e)))}),1500)}flashText(e,t){this.setState((n=>(n.texts.set(t,e),n))),setTimeout((()=>{this.setState((e=>(e.texts.delete(t),e)))}),3e3)}flashEffect(e,t,n){this.setState((r=>(r.sheets.set(e,[t,n]),r))),setTimeout((()=>{this.setState((t=>(t.sheets.delete(e),t)))}),s)}renderRays(){let e=[];return this.state.rays.forEach(((t,n)=>{let i=`M ${t.from.x} ${t.from.y} L ${t.to.x} ${t.to.y}`;e.push(r.createElement("path",{key:n,className:"ray",d:i,style:{strokeDasharray:t.dashArray,strokeDashoffset:t.dashOffset}}))})),e}renderTexts(){let e=[];return this.state.texts.forEach(((t,n)=>{e.push(r.createElement("div",{key:n,className:"text",style:{left:t.x+"px",top:t.y+"px"}},n))})),e}renderEffects(){let e=[];return this.state.sheets.forEach(((t,n)=>{let i=t[0];e.push(r.createElement("div",{key:n,className:"sprite-container center",style:{left:i.x+"px",top:i.y+"px"}},t[1]))})),e}render(){return r.createElement("div",{className:"effect-container occupy"},r.createElement("svg",{className:"ray-container",width:"100%",height:"100%"},this.renderRays()),this.renderTexts(),this.renderEffects())}}t.default=EffectProducer},4701:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDamageSpriteSheet=function(){return r.createElement(i,{image:"animations/damage.png",widthFrame:172,heightFrame:170,steps:5,fps:60})},t.getEffect=function(e,t){switch(e){case"酒":return a("wine",278,273,17,t);case"桃":return a("peach",330,324,17,t);case"闪":return a("dodge",138,138,13,t);case"杀":case"黑杀":return a("slash",330,268,15,t);case"红杀":return a("slash_red",330,330,17,t);case"火杀":return a("slash_fire",330,330,16,t);case"雷杀":return a("slash_thunder",650,416,16,t);case"藤甲_好":return a("teng_jia_good",132,137,24,t,20);case"藤甲_坏":return a("teng_jia_bad",155,183,24,t,20);case"白银狮子":return a("silver_lion",215,243,24,t,20);case"仁王盾":return a("reng_wang",198,203,24,t,20);case"八卦阵":return a("ba_gua",240,240,24,t,20);case"青龙偃月刀":return a("qing_long",240,240,23,t,20);case"贯石斧":return a("guan_shi",229,177,26,t,20);case"诸葛连弩":return a("lian_nu",240,240,24,t,20);case"丈八蛇矛":return a("zhang_ba",240,240,24,t,20);case"雌雄双股剑":return a("ci_xiong",214,261,25,t,20);case"朱雀羽扇":return a("zhu_que",180,222,24,t,20);case"古锭刀":return a("gu_ding",240,192,25,t,20);case"方天画戟":return a("fang_tian",218,190,25,t,20);case"寒冰剑":return a("han_bing",102,213,25,t,20);case"麒麟弓":return a("qi_lin",327,215,26,t,20)}return null},t.getSheet=a;const r=n(6540);var i=n(3671).default;function a(e,t,n,a,o,s=20){return r.createElement(i,{image:`animations/${e}.png`,widthFrame:t,heightFrame:n,steps:a,fps:s,loop:!0,onLoopComplete:e=>{e.pause(),o()}})}},8264:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CompositePlayerActionDriver=t.NoActionDriver=t.PlayerActionDriver=t.ClickActionResult=t.Clickability=void 0;const r=n(1480),i=n(739);var a,o;!function(e){e[e.CLICKABLE=0]="CLICKABLE",e[e.NOT_CLICKABLE=1]="NOT_CLICKABLE",e[e.DISABLED=2]="DISABLED"}(a||(t.Clickability=a={})),function(e){e[e.AT_ZERO=0]="AT_ZERO",e[e.PROCESSING=1]="PROCESSING",e[e.DONE=2]="DONE"}(o||(t.ClickActionResult=o={}));class PlayerActionDriver{}t.PlayerActionDriver=PlayerActionDriver;class NoActionDriver extends PlayerActionDriver{constructor(){super()}onClicked(e,t){return o.AT_ZERO}canBeClicked(e,t){return a.NOT_CLICKABLE}isSelected(e,t){return!1}getUsableButtons(){return[]}getHintMsg(e){return""}getAllAreas(){return new Set}}t.NoActionDriver=NoActionDriver,NoActionDriver.INSTANCE=new NoActionDriver;t.CompositePlayerActionDriver=class CompositePlayerActionDriver extends PlayerActionDriver{constructor(e){super(),this.delegates=e,this.theOne=null}onClicked(e,t){if(this.theOne){console.log("[Composite] there is an existing delegate, invoking: ",this.theOne,e);let n=this.theOne.onClicked(e,t);return n===o.AT_ZERO&&(console.log("[Composite] delegate back to zero",this.theOne),this.theOne=null),n}console.log("[Composite] no existing delegate, checking",e);for(let n of this.delegates)if(n.canBeClicked(e,t)===a.CLICKABLE)return this.theOne=n,console.log("[Composite] found delegate, invoking: ",this.theOne),n.onClicked(e,t);console.error("[Composite] no existing delegate and no one can handle this!",e)}canBeClicked(e,t){if(this.theOne)return this.theOne.canBeClicked(e,t);let n=a.DISABLED;for(let r of this.delegates){let i=r.canBeClicked(e,t);if(i===a.CLICKABLE)return a.CLICKABLE;i===a.NOT_CLICKABLE&&(n=a.NOT_CLICKABLE)}return n}isSelected(e,t){return!!this.theOne&&this.theOne.isSelected(e,t)}getUsableButtons(e){if(this.theOne)return this.theOne.getUsableButtons(e);{let t=this.delegates[0].getUsableButtons(e);for(let n=1;n<this.delegates.length;++n)t=t.filter((t=>this.delegates[n].getUsableButtons(e).find((e=>e.id===t.id))));return e.serverHint&&e.serverHint.hint.hintType===i.HintType.PLAY_HAND&&(t=t.filter((e=>e.id!==r.Button.CANCEL.id))),t}}getHintMsg(e){return this.theOne?this.theOne.getHintMsg(e):e.serverHint.hint.hintMsg}getAllAreas(){return this.theOne?this.theOne.getAllAreas():new Set}}},8663:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StepByStepActionDriver=t.StepDataLoose=t.StepDataExact=void 0;const r=n(1480),i=n(8264),a=n(1155),o=n(739),s=n(1449);t.default=class PlayerActionDriverDefiner{constructor(e){this.name=e,this.steps=[]}expectChoose(e,t,n,i,a=()=>""){if(e.forEach((e=>{if(this.steps.find((t=>t.isConcernedWith(e))))throw`Already has defined step for position ${r.UIPosition[e]}`})),t>n)throw"Whaat?";return n!==t?this.steps.push(new StepDataLoose(e,t,n,i,a)):this.steps.push(new StepDataExact(e,t,i,a)),1===this.steps.length&&(this.steps[0].canCancel=!1),this}expectAnyButton(e){return this.expectChoose([r.UIPosition.BUTTONS],1,1,(e=>!0),(t=>e))}cannotCancel(){return this.steps[this.steps.length-1].canCancel=!1,this}noBacksie(){return this.steps[this.steps.length-1].noBacksie=!0,this}build(e,t=[r.Button.OK,r.Button.CANCEL]){if(0===this.steps.length)throw"You gotta define something!";return e.extraButtons&&(t=[...t,...e.extraButtons]),new StepByStepActionDriver(this.name,this.steps,t)}};class AbstractStep{constructor(e,t,n,r){this.areas=e,this.size=t,this.filter=n,this.msgObtainer=r,this.canCancel=!0,this.noBacksie=!1,this.chosen=new a.TogglableMap(t)}canClick(e){return!this.noBacksie&&this.chosen.has(e.itemId)||this.chosen.size()<this.size}isConcernedWith(e){return this.areas.findIndex((t=>t===e))>-1}dumpDataTo(e){let t=this.chosen.toArray();this.areas.forEach((n=>{if(e.actionData[n])throw`Unacceptable, overlapping action position! ${n}`;e.actionData[n]=t.filter((e=>e[1]===n)).map((e=>e[0]))}))}}class StepDataExact extends AbstractStep{constructor(e,t,n,r){super(e,t,n,r)}onRetroClick(e){if(this.noBacksie)return!1;if(this.chosen.has(e.itemId))this.chosen.toggle(e.itemId,e.actionArea);else if(this.chosen.clear(),this.chosen.toggle(e.itemId,e.actionArea),1===this.size)return!1;return!0}onClick(e){this.chosen.toggle(e.itemId,e.actionArea)}isSatisfied(){return this.chosen.size()===this.size}}t.StepDataExact=StepDataExact;class StepDataLoose extends AbstractStep{constructor(e,t,n,r,i){super(e,n,r,i),this.min=t}onRetroClick(e){if(console.log("onClick",e,this.chosen.size(),this.size,this.chosen.has(e.itemId)),this.noBacksie)return!1;return this.chosen.has(e.itemId)||this.chosen.size()===this.size&&this.chosen.clear(),this.chosen.toggle(e.itemId,e.actionArea),this.chosen.size()<this.min}onClick(e){(this.chosen.has(e.itemId)||this.chosen.size()<this.size)&&this.chosen.toggle(e.itemId,e.actionArea)}isSatisfied(){return this.chosen.size()>=this.min}}t.StepDataLoose=StepDataLoose;class StepByStepActionDriver extends i.PlayerActionDriver{constructor(e,t,n){super(),this.name=e,this.steps=t,this.buttons=n,this.curr=0,this.allAreas=new Set,this.onClicked=(e,t)=>{if(console.log("[Player Action] Clicked on",e),e.actionArea===r.UIPosition.BUTTONS){let n=this.buttons.find((t=>t.id===e.itemId));if((0,o.isDirectButton)(t.serverHint.hint,n)){let n={},a={serverHint:t.serverHint.hint,actionSource:t.myself.player.id,actionData:n};return this.steps.forEach((e=>e.dumpDataTo(a))),n[r.UIPosition.BUTTONS]=[e.itemId],t.submitAction(a),console.log("[Player Action] Submit direct action. Back to server",a),i.ClickActionResult.DONE}if(e.itemId===r.Button.CANCEL.id)return this.cleanUpState(0),this.curr=0,i.ClickActionResult.AT_ZERO}let n=this.getStepInConcern(e),a=this.steps[n];if(a!==this.currentStep())console.log("[Player Action] This is a step already done"),a.onRetroClick(e)&&(console.log("[Player Action] Retro operation suggests to go back to step: ",n),this.cleanUpState(n+1),this.curr=n);else for(console.log("[Player Action] This is the current step"),a.onClick(e);this.currentStep().isSatisfied();)if(console.log("[Player Action] Step complete, proceeding to next step"),this.curr+=1,this.curr===this.steps.length){let e={},n={actionSource:t.myself.player.id,serverHint:t.serverHint.hint,actionData:e};return this.steps.forEach((e=>e.dumpDataTo(n))),console.log("[Player Action] All steps done. Finishing the call"),t.submitAction(n),i.ClickActionResult.DONE}return 0===this.curr&&this.currentStep().chosen.isEmpty()?i.ClickActionResult.AT_ZERO:i.ClickActionResult.PROCESSING},this.canBeClicked=(e,t)=>{if(e.actionArea===r.UIPosition.BUTTONS){let n=this.buttons.find((t=>t.id===e.itemId));if((0,o.isDirectButton)(t.serverHint.hint,n))return(0,o.isDirectButton)(t.serverHint.hint,n).enabled?i.Clickability.CLICKABLE:i.Clickability.DISABLED;if(e.itemId===r.Button.CANCEL.id)return this.currentStep().canCancel?i.Clickability.CLICKABLE:i.Clickability.DISABLED}let n=this.getStepInConcernSafe(e);return n?n!==this.currentStep()?n.chosen.has(e.itemId)||n.filter(e.itemId,t,this.collectFromSteps())?i.Clickability.CLICKABLE:i.Clickability.DISABLED:n.filter(e.itemId,t,this.collectFromSteps())&&n.canClick(e)?i.Clickability.CLICKABLE:i.Clickability.DISABLED:i.Clickability.NOT_CLICKABLE},this.isSelected=(e,t)=>{let n=this.getStepInConcernSafe(e);return!!n&&n.chosen.has(e.itemId)},this.getStepInConcernSafe=e=>this.steps.find(((t,n)=>n<=this.curr&&t.isConcernedWith(e.actionArea))),this.getStepInConcern=e=>{for(let t=0;t<=this.curr;++t)if(this.steps[t].isConcernedWith(e.actionArea))return t;throw`Step not found/reached yet!! ${e.actionArea} ${e.itemId} ${this.constructor.name}`},t.forEach((e=>{e.areas.forEach((e=>this.allAreas.add(e)))}))}getAllAreas(){return this.allAreas}getUsableButtons(){return this.buttons}collectFromSteps(){let e=new s.Multimap;return this.steps.forEach((t=>{t.chosen.toArray().forEach((t=>{e.set(t[1],t[0])}))})),e}getHintMsg(e){return this.currentStep().msgObtainer(e)}cleanUpState(e){for(let t=e;t<=this.curr;++t)this.steps[t].chosen.clear()}currentStep(){return this.steps[this.curr]}}t.StepByStepActionDriver=StepByStepActionDriver},8651:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.playerActionDriverProvider=void 0;const r=n(8264),i=n(739),a=n(1449);t.playerActionDriverProvider=new class PlayerActionDriverProvider{constructor(){this.providers=new Map,this.special=new a.Multimap}registerSpecial(e,t){this.special.set(e,t)}unregisterSpecial(e,t){this.special.get(e).delete(t)}registerProvider(e,t){let n=this.providers.get(e)||[];n.push(t),this.providers.set(e,n)}unregisterProvider(e,t){let n=this.providers.get(e).findIndex((e=>e===t));if(!(n>-1))throw"Not Found";this.providers.get(e).splice(n,1)}getDriver(e,t){if(e.hintType===i.HintType.SPECIAL){let n=this.special.getArr(e.specialId);if(1===n.length)return n[0](e,t);if(0===n.length)throw`Cannot find any driver for special hint! ${e.hintType} ${e.specialId}`;return new r.CompositePlayerActionDriver(n.map((n=>n(e,t))))}let n=(this.providers.get(e.hintType)||[]).map((n=>n(e,t))).filter((e=>e));if(n.length>1)return new r.CompositePlayerActionDriver(n);if(1===n.length)return n[0];throw`Cannot find any driver for hint! ${e.hintType}`}}},1613:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.slashTargetFilter=void 0,t.registerSlashPlayingHand=u,t.registerSlash=c,t.registerPlaySlash=p,t.registerPeachPlayHand=f,t.registerPeach=g;const r=n(4619),i=n(1480),a=n(8663),o=n(8651),s=n(1073),l=n(739),d=n(3587);function u(e){o.playerActionDriverProvider.registerProvider(l.HintType.PLAY_HAND,(n=>{let r=n.roundStat;return r.slashMax<=r.slashCount?null:e(new a.default("出牌阶段出杀"),n).expectChoose([i.UIPosition.PLAYER],1,n.roundStat.slashNumber,t.slashTargetFilter,(()=>`选择‘杀’的对象，可选${n.roundStat.slashNumber}个`)).expectAnyButton("点击确定出杀").build(n)}))}function c(e){o.playerActionDriverProvider.registerProvider(l.HintType.SLASH,(t=>e(new a.default(t.hintMsg),t).expectAnyButton("点击确定使用杀").build(t,[i.Button.OK])))}function p(e){o.playerActionDriverProvider.registerProvider(l.HintType.PLAY_SLASH,(t=>{let n=e(new a.default(t.hintMsg),t);return t.targetPlayers?n.expectAnyButton(`点击确定对${t.targetPlayers[0]}使用杀`).build(t,[i.Button.OK]):n.expectChoose([i.UIPosition.PLAYER],1,1,((e,n)=>t.forbidden?!!t.forbidden.find((t=>t===e)):e!==n.myself.player.id),(()=>"请选择出杀的目标")).expectAnyButton("点击确定使用杀").build(t,[i.Button.OK])}))}function h(e,t){return e.expectChoose([i.UIPosition.MY_EQUIP],1,1,((e,t)=>t.interpret(e).type===r.CardType.ZHANG_BA),(()=>t.hintMsg)).expectChoose([i.UIPosition.MY_HAND],2,2,(e=>!0),(()=>"请选择两张手牌"))}function f(e){o.playerActionDriverProvider.registerProvider(l.HintType.PLAY_HAND,(t=>e(new a.default("出牌阶段吃桃"),t).expectAnyButton("点击确定使用此牌/标记回复1点体力").build(t)))}function g(e){o.playerActionDriverProvider.registerProvider(l.HintType.PEACH,(t=>{if(!t.sourcePlayer)throw`Source Player not specified in hint: ${t}`;return e(new a.default("玩家濒死求桃"),t).expectAnyButton("点击确定使用桃/酒").build(t,[i.Button.OK])}))}t.slashTargetFilter=(e,t)=>{var n;return e!==t.myself.player.id&&!(null===(n=t.serverHint.hint.targetPlayers)||void 0===n?void 0:n.find((t=>t===e)))&&t.getMyDistanceTo(e)<=(t.serverHint.hint.roundStat.slashReach||t.myself.getReach())},u(((e,t)=>e.expectChoose([i.UIPosition.MY_HAND],1,1,((e,t)=>t.interpret(e).type.isSlash()),(()=>t.hintMsg)))),p(((e,t)=>e.expectChoose([i.UIPosition.MY_HAND],1,1,((e,t)=>t.interpret(e).type.isSlash()),(()=>t.hintMsg)))),c(((e,t)=>e.expectChoose([i.UIPosition.MY_HAND],1,1,((e,t)=>t.interpret(e).type.isSlash()),(()=>t.hintMsg)))),u(h),p(h),c(h),o.playerActionDriverProvider.registerProvider(l.HintType.PLAY_HAND,(e=>new a.default("出牌阶段出酒").expectChoose([i.UIPosition.MY_HAND],1,1,((t,n)=>!e.roundStat.customData[d.WINE_TAKEN]&&n.interpret(t).type===r.CardType.WINE)).expectAnyButton("点击确定干了这碗酒").build(e))),o.playerActionDriverProvider.registerProvider(l.HintType.PLAY_HAND,(e=>new a.default("出牌阶段出范围锦囊").expectChoose([i.UIPosition.MY_HAND],1,1,((e,t)=>"group-ruse"===t.interpret(e).type.genre)).expectAnyButton("点击确定出此牌").build(e))),o.playerActionDriverProvider.registerProvider(l.HintType.PLAY_HAND,(e=>new a.default("出牌阶段出乐不思蜀").expectChoose([i.UIPosition.MY_HAND],1,1,((e,t)=>t.interpret(e).type===r.CardType.LE_BU)).expectChoose([i.UIPosition.PLAYER],1,1,((e,t)=>e!==t.myself.player.id&&!t.getPlayer(e).hasJudgeCard(r.CardType.LE_BU)),(()=>"选择‘乐不思蜀’的对象")).expectAnyButton("点击确定使用乐不思蜀").build(e))),o.playerActionDriverProvider.registerProvider(l.HintType.PLAY_HAND,(e=>new a.default("出牌阶段出兵粮寸断").expectChoose([i.UIPosition.MY_HAND],1,1,((e,t)=>t.interpret(e).type===r.CardType.BING_LIANG)).expectChoose([i.UIPosition.PLAYER],1,1,((e,t)=>e!==t.myself.player.id&&t.getMyDistanceTo(e)<=t.serverHint.hint.roundStat.binLiangReach&&!t.getPlayer(e).hasJudgeCard(r.CardType.BING_LIANG)),(()=>"选择‘兵粮寸断’的对象")).expectAnyButton("点击确定使用兵粮寸断").build(e))),o.playerActionDriverProvider.registerProvider(l.HintType.PLAY_HAND,(e=>new a.default("出牌阶段出闪电").expectChoose([i.UIPosition.MY_HAND],1,1,((e,t)=>t.interpret(e).type===r.CardType.SHAN_DIAN)).expectAnyButton("点击确定使用闪电").build(e))),o.playerActionDriverProvider.registerProvider(l.HintType.PLAY_HAND,(e=>new a.default("出牌阶段出火攻").expectChoose([i.UIPosition.MY_HAND],1,1,((e,t)=>t.interpret(e).type===r.CardType.HUO_GONG)).expectChoose([i.UIPosition.PLAYER],1,1,((e,t)=>t.getPlayer(e).getCards(s.CardPos.HAND).length>0),(()=>"选择‘火攻’的对象")).expectAnyButton("点击确定发动火攻").build(e))),o.playerActionDriverProvider.registerProvider(l.HintType.PLAY_HAND,(e=>new a.default("出牌阶段出无中生有").expectChoose([i.UIPosition.MY_HAND],1,1,((e,t)=>t.interpret(e).type===r.CardType.WU_ZHONG)).expectAnyButton("点击确定使用无中生有").build(e))),o.playerActionDriverProvider.registerProvider(l.HintType.PLAY_HAND,(e=>new a.default("出牌阶段出顺手牵羊").expectChoose([i.UIPosition.MY_HAND],1,1,((e,t)=>t.interpret(e).type===r.CardType.SHUN_SHOU)).expectChoose([i.UIPosition.PLAYER],1,1,((e,t)=>e!==t.myself.player.id&&t.getPlayer(e).hasCards()&&t.getMyDistanceTo(e)<=t.serverHint.hint.roundStat.shunshouReach),(()=>"选择‘顺手牵羊’的对象")).expectAnyButton("点击确定使用顺手牵羊").build(e))),o.playerActionDriverProvider.registerProvider(l.HintType.PLAY_HAND,(e=>new a.default("出牌阶段出过河拆桥").expectChoose([i.UIPosition.MY_HAND],1,1,((e,t)=>t.interpret(e).type===r.CardType.GUO_HE)).expectChoose([i.UIPosition.PLAYER],1,1,((e,t)=>e!==t.myself.player.id&&t.getPlayer(e).hasCards()),(()=>"选择‘过河拆桥’的对象")).expectAnyButton("点击确定使用过河拆桥").build(e))),o.playerActionDriverProvider.registerProvider(l.HintType.PLAY_HAND,(e=>new a.default("出牌阶段出决斗").expectChoose([i.UIPosition.MY_HAND],1,1,((e,t)=>t.interpret(e).type===r.CardType.JUE_DOU)).expectChoose([i.UIPosition.PLAYER],1,1,((e,t)=>e!==t.myself.player.id),(()=>"选择‘决斗’的对象")).expectAnyButton("点击确定发动决斗").build(e))),o.playerActionDriverProvider.registerProvider(l.HintType.PLAY_HAND,(e=>new a.default("出牌阶段出铁索连环").expectChoose([i.UIPosition.MY_HAND],1,1,((e,t)=>t.interpret(e).type===r.CardType.TIE_SUO)).expectChoose([i.UIPosition.PLAYER],1,2,((e,t)=>!0),(()=>"选择1到2个‘铁索连环’的对象, 或者直接重铸")).expectAnyButton("点击确定使用铁索连环 或重铸").build(e,[i.Button.OK,i.Button.CANCEL,new i.Button("chong_zhu","重铸")]))),o.playerActionDriverProvider.registerProvider(l.HintType.PLAY_HAND,(e=>new a.default("出牌阶段出借刀杀人").expectChoose([i.UIPosition.MY_HAND],1,1,((e,t)=>t.interpret(e).type===r.CardType.JIE_DAO)).expectChoose([i.UIPosition.PLAYER],2,2,((e,t,n)=>{let r=n.getArr(i.UIPosition.PLAYER);return 0===r.length?e!==t.myself.player.id&&!!t.getPlayer(e).getCards(s.CardPos.EQUIP).find((e=>"weapon"===e.type.genre)):1===r.length&&function(e,t,n){return n.computeDistance(e,t)<=n.getPlayer(e).getReach()}(r[0],e,t)}),(()=>"先选择借刀之人, 再选要杀的目标")).noBacksie().expectAnyButton("点击确定使用借刀杀人").build(e))),f(((e,t)=>e.expectChoose([i.UIPosition.MY_HAND],1,1,((e,t)=>t.myself.hp<t.myself.maxHp&&t.interpret(e).type===r.CardType.PEACH)))),o.playerActionDriverProvider.registerProvider(l.HintType.PLAY_HAND,(e=>new a.default("出牌阶段穿戴装备").expectChoose([i.UIPosition.MY_HAND],1,1,((e,t)=>t.myself.hp<t.myself.maxHp&&t.interpret(e).type.isEquipment())).expectAnyButton("点击确定穿戴装备").build(e))),o.playerActionDriverProvider.registerProvider(l.HintType.CHOOSE_CARD,(e=>{if(!e.quantity||!e.positions)throw`Card Number / Positions not specified in hint: ${e}`;return new a.default("令玩家选择牌").expectChoose(e.positions,e.quantity,e.quantity,((t,n)=>{if(e.suits){let r=n.interpret(t,n.myself).suit;return!!e.suits.find((e=>e===r))}return!e.forbidden||!e.forbidden.find((e=>e===t))}),(()=>e.hintMsg)).expectAnyButton("点击确定完成操作").build(e,[i.Button.OK])})),g(((e,t)=>e.expectChoose([i.UIPosition.MY_HAND],1,1,((e,n)=>n.interpret(e).type===r.CardType.PEACH||t.sourcePlayer===n.myself.player.id&&n.interpret(e).type===r.CardType.WINE)))),o.playerActionDriverProvider.registerProvider(l.HintType.DODGE,(e=>new a.default(e.hintMsg).expectChoose([i.UIPosition.MY_HAND],1,1,((e,t)=>t.interpret(e).type===r.CardType.DODGE),(()=>e.hintMsg)).expectAnyButton("点击确定使用闪").build(e,[i.Button.OK]))),o.playerActionDriverProvider.registerProvider(l.HintType.WU_XIE,(e=>new a.default(e.hintMsg).expectChoose([i.UIPosition.MY_HAND],1,1,((e,t)=>t.interpret(e).type.isWuxie()),(()=>e.hintMsg)).expectAnyButton("点击确定使用无懈可击").build(e,[i.Button.OK]))),o.playerActionDriverProvider.registerProvider(l.HintType.MULTI_CHOICE,(e=>new a.default(e.hintMsg).expectAnyButton(e.hintMsg).build(e,[]))),o.playerActionDriverProvider.registerProvider(l.HintType.CHOOSE_PLAYER,(e=>new a.default(e.hintMsg).expectChoose([i.UIPosition.PLAYER],e.minQuantity,e.quantity,((t,n)=>!e.forbidden||!e.forbidden.find((e=>e===t))),(()=>e.hintMsg)).expectAnyButton(e.hintMsg).build(e,[i.Button.OK]))),o.playerActionDriverProvider.registerProvider(l.HintType.PLAY_HAND,(e=>new a.default("出牌阶段装备东西").expectChoose([i.UIPosition.MY_HAND],1,1,((e,t)=>t.interpret(e).type.isEquipment())).expectAnyButton("点击确定装备此牌").build(e))),o.playerActionDriverProvider.registerSpecial(r.CardType.SAN_JIAN.name,(e=>{let t=e.sourcePlayer;return new a.default(e.hintMsg).expectChoose([i.UIPosition.MY_HAND],1,1,((e,t)=>!0),(()=>"选择一张手牌弃置")).expectChoose([i.UIPosition.PLAYER],1,1,((e,n)=>e!==t&&1===n.computeDistance(t,e)),(()=>`选择距离${t}为1的另一名玩家`)).expectAnyButton("点击确定对其造成伤害").build(e,[i.Button.OK])}))},9852:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let[t,n]=i.useState(null),[r,f]=i.useState(null),[g,y]=i.useState(null);i.useEffect((()=>{e.pubsub.on(a.ServerHintTransit,(e=>{if(e.hint.hintType!==a.HintType.UI_PANEL||"choose"!==e.hint.customRequest.mode)throw"Invalid hint! "+e;console.log("Game Hint",e),n(e)})),console.log("Subscribed to server hint")}),[]);let m=e.circus.statuses.find((t=>t.player.id===e.myId)),v=[],C=-1;if(t){let e=t.hint.customRequest.data;v=e.generals,C=e.yourIdx}let b=new FactionSelector(v,r,g);return i.createElement("div",{className:"general-selection-container"},i.createElement("div",{className:"player-statuses"},i.createElement("div",{className:"overall center"},"玩家数: ",e.circus.statuses.length+"/"+e.circus.playerNo),i.createElement("div",{className:"player-status heading",key:"title"},i.createElement("div",{className:"player-name"},"玩家名"),i.createElement("div",{className:"seating"},"顺位"),i.createElement("div",{className:"status"},"状态")),e.circus.statuses.sort(((e,t)=>e.seating-t.seating)).map((t=>{let n=t.chosenGeneral&&t.chosenSubGeneral;return i.createElement("div",{className:"player-status "+(t.player.id===e.myId?"is-myself":""),key:t.player.id},i.createElement("div",{className:"player-name"},t.player.id),i.createElement("div",{className:"seating"},(0,h.toChinese)(t.seating)),i.createElement("div",{className:"status "+(n&&"chosen")},n?"选好了":"选将中"))}))),m.chosenGeneral?i.createElement("div",{className:"my-choices"},i.createElement(p.default,{ruleName:"国战规则",rules:i.createElement(c.default,null)}),i.createElement("div",{className:"title center"},"等待其他玩家加入/完成选将"),i.createElement("div",{className:"chosen center"},i.createElement("div",{className:"place-holder general-wrapper"},i.createElement(o.default,{general:m.chosenGeneral})),i.createElement("div",{className:"place-holder general-wrapper"},i.createElement(o.default,{general:m.chosenSubGeneral})))):i.createElement("div",{className:"my-choices"},i.createElement(p.default,{ruleName:"国战规则",rules:i.createElement(c.default,null)}),i.createElement("div",{className:"title center"},r?g?"点击确定选将":"请选择副将":"请选择主将"," ",`(你是${(0,h.toChinese)(C)}号位)`),i.createElement("div",{className:"available"},v.map((e=>{let t=b.disabled.has(e),n=new u.ClassFormatter("general-wrapper").and(t,"disabled").and(b.highlighted.has(e),"highlighted").done();return i.createElement("div",{className:n,key:e.id,onClick:()=>{t||(r?y(e):f(e))}},i.createElement(o.default,{general:e}))}))),i.createElement("div",{className:"chosen center"},i.createElement("div",{className:"place-holder general-wrapper",onClick:()=>{f(null),y(null)}},i.createElement(o.default,{general:r})),i.createElement("div",{className:"place-holder general-wrapper",onClick:()=>{y(null)}},i.createElement(o.default,{general:g}))),i.createElement("div",{className:"button-container center"},i.createElement(l.default,{disabled:!r||!g,display:"确认选将",onClick:()=>{e.socket.send(d.Serde.serialize(new s.PlayerActionTransit(t.hintId,{actionData:null,actionSource:t.toPlayer,serverHint:t.hint,customData:[r.id,g.id]})))}}))))};const r=n(1658),i=n(6540),a=n(739),o=n(3215),s=n(1480),l=n(7176),d=n(7562),u=n(1155);n(7683);const c=n(1764),p=n(2351),h=n(5706);class FactionSelector{constructor(e,t,n){if(this.disabled=new Set,this.highlighted=new Set,!t||!n)return t?(this.disabled=new Set(e.filter((e=>e.faction.name!==t.faction.name||e.id===t.id))),void(this.highlighted=new Set(e.filter((e=>r.generalPairs.isPaired(t.name,e.name)))))):void e.forEach((t=>{1===e.filter((e=>e.faction.name===t.faction.name)).length&&(console.log("disabled",t),this.disabled.add(t))}));this.disabled=new Set(e)}}},7822:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(4619),i=[];var a,o;console.log("Setting up Preloader!"),a=function(){console.log("Preloading Card Types!"),function(...e){e.forEach((e=>{let t=new Image;t.src=window.location+"/cards/"+e.id+".png",i.push(t)}))}(r.CardType.BACK,r.CardType.SLASH,r.CardType.SLASH_FIRE,r.CardType.SLASH_THUNDER,r.CardType.DODGE,r.CardType.PEACH,r.CardType.WINE,r.CardType.TENG_JIA,r.CardType.BA_GUA,r.CardType.SILVER_LION,r.CardType.REN_WANG,r.CardType.ZHANG_BA,r.CardType.QING_LONG,r.CardType.QING_GANG,r.CardType.CI_XIONG,r.CardType.GU_DING,r.CardType.ZHU_QUE,r.CardType.GUAN_SHI,r.CardType.LIAN_NU,r.CardType.FANG_TIAN,r.CardType.HAN_BING,r.CardType.QI_LIN,r.CardType.DA_YUAN,r.CardType.ZHUA_HUANG,r.CardType.DI_LU,r.CardType.ZI_XING,r.CardType.JUE_YING,r.CardType.CHI_TU,r.CardType.HUA_LIU,r.CardType.JIE_DAO,r.CardType.GUO_HE,r.CardType.SHUN_SHOU,r.CardType.WU_XIE,r.CardType.WU_ZHONG,r.CardType.JUE_DOU,r.CardType.HUO_GONG,r.CardType.TIE_SUO,r.CardType.TAO_YUAN,r.CardType.WAN_JIAN,r.CardType.NAN_MAN,r.CardType.WU_GU,r.CardType.LE_BU,r.CardType.BING_LIANG,r.CardType.SHAN_DIAN,r.CardType.YI_YI,r.CardType.ZHI_JI,r.CardType.YUAN_JIAO,r.CardType.WU_LIU,r.CardType.SAN_JIAN,r.CardType.WU_XIE_GUO)},o=window.onload,"function"!=typeof window.onload?window.onload=a:window.onload=function(){o&&o(void 0),a()}},10:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultCardEndpoint=t.DeckEndpoint=t.CardHeight=t.CardWidth=void 0,t.getCardCoor=c;const r=n(6069),i=n(1073),a=n(6540),o=n(5706),s=n(5538),l=n(3014),d=n(2831),u=n(2974);function c(e){let n=e.getBoundingClientRect();return{x:(n.left+n.right)/2-t.CardWidth/2,y:(n.top+n.bottom)/2-t.CardHeight/2}}n(4850),t.CardWidth=120,t.CardHeight=150;class DeckEndpoint extends a.Component{constructor(e){super(e),this.dom=a.createRef(),e.cardTransitManager.register(this,r.CardTransit.DECK)}componentWillUnmount(){this.props.cardTransitManager.register(null,r.CardTransit.DECK)}performAddAnimation(e,t){throw"Impossible!"}performRemovalAnimation(e,t,n){let r=c(this.dom.current);return e.map(((t,n)=>({card:t,coor:{y:r.y,x:r.x+36*(n-e.length/2)}})))}render(){return a.createElement("div",{className:"card-transit occupy deck",ref:this.dom})}}t.DeckEndpoint=DeckEndpoint;class DefaultCardEndpoint extends a.Component{constructor(e){super(e),this.dom=a.createRef(),this.state={transit:new Map}}performAddAnimation(e,t){this.setState((n=>(e.forEach((e=>{n.transit.set(e.uuid,Object.assign(Object.assign({},e),{coor:this.offsetMyCoor(e.coor)})),this.props.info.addCard(e.card,t.toPos),this.props.callback()})),n)),(()=>{setTimeout((()=>this.updateCards(e)),10)}))}updateCards(e){this.setState((t=>(e.forEach(((n,r)=>{let i=this.offsetMyCoor(c(this.dom.current));t.transit.get(n.uuid).coor={y:i.y,x:i.x+36*(r-e.length/2)}})),t))),setTimeout((()=>{this.setState((t=>(e.forEach((e=>t.transit.delete(e.uuid))),t)))}),e[0].animDuration)}performRemovalAnimation(e,n,r){r||((0,i.isCardPosHidden)(n)?(console.log("Randomly removing the dummy cards!"),this.props.info.removeRandomly(n,e.length)):e.forEach((e=>this.props.info.removeFromPos(e.id,n))),this.props.callback());let a=c(this.dom.current);return e.map(((n,r)=>({card:n,coor:{y:a.y-t.CardHeight/2,x:a.x+36*(r-e.length/2)-t.CardWidth/2}})))}offsetMyCoor(e){return{x:e.x-this.dom.current.getBoundingClientRect().left,y:e.y-this.dom.current.getBoundingClientRect().top}}render(){return a.createElement("div",{className:"card-transit occupy",ref:this.dom},a.createElement(u.TransitionGroup,null,(0,o.flattenMap)(this.state.transit).map((([e,t])=>a.createElement(u.CSSTransition,{key:e,timeout:{appear:0,enter:0,exit:2e3},classNames:"fade-out"},a.createElement("div",{className:"ui-card-wrapper",key:e,style:{left:t.coor.x+"px",top:t.coor.y+"px",transitionDuration:t.animDuration+"ms"}},a.createElement(s.default,{card:t.card,isShown:!0,elementStatus:l.ElementStatus.NORMAL})))))))}}t.DefaultCardEndpoint=DefaultCardEndpoint;t.default=class CardTransitManager{constructor(e){this.cardManager=e,this.endpoints=new Map,this.register=(e,t)=>{if(e){if(this.endpoints.has(t))throw`Already has registered: ${t}`;this.endpoints.set(t,e)}else this.endpoints.delete(t)},this.onCardTransfer=e=>{let t=this.getEndpoint(e.from),n=this.getEndpoint(e.to);if(!t||!n)throw`Cannot find endpoint for id: ${e.from}, ${e.to}`;console.log("On Card Transfer",e);let r=t.performRemovalAnimation(e.cards.map(this.cardManager.cleanCard),e.fromPos,e.doNotRemove).map((t=>Object.assign(Object.assign({},t),{animDuration:e.animDurationSeconds,uuid:(0,d.v4)()})));n.performAddAnimation(r,e)}}getEndpoint(e){return this.endpoints.get(e)}}},8892:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ScreenPosObtainer=void 0;t.ScreenPosObtainer=class ScreenPosObtainer{constructor(){this.getters=new Map}register(e,t){this.getters.set(e,t)}registerObtainer(e,t){this.getters.set(e,(()=>{let{top:e,bottom:n,left:r,right:i}=t.current.getBoundingClientRect();return{x:(r+i)/2,y:(e+n)/2}}))}getPos(e,t=""){return this.getters.get(e)(t)}}},3014:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ElementStatus=void 0;const r=n(6540);n(5689);const i=n(3147),a=n(7176),o=n(3047),s=n(1480),l=n(8264),d=n(739),u=n(5776),c=n(6069),p=n(7296),h=n(9384),f=n(8892),g=n(8113),y=n(10),m=n(1601),v=n(6203),C=n(9222),b=n(2166),S=n(6436),E=n(6615),w=n(2351),_=n(5706),P=n(801);class ElementStatus{constructor(e,t){this.name=e,this.isSelectable=t}}t.ElementStatus=ElementStatus,ElementStatus.SELECTED=new ElementStatus("selected",!0),ElementStatus.UNSELECTED=new ElementStatus("unselected",!0),ElementStatus.DISABLED=new ElementStatus("disabled",!1),ElementStatus.NORMAL=new ElementStatus("normal",!1);class CheckerImpl{constructor(e,t,n){this.areaAction=e,this.context=t,this.callback=n,this.getStatus=e=>{switch(this.context.canBeClicked(this.areaAction,e)){case l.Clickability.CLICKABLE:return this.context.isSelected(this.areaAction,e)?ElementStatus.SELECTED:ElementStatus.UNSELECTED;case l.Clickability.NOT_CLICKABLE:return ElementStatus.NORMAL;case l.Clickability.DISABLED:return ElementStatus.DISABLED}},this.onClicked=e=>{this.context.onClicked(this.areaAction,e),this.callback()}}}class UIBoard extends r.Component{constructor(e){super(e),this.toggleMusic=()=>{this.setState({audioPlaying:!this.state.audioPlaying},(()=>{this.state.audioPlaying?E.audioManager.play("/audio/music-in-game.mp3",!0):E.audioManager.pause("/audio/music-in-game.mp3")}))},this.refresh=()=>{this.forceUpdate()},this.skinUpdate=(0,_.throttle)((e=>{this.props.context.sendToServer(new c.SkinRequest(this.props.context.myself.player.id,e))}),1e3);let{myId:t,context:n}=e,i=new f.ScreenPosObtainer,a=new CheckerImpl(s.UIPosition.MY_SKILL,n,this.refresh);this.state={hideCards:!1,showDistance:!1,screenPosObtainer:i,playerChecker:new CheckerImpl(s.UIPosition.PLAYER,n,this.refresh),cardsChecker:new CheckerImpl(s.UIPosition.MY_HAND,n,this.refresh),buttonChecker:new CheckerImpl(s.UIPosition.BUTTONS,n,this.refresh),equipChecker:new CheckerImpl(s.UIPosition.MY_EQUIP,n,this.refresh),signsChecker:new CheckerImpl(s.UIPosition.SIGNS,n,this.refresh),onGeneralChecker:new CheckerImpl(s.UIPosition.ON_MY_GENERAL,n,this.refresh),onSubGeneralChecker:new CheckerImpl(s.UIPosition.ON_MY_SUB_GENERAL,n,this.refresh),cardTransitManager:new y.default(n.cardManager),uiRequest:null,uiData:null,skillButtons:[],others:n.getRingFromPerspective(t,!1,!0),audioPlaying:!0},E.audioManager.play("/audio/music-in-game.mp3",!0),e.pubsub.on(b.SkillStatus,(e=>{this.setState((r=>{let i=r.skillButtons.findIndex((t=>t.skill.id===e.id&&t.skill.playerId===e.playerId));if(e.isGone)return i>=0?(console.log("删除技能",e),r.skillButtons[i].skill.onRemoval(n),r.skillButtons.splice(i,1)):console.log("未找到技能",e),r;if(i<0){console.info("Received a new skill!",e);let i=C.GameMode.get(n.gameMode).skillProvider(e.id,t);Object.assign(i,e),i.bootstrapClient(n,n.getPlayer(t)),r.skillButtons.push({skill:i,skillChecker:a,statusUpdater:e=>{n.sendToServer(e)}})}else{let t=r.skillButtons[i];Object.assign(t.skill,e),console.log("Updated skill",t.skill.isRevealed,e,t.skill)}return r}))})),e.pubsub.on(d.ServerHintTransit,(e=>{n.setHint(e),e.hint.hintType===d.HintType.UI_PANEL?(console.log("Received Special Panel Request. Not sending to context"),this.setState({uiRequest:e.hint.customRequest})):this.refresh()})),e.pubsub.on(v.CustomUIData,(e=>{this.setState({uiData:e})})),e.pubsub.on(d.Rescind,(()=>{n.setHint(null),this.refresh()})),e.pubsub.on(c.TextFlashEffect,(e=>{this.effectProducer.processEffect(e)})),e.pubsub.on(c.CardTransit,(e=>{this.state.cardTransitManager.onCardTransfer(e)})),e.pubsub.on(p.FactionPlayerInfo,(e=>{delete e.cards;let t=n.getPlayer(e.player.id);Object.assign(t,e),this.refresh()})),e.pubsub.on(c.CurrentPlayerEffect,(e=>{n.curr=e.player})),e.pubsub.on(h.IdentityWarPlayerInfo,(e=>{delete e.cards,Object.assign(n.getPlayer(e.player.id),e),this.refresh()})),this.dom=r.createRef(),i.registerObtainer(t,this.dom)}componentWillUnmount(){E.audioManager.stop("/audio/music-in-game.mp3")}render(){let{myId:e,context:t,pubsub:n}=this.props,{showDistance:s,hideCards:l,screenPosObtainer:d,others:p,skillButtons:h,signsChecker:f,onGeneralChecker:y,onSubGeneralChecker:v,playerChecker:b,cardsChecker:E,buttonChecker:N,equipChecker:I,cardTransitManager:k}=this.state,A=t.getPlayer(e),x=C.GameMode.get(t.gameMode);return r.createElement("div",{className:"board occupy noselect",style:{}},r.createElement("div",{className:"top"},r.createElement("div",{className:"playground"},r.createElement(o.default,{players:p,distanceComputer:t.getMyDistanceTo,pubsub:n,screenPosObtainer:d,showDist:s,cardTransitManager:k,checker:b,cardManager:t.cardManager}),r.createElement(g.default,{customRequest:this.state.uiRequest,commonUI:this.state.uiData,context:t,onGeneralChecker:y,onSubGeneralChecker:v,pubsub:n,consumer:(n,r=!1)=>{r?t.sendToServer(n):(t.submitAction({actionData:null,actionSource:e,serverHint:null,customData:n}),this.setState({uiRequest:null}))}}),r.createElement(S.UIRollingLogger,{pubsub:n})),r.createElement("div",{className:"chat-logger"},r.createElement(S.UILogger,{pubsub:n})),r.createElement("div",{className:"system-buttons"},r.createElement(w.default,{ruleName:x.name+"规则",rules:x.manual()}),r.createElement("i",{className:"fa fa-music icon "+(this.state.audioPlaying?"flashing-red":""),onClick:this.toggleMusic}))),r.createElement("div",{className:"btm",ref:this.dom},r.createElement(i.UIMyPlayerCard,{info:A,elementStatus:b.getStatus(e),cb:this.skinUpdate,onSelect:e=>b.onClicked(e),pubsub:n,skillButtons:h}),r.createElement(m.default,{info:A,equipChecker:I,cardsChecker:E,signsChecker:f,hideCards:l,cardTransitManager:k,onCardsShifted:e=>{this.props.context.sendToServer(e)}}),r.createElement("div",{className:"player-buttons"},r.createElement("div",{className:"server-hint-msg"},t.getMsg()),t.getButtons().map((e=>r.createElement(a.default,{key:e.id,display:e.display,onClick:()=>N.onClicked(e.id),className:"abort"===e.id?"ui-button-abort":"",disabled:!N.getStatus(e.id).isSelectable})))),r.createElement("div",{className:"buttons"},r.createElement(a.UIDropDownButton,{display:"语音",list:["人心散了队伍不好带啊","你可以打得再烂一点儿吗","你咋不上天哪","哥们儿给力点行吗","姑娘你真是条汉子","我从未见过如此厚颜无耻之人","昏君啊","见证奇迹的时刻到了","请收下我的膝盖","这波不亏","风吹鸡蛋壳牌去人安乐"],onClick:n=>t.sendToServer(new c.VoiceRequest(e,n))}),r.createElement(a.default,{display:s?"隐藏距离":"显示距离",onClick:()=>{this.setState({showDistance:!s})},disabled:!1}),r.createElement(a.default,{display:l?"拿起牌":"扣牌",onClick:()=>{this.setState({hideCards:!l})},disabled:!1}),r.createElement(a.default,{display:"投降",onClick:()=>confirm("你真的想要投降?")&&t.sendToServer(new c.SurrenderRequest(e)),disabled:!(0,P.canSurrender)(e,t)}))),r.createElement(_.Mask,{isMasked:!!t.getMsg(),maskClass:"alert-play-hand"}),r.createElement(u.default,{screenPosObtainer:d,ref:e=>this.effectProducer=e}))}}t.default=UIBoard},7176:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return r.createElement("button",{className:"ui-button "+e.className,disabled:e.disabled,onClick:()=>e.disabled||e.onClick()},e.display)},t.UIDropDownButton=function(e){let[t,n]=r.useState(!1),[i,a]=r.useState(!1);return r.createElement("button",{className:"ui-button "+e.className,disabled:t,onClick:()=>a(!i),onBlur:()=>a(!1)},e.display,i&&r.createElement("div",{className:"drop-down"},e.list.map((t=>r.createElement("div",{className:"choice",key:t,onClick:()=>{return r=t,e.onClick(r),n(!0),void setTimeout((()=>{n(!1)}),5e3);var r}},t)))))};const r=n(6540)},5538:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CardWidth=void 0,t.UICardHolder=function(){return r.createElement("div",{className:"ui-card card-placeholder"})},t.default=function(e){let t=()=>e.onMouseDown&&e.onMouseDown(e.card),n=()=>e.onMouseUp&&e.onMouseUp(e.card),s=()=>e.onMouseClick&&e.onMouseClick(e.card),l=()=>e.onMouseEnter&&e.onMouseEnter(e.card),d=()=>e.onMouseLeave&&e.onMouseLeave(e.card),c=r.useRef();r.useEffect((()=>(e.onPos&&e.onPos(e.card.id,c),()=>{e.onPos&&e.onPos(e.card.id,null)})),[]);let{elementStatus:p,card:h,isShown:f,nodescript:g,noAs:y}=e,m=new o.ClassFormatter("ui-card "+e.className).and(p.isSelectable,"selectable").and(p===a.ElementStatus.SELECTED,"selected").and(p===a.ElementStatus.DISABLED,"darkened").done();if(!f||h.isDummy())return r.createElement("div",{className:m,onMouseDown:t,onMouseUp:n,onClick:s,onMouseEnter:l,onMouseLeave:d},r.createElement("img",{className:"itself",src:"cards/back.png",alt:"HiddenCard"}));return u(h,r.createElement("div",{className:m,onMouseDown:t,onMouseUp:n,onMouseOver:()=>e.onMouseStay&&e.onMouseStay(e.card),onClick:s,onMouseEnter:l,onMouseLeave:d,ref:c},r.createElement("img",{className:"back",src:"cards/back.png",alt:"HiddenCard"}),r.createElement("img",{className:"itself",src:`cards/${h.type.id}.png`,alt:h.type.id}),r.createElement("div",{className:"top-left-container"},r.createElement("div",{className:"number "+h.suit},h.size.symbol),r.createElement("div",{className:"suit "+h.suit},i.Suits[h.suit])),!y&&h.as&&r.createElement("div",{className:"as center"},h.as.name),!g&&h.description&&r.createElement("div",{className:"description"},h.description)))},t.wrapCard=u;const r=n(6540);n(277);const i=n(5706),a=n(3014),o=n(1155);n(1137);const s=n(1015),l=n(3524),d=n(5167);function u(e,t){let n=d.describer.get(e.type.id),a=e.as&&d.describer.get(e.as.id);if(n||a){let o=t=>r.createElement(l.default,Object.assign({},t),r.createElement("p",null,`${i.Suits[e.suit]} ${e.size.symbol} ${e.type.name}`),n?r.createElement("p",null,"【"+e.type.name+"】"+n):null,a?r.createElement("p",null,"【"+e.as.name+"】"+a):null);return r.createElement(s.default,{placement:"auto",key:e.id,overlay:o,delay:{show:1e3,hide:200}},t)}return t}t.CardWidth=109},4572:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UIMarkRow=function(e){return r.createElement("div",{className:"ui-mark-row"},e.marks.map((e=>{let t=e.as||e.type;return(0,i.wrapCard)(e,r.createElement("img",{className:"judge-cards",key:t.name,src:`icons/${t.id}.png`,ref:e=>e}))})))};const r=n(6540),i=n(5538),a=n(9091),o=n(1073),s=n(5706),l=n(8514),d=n(1480);class UICardRow extends r.Component{constructor(e){super(e),this.myRefs=new Map,this.performAddAnimation=e=>{let t=[];this.setState((n=>{let r=this.containerRef.getBoundingClientRect(),i=r.left,a=r.top;if(this.containerRef.lastElementChild){let e=this.containerRef.lastElementChild;i=e.getBoundingClientRect().left}return e.forEach((e=>{let r=Object.assign(Object.assign({},e),{entered:"begin"});r.coor?(r.coor.x-=i,r.coor.y-=a):r.coor={x:20,y:0},t.push(r),delete r.card.description,delete r.card.as,n.cards.add(r)})),n})),setTimeout((()=>{t.forEach((e=>e.entered="starting")),this.forceUpdate()}),10),setTimeout((()=>{t.forEach((e=>e.entered="end")),this.forceUpdate()}),e[0].animDuration)},this.performRemovalAnimation=(e,t,n)=>{n||this.state.cards.removeAllThat((t=>!!e.find((e=>e.id===t.card.id))));let r=e.map((e=>({card:e,coor:this.getCardLocation(e.id)})));return this.forceUpdate(),r},this.settingRef=(e,t)=>{t?this.myRefs.set(e,t):this.myRefs.delete(e)},this.onDragEnd=(e,t)=>{e.destination&&((0,s.reorder)(this.state.cards._data,e.source.index,e.destination.index),this.props.onCardsShifted(new o.CardPosChangeEvent(d.UIPosition.MY_HAND,this.props.myName,e.source.index,e.destination.index)),this.forceUpdate())},this.state={hover:-1,cards:new a.default}}getCardLocation(e){var t;let n=null===(t=this.myRefs.get(e))||void 0===t?void 0:t.current;if(!n)throw`Card not found in hand! ${e}. has ${this.myRefs}`;return{x:n.getBoundingClientRect().left,y:n.getBoundingClientRect().top}}render(){let{isShown:e,checker:t}=this.props,{hover:n,cards:a}=this.state;return r.createElement(l.DragDropContext,{onDragEnd:this.onDragEnd},r.createElement(l.Droppable,{droppableId:"hand",direction:"horizontal",type:"hand"},((o,s)=>r.createElement("div",Object.assign({ref:e=>{o.innerRef(e),this.containerRef=e},style:c(s.isDraggingOver)},o.droppableProps),a.map(((a,o)=>{let s=t.getStatus(a.card.id),d={};return"begin"===a.entered&&(d.transform=`translate(${a.coor.x}px, ${a.coor.y}px)`),"starting"===a.entered&&(d.transition=a.animDuration+"ms"),r.createElement(l.Draggable,{key:a.card.id,draggableId:a.card.id,index:o},((l,c)=>r.createElement("div",Object.assign({ref:l.innerRef},l.draggableProps,l.dragHandleProps,{style:Object.assign(Object.assign({},u(c.isDragging,l.draggableProps.style)),d),className:"ui-my-row-card-wrapper"}),r.createElement(i.default,{key:a.card.id,card:a.card,isShown:e,onPos:this.settingRef,elementStatus:s,nodescript:!0,noAs:!0,onMouseLeave:()=>{n===o&&this.setState({hover:-1})},onMouseEnter:()=>this.setState({hover:o}),onMouseClick:e=>s.isSelectable&&t.onClicked(e.id)}))))})),o.placeholder))))}}t.default=UICardRow;const u=(e,t)=>Object.assign({pointerEvents:"none"},t),c=e=>({display:"flex",overflow:"visible",width:"100%",paddingRight:"100px"})},5610:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let t=e.cards.find((e=>"weapon"===e.type.genre)),n=e.cards.find((e=>"shield"===e.type.genre)),i=e.cards.find((e=>"horse+1"===e.type.genre)),l=e.cards.find((e=>"horse-1"===e.type.genre)),c=[t,n,i,l];return r.createElement(s.TransitionGroup,{className:"ui-equip-grid"},c.filter((e=>e)).map(((t,n)=>{var i;let l=(null===(i=e.checker)||void 0===i?void 0:i.getStatus(t.id))||a.ElementStatus.NORMAL,c=new o.ClassFormatter("equip-row").and(l.isSelectable,"selectable").and(l===a.ElementStatus.SELECTED,"selected").done();return r.createElement(s.CSSTransition,{key:t.id,timeout:{enter:300,exit:600},classNames:"equipment"},r.createElement("div",{className:c,onClick:()=>{var n;return l.isSelectable&&(null===(n=e.checker)||void 0===n?void 0:n.onClicked(t.id))},style:u(t.type.genre)},r.createElement(d,{key:t.id,big:e.big,card:t})))})))};const r=n(6540);n(6433);const i=n(5706),a=n(3014),o=n(1155),s=n(2974),l=n(5538);function d(e){return e.card?(0,l.wrapCard)(e.card,r.createElement("div",{className:"equip"},r.createElement("img",{key:"1",className:"corner corner-top-left",src:"equips/corner.png"}),r.createElement("img",{key:"2",className:"corner corner-btm-left",src:"equips/corner.png"}),r.createElement("img",{key:"3",className:"corner corner-top-right",src:"equips/corner.png"}),r.createElement("img",{key:"4",className:"corner corner-btm-right",src:"equips/corner.png"}),r.createElement("img",{key:"5",className:"icon",src:`equips/${c(e.card.type)[0]}.png`,alt:e.card.type.id}),r.createElement("div",{key:"6",className:"text-one"},c(e.card.type)[1]),r.createElement("div",{key:"7",className:"text-two"},e.card.type.name),r.createElement("div",{key:"8",className:"number "+e.card.suit},e.card.size.symbol),r.createElement("div",{key:"9",className:"suit "+e.card.suit},i.Suits[e.card.suit]))):r.createElement("div",null)}function u(e){switch(e){case"shield":return{top:"25%"};case"horse+1":return{top:"50%"};case"horse-1":return{top:"75%"}}}function c(e){return"weapon"===e.genre?["weapon",(0,i.toChinese)(e.distance-1)]:"shield"===e.genre?["shield",null]:"horse+1"===e.genre?["horse","+1"]:"horse-1"===e.genre?["horse","-1"]:void 0}},8552:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let t=e.current/e.total,n="green";1===e.current||t<.3?n="red":t<.6?n="orange":e.current<e.total&&(n="lime");if(e.total>5)return r.createElement("div",{className:"hp-col"},r.createElement("div",{className:"hp",style:{color:n}},e.total),r.createElement("div",{className:"hp",style:{color:n}},"/"),r.createElement("div",{className:"hp",style:{color:n}},e.current),r.createElement("img",{className:"hp",src:`icons/yy_${n}.png`}));return r.createElement("div",{className:"hp-col"},Array(e.total).fill(0).map(((t,i)=>i<e.current?r.createElement("img",{key:i,className:"hp",src:`icons/yy_${n}.png`}):r.createElement("img",{key:i,className:"hp",src:"icons/yy_none.png"}))))};const r=n(6540)},6436:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UILogger=function(e){let[t,n]=r.useState([]);return r.useEffect((()=>{e.pubsub.on(i.LogTransit,(e=>{t.unshift(e.log),t.length>500&&t.pop(),n([...t])}))}),[]),r.createElement("div",{className:"occupy logger-container"},t.map(((e,t)=>r.createElement("div",{className:"log-row",key:t},e))))},t.UIRollingLogger=function(e){let[t,n]=r.useState(["","",""]);return r.useEffect((()=>{e.pubsub.on(i.LogTransit,(e=>{t.shift(),t.push(e.log),n([...t])}))}),[]),r.createElement("div",{className:"logger-roller"},t.map(((e,t)=>r.createElement("div",{className:"log-row",key:t},e))))};const r=n(6540),i=n(6069);n(3487)},2497:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(e.error)return r.createElement("div",{className:"login-panel"},r.createElement("div",{className:"prompt"},"登录失败..."+e.error));if(e.myself.id)return r.createElement("div",{className:"login-panel"},r.createElement("div",{className:"prompt"},"欢迎登录, ",e.myself.id,", 为您连接中..."));let[t,n]=r.useState("");return r.createElement("div",{className:"login-panel"},r.createElement("div",{className:"prompt"},"初次见面, 大侠请留下姓名"),r.createElement("input",{className:"name-input",onChange:e=>n(e.target.value)}),r.createElement(i.default,{display:"此乃吾名",disabled:!1,onClick:()=>e.onDone({id:t})}))};const r=n(6540),i=n(7176);n(7952)},1601:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(4572),i=n(5610),a=n(6540),o=n(1073),s=n(3014),l=n(10),d=n(2831),u=n(1155),c=n(8357);class UIMyCards extends a.Component{constructor(e){super(e),this.dom=a.createRef()}componentDidMount(){console.log("UICardRow subscribing to card transit");let e=this.props.info.getCards(o.CardPos.HAND);e.length>0&&this.cardRow.performAddAnimation(e.map((e=>({card:e,coor:null,uuid:(0,d.v4)(),animDuration:400}))));let t={performAddAnimation:(e,t)=>{e.forEach((e=>this.props.info.addCard(e.card,t.toPos))),t.toPos===o.CardPos.HAND?this.cardRow.performAddAnimation(e):this.forceUpdate()},performRemovalAnimation:(e,t,n)=>{if(n||(e.forEach((e=>this.props.info.removeFromPos(e.id,t))),this.forceUpdate()),t===o.CardPos.HAND)return this.cardRow.performRemovalAnimation(e,t,n);let r=(0,l.getCardCoor)(this.dom.current);return e.map((e=>({card:e,coor:r})))}};this.props.cardTransitManager.register(t,this.props.info.player.id)}render(){let{info:e,hideCards:t,equipChecker:n,cardsChecker:l,signsChecker:d,onCardsShifted:p}=this.props;return a.createElement("div",{className:"my-cards"},a.createElement("div",{className:"mid",ref:this.dom},a.createElement("div",{className:"my-signs"},Object.keys(e.signs).map((t=>{let n=e.signs[t],r=d.getStatus(t),i=r.isSelectable&&n.enabled,o=new u.ClassFormatter("sign center").and(n.enabled,"enabled").and(i,"selectable").and(r===s.ElementStatus.SELECTED,"selected").done();return(0,c.wrapSign)(a.createElement("div",{key:t,className:o,onClick:()=>{i&&d.onClicked(t)}},t),n)}))),a.createElement("div",{className:"my-judge"},a.createElement(r.UIMarkRow,{marks:e.getCards(o.CardPos.JUDGE)})),a.createElement("div",{className:"my-equip"},a.createElement(i.default,{big:!0,cards:e.getCards(o.CardPos.EQUIP),checker:n}))),a.createElement("div",{className:"my-cards"},a.createElement(r.default,{isShown:!t,checker:l,ref:e=>this.cardRow=e,myName:e.player.id,onCardsShifted:p})))}}t.default=UIMyCards},3147:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UIMyPlayerCard=void 0,t.StageDeclarer=h,t.SkillButton=function(e){var t;let n,{isRevealed:i,isDisabled:s,isForewarned:l}=e.skill,d="",p=(null===(t=e.skillChecker)||void 0===t?void 0:t.getStatus(e.skill.id))||o.ElementStatus.NORMAL;i?(n=new a.ClassFormatter("skill-button center "+e.className).and(p.isSelectable&&!e.skill.isDisabled,"selectable","disabled").and(p===o.ElementStatus.SELECTED,"selected").done(),d=p.isSelectable?p===o.ElementStatus.SELECTED?"取消发动技能":"发动技能":""):(n=new a.ClassFormatter("skill-button center selectable "+e.className).and(p.isSelectable||e.skill.hiddenType!==u.HiddenType.NONE,"selectable","disabled").and(l||p===o.ElementStatus.SELECTED,"selected").done(),d=p.isSelectable?p===o.ElementStatus.SELECTED?"取消发动技能":"发动技能":"点击触发/取消预亮");return r.createElement(c.OverlayTrigger,{placement:"top",overlay:r.createElement(c.Tooltip,null,d)},r.createElement("div",{className:n,onClick:()=>{var t,n;if(i)(null===(t=e.skillChecker)||void 0===t?void 0:t.getStatus(e.skill.id).isSelectable)&&!s?e.skillChecker.onClicked(e.skill.id):console.log("Clicked on ",e.skill.id," but not reacting as the skill is disabled or not appropriate");else if(null===(n=e.skillChecker)||void 0===n?void 0:n.getStatus(e.skill.id).isSelectable)console.log("Skill is not revealed but we are forcing it through a given action"),e.skillChecker.onClicked(e.skill.id);else{let t=e.skill.toStatus();if(console.log(t.hiddenType),t.hiddenType===u.HiddenType.FOREWARNABLE)t.isForewarned=!t.isForewarned;else{if(t.hiddenType!==u.HiddenType.REVEAL_IN_MY_USE_CARD)return;t.isRevealed=!0}console.log("Player Changing Skill Status ",t),e.statusUpdater(t)}}},e.skill.displayName))};const r=n(6540),i=n(8552);n(1026);const a=n(1155),o=n(3014),s=n(5706),l=n(6069),d=n(4701),u=n(2166),c=n(8576),p=n(6615);class UIMyPlayerCard extends r.Component{constructor(e){super(e),this.onClick=()=>{this.props.elementStatus.isSelectable&&(console.log("selected",this.props.info.player.id),this.props.onSelect(this.props.info.player.id))},e.pubsub.on(l.DamageEffect,(t=>{t.targetPlayer===e.info.player.id&&(this.setState({damaged:!0}),setTimeout((()=>this.setState({damaged:!1})),2e3))})),e.pubsub.on(l.VoiceRequest,(e=>{p.audioManager.play(`/audio/chat/${e.speech}.mp3`)})),e.pubsub.on(l.CurrentPlayerEffect,(e=>this.setState({effect:e}))),this.state={damaged:!1,effect:new l.CurrentPlayerEffect(null,null,new Set,0)}}render(){var e;let{info:t,elementStatus:n,skillButtons:l,cb:u}=this.props,{damaged:c,effect:p}=this.state,f=null===(e=p.pendingUser)||void 0===e?void 0:e.has(t.player.id),g=new a.ClassFormatter("ui-player-card ui-my-player-card").and(n.isSelectable,"selectable").and(n===o.ElementStatus.SELECTED,"selected").and(c,"damaged").and(f,"glow-on-hover").done();return r.createElement("div",{className:g,onClick:this.onClick},t.drawSelf(l,u),r.createElement(s.Mask,{isMasked:t.isDrunk,maskClass:"drunk"}),r.createElement(s.Mask,{isMasked:t.isTurnedOver,maskClass:"turned-over"}),t.isTurnedOver&&r.createElement("div",{className:"occupy center font-big"},"翻面"),r.createElement("div",{className:"player-hp"},r.createElement(i.default,{current:t.hp,total:t.maxHp})),p.player===t.player.id&&r.createElement(h,{stage:p.stage,className:"top-right-corner"}),c&&r.createElement("div",{className:"occupy"},(0,d.getDamageSpriteSheet)()),t.isDead&&r.createElement("img",{className:"death",src:"ui/dead.png"}),t.isChained&&r.createElement("div",{className:"tie-suo"}),r.createElement(s.Mask,{isMasked:n===o.ElementStatus.DISABLED}))}}function h(e){return r.createElement("div",{key:e.stage.name,className:e.className+" player-stage",style:{background:`linear-gradient(90deg, rgba(255,255,255,0) 0%, ${e.stage.color} 25%, ${e.stage.color} 75%, rgba(255,255,255,0) 100%)`}},e.stage.name)}t.UIMyPlayerCard=UIMyPlayerCard},3047:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(6540),i=n(3014),a=n(6069),o=n(1831),s=n(8357),l=n(10),d=n(6615);class UIPlayGround extends r.Component{constructor(e){super(e),e.pubsub.on(a.DamageEffect,(e=>{this.setState((t=>(t.damageAnimation.add(e.targetPlayer),t))),setTimeout((()=>{this.setState((t=>(t.damageAnimation.delete(e.targetPlayer),t)))}),2e3)})),e.pubsub.on(a.CurrentPlayerEffect,(e=>{this.setState({currentPlayerEffect:e})})),e.pubsub.on(a.VoiceRequest,(e=>{this.setState((t=>(t.speeches.set(e.player,e.speech),t))),d.audioManager.play(`/audio/chat/${e.speech}.mp3`,!1,(()=>{this.setState((t=>(t.speeches.delete(e.player),t)))}))})),e.pubsub.on(a.SurrenderRequest,(e=>{this.setState({surrendered:e.player})})),this.state={damageAnimation:new Set,speeches:new Map,currentPlayerEffect:new a.CurrentPlayerEffect(null,null,new Set,0),surrendered:null}}render(){let{players:e,screenPosObtainer:t,showDist:n,distanceComputer:a,checker:d,cardManager:u,cardTransitManager:c}=this.props,{damageAnimation:p,currentPlayerEffect:h,speeches:f}=this.state,g=e.length,y=3;g<=2?y=1:g<=5&&(y=2);let m=(e,o)=>r.createElement(s.UIPlayerCard,{key:o,info:e,dist:n&&!e.isDead&&a(e.player.id),screenPosObtainer:t,isDamaged:p.has(e.player.id),elementStatus:e.isDead?i.ElementStatus.NORMAL:d.getStatus(e.player.id),effect:h,cardTransitManager:c,onSelect:e=>d.onClicked(e),speech:f.get(e.player.id),surrendered:e.player.id===this.state.surrendered});return r.createElement("div",{className:"occupy"},r.createElement("div",{className:"deck-info"},"牌堆卡牌数: ",h.deckRemain),r.createElement("div",{className:"top-row"},e.filter(((t,n)=>n>=y-1&&n<=e.length-y)).map(m)),y>2&&r.createElement("div",{className:"secondary-row go-up"},e.filter(((t,n)=>1===n||n===e.length-2)).map(m)),y>1&&r.createElement("div",{className:"secondary-row "+(y>2||"go-up")},e.filter(((t,n)=>0===n||n===e.length-1)).map(m)),r.createElement(l.DeckEndpoint,{cardTransitManager:c}),r.createElement(o.UIWorkflowCardRow,{cardManager:u,screenPosObtainer:t,cardTransitManager:c}))}}t.default=UIPlayGround},8357:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UIPlayerCard=void 0,t.wrapSign=y;const r=n(6540),i=n(8552),a=n(4572),o=n(5610),s=n(5706),l=n(1155),d=n(4701),u=n(1073),c=n(3147);n(5827);const p=n(3014),h=n(10),f=n(8576),g=n(5167);class UIPlayerCard extends r.Component{constructor(e){super(e),this.onClick=()=>{!this.props.info.isDead&&this.props.elementStatus.isSelectable&&(console.log("selected",this.props.info.player.id),this.props.onSelect(this.props.info.player.id))},this.doRegister=e=>{this.props.cardTransitManager.register(e,this.props.info.player.id)},this.dom=r.createRef(),e.screenPosObtainer.registerObtainer(e.info.player.id,this.dom)}render(){var e;let{info:t,dist:n,elementStatus:f,isDamaged:g,effect:m,speech:v,surrendered:C}=this.props,b=m.player===t.player.id,S=null===(e=m.pendingUser)||void 0===e?void 0:e.has(t.player.id),E=new l.ClassFormatter("ui-player-card").and(!t.isDead&&f.isSelectable,"selectable").and(f===p.ElementStatus.SELECTED,"selected").and(g,"damaged").and(b,"in-turn").and(S,"glow-on-hover").done();return r.createElement("div",{className:E,ref:this.dom,onClick:this.onClick},t.draw(),r.createElement("div",{className:"signs"},Object.keys(t.signs).map((e=>y(r.createElement("div",{key:e,className:"sign center "+t.signs[e].enabled},e),t.signs[e])))),r.createElement(s.Mask,{isMasked:t.isDrunk,maskClass:"drunk"}),r.createElement(s.Mask,{isMasked:t.isTurnedOver,maskClass:"turned-over"}),t.isTurnedOver&&r.createElement("div",{className:"occupy center"},"翻面"),n&&r.createElement("div",{className:"distance occupy"},n),t.isDead||r.createElement("div",null,r.createElement("div",{className:"hand"},t.getCards(u.CardPos.HAND).length),r.createElement("div",{className:"player-hp"},r.createElement(i.default,{current:t.hp,total:t.maxHp})),r.createElement("div",{className:"equipments"},r.createElement(o.default,{big:!1,cards:t.getCards(u.CardPos.EQUIP)})),r.createElement("div",{className:"judge"},r.createElement(a.UIMarkRow,{marks:t.getCards(u.CardPos.JUDGE)}))),b&&r.createElement(c.StageDeclarer,{stage:m.stage,className:"left-btm-corner"}),g&&r.createElement("div",{className:"occupy"},(0,d.getDamageSpriteSheet)()),t.isDead&&r.createElement("img",{className:"death",src:"ui/dead.png"}),t.isChained&&r.createElement("div",{className:"tie-suo"}),r.createElement(s.Mask,{isMasked:f===p.ElementStatus.DISABLED}),r.createElement("div",{className:"seat-number"},(0,s.toChinese)(t.idx)),r.createElement(h.DefaultCardEndpoint,{info:t,callback:()=>this.forceUpdate(),ref:this.doRegister}),C&&r.createElement("img",{src:"animations/surrender.gif",alt:"投降!",className:"chat"}),v&&r.createElement("div",{className:"chat"},v))}}function y(e,t){let n=g.describer.get(t.displayName);n||"limit-skill"!==t.type||(n="限定技, "+(t.enabled?"未发动":"已发动"));return r.createElement(f.OverlayTrigger,{placement:"auto",overlay:e=>r.createElement(f.Tooltip,Object.assign({},e),r.createElement("p",null,"【"+t.displayName+"】 "+n)),delay:{show:0,hide:0},key:t.displayName},e)}t.UIPlayerCard=UIPlayerCard},2351:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const[t,n]=r.useState(!1);return r.createElement(r.Fragment,null,r.createElement("i",{className:"fa fa-book icon",onClick:()=>n(!0)}),r.createElement(i.Modal,{show:t,onHide:()=>n(!1)},r.createElement(i.Modal.Header,{closeButton:!0},r.createElement(i.Modal.Title,null,e.ruleName)),r.createElement(i.Modal.Body,null,e.rules)))};const r=n(6540),i=n(8576);n(6548)},1831:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UIWorkflowCardRow=t.CENTER=void 0;const r=n(5538),i=n(3014),a=n(6540),o=n(6069),s=n(9091),l=n(1155);t.CENTER="center";class UIWorkflowCardRow extends a.Component{constructor(e){super(e),this.dom=a.createRef(),this.state={cards:new s.default,width:800,height:600},e.screenPosObtainer.registerObtainer(t.CENTER,this.dom),e.cardTransitManager.register(this,o.CardTransit.WORKFLOW)}performAddAnimation(e,t){let n=this.dom.current.getBoundingClientRect(),r=e.map((e=>(e.coor&&(e.coor.x-=n.left,e.coor.y-=n.top),Object.assign(Object.assign({},e),{rendered:!1,goner:!1,effect:t.specialEffect}))));this.setState((e=>{if(t.head){e.cards.forEach((e=>e.goner=!0));let t=new Set(e.cards._data.map((e=>e.uuid)));setTimeout((()=>{this.remove(t)}),3500)}return r.forEach(e.cards.add),e})),setTimeout((()=>{r.forEach((e=>e.rendered=!0)),this.forceUpdate()}),20)}remove(e){this.setState((t=>(t.cards.removeAllThat((t=>e.has(t.uuid))),t)))}performRemovalAnimation(e,t){let n=this.dom.current.getBoundingClientRect();return e.map((e=>{let t=this.state.cards.find((t=>t.card.id===e.id));return{card:e,coor:{x:t.coor.x+n.left,y:t.coor.y+n.top}}}))}componentDidMount(){this.setSize()}componentDidUpdate(e,t){t.cards!==this.state.cards&&this.setSize()}setSize(){let e={width:this.dom.current.getBoundingClientRect().width-120-540,height:this.dom.current.getBoundingClientRect().height-40-154};this.setState(e)}render(){let{width:e,height:t,cards:n}=this.state,o=Math.min(120,e/Math.max(1,n.size()-1)),s=270+(e-o*(n.size()-1))/2;return a.createElement("div",{className:"occupy workflow-row",ref:this.dom},n.map(((e,n)=>{let d;d=e.rendered||!e.coor?{left:s+o*n+"px",top:t+"px"}:{left:e.coor.x+"px",top:e.coor.y+"px",transitionDuration:e.animDuration+"ms"};let u=new l.ClassFormatter("ui-card-wrapper").and(e.goner,"goner").done();return a.createElement("div",{key:e.uuid,className:u,style:d},a.createElement(r.default,{className:e.effect,card:e.card,isShown:!0,elementStatus:i.ElementStatus.NORMAL}))})))}}t.UIWorkflowCardRow=UIWorkflowCardRow},2886:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GameContext=void 0;const r=n(3402),i=n(1073),a=n(4619),o=n(1449);class Cursor{constructor(e,t){if(this.infos=e,this.idx=e.findIndex((e=>e.player.id===t)),this.idx<0)throw"Unable to find this player "+t+" among "+e.map((e=>e.player.id))}get(){return this.infos[this.idx]}up(){do{this.idx--,this.idx<0&&(this.idx=this.infos.length-1)}while(this.get().isDead);return this}down(){do{this.idx++,this.idx>=this.infos.length&&(this.idx=0)}while(this.get().isDead);return this}}class GameContext{constructor(e,t){this.playerInfos=e,this.gameMode=t,this.interpreters=new o.Multimap,this.getPlayer=e=>{let t=this.playerInfos.find((t=>t.player.id===e));if(!t)throw`Player Not Found!! ${e}. Available: ${this.playerInfos.map((e=>e.player.id))}`;return t}}interpretCard(e,t){return this.interpreters.get(e).forEach((e=>t=e(t))),t}registerInterpreter(e,t){this.interpreters.set(e,t)}findingNearestNeighbors(e){let t=1/0,n=[];return this.playerInfos.forEach((r=>{if(r.player.id===e||r.isDead)return;let i=this.computeDistance(e,r.player.id);i<t?(t=i,n=[r]):i===t&&n.push(r)})),n}computeDistance(e,t){if(e===t)return 0;let n=this.playerInfos.filter((e=>!e.isDead)),r=n.findIndex((t=>t.player.id===e)),a=n.findIndex((e=>e.player.id===t));if(-1===r||-1===a)throw`Can't find these two people, they are dead or don't exist! ${this.playerInfos}, ${e}, ${t}`;let o=n[r],s=n[a],l=o.distanceModTargetingOthers+s.distanceModTargetingMe;return o.findCardAt(i.CardPos.EQUIP,"horse-1")&&(l-=1),s.findCardAt(i.CardPos.EQUIP,"horse+1")&&(l+=1),r<=a?Math.max(1,Math.min(a-r,n.length-a+r)+l):Math.max(1,Math.min(r-a,n.length-r+a)+l)}getRingFromPerspective(e,t=!1,n=!1){let r=this.playerInfos.findIndex((t=>t.player.id===e));return[...this.playerInfos.slice(t?r:r+1),...this.playerInfos.slice(0,r)].filter((e=>n||!e.isDead))}cursor(e){return new Cursor(this.playerInfos,e)}sortFromPerspective(e,t){return this.getRingFromPerspective(e,!0).filter((e=>t.indexOf(e.player.id)>=0))}sanitize(e){return new GameContext(this.playerInfos.map((t=>{let n=r.PlayerInfo.sanitize(t,e);if(e===t.player.id)n.cards=t.cards;else{let e=new Map;t.cards.forEach(((t,n,r)=>e.set(n,t.map(((e,t)=>(0,i.isCardPosHidden)(n)?a.Card.DUMMY:e))))),n.cards=e}return n})),this.gameMode)}}t.GameContext=GameContext},9222:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GameMode=void 0;const r=n(4619),i=n(1657),a=n(7207),o=n(1189),s=n(3632),l=n(3409),d=n(2632),u=n(5167),c=n(6540),p=n(1764);class GameMode{static get(e){let t=this.rules.get(e);if(!t)throw`Cannot find game mode! ${e}`;return t}constructor(e,t,n,r,i,a,o,s){this.id=e,this.name=t,this.cardManager=n,this.resolver=r,this.gameHosterProvider=i,this.skillProvider=a,this.initClient=o,this.manual=s,GameMode.rules.set(e,this)}}t.GameMode=GameMode,GameMode.rules=new Map,new GameMode(l.GameModeEnum.IdentityWarGame,"身份局",i.IdentityWarCards,null,null,null,null,null),new GameMode(l.GameModeEnum.FactionWarGame,"国战",a.FactionWarCards,new o.default,((e,t)=>new s.default(e,t)),((e,t)=>d.FactionSkillProviders.get(e,t)),(()=>{u.describer.register(r.CardType.TENG_JIA.id,"锁定技，【南蛮入侵】、【万箭齐发】和普通【杀】对你无效。当你受到火焰伤害时，此伤害+1。"),u.describer.register(r.CardType.SILVER_LION.id,"锁定技，当你受到伤害时，若此伤害多于1点，则防止多余的伤害；当你失去装备区里的【白银狮子】时，你回复1点体力。"),u.describer.register(r.CardType.REN_WANG.id,"锁定技，黑色的【杀】对你无效。"),u.describer.register(r.CardType.BA_GUA.id,"每当你需要使用或打出一张【闪】时，你可以进行一次判定：若判定结果为红色，则视为你使用或打出了一张【闪】。"),u.describer.register(r.CardType.QI_LIN.id,"当你使用【杀】对目标角色造成伤害时，你可以弃置其装备区里的一张坐骑牌。"),u.describer.register(r.CardType.ZHU_QUE.id,"你可以将一张普通【杀】当具火焰伤害的【杀】使用。"),u.describer.register(r.CardType.ZHANG_BA.id,"你可以将两张手牌当【杀】使用或打出。"),u.describer.register(r.CardType.GUAN_SHI.id,"当你使用的【杀】被抵消时，你可以弃置两张牌，则此【杀】依然造成伤害。"),u.describer.register(r.CardType.SAN_JIAN.id,"你使用【杀】对目标角色造成伤害后，可弃置一张手牌并对该角色距离1的另一名角色造成1点伤害。"),u.describer.register(r.CardType.WU_LIU.id,"锁定技，与你势力相同的其他角色攻击范围+1。"),u.describer.register(r.CardType.HAN_BING.id,"当你使用【杀】对目标角色造成伤害时，若该角色有牌，你可以防止此伤害，改为依次弃置其两张牌。"),u.describer.register(r.CardType.CI_XIONG.id,"当你使用【杀】指定一名异性角色为目标后，你可以令其选择一项：弃一张手牌；或令你摸一张牌。"),u.describer.register(r.CardType.QING_GANG.id,"锁定技，当你使用【杀】指定一名角色为目标后，无视其防具。"),u.describer.register(r.CardType.LIAN_NU.id,"出牌阶段，你可以使用任意数量的【杀】。"),u.describer.register(r.CardType.BING_LIANG.id,"出牌阶段，对距离为1的一名其他角色使用。将【兵粮寸断】放置于该角色的判定区里，若判定结果不为梅花，跳过其摸牌阶段。"),u.describer.register(r.CardType.LE_BU.id,"出牌阶段，对一名其他角色使用。将【乐不思蜀】放置于该角色的判定区里，若判定结果不为红桃，则跳过其出牌阶段。"),u.describer.register(r.CardType.SHAN_DIAN.id,"出牌阶段，对自己使用。将【闪电】放置于自己的判定区里。若判定结果为黑桃2~9，则目标角色受到3点雷电伤害。若判定不为此结果，将之移动到下家的判定区里。"),u.describer.register(r.CardType.WU_GU.id,"出牌阶段，对所有角色使用。你从牌堆亮出等同于现存角色数量的牌，每名目标角色选择并获得其中的一张。"),u.describer.register(r.CardType.TAO_YUAN.id,"出牌阶段，对所有角色使用。每名目标角色回复1点体力。"),u.describer.register(r.CardType.NAN_MAN.id,"出牌阶段，对所有其他角色使用。每名目标角色需打出一张【杀】，否则受到1点伤害。"),u.describer.register(r.CardType.WAN_JIAN.id,"出牌阶段，对所有其他角色使用。每名目标角色需打出一张【闪】，否则受到1点伤害。"),u.describer.register(r.CardType.YUAN_JIAO.id,"出牌阶段，对有明置武将牌且与你势力不同的一名角色使用。该角色摸一张牌，然后你摸三张牌。"),u.describer.register(r.CardType.ZHI_JI.id,"出牌阶段，对一名其他角色使用。观看其一张暗置的武将牌或其手牌。重铸，出牌阶段，你可以将此牌置入弃牌堆，然后摸一张牌。"),u.describer.register(r.CardType.YI_YI.id,"出牌阶段，对你和与你势力相同的角色使用。每名目标角色各摸两张牌，然后弃置两张牌。"),u.describer.register(r.CardType.HUO_GONG.id,"该角色展示一张手牌，然后若你弃置一张与所展示牌相同花色的手牌，则【火攻】对其造成1点火焰伤害。"),u.describer.register(r.CardType.TIE_SUO.id,"连环: 出牌阶段使用，分别横置或重置其武将牌（被横置武将牌的角色处于“连环状态 ·即使第一名受伤害的角色死亡，也会令其它处于连环状态的角色受到该属性伤害。 ·经由连环传导的伤害不能再次被传导。重铸: 出牌阶段，你可以将此牌置入弃牌堆，然后摸一张牌。"),u.describer.register(r.CardType.WU_XIE.id,"抵消目标锦囊对一名角色产生的效果；或抵消另一张无懈可击产生的效果。"),u.describer.register(r.CardType.JIE_DAO.id,"出牌阶段，对装备区里有武器牌的一名其他角色使用。该角色需对其攻击范围内，由你指定的另一名角色使用一张【杀】，否则将装备区里的武器牌交给你。"),u.describer.register(r.CardType.SHUN_SHOU.id,"出牌阶段，对距离为1且区域内有牌的一名其他角色使用。你获得其区域内的一张牌。"),u.describer.register(r.CardType.GUO_HE.id,"出牌阶段，对一名区域内有牌的其他角色使用。你将其区域内的一张牌弃置。"),u.describer.register(r.CardType.WU_ZHONG.id,"出牌阶段，对自己使用。摸两张牌。"),u.describer.register(r.CardType.JUE_DOU.id,"出牌阶段，对一名其他角色使用。由该角色开始，你与其轮流打出一张【杀】，首先不出【杀】的一方受到另一方造成的1点伤害。"),u.describer.register(r.CardType.WU_XIE_GUO.id,"抵消目标锦囊牌对一名角色或一种势力产生的效果，或抵消另一张【无懈可击】产生的效果。")}),(()=>c.createElement(p.default,null)))},3409:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.GameModeEnum=void 0,function(e){e[e.IdentityWarGame=0]="IdentityWarGame",e[e.FactionWarGame=1]="FactionWarGame"}(n||(t.GameModeEnum=n={}))},1633:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.General=t.Faction=void 0,t.factionDiffers=function(e,t){if(e.name===Faction.UNKNOWN.name||t.name===Faction.UNKNOWN.name)return!0;if(e.name===Faction.YE.name||t.name===Faction.YE.name)return!0;return e.name!==t.name},t.factionsSame=function(e,t){if(e.name===Faction.YE.name||e.name===Faction.UNKNOWN.name||t.name===Faction.YE.name||t.name===Faction.UNKNOWN.name)return!1;return e.name===t.name},t.toGeneralCardStyle=function(e){return{backgroundImage:`url('generals/${e}.png')`,backgroundSize:"cover",backgroundPosition:"center",width:"100%",height:"100%"}};class Faction{constructor(e,t){this.name=e,this.image=t}}t.Faction=Faction,Faction.WEI=new Faction("魏","wei"),Faction.SHU=new Faction("蜀","shu"),Faction.WU=new Faction("吴","wu"),Faction.QUN=new Faction("群","qun"),Faction.YE=new Faction("野","ye"),Faction.UNKNOWN=new Faction("未知","unknown"),Faction.SHEN=new Faction("神","shen");t.General=class General{constructor(e,t,n,r,i){this.id=e,this.name=t,this.faction=n,this.hp=r,this.abilities=i,this.skins=5,this.gender="M",this.uiOffset={top:"-10%",left:"-0%"}}asFemale(){return this.gender="F",this}withOffset(e,t){return this.uiOffset={top:e+"%",left:t+"%"},this}withSkin(e){return this.skins=e,this}}},1480:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.PlayerActionTransit=t.Button=t.UIPosition=void 0,t.isPositionForCard=function(e){return e!==n.MY_SKILL&&e!==n.PLAYER&&e!==n.BUTTONS},function(e){e[e.MY_HAND=0]="MY_HAND",e[e.MY_SKILL=1]="MY_SKILL",e[e.MY_EQUIP=2]="MY_EQUIP",e[e.MY_JUDGE=3]="MY_JUDGE",e[e.PLAYER=4]="PLAYER",e[e.ON_MY_GENERAL=5]="ON_MY_GENERAL",e[e.ON_MY_SUB_GENERAL=6]="ON_MY_SUB_GENERAL",e[e.BUTTONS=7]="BUTTONS",e[e.SIGNS=8]="SIGNS"}(n||(t.UIPosition=n={}));class Button{constructor(e,t,n=!0){this.id=e,this.display=t,this.enabled=n,this.isDirect=!0}disable(){return this.enabled=!1,this}inDirect(){return this.isDirect=!1,this}}t.Button=Button,Button.OK=new Button("ok","确定"),Button.CANCEL=new Button("cancel","取消");t.PlayerActionTransit=class PlayerActionTransit{constructor(e,t){this.hintId=e,this.action=t}}},3402:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PlayerInfo=t.Identity=void 0,t.CardMark=function(e){if(0===e.cards.length)return null;return a.createElement(s.OverlayTrigger,{placement:"auto",overlay:t=>a.createElement(s.Tooltip,Object.assign({},t),a.createElement("div",{className:"cards"},e.cards.map((e=>a.createElement("div",{className:(0,o.isSuitRed)(e.suit)?"red":"black",key:e.id},e.toString()))))),delay:{show:1e3,hide:200}},a.createElement("div",{className:"mark-button"},`${e.name} [${e.cards.length}]`))};const r=n(5706),i=n(1073),a=n(6540),o=n(4910),s=n(8576);class Identity{constructor(e,t){this.id=e,this.name=t}}t.Identity=Identity,Identity.ZHU_GONG=new Identity("zhu_gong","主公"),Identity.FAN_ZEI=new Identity("fan_zei","反贼"),Identity.ZHONG_CHEN=new Identity("zhong_chen","忠臣"),Identity.NEI_JIAN=new Identity("nei_jian","内奸"),Identity.UNKNOWN=new Identity("unknown","未知"),Identity.NULL=new Identity("null","无");t.PlayerInfo=class PlayerInfo{constructor(e){this.player=e,this.isTurnedOver=!1,this.isChained=!1,this.isDrunk=!1,this.isDead=!1,this.distanceModTargetingOthers=0,this.distanceModTargetingMe=0,this.reachModifier=0,this.cards=new Map,this.signs={}}heal(e){this.hp=Math.min(this.maxHp,this.hp+e)}damage(e){this.hp=this.hp-e}changeMax(e){this.maxHp+=e,this.hp=Math.min(this.hp,this.maxHp)}addCard(e,t){var n;if((0,i.isSharedPosition)(t))throw`Invalid Position. Player can't get cards to position ${i.CardPos[t]}`;if(t===i.CardPos.JUDGE&&!(e.as||e.type).isDelayedRuse())throw`必须加判定牌兄dei!!! ${e.id} ${null===(n=e.as)||void 0===n?void 0:n.name} ${e.type.name}`;if(t===i.CardPos.EQUIP&&!e.type.isEquipment())throw`必须加装备牌兄dei!!! ${e.id} ${e.type.name}`;let r=this.cards.get(t)||[];r.push(e),this.cards.set(t,r)}removeRandomly(e,t){let n=this.cards.get(e).splice(0,t);if(n.length!==t)throw`not enough removed! ${t} ${this.cards.get(e)} ${n}`;return n}removeFromPos(e,t){if(!(0,r.takeFromArray)(this.cards.get(t),(t=>t.id===e)))throw`Did not find such card! ${e} ${i.CardPos[t]} ${this.cards.get(t)}`}getReach(){let e=this.getCards(i.CardPos.EQUIP).find((e=>"weapon"===e.type.genre));return(e?e.type.distance:1)+this.reachModifier}getCards(e){return this.cards.get(e)||[]}hasCards(){for(let e of this.cards)if((e[0]===i.CardPos.HAND||e[0]===i.CardPos.EQUIP||e[0]===i.CardPos.JUDGE)&&e[1].length>0)return!0;return!1}hasCardAt(e){return this.getCards(e).length>0}hasOwnCards(){for(let e of this.cards)if((e[0]===i.CardPos.HAND||e[0]===i.CardPos.EQUIP)&&e[1].length>0)return!0;return!1}hasJudgeCard(e){return!!this.getCards(i.CardPos.JUDGE).find((t=>(t.as||t.type).name===e.name))}findCardAt(e,t){var n;return null===(n=this.cards.get(e))||void 0===n?void 0:n.find((e=>e.type.genre===t))}isDying(){return this.hp<=0}declareDeath(){this.hp=0,this.isDead=!0,this.isChained=!1,this.isTurnedOver=!1,this.isDrunk=!1}getAllCards(){let e=[];return this.cards.forEach(((t,n)=>{t.forEach((t=>e.push([t,n])))})),e}toString(){return"["+this.player.id+"]"}static sanitize(e,t){let n=e.sanitize(t);return delete n.cards,n}}},3587:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RoundStat=t.WINE_TAKEN=void 0,t.WINE_TAKEN="WINE_TAKEN";t.RoundStat=class RoundStat{constructor(){this.skipStages=new Map,this.slashCount=0,this.slashMax=1,this.slashNumber=1,this.slashReach=0,this.shunshouReach=1,this.binLiangReach=1,this.customData={}}}},739:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Rescind=t.ServerHintTransit=t.HintType=void 0,t.isDirectButton=function(e,t){var n;let i=null===(n=e.extraButtons)||void 0===n?void 0:n.find((e=>e.id===t.id));if(i)return i.isDirect?i:null;if(t.id!==r.Button.OK.id&&t.id!==r.Button.CANCEL.id&&t.isDirect)return t};const r=n(1480);var i;!function(e){e[e.PLAY_HAND=0]="PLAY_HAND",e[e.CHOOSE_CARD=1]="CHOOSE_CARD",e[e.PLAY_SLASH=2]="PLAY_SLASH",e[e.SLASH=3]="SLASH",e[e.DODGE=4]="DODGE",e[e.PEACH=5]="PEACH",e[e.WU_XIE=6]="WU_XIE",e[e.SPECIAL=7]="SPECIAL",e[e.CHOOSE_PLAYER=8]="CHOOSE_PLAYER",e[e.MULTI_CHOICE=9]="MULTI_CHOICE",e[e.UI_PANEL=10]="UI_PANEL"}(i||(t.HintType=i={}));t.ServerHintTransit=class ServerHintTransit{constructor(e,t,n){this.hintId=e,this.toPlayer=t,this.hint=n}};t.Rescind=class Rescind{}},2166:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{l(r.next(e))}catch(e){a(e)}}function s(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.GeneralSkillStatusUpdate=t.SimpleConditionalSkill=t.SimpleTrigger=t.Skill=t.SkillStatus=t.HiddenType=void 0,t.invocable=function(e,t,n){let r=e.getSkill();if(r.isDisabled)return!1;if((r.isRevealed||r.isForewarned)&&e.conditionFulfilled(t,n))return!0;return!1};const i=n(6069),a=n(9577);var o;!function(e){e[e.FOREWARNABLE=0]="FOREWARNABLE",e[e.REVEAL_IN_MY_USE_CARD=1]="REVEAL_IN_MY_USE_CARD",e[e.NONE=2]="NONE"}(o||(t.HiddenType=o={}));class SkillStatus{constructor(e){this.playerId=e,this.position="sub",this.isDisabled=!1,this.isRevealed=!1,this.isForewarned=!1,this.hiddenType=o.FOREWARNABLE}}t.SkillStatus=SkillStatus;class Skill extends SkillStatus{constructor(){super(...arguments),this.hiddenType=o.FOREWARNABLE,this.isLocked=!1,this.disabledForMain=!1,this.disabledForSub=!1,this.description="暂无 (Please override this field)",this.hint="暂无提示 (Please override this field)",this.counter="暂无弱点 (Please override this field)"}toStatus(){let e=new SkillStatus(this.playerId);return e.isRevealed=this.isRevealed,e.isDisabled=this.isDisabled,e.isForewarned=this.isForewarned,e.id=this.id,e.displayName=this.displayName,e.hiddenType=this.hiddenType,e.position=this.position,e.isGone=this.isGone,e}bootstrapClient(e,t){}bootstrapServer(e,t,n){}onStatusUpdated(e,t){return r(this,void 0,void 0,(function*(){}))}onRemoval(e){}onPlayerAction(e,t,n){return r(this,void 0,void 0,(function*(){throw"Forgot to override me?"}))}isInactive(){return this.isDisabled||!this.isRevealed||this.isGone}playSound(e,t){let n=Math.ceil(Math.random()*t);0===n&&(n=1),e.broadcast(new i.PlaySound(`audio/skill/${this.id}${n}.mp3`))}invokeEffects(e,t=[],n=`${this.playerId} 发动了 ${this.displayName}`){this.playSound(e,2),e.broadcast(new i.TextFlashEffect(this.playerId,t,this.id)),n?e.log(n):0===t.length?e.log(`${this.playerId} 发动了 ${this.displayName}`):e.log(`${this.playerId} 对 ${t} 发动了 ${this.displayName}`)}revealMySelfIfNeeded(e){return r(this,void 0,void 0,(function*(){this.isRevealed||(console.log(`[${this.id}] 明置 ${this.playerId}`),yield e.events.publish(new a.RevealGeneralEvent(this.playerId,"main"===this.position,"sub"===this.position)))}))}}t.Skill=Skill;t.SimpleTrigger=class SimpleTrigger{constructor(e,t){this.skill=e,this.needRepeatedCheck=!0,this.player=t.context.getPlayer(e.playerId)}getSkill(){return this.skill}invokeMsg(e,t){return"发动"+this.getSkill().displayName}getSkillTriggerer(e,t){return this.player.player.id}};t.SimpleConditionalSkill=class SimpleConditionalSkill extends Skill{constructor(){super(...arguments),this.needRepeatedCheck=!0}getSkill(){return this}invocable(e,t){return!this.isDisabled&&!(!this.isRevealed&&!this.isForewarned||!this.conditionFulfilled(e,t))}invokeMsg(e,t){return"发动"+this.displayName}conditionFulfilled(e,t){return!1}doInvoke(e,t){return r(this,void 0,void 0,(function*(){}))}getSkillTriggerer(e,t){return this.playerId}};t.GeneralSkillStatusUpdate=class GeneralSkillStatusUpdate{constructor(e,t,n,r,i=!1){this.reason=e,this.target=t,this.position=n,this.enable=r,this.includeLocked=i}}},5935:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.USEFUL_STAGES=t.Stage=void 0;class Stage{constructor(e,t){this.name=e,this.color=t}}t.Stage=Stage,Stage.ROUND_BEGIN=new Stage("回合开始","rgba(128,128,128,0.5)"),Stage.JUDGE=new Stage("判定阶段","rgba(255,0,0,0.5)"),Stage.TAKE_CARD=new Stage("摸牌阶段","rgba(0,255,0,0.5)"),Stage.USE_CARD=new Stage("出牌阶段","rgba(0,255,0,0.5)"),Stage.DROP_CARD=new Stage("弃牌阶段","rgba(255,0,0,0.5)"),Stage.ROUND_END=new Stage("回合结束","rgba(128,128,128,0.5)"),t.USEFUL_STAGES=[Stage.JUDGE,Stage.TAKE_CARD,Stage.USE_CARD,Stage.DROP_CARD]},4619:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CardManager=t.Card=t.CardType=t.CardSize=void 0,t.cardSorter=function(e,t){return i(e)-i(t)},t.cleanDescription=function(...e){e.forEach((e=>delete e.description))};const r=n(5706);class CardSize{constructor(e,t){this.symbol=e,this.size=t}}t.CardSize=CardSize,CardSize.MAX=13,CardSize.MIN=1,CardSize.ACE=new CardSize("A",1),CardSize.TWO=new CardSize("2",2),CardSize.THREE=new CardSize("3",3),CardSize.FOUR=new CardSize("4",4),CardSize.FIVE=new CardSize("5",5),CardSize.SIX=new CardSize("6",6),CardSize.SEVEN=new CardSize("7",7),CardSize.EIGHT=new CardSize("8",8),CardSize.NINE=new CardSize("9",9),CardSize.TEN=new CardSize("10",10),CardSize.JACK=new CardSize("J",11),CardSize.QUEEN=new CardSize("Q",12),CardSize.KING=new CardSize("K",13);class CardType{withDistance(e){return this.distance=e,this}withPackage(e){return this.package=e,this}constructor(e,t,n){this.id=e,this.name=t,this.genre=n,this.distance=-1,this.package="普通"}isEquipment(){return"horse+1"===this.genre||"horse-1"===this.genre||"weapon"===this.genre||"shield"===this.genre}isRuse(){return"single-delay-ruse"===this.genre||"single-immediate-ruse"===this.genre||"group-ruse"===this.genre}isWuxie(){return this.id===CardType.WU_XIE.id||this.id===CardType.WU_XIE_GUO.id}isHorse(){return"horse+1"===this.genre||"horse-1"===this.genre}isNonDelayedRuse(){return"single-immediate-ruse"===this.genre||"group-ruse"===this.genre}isDelayedRuse(){return"single-delay-ruse"===this.genre}isSlash(){return this===CardType.SLASH||this===CardType.SLASH_FIRE||this===CardType.SLASH_THUNDER}isBasic(){return"basic"===this.genre}toString(){return this.name}getSuperGenre(){return this.isBasic()?"basic":this.isEquipment()?"equipment":"ruse"}}function i(e){let t=0;switch(e.type.isRuse()&&(t+=200),e.type.isEquipment()&&(t+=100),t+=4*e.size.size,e.suit){case"heart":t+=0;case"spade":t+=1;case"diamond":t+=2;case"club":t+=3}return t}t.CardType=CardType,CardType.BACK=new CardType("back","背面","none"),CardType.SLASH=new CardType("slash","杀","basic"),CardType.SLASH_FIRE=new CardType("slash_fire","火杀","basic"),CardType.SLASH_THUNDER=new CardType("slash_thunder","雷杀","basic"),CardType.DODGE=new CardType("dodge","闪","basic"),CardType.PEACH=new CardType("peach","桃","basic"),CardType.WINE=new CardType("wine","酒","basic"),CardType.TENG_JIA=new CardType("teng_jia","藤甲","shield"),CardType.BA_GUA=new CardType("ba_gua","八卦阵","shield"),CardType.SILVER_LION=new CardType("silver_lion","白银狮子","shield"),CardType.REN_WANG=new CardType("ren_wang","仁王盾","shield"),CardType.ZHANG_BA=new CardType("zhang_ba","丈八蛇矛","weapon").withDistance(3),CardType.QING_LONG=new CardType("qing_long","青龙偃月刀","weapon").withDistance(3),CardType.QING_GANG=new CardType("qing_gang","青釭剑","weapon").withDistance(2),CardType.CI_XIONG=new CardType("ci_xiong","雌雄双股剑","weapon").withDistance(2),CardType.GU_DING=new CardType("gu_ding","古锭刀","weapon").withDistance(2),CardType.ZHU_QUE=new CardType("zhu_que","朱雀羽扇","weapon").withDistance(4),CardType.GUAN_SHI=new CardType("guan_shi","贯石斧","weapon").withDistance(3),CardType.LIAN_NU=new CardType("lian_nu","诸葛连弩","weapon").withDistance(1),CardType.FANG_TIAN=new CardType("fang_tian","方天画戟","weapon").withDistance(4),CardType.HAN_BING=new CardType("han_bing","寒冰剑","weapon").withDistance(2),CardType.QI_LIN=new CardType("qi_lin","麒麟弓","weapon").withDistance(5),CardType.DA_YUAN=new CardType("da_yuan","大宛","horse-1"),CardType.ZHUA_HUANG=new CardType("zhua_huang","爪黄飞电","horse+1"),CardType.DI_LU=new CardType("di_lu","的卢","horse+1"),CardType.ZI_XING=new CardType("zi_xing","紫骍","horse-1"),CardType.JUE_YING=new CardType("jue_ying","绝影","horse+1"),CardType.CHI_TU=new CardType("chi_tu","赤兔","horse-1"),CardType.HUA_LIU=new CardType("hua_liu","骅骝","horse+1"),CardType.JIE_DAO=new CardType("jie_dao","借刀杀人","single-immediate-ruse"),CardType.GUO_HE=new CardType("guo_he","过河拆桥","single-immediate-ruse"),CardType.SHUN_SHOU=new CardType("shun_shou","顺手牵羊","single-immediate-ruse").withDistance(1),CardType.WU_XIE=new CardType("wu_xie","无懈可击","single-immediate-ruse"),CardType.WU_ZHONG=new CardType("wu_zhong","无中生有","single-immediate-ruse"),CardType.JUE_DOU=new CardType("jue_dou","决斗","single-immediate-ruse"),CardType.HUO_GONG=new CardType("huo_gong","火攻","single-immediate-ruse"),CardType.TIE_SUO=new CardType("tie_suo","铁索连环","single-immediate-ruse"),CardType.TAO_YUAN=new CardType("tao_yuan","桃园结义","group-ruse"),CardType.WAN_JIAN=new CardType("wan_jian","万箭齐发","group-ruse"),CardType.NAN_MAN=new CardType("nan_man","南蛮入侵","group-ruse"),CardType.WU_GU=new CardType("wu_gu","五谷丰登","group-ruse"),CardType.LE_BU=new CardType("le_bu","乐不思蜀","single-delay-ruse"),CardType.BING_LIANG=new CardType("bing_liang","兵粮寸断","single-delay-ruse").withDistance(1),CardType.SHAN_DIAN=new CardType("shan_dian","闪电","single-delay-ruse"),CardType.YI_YI=new CardType("yi_yi","以逸待劳","group-ruse").withPackage("国战"),CardType.ZHI_JI=new CardType("zhi_ji","知己知彼","single-immediate-ruse").withPackage("国战"),CardType.YUAN_JIAO=new CardType("yuan_jiao","远交近攻","single-immediate-ruse").withPackage("国战"),CardType.WU_LIU=new CardType("wu_liu","吴六剑","weapon").withDistance(2).withPackage("国战"),CardType.SAN_JIAN=new CardType("san_jian","三尖两刃刀","weapon").withDistance(3).withPackage("国战"),CardType.WU_XIE_GUO=new CardType("wu_xie_guo","无懈可击·国","single-immediate-ruse").withPackage("国战");class Card{constructor(e,t,n){this.suit=e,this.size=t,this.type=n,this.id=[e,null==t?void 0:t.symbol,null==n?void 0:n.name].join("_")}isOneOf(...e){for(let t of e)if(this.type===t)return!0;return!1}isDummy(){return this.id===Card.DUMMY.id}toString(){var e,t;return`[${r.Suits[this.suit]} ${null===(e=this.size)||void 0===e?void 0:e.symbol} ${null===(t=this.type)||void 0===t?void 0:t.name}]`}}t.Card=Card,Card.DUMMY=new Card("none",null,CardType.BACK),Card.counter=0;t.CardManager=class CardManager{constructor(e){this.deck=e,this.cards=new Map,this.getCard=e=>this.cards.get(e),this.cleanCard=e=>{let t=this.getCard(e.id);return t.as=e.as,t.description=e.description,t},this.getShuffledDeck=()=>(0,r.shuffle)([...this.deck]),e.forEach((e=>{let t=0;for(;this.cards.has(e.id);)e.id+=t++;this.cards.set(e.id,e)})),this.cards.set(Card.DUMMY.id,Card.DUMMY)}}},4910:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CardDummy=void 0,t.mimicCard=function(e){return new CardDummy(e.suit,e.size,e.type,e.as)},t.deriveColor=function(e){if(0===e.length)return"n.a.";if((0,r.all)(e,(e=>i(e))))return"red";if((0,r.all)(e,(e=>a(e))))return"black";return"n.a."},t.isSuitRed=i,t.isSuitBlack=a;const r=n(5706);class CardDummy{constructor(e,t,n,r){this.suit=e,this.size=t,this.type=n,this.as=r}}function i(e){return"heart"===e||"diamond"===e}function a(e){return"club"===e||"spade"===e}t.CardDummy=CardDummy},1073:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.CardRearrangeRequest=t.CardMovementEvent=t.BTM=t.TOP=t.CardPosChangeEvent=t.CardPos=void 0,t.isSharedPosition=function(e){return e<n.HAND},t.isCardPosHidden=function(e){return null!=e&&(e===n.DECK_TOP||e===n.DECK_BTM||e===n.HAND)},function(e){e[e.DECK_TOP=0]="DECK_TOP",e[e.DECK_BTM=1]="DECK_BTM",e[e.DROPPED=2]="DROPPED",e[e.WORKFLOW=3]="WORKFLOW",e[e.HAND=4]="HAND",e[e.EQUIP=5]="EQUIP",e[e.JUDGE=6]="JUDGE",e[e.ON_GENERAL=7]="ON_GENERAL",e[e.ON_SUB_GENERAL=8]="ON_SUB_GENERAL"}(n||(t.CardPos=n={}));t.CardPosChangeEvent=class CardPosChangeEvent{constructor(e,t,n,r){this.pos=e,this.player=t,this.from=n,this.to=r}},t.TOP="top",t.BTM="btm";t.CardMovementEvent=class CardMovementEvent{constructor(e,t,n,r,i){this.item=e,this.fromPos=t,this.toPos=n,this.from=r,this.to=i}applyToTopBtm(e,n){let r=(this.fromPos===t.TOP?e:n).splice(this.from,1);(this.toPos===t.TOP?e:n).splice(this.to,0,r[0])}};t.CardRearrangeRequest=class CardRearrangeRequest{constructor(e){this.requester=e}}},6069:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LogTransit=t.CardTransit=t.SurrenderRequest=t.VoiceRequest=t.SkinRequest=t.CurrentPlayerEffect=t.DamageEffect=t.TextFlashEffect=t.PlaySound=void 0;const r=n(4619),i=n(1073);t.PlaySound=class PlaySound{constructor(e){this.path=e}};t.TextFlashEffect=class TextFlashEffect{constructor(e,t,n,r=null){this.sourcePlayer=e,this.targetPlayers=t,this.sourceText=n,this.secondary=r}};t.DamageEffect=class DamageEffect{constructor(e){this.targetPlayer=e}};t.CurrentPlayerEffect=class CurrentPlayerEffect{constructor(e,t,n,r){this.player=e,this.stage=t,this.pendingUser=n,this.deckRemain=r}};t.SkinRequest=class SkinRequest{constructor(e,t){this.player=e,this.isMain=t}};t.VoiceRequest=class VoiceRequest{constructor(e,t){this.player=e,this.speech=t}};t.SurrenderRequest=class SurrenderRequest{constructor(e){this.player=e}};class CardTransit{static toWorkflow(e,t,n,r,i){return new CardTransit(e,t,CardTransit.WORKFLOW,null,n,600,r,i)}static fromWorkflow(e,t,n){return new CardTransit(CardTransit.WORKFLOW,i.CardPos.WORKFLOW,e,t,n,600)}static fromDeck(e,t){return new CardTransit(CardTransit.DECK,i.CardPos.DECK_TOP,e,i.CardPos.HAND,t,1200)}static deckToWorkflow(e){return new CardTransit(CardTransit.DECK,i.CardPos.DECK_TOP,CardTransit.WORKFLOW,i.CardPos.WORKFLOW,e,700)}static defaultSanitize(e,t){return t!==e.from&&t!==e.to&&(0,i.isCardPosHidden)(e.fromPos)&&(0,i.isCardPosHidden)(e.toPos)?new CardTransit(e.from,e.fromPos,e.to,e.toPos,e.cards.map((e=>r.Card.DUMMY)),e.animDurationSeconds):e}constructor(e,t,n,r,i,a,o=!1,s=!1){this.from=e,this.fromPos=t,this.to=n,this.toPos=r,this.cards=i,this.animDurationSeconds=a,this.head=o,this.doNotRemove=s}}t.CardTransit=CardTransit,CardTransit.WORKFLOW="workflow",CardTransit.DECK="deck";t.LogTransit=class LogTransit{constructor(e){this.log=e}}},9091:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class ArrayList{constructor(){this._data=[],this.add=e=>{this._data.push(e)}}addToFront(...e){this._data=[...e,...this._data]}removeThat(e){let t=this._data.findIndex(e);return!(t<0)&&(this._data.splice(t,1),!0)}removeAllThat(e){let t=-1,n=[];do{t=this._data.findIndex(e),t>-1&&n.push(...this._data.splice(t,1))}while(t>-1);return n}find(e){return this._data.find(e)}filter(e){return this._data.filter(e)}forEach(e){this._data.forEach(e)}map(e){return this._data.map(e)}remove(e){return this.removeThat((t=>t===e))}get(e){return this._data[e]}size(){return this._data.length}clear(){this._data=[]}}},8158:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AsyncBlockingQueue=void 0;t.AsyncBlockingQueue=class AsyncBlockingQueue{constructor(){this._resolvers=[],this._promises=[]}_add(){this._promises.push(new Promise((e=>{this._resolvers.push(e)})))}enqueue(e){this._resolvers.length||this._add();this._resolvers.shift()(e)}dequeue(){this._promises.length||this._add();return this._promises.shift()}isEmpty(){return!this._promises.length}isBlocked(){return!!this._resolvers.length}get length(){return this._promises.length-this._resolvers.length}}},5167:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.describer=void 0;t.describer=new class Describer{constructor(){this._map=new Map}get(e){return this._map.get(e)}register(e,t){this._map.has(e)?console.warn(`Already has key ${e}`):this._map.set(e,t)}}},1449:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Pairs=t.Multimap=void 0,t.toArray=i;const r=n(5706);class Multimap{constructor(){this._map=new Map}removeAll(e){return this._map.delete(e)}remove(e,t){return this.get(e).delete(t)}containsKey(e){return this.get(e).size>0}contains(e,t){return this.get(e).has(t)}forEach(e){this._map.forEach(e)}set(e,t){let n=this._map.get(e)||new Set;n.add(t),this._map.set(e,n)}get(e){return this._map.get(e)||new Set}getArr(e){return i(this.get(e))}keys(){return(0,r.flattenMap)(this._map).map((e=>e[0]))}}t.Multimap=Multimap;function i(e){let t=[];return e.forEach((e=>t.push(e))),t}t.Pairs=class Pairs{constructor(){this.sortedMultimap=new Multimap}isPaired(e,t){return e<t?this.sortedMultimap.contains(e,t):this.sortedMultimap.contains(t,e)}registerPair(e,t){e<t?this.sortedMultimap.set(e,t):this.sortedMultimap.set(t,e)}}},787:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{l(r.next(e))}catch(e){a(e)}}function s(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.SequenceAwarePubSub=t.CompositeListener=void 0;const i=n(9091),a=n(5706);t.default=class Pubsub{constructor(){this._map=new Map}on(e,t){let n=this._map.get(e)||[];n.push(t),this._map.set(e,n)}off(e,t){let n=this._map.get(e);(0,a.takeFromArray)(n,(e=>e===t))}publish(e){let t=this._map.get(e.constructor);t?t.forEach((t=>t(e))):console.error(`No one is listening to this message! ${e.constructor.name}`)}};t.CompositeListener=class CompositeListener{constructor(e){this.delegates=e}publish(e){return r(this,void 0,void 0,(function*(){let t=0;for(let n of this.delegates)t+=(yield n.publish(e));return t}))}};t.SequenceAwarePubSub=class SequenceAwarePubSub{constructor(e){this.sorter=e,this._map=new Map,this._generalListeners=new Map}onGeneral(e,t){let n=this._generalListeners.get(e)||new i.default;n.add(t),this._generalListeners.set(e,n)}offGeneral(e,t){if(!this._generalListeners.get(e).remove(t))throw`Did not find such consumer!! ${e} ${t.name}`}on(e,t,n){let r=this._map.get(e)||new Map,a=r.get(t)||new i.default;a.add(n),r.set(t,a),this._map.set(e,r)}off(e,t,n){try{if(!this._map.get(e).get(t).remove(n))throw`Did not find such consumer!! ${e.name} ${t}`}catch(n){console.error("Failed to find ",e.name,t,n)}}publish(e){return r(this,void 0,void 0,(function*(){let t=0,n=this._generalListeners.get(e.constructor);if(n){t+=n.size();for(let t of n._data)yield t(e)}let r=this._map.get(e.constructor);if(!r)return t;for(let n of this.sorter((0,a.getKeys)(r)))if(r.get(n)){t+=r.get(n).size();for(let t of r.get(n)._data)yield t(e)}return t}))}}},7562:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Serde=void 0;const r=n(2400),i=n(739),a=n(1480),o=n(2886),s=n(3402),l=n(4619),d=n(1633),u=n(8348),c=n(9384),p=n(1658),h=n(7296),f=n(5935),g=n(6069),y=n(7207),m=n(3587),v=n(6203),C=n(9787),b=n(3632),S=n(2166),E=n(1449),w=n(1073);t.Serde=new class Serializer{constructor(){this._map=new Map,this._customByName=new Map,this.deflateObject=e=>{try{if(!e||this.isRaw(e))return e;let t=e._type;if(!t||!e.payload)throw`[Serializer] Unable to find type from payload! ${JSON.stringify(e)}`;if(this._customByName.has(t))return this._customByName.get(t).deflate(e.payload,this.deflateObject);let n=this._map.get(t);if(!n)throw`[Serializer] Cannot find registered type: ${t}`;let r=Reflect.construct(n,[]);return Object.keys(e.payload).forEach((t=>{let n=e.payload[t];this.isRaw(n)?r[t]=n:r[t]=this.deflateObject(n)})),r}catch(t){let n={msg:"Cannot deserialize",err:t,rawInput:e,input:JSON.stringify(e)};throw console.error(n,t),n}},this.inflateObject=e=>{if(this.isRaw(e))return e;if(!e)throw`WTF? ${e}`;if(this._customByName.has(e.constructor.name))return this._customByName.get(e.constructor.name).inflate(e,this.inflateObject);let t={};return Object.keys(e).forEach((n=>{let r=e[n];r instanceof Function||r instanceof Object?"Function"!==r.constructor.name&&(t[n]=this.inflateObject(r)):t[n]=r instanceof Array?r.map((e=>this.inflateObject(e))):r})),{payload:t,_type:e.constructor.name}}}register(e,t=null){t?this._customByName.set(e.name,t):this._map.set(e.name,e)}deserialize(e){return this.deflateObject(JSON.parse(e))}serialize(e){return JSON.stringify(this.inflateObject(e))}isRaw(e){return"object"!=typeof e}},t.Serde.register(Object),t.Serde.register(g.TextFlashEffect),t.Serde.register(g.DamageEffect),t.Serde.register(g.CardTransit),t.Serde.register(g.CurrentPlayerEffect),t.Serde.register(r.LoginMessage),t.Serde.register(i.ServerHintTransit),t.Serde.register(a.PlayerActionTransit),t.Serde.register(o.GameContext),t.Serde.register(s.PlayerInfo),t.Serde.register(l.CardType),t.Serde.register(l.Card),t.Serde.register(w.CardRearrangeRequest),t.Serde.register(w.CardMovementEvent),t.Serde.register(y.FWCard),t.Serde.register(l.CardSize),t.Serde.register(u.IdentityWarGeneral),t.Serde.register(c.IdentityWarPlayerInfo),t.Serde.register(p.FactionWarGeneral),t.Serde.register(h.FactionPlayerInfo),t.Serde.register(d.General),t.Serde.register(u.Package),t.Serde.register(d.Faction),t.Serde.register(s.Identity),t.Serde.register(i.Rescind),t.Serde.register(v.CustomUIData),t.Serde.register(m.RoundStat),t.Serde.register(g.SkinRequest),t.Serde.register(E.Multimap),t.Serde.register(g.VoiceRequest),t.Serde.register(g.SurrenderRequest),t.Serde.register(a.Button),t.Serde.register(f.Stage),t.Serde.register(g.LogTransit),t.Serde.register(Map,{inflate(e,t){let n=[];return e.forEach(((e,r)=>{n.push([t(r),t(e)])})),{_type:Map.name,payload:n}},deflate(e,t){let n=new Map;return e.forEach((e=>n.set(t(e[0]),t(e[1])))),n}}),t.Serde.register(Set,{inflate(e,t){let n=[];return e.forEach((e=>n.push(t(e)))),{_type:Set.name,payload:n}},deflate:(e,t)=>new Set(e.map((e=>t(e))))}),t.Serde.register(Array,{inflate:(e,t)=>({_type:Array.name,payload:e.map((e=>t(e)))}),deflate:(e,t)=>e.map(t)}),t.Serde.register(C.GameStats),t.Serde.register(b.PlayerPrepChoice),t.Serde.register(b.Circus),t.Serde.register(w.CardPosChangeEvent),t.Serde.register(S.SkillStatus),t.Serde.register(g.PlaySound)},1155:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TogglableMap=t.ClassFormatter=void 0;t.ClassFormatter=class ClassFormatter{constructor(e=""){this.clazz=e}and(e,t,n=""){return this.clazz+=" "+(e?t:n),this}done(){return this.clazz}};t.default=class Togglable{constructor(e){this.maxSize=e,this.items=new Set,this.itemArray=[]}has(e){return this.items.has(e)}isFull(){return this.maxSize<=this.size()}size(){return this.items.size}toggle(e){if(this.items.has(e)){this.items.delete(e);let t=this.itemArray.findIndex((t=>t===e));this.itemArray.splice(t,1)}else this.items.size<this.maxSize&&(this.items.add(e),this.itemArray.push(e))}clear(){this.items.clear(),this.itemArray=[]}toArray(){return this.itemArray}isEmpty(){return 0===this.items.size}};t.TogglableMap=class TogglableMap{constructor(e){this.maxSize=e,this.items=new Map,this.itemArray=[]}has(e){return this.items.has(e)}isFull(){return this.maxSize>this.size()}size(){return this.items.size}toggle(e,t){if(this.items.has(e)){this.items.delete(e);let t=this.itemArray.findIndex((t=>t[0]===e));this.itemArray.splice(t,1)}else this.items.size<this.maxSize&&(this.items.set(e,t),this.itemArray.push([e,t]))}clear(){this.items.clear(),this.itemArray=[]}toArray(){return this.itemArray}isEmpty(){return 0===this.items.size}}},5706:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.delay=t.Suits=void 0,t.shuffle=function(e){var t,n,r=e.length;for(;r;)n=Math.floor(Math.random()*r--),t=e[r],e[r]=e[n],e[n]=t;return e},t.getRandom=function(e){let t=Math.floor(Math.random()*e.length);t>=e.length&&(t=e.length-1);return e[t]},t.takeFromArray=function(e,t){let n=e.findIndex(t);if(-1!==n)return e.splice(n,1)[0]},t.enumValues=function(e){return Object.keys(e).filter((t=>"number"==typeof e[t]))},t.getNext=function(e,t){return e[(t+1)%e.length]},t.Mask=function(e){if(e.isMasked)return r.createElement("div",{className:`occupy ${e.maskClass||"mask"}`});return null},t.checkNotNull=function(e){if(null==e)throw"null value"},t.checkThat=function(e,t="Condition failed"){if(!e)throw t},t.getKeys=function(e){let t=[];for(let n of e.keys())t.push(n);return t},t.flattenMap=i,t.filterMap=function(e,t){return i(e).filter((e=>t(e[0],e[1])))},t.all=function(e,t){for(let n of e)if(!t(n))return!1;return!0},t.any=function(e,t){for(let n of e)if(t(n))return!0;return!1},t.reorder=function(e,t,n){const[r]=e.splice(t,1);return e.splice(n,0,r),e},t.promiseAny=function(e){return Promise.all([...e].map((e=>new Promise(((t,n)=>Promise.resolve(e).then(n,t)))))).then((e=>Promise.reject(e)),(e=>Promise.resolve(e)))},t.toChinese=function(e){if(e<a.length)return a[e];throw`Donno this ${e}`},t.wait=function(e,t=1e3){return new Promise((n=>{setTimeout((()=>{e(),n()}),t)}))},t.throttle=function(e,t){let n=!0;return function(){n&&(n=!1,e.apply(this,arguments),setTimeout((()=>{n=!0}),t))}},t.debounce=function(e,t,n=!1){var r;return function(){var i=this,a=arguments,o=n&&!r;clearTimeout(r),r=setTimeout((function(){r=null,n||e.apply(i,a)}),t),o&&e.apply(i,a)}},t.toArr=function(e){let t=[];return e.forEach((e=>t.push(e))),t};const r=n(6540);function i(e){let t=[];return e.forEach(((e,n)=>{t.push([n,e])})),t}t.Suits={heart:"♥",spade:"♠",diamond:"♦",club:"♣",none:"ERROR"};const a=["一","二","三","四","五","六","七","八"];t.delay=e=>new Promise((t=>setTimeout(t,e)))},7296:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FactionPlayerInfo=void 0;const r=n(1633),i=n(3402),a=n(6540);n(9084);const o=n(9670),s=n(1155),l=n(3147),d=n(3215),u=n(1073),c=n(1456);class FactionPlayerInfo extends i.PlayerInfo{constructor(e,t,n){super(e),this.general=t,this.subGeneral=n,this.isGeneralRevealed=!1,this.isSubGeneralRevealed=!1,this.mainMark={},this.subMark={}}getSkills(e){let t=[];return this.general.abilities.forEach((n=>{let r=e.skillProvider(n,this.player.id);r.disabledForMain||(r.position="main",t.push(r))})),this.subGeneral.abilities.forEach((n=>{let r=e.skillProvider(n,this.player.id);r.disabledForSub||(r.position="sub",t.push(r))})),t}init(){if(!this.subGeneral||!this.general)throw"WTF";if(this.general.faction.name!==this.subGeneral.faction.name)throw"WTF?? Factions don't match leh";return this.hp=Math.floor(this.general.resolveHp(!0)+this.subGeneral.resolveHp(!1)),this.maxHp=this.hp,this.faction=this.general.faction,this}getGender(){return this.isGeneralRevealed?this.general.gender:this.isSubGeneralRevealed?this.subGeneral.gender:"Nil"}getFaction(){return this.isRevealed()?this.faction:r.Faction.UNKNOWN}sanitize(e){let t=new FactionPlayerInfo(this.player,this.general,this.subGeneral);return Object.assign(t,this),this.isDead||e===this.player.id||(t.general=this.isGeneralRevealed&&this.general,t.subGeneral=this.isSubGeneralRevealed&&this.subGeneral,t.mainSkin=this.isGeneralRevealed&&this.mainSkin,t.subSkin=this.isSubGeneralRevealed&&this.subSkin,t.signs={},Object.keys(this.signs).forEach((e=>{("main"!==this.signs[e].owner||this.isGeneralRevealed)&&("sub"!==this.signs[e].owner||this.isSubGeneralRevealed)&&(t.signs[e]=this.signs[e])}))),t}renderGeneral(e,t,n){let r;return r=e?n?(0,o.toFactionWarAvatarStyle)(n,t):(0,o.toFactionWarAvatarStyle)(e.id,t):{backgroundImage:"url('generals/back.png')",backgroundPosition:"-30px -20px",filter:"grayscale(70%)"},(0,d.wrapGeneral)(e,a.createElement(c.default,{style:r}))}drawMark(e){let t=e?this.mainMark:this.subMark,n=e?this.general.nameForCardsOnMe:this.subGeneral.nameForCardsOnMe;return a.createElement("div",{className:"marks"},a.createElement(i.CardMark,{cards:this.getCards(e?u.CardPos.ON_GENERAL:u.CardPos.ON_SUB_GENERAL),name:n}),Object.keys(t).map((e=>a.createElement("div",{className:"mark",key:e},t[e]))))}draw(){let e=new s.ClassFormatter("faction-war").and(this.isDead,"dead").done(),t=this.general?this.general.name:"主将",n=this.subGeneral?this.subGeneral.name:"副将";return[a.createElement("div",{className:e,key:"pics"},a.createElement("div",{className:"general",style:{letterSpacing:t.length>2?"-4px":"0px"}},this.renderGeneral(this.general,!1,this.mainSkin),a.createElement("div",{className:"general-name"},t),this.drawMark(!0)),a.createElement("div",{className:"general",style:{letterSpacing:n.length>2?"-4px":"0px"}},this.renderGeneral(this.subGeneral,!1,this.subSkin),a.createElement("div",{className:"general-name"},n),this.drawMark(!1)),a.createElement("div",{className:"player-name"},this.player.id)),a.createElement(h,{key:"faction-mark",info:this})]}drawSelf(e,t){let n=this.isRevealed()?this.getFaction():this.general.faction,r=p[n.image],i=new s.ClassFormatter("faction-war").and(this.isDead,"dead").done();return a.createElement("div",{className:i},a.createElement("div",{className:"general "+(this.isGeneralRevealed||"hidden")},this.renderGeneral(this.general,!0,this.mainSkin),a.createElement("div",{className:"general-name",style:{background:r,letterSpacing:this.general.name.length>3?"-2px":"0px"}},this.general.name,a.createElement("div",{className:"general-name-after",style:{borderLeft:`9px solid ${r}`}})),a.createElement("div",{className:"title",onClick:()=>t(!0)},"主"),a.createElement("div",{className:"skill-buttons"},e.filter((e=>"main"===e.skill.position||"player"===e.skill.position)).map((e=>a.createElement(l.SkillButton,Object.assign({},e,{key:e.skill.id,className:this.general.faction.image}))))),this.drawMark(!0)),a.createElement("div",{className:"general "+(this.isSubGeneralRevealed||"hidden")},this.renderGeneral(this.subGeneral,!0,this.subSkin),a.createElement("div",{className:"general-name",style:{background:r,letterSpacing:this.subGeneral.name.length>3?"-2px":"0px"}},this.subGeneral.name,a.createElement("div",{className:"general-name-after",style:{borderLeft:`9px solid ${r}`}})),a.createElement("div",{className:"title",onClick:()=>t(!1)},"副"),a.createElement("div",{className:"skill-buttons"},e.filter((e=>"sub"===e.skill.position)).map((e=>a.createElement(l.SkillButton,Object.assign({},e,{key:e.skill.id,className:this.general.faction.image}))))),this.drawMark(!1)),a.createElement("div",{className:"my-faction-mark "+n.image},n.name))}isRevealed(){return this.isGeneralRevealed||this.isSubGeneralRevealed}declareDeath(){this.isGeneralRevealed=!0,this.isSubGeneralRevealed=!0,super.declareDeath()}static factionSame(e,t){return(0,r.factionsSame)(e.getFaction(),t.getFaction())||e===t&&e.isRevealed()}toString(){return super.toString()}}t.FactionPlayerInfo=FactionPlayerInfo;const p={wei:"#3c3cf7aa",shu:"#ff6060aa",qun:"#f1d23aaa",wu:"#228c22aa",ye:"#902090aa"};function h(e){let t=e.info,[n,r]=a.useState(!0),[i,o]=a.useState(!0),[l,d]=a.useState(!0),[u,c]=a.useState(!0);return t.isRevealed()?a.createElement("div",{className:"faction-mark "+t.getFaction().image},t.getFaction().name):a.createElement("div",{className:"faction-dynamic-mark"},a.createElement("div",{className:new s.ClassFormatter("mark").and(n,"wei").done(),onClick:()=>r(!n)}),a.createElement("div",{className:new s.ClassFormatter("mark").and(u,"qun").done(),onClick:()=>c(!u)}),a.createElement("div",{className:new s.ClassFormatter("mark").and(i,"shu").done(),onClick:()=>o(!i)}),a.createElement("div",{className:new s.ClassFormatter("mark").and(l,"wu").done(),onClick:()=>d(!l)}))}},3598:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(8651),i=n(739),a=n(8663),o=n(1480),s=n(7296),l=n(1073),d=n(4619),u=n(5167),c=n(1613);r.playerActionDriverProvider.registerProvider(i.HintType.PLAY_HAND,(e=>new a.default("出牌阶段出知己知彼").expectChoose([o.UIPosition.MY_HAND],1,1,((e,t)=>t.interpret(e).type===d.CardType.ZHI_JI)).expectChoose([o.UIPosition.PLAYER],1,1,((e,t)=>{let n=t.getPlayer(e);return(!n.isGeneralRevealed||!n.isSubGeneralRevealed||0!==n.getCards(l.CardPos.HAND).length)&&e!==t.myself.player.id}),(()=>"选择‘知己知彼’的对象")).expectAnyButton("点击确定使用知己知彼").build(e,[o.Button.OK,o.Button.CANCEL,new o.Button("chong_zhu","重铸")]))),r.playerActionDriverProvider.registerProvider(i.HintType.PLAY_HAND,(e=>new a.default("出牌阶段出以逸待劳").expectChoose([o.UIPosition.MY_HAND],1,1,((e,t)=>t.interpret(e).type===d.CardType.YI_YI)).expectAnyButton("点击确定使用以逸待劳").build(e))),r.playerActionDriverProvider.registerProvider(i.HintType.PLAY_HAND,(e=>new a.default("出牌阶段出远交近攻").expectChoose([o.UIPosition.MY_HAND],1,1,((e,t)=>!!t.myself.isRevealed()&&t.interpret(e).type===d.CardType.YUAN_JIAO)).expectChoose([o.UIPosition.PLAYER],1,1,((e,t)=>{let n=t.myself;if(!n.isRevealed())return!1;let r=t.getPlayer(e);return!!r.isRevealed()&&(!s.FactionPlayerInfo.factionSame(n,r)&&e!==t.myself.player.id)}),(()=>"选择一个不同阵营的玩家作为‘远交近攻’的对象")).expectAnyButton("点击确定使用远交近攻").build(e))),r.playerActionDriverProvider.registerProvider(i.HintType.PLAY_HAND,(e=>{let t=new o.Button("main","观看其主将牌").inDirect(),n=new o.Button("sub","观看其副将牌").inDirect(),r=new o.Button("noLook","不观看").inDirect();return new a.default("出牌阶段弃置先驱标记").expectChoose([o.UIPosition.SIGNS],1,1,((e,t)=>"先"===e)).expectChoose([o.UIPosition.PLAYER],0,1,((e,t)=>{if(e===t.myself.player.id)return!1;console.trace(e);let n=t.getPlayer(e);return!n.isGeneralRevealed||!n.isSubGeneralRevealed}),(()=>"选择一个有暗置武将牌的玩家观看其武将牌")).expectChoose([o.UIPosition.BUTTONS],1,1,((e,t,n)=>{if("noLook"===e)return!0;let r=n.getArr(o.UIPosition.PLAYER)[0];if(!r)return!1;let i=t.getPlayer(r);return(!i.isGeneralRevealed||"main"!==e)&&(!i.isSubGeneralRevealed||"sub"!==e)}),(()=>"选择弃置先驱标记要观看的武将牌")).build(e,[t,n,r,o.Button.CANCEL])})),r.playerActionDriverProvider.registerProvider(i.HintType.PLAY_HAND,(e=>new a.default("出牌阶段弃置阴阳鱼标记").expectChoose([o.UIPosition.SIGNS],1,1,((e,t)=>"鱼"===e)).expectAnyButton("点击确定弃置阴阳鱼").build(e))),r.playerActionDriverProvider.registerProvider(i.HintType.PLAY_HAND,(e=>{let t=new o.Button("regen","回复一点体力").inDirect(),n=new o.Button("card","摸两张牌").inDirect();return new a.default("出牌阶段弃置珠联璧合标记").expectChoose([o.UIPosition.SIGNS],1,1,((e,t)=>"珠"===e)).expectChoose([o.UIPosition.BUTTONS],1,1,((e,t)=>"regen"!==e||t.myself.hp<t.myself.maxHp),(()=>"选择弃置珠联璧合标记的效果")).build(e,[t,n,o.Button.CANCEL])})),(0,c.registerPeach)(((e,t)=>e.expectChoose([o.UIPosition.SIGNS],1,1,((e,t)=>"珠"===e)))),u.describer.register("先驱","出牌阶段时，你可以弃置标记，将手牌补至4张并观看一个暗置的武将牌。"),u.describer.register("阴阳鱼","你可以：1.出牌阶段时，弃置标记摸一张牌。 2.弃牌阶段弃置标记令手牌上限+2。"),u.describer.register("珠联璧合","你可以：1.出牌阶段或其他角色濒死时可以弃置此标记，视为使用一张桃 2.出牌阶段可以弃置此标记，摸2张牌。")},1189:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{l(r.next(e))}catch(e){a(e)}}function s(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.YuanJiao=t.ZhiJiZhiBi=t.YiYiDaiLao=void 0;const i=n(1480),a=n(2944),o=n(1073),s=n(9575),l=n(4619),d=n(6652),u=n(2608),c=n(739),p=n(2985),h=n(3402),f=n(1802),g=n(1633),y=n(4105),m=n(9577),v=n(2421),C=n(6069);class FactionWarActionResolver extends a.ActionResolver{register(e){this.skillRepo=e}getSkillAndRevealIfNeeded(e,t){return r(this,void 0,void 0,(function*(){let n=e.skill,r=this.skillRepo.getSkill(e.source.player.id,n);return r.isRevealed||(yield t.events.publish(new m.RevealGeneralEvent(e.source.player.id,"main"===r.position,"sub"===r.position))),r}))}onSkillAction(e,t,n){return r(this,void 0,void 0,(function*(){if(!e.skill)throw"what?";{let r=yield this.getSkillAndRevealIfNeeded(e,n);yield r.onPlayerAction(e,t,n)}}))}onSignAction(e,t,n){return r(this,void 0,void 0,(function*(){"珠"===e.signChosen&&(n.log(`${e.source} 弃置了 ${e.source.signs[e.signChosen].displayName} 标记作为桃`),delete e.source.signs[e.signChosen],n.broadcast(e.source,h.PlayerInfo.sanitize),n.broadcast(new C.TextFlashEffect(t.goodman.player.id,[t.deadman.player.id],l.CardType.PEACH.name)),yield new v.default(t.goodman,t.deadman,1).perform(n))}))}on(e,t){return r(this,void 0,void 0,(function*(){if(e.skill){let n=yield this.getSkillAndRevealIfNeeded(e,t);return yield n.onPlayerAction(e,null,t),!0}if(e.getCardsAtPos(o.CardPos.EQUIP).length>0)return!1;if(e.signChosen){switch(e.signChosen){case"先":yield this.processXianQu(e.source,e.targets[0],e.button,t);break;case"珠":"regen"===e.button?yield new v.default(e.source,e.source,1).perform(t):"card"===e.button?yield new u.default(e.source,2).perform(t):console.error("(珠联璧合)选择有问题！"+e.button);break;case"鱼":yield new u.default(e.source,1).perform(t);break;default:throw"Can't handle this..."+e.signChosen}t.log(`${e.source} 弃置了 ${e.source.signs[e.signChosen].displayName} 标记`),delete e.source.signs[e.signChosen],t.broadcast(e.source,h.PlayerInfo.sanitize)}else if(e.getCardsAtPos(o.CardPos.HAND).length>0){let n=e.getCardsAtPos(o.CardPos.HAND);if(n.length>1)throw`How can you play 2 cards at once????? ${e}`;let r=e.source,i=n[0],a=t.interpret(e.source.player.id,i);if("国战"!==a.type.package)return!1;let d=e.targets,c=d.map((e=>e.player.id));if(c.length>0?i.description=`${r.player.id} > ${c.join(", ")}`:i.description=`${r.player.id} 使用`,a.type.isEquipment())i.description=`${r} 装备`,t.sendToWorkflow(e.source.player.id,o.CardPos.HAND,[i],!0,!0),yield t.events.publish(new s.CardBeingUsedEvent(e.source.player.id,[[i,o.CardPos.HAND]],i.type)),yield new y.EquipOp(e.source,i).perform(t);else switch(t.sendToWorkflow(e.source.player.id,o.CardPos.HAND,[i],!0),a.type===l.CardType.ZHI_JI&&0===c.length?yield t.events.publish(new s.CardBeingDroppedEvent(e.source.player.id,[[i,o.CardPos.HAND]])):yield t.events.publish(new s.CardBeingUsedEvent(e.source.player.id,[[i,o.CardPos.HAND]],i.type)),a.type){case l.CardType.YI_YI:yield YiYiDaiLao.do([i],r,t);break;case l.CardType.ZHI_JI:c.length>0&&"chong_zhu"!==e.button?yield new ZhiJiZhiBi(e.source,d[0],[i]).perform(t):yield new u.default(t.context.getPlayer(e.source.player.id),1).perform(t);break;case l.CardType.YUAN_JIAO:yield new YuanJiao(e.source,d[0],[i]).perform(t);break;default:throw"未知国战牌:"+i.id}return!0}return!1}))}processXianQu(e,t,n,i){return r(this,void 0,void 0,(function*(){let r=e.getCards(o.CardPos.HAND).length;switch(r<4&&(yield new u.default(e,4-r).perform(i)),n){case"main":i.log(`(先驱) ${e} 选择观看了 ${t} 的主将`),yield i.sendHint(e.player.id,{hintType:c.HintType.UI_PANEL,hintMsg:`${t} 的主将`,customRequest:{data:{title:`${t} 的主将`,items:[t.general],mode:"general"},mode:"display"}});break;case"sub":i.log(`(先驱) ${e} 选择观看了 ${t} 的副将`),yield i.sendHint(e.player.id,{hintType:c.HintType.UI_PANEL,hintMsg:`${t} 的副将`,customRequest:{data:{title:`${t} 的副将`,items:[t.subGeneral],mode:"general"},mode:"display"}});break;default:i.log(`(先驱) ${e} 选择不观看`)}}))}}t.default=FactionWarActionResolver;class YiYiDaiLao extends p.MultiRuse{static do(e,t,n){return r(this,void 0,void 0,(function*(){let r=n.getSortedByCurr(!1).filter((e=>(0,g.factionsSame)(t.getFaction(),e.getFaction())));yield new YiYiDaiLao(e,t,l.CardType.YI_YI,[t,...r]).perform(n)}))}doForOne(e,t){return r(this,void 0,void 0,(function*(){yield new u.default(e,2).perform(t),yield(new f.DropCardRequest).perform(e.player.id,2,t,"(以逸待劳) 请弃置2张牌",[i.UIPosition.MY_HAND,i.UIPosition.MY_EQUIP])}))}}t.YiYiDaiLao=YiYiDaiLao;class ZhiJiZhiBi extends d.SingleRuse{constructor(e,t,n){super(e,t,n,l.CardType.ZHI_JI),this.source=e,this.target=t,this.cards=n}doEffect(e){return r(this,void 0,void 0,(function*(){let t=this.target,n=[];n.push(new i.Button(ZhiJiZhiBi.ZHU_JIANG,"观看主将",!t.isGeneralRevealed)),n.push(new i.Button(ZhiJiZhiBi.FU_JIANG,"观看副将",!t.isSubGeneralRevealed)),n.push(new i.Button(ZhiJiZhiBi.SHOU_PAI,"观看手牌",t.getCards(o.CardPos.HAND).length>0));let r=(yield e.sendHint(this.source.player.id,{hintType:c.HintType.MULTI_CHOICE,hintMsg:"请选择一项",extraButtons:n})).button;switch(r){case ZhiJiZhiBi.ZHU_JIANG:e.log(`${this.source} 选择观看了 ${this.target} 的主将`),yield e.sendHint(this.source.player.id,{hintType:c.HintType.UI_PANEL,hintMsg:`${this.target} 的主将`,customRequest:{data:{title:`${this.target} 的主将`,items:[t.general],mode:"general"},mode:"display"}});break;case ZhiJiZhiBi.FU_JIANG:e.log(`${this.source} 选择观看了 ${this.target} 的副将`),yield e.sendHint(this.source.player.id,{hintType:c.HintType.UI_PANEL,hintMsg:`${this.target} 的副将`,customRequest:{data:{title:`${this.target} 的副将`,items:[t.subGeneral],mode:"general"},mode:"display"}});break;case ZhiJiZhiBi.SHOU_PAI:e.log(`${this.source} 选择观看了 ${this.target} 的手牌`),yield e.sendHint(this.source.player.id,{hintType:c.HintType.UI_PANEL,hintMsg:`${this.target} 的手牌`,customRequest:{data:{title:`${this.target} 的手牌`,items:t.getCards(o.CardPos.HAND),mode:"card"},mode:"display"}});break;default:throw"Unknown choice! "+r}}))}}t.ZhiJiZhiBi=ZhiJiZhiBi,ZhiJiZhiBi.ZHU_JIANG="general",ZhiJiZhiBi.FU_JIANG="subGeneral",ZhiJiZhiBi.SHOU_PAI="hand";class YuanJiao extends d.SingleRuse{constructor(e,t,n){super(e,t,n,l.CardType.YUAN_JIAO),this.source=e,this.target=t,this.cards=n}doEffect(e){return r(this,void 0,void 0,(function*(){yield new u.default(this.target,1).perform(e),yield new u.default(this.source,3).perform(e)}))}}t.YuanJiao=YuanJiao},7207:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FactionWarCards=t.FWCard=t.Pack=void 0;const r=n(4619);var i;n(3598),function(e){e[e.STANDARD=0]="STANDARD",e[e.ZSBQ=1]="ZSBQ"}(i||(t.Pack=i={}));class FWCard extends r.Card{constructor(e,t,n,r=i.STANDARD){super(e,t,n),this.pack=r}}t.FWCard=FWCard;let a=[];a.push(new FWCard("spade",r.CardSize.ACE,r.CardType.SHAN_DIAN)),a.push(new FWCard("spade",r.CardSize.ACE,r.CardType.JUE_DOU)),a.push(new FWCard("spade",r.CardSize.TWO,r.CardType.BA_GUA)),a.push(new FWCard("spade",r.CardSize.TWO,r.CardType.CI_XIONG)),a.push(new FWCard("spade",r.CardSize.TWO,r.CardType.HAN_BING)),a.push(new FWCard("spade",r.CardSize.THREE,r.CardType.GUO_HE)),a.push(new FWCard("spade",r.CardSize.THREE,r.CardType.SHUN_SHOU)),a.push(new FWCard("spade",r.CardSize.FOUR,r.CardType.GUO_HE)),a.push(new FWCard("spade",r.CardSize.FOUR,r.CardType.SHUN_SHOU)),a.push(new FWCard("spade",r.CardSize.FIVE,r.CardType.SLASH)),a.push(new FWCard("spade",r.CardSize.FIVE,r.CardType.JUE_YING)),a.push(new FWCard("spade",r.CardSize.SIX,r.CardType.SLASH_THUNDER)),a.push(new FWCard("spade",r.CardSize.SIX,r.CardType.QING_GANG)),a.push(new FWCard("spade",r.CardSize.SEVEN,r.CardType.SLASH_THUNDER)),a.push(new FWCard("spade",r.CardSize.SEVEN,r.CardType.SLASH)),a.push(new FWCard("spade",r.CardSize.EIGHT,r.CardType.SLASH)),a.push(new FWCard("spade",r.CardSize.EIGHT,r.CardType.SLASH)),a.push(new FWCard("spade",r.CardSize.NINE,r.CardType.SLASH)),a.push(new FWCard("spade",r.CardSize.NINE,r.CardType.WINE)),a.push(new FWCard("spade",r.CardSize.TEN,r.CardType.BING_LIANG)),a.push(new FWCard("spade",r.CardSize.TEN,r.CardType.SLASH)),a.push(new FWCard("spade",r.CardSize.JACK,r.CardType.WU_XIE)),a.push(new FWCard("spade",r.CardSize.JACK,r.CardType.SLASH)),a.push(new FWCard("spade",r.CardSize.QUEEN,r.CardType.ZHANG_BA)),a.push(new FWCard("spade",r.CardSize.QUEEN,r.CardType.TIE_SUO)),a.push(new FWCard("spade",r.CardSize.KING,r.CardType.DA_YUAN)),a.push(new FWCard("spade",r.CardSize.KING,r.CardType.NAN_MAN)),a.push(new FWCard("heart",r.CardSize.ACE,r.CardType.TAO_YUAN)),a.push(new FWCard("heart",r.CardSize.ACE,r.CardType.WAN_JIAN)),a.push(new FWCard("heart",r.CardSize.TWO,r.CardType.HUO_GONG)),a.push(new FWCard("heart",r.CardSize.TWO,r.CardType.DODGE)),a.push(new FWCard("heart",r.CardSize.THREE,r.CardType.HUO_GONG)),a.push(new FWCard("heart",r.CardSize.THREE,r.CardType.WU_GU)),a.push(new FWCard("heart",r.CardSize.FOUR,r.CardType.PEACH)),a.push(new FWCard("heart",r.CardSize.FOUR,r.CardType.SLASH_FIRE)),a.push(new FWCard("heart",r.CardSize.FIVE,r.CardType.QI_LIN)),a.push(new FWCard("heart",r.CardSize.FIVE,r.CardType.CHI_TU)),a.push(new FWCard("heart",r.CardSize.SIX,r.CardType.PEACH)),a.push(new FWCard("heart",r.CardSize.SIX,r.CardType.LE_BU)),a.push(new FWCard("heart",r.CardSize.SEVEN,r.CardType.PEACH)),a.push(new FWCard("heart",r.CardSize.SEVEN,r.CardType.WU_ZHONG)),a.push(new FWCard("heart",r.CardSize.EIGHT,r.CardType.PEACH)),a.push(new FWCard("heart",r.CardSize.EIGHT,r.CardType.WU_ZHONG)),a.push(new FWCard("heart",r.CardSize.NINE,r.CardType.PEACH)),a.push(new FWCard("heart",r.CardSize.NINE,r.CardType.YUAN_JIAO)),a.push(new FWCard("heart",r.CardSize.TEN,r.CardType.PEACH)),a.push(new FWCard("heart",r.CardSize.TEN,r.CardType.SLASH)),a.push(new FWCard("heart",r.CardSize.JACK,r.CardType.DODGE)),a.push(new FWCard("heart",r.CardSize.JACK,r.CardType.YI_YI)),a.push(new FWCard("heart",r.CardSize.QUEEN,r.CardType.PEACH)),a.push(new FWCard("heart",r.CardSize.QUEEN,r.CardType.GUO_HE)),a.push(new FWCard("heart",r.CardSize.QUEEN,r.CardType.SLASH)),a.push(new FWCard("heart",r.CardSize.KING,r.CardType.ZHUA_HUANG)),a.push(new FWCard("heart",r.CardSize.KING,r.CardType.DODGE)),a.push(new FWCard("club",r.CardSize.ACE,r.CardType.SILVER_LION)),a.push(new FWCard("club",r.CardSize.ACE,r.CardType.JUE_DOU)),a.push(new FWCard("club",r.CardSize.TWO,r.CardType.SLASH)),a.push(new FWCard("club",r.CardSize.TWO,r.CardType.REN_WANG)),a.push(new FWCard("club",r.CardSize.TWO,r.CardType.TENG_JIA)),a.push(new FWCard("club",r.CardSize.THREE,r.CardType.ZHI_JI)),a.push(new FWCard("club",r.CardSize.THREE,r.CardType.SLASH)),a.push(new FWCard("club",r.CardSize.FOUR,r.CardType.ZHI_JI)),a.push(new FWCard("club",r.CardSize.FOUR,r.CardType.SLASH)),a.push(new FWCard("club",r.CardSize.FIVE,r.CardType.DI_LU)),a.push(new FWCard("club",r.CardSize.FIVE,r.CardType.SLASH)),a.push(new FWCard("club",r.CardSize.SIX,r.CardType.LE_BU)),a.push(new FWCard("club",r.CardSize.SIX,r.CardType.SLASH_THUNDER)),a.push(new FWCard("club",r.CardSize.SEVEN,r.CardType.NAN_MAN)),a.push(new FWCard("club",r.CardSize.SEVEN,r.CardType.SLASH_THUNDER)),a.push(new FWCard("club",r.CardSize.EIGHT,r.CardType.SLASH)),a.push(new FWCard("club",r.CardSize.EIGHT,r.CardType.SLASH_THUNDER)),a.push(new FWCard("club",r.CardSize.NINE,r.CardType.SLASH)),a.push(new FWCard("club",r.CardSize.NINE,r.CardType.WINE)),a.push(new FWCard("club",r.CardSize.TEN,r.CardType.SLASH)),a.push(new FWCard("club",r.CardSize.TEN,r.CardType.BING_LIANG)),a.push(new FWCard("club",r.CardSize.JACK,r.CardType.SLASH)),a.push(new FWCard("club",r.CardSize.JACK,r.CardType.SLASH)),a.push(new FWCard("club",r.CardSize.QUEEN,r.CardType.JIE_DAO)),a.push(new FWCard("club",r.CardSize.QUEEN,r.CardType.TIE_SUO)),a.push(new FWCard("club",r.CardSize.KING,r.CardType.WU_XIE_GUO)),a.push(new FWCard("club",r.CardSize.KING,r.CardType.TIE_SUO)),a.push(new FWCard("diamond",r.CardSize.ACE,r.CardType.LIAN_NU)),a.push(new FWCard("diamond",r.CardSize.ACE,r.CardType.ZHU_QUE)),a.push(new FWCard("diamond",r.CardSize.TWO,r.CardType.DODGE)),a.push(new FWCard("diamond",r.CardSize.TWO,r.CardType.PEACH)),a.push(new FWCard("diamond",r.CardSize.THREE,r.CardType.DODGE)),a.push(new FWCard("diamond",r.CardSize.THREE,r.CardType.SHUN_SHOU)),a.push(new FWCard("diamond",r.CardSize.FOUR,r.CardType.SLASH_FIRE)),a.push(new FWCard("diamond",r.CardSize.FOUR,r.CardType.YI_YI)),a.push(new FWCard("diamond",r.CardSize.FIVE,r.CardType.SLASH_FIRE)),a.push(new FWCard("diamond",r.CardSize.FIVE,r.CardType.GUAN_SHI)),a.push(new FWCard("diamond",r.CardSize.SIX,r.CardType.DODGE)),a.push(new FWCard("diamond",r.CardSize.SIX,r.CardType.WU_LIU)),a.push(new FWCard("diamond",r.CardSize.SEVEN,r.CardType.DODGE)),a.push(new FWCard("diamond",r.CardSize.SEVEN,r.CardType.DODGE)),a.push(new FWCard("diamond",r.CardSize.EIGHT,r.CardType.DODGE)),a.push(new FWCard("diamond",r.CardSize.EIGHT,r.CardType.DODGE)),a.push(new FWCard("diamond",r.CardSize.NINE,r.CardType.DODGE)),a.push(new FWCard("diamond",r.CardSize.NINE,r.CardType.WINE)),a.push(new FWCard("diamond",r.CardSize.TEN,r.CardType.DODGE)),a.push(new FWCard("diamond",r.CardSize.TEN,r.CardType.SLASH)),a.push(new FWCard("diamond",r.CardSize.JACK,r.CardType.DODGE)),a.push(new FWCard("diamond",r.CardSize.JACK,r.CardType.SLASH)),a.push(new FWCard("diamond",r.CardSize.QUEEN,r.CardType.SAN_JIAN)),a.push(new FWCard("diamond",r.CardSize.QUEEN,r.CardType.SLASH)),a.push(new FWCard("diamond",r.CardSize.QUEEN,r.CardType.WU_XIE)),a.push(new FWCard("diamond",r.CardSize.KING,r.CardType.DODGE)),a.push(new FWCard("diamond",r.CardSize.KING,r.CardType.ZI_XING)),t.FactionWarCards=new r.CardManager(a.filter((e=>!0)))},129:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{l(r.next(e))}catch(e){a(e)}}function s(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.SanJian=t.WuLiu=void 0,t.default=function(e){y.clear(),e.equipmentRegistry.onGeneral(i.EquipOp,(t=>r(this,void 0,void 0,(function*(){if(t.card.type.isHorse())return;let n,r=t.card.type.name;switch(r){case s.CardType.CI_XIONG.name:n=new o.CiXiong(t.beneficiary.player.id,t.card.type,e);break;case s.CardType.QING_GANG.name:n=new o.QingGang(t.beneficiary.player.id,t.card.type,e);break;case s.CardType.ZHU_QUE.name:n=new o.ZhuQue(t.beneficiary.player.id,t.card.type,e);break;case s.CardType.GU_DING.name:n=new o.GuDing(t.beneficiary.player.id,t.card.type,e);break;case s.CardType.GUAN_SHI.name:n=new o.GuanShi(t.beneficiary.player.id,t.card.type,e);break;case s.CardType.LIAN_NU.name:n=new o.LianNu(t.beneficiary.player.id,t.card.type,e);break;case s.CardType.HAN_BING.name:n=new o.HanBing(t.beneficiary.player.id,t.card.type,e);break;case s.CardType.QI_LIN.name:n=new o.Qilin(t.beneficiary.player.id,t.card.type,e);break;case s.CardType.WU_LIU.name:n=new WuLiu(t.beneficiary.player.id,t.card.type,e);break;case s.CardType.SAN_JIAN.name:n=new SanJian(t.beneficiary.player.id,t.card.type,e);break;case s.CardType.ZHANG_BA.name:return;case s.CardType.SILVER_LION.name:n=new o.BaiYin(t.beneficiary.player.id,t.card.type,e);break;case s.CardType.REN_WANG.name:n=new o.RenWang(t.beneficiary.player.id,t.card.type,e);break;case s.CardType.TENG_JIA.name:n=new o.TengJia(t.beneficiary.player.id,t.card.type,e);break;case s.CardType.BA_GUA.name:n=new o.BaGua(t.beneficiary.player.id,t.card.type,e);break;default:throw"Unknown equipment!!! "+r}console.log(`[装备] ${t.beneficiary.player.id} 装备了 ${t.card.id}`),y.set(t.card.id,n),yield n.onEquipped()}))));let t=e=>r(this,void 0,void 0,(function*(){for(let t of e.cards)if(t[1]===d.CardPos.EQUIP&&!t[0].type.isHorse()){if(console.log(`[装备] ${e.player} 卸下了 ${t[0].id}`),!y.has(t[0].id)){console.warn("Missing equipment... not registered (这是丈八?) "+t[0].id);continue}yield y.get(t[0].id).onDropped()}}));e.equipmentRegistry.onGeneral(a.CardBeingDroppedEvent,t),e.equipmentRegistry.onGeneral(a.CardBeingTakenEvent,t),e.equipmentRegistry.onGeneral(a.CardBeingUsedEvent,t)};const i=n(4105),a=n(9575),o=n(5465),s=n(4619),l=n(5796),d=n(1073),u=n(739),c=n(1480),p=n(7296),h=n(3402),f=n(9577),g=n(1633),y=new Map;class WuLiu extends o.Equipment{constructor(){super(...arguments),this.onNewBuddyRevealed=e=>r(this,void 0,void 0,(function*(){if(e.player.player.id===this.player)return;let t=this.manager.context.getPlayer(this.player);(0,g.factionsSame)(e.player.getFaction(),t.getFaction())&&(e.player.reachModifier+=1,console.log(`[装备] ${e.player} 受吴六剑装备的影响, reachModifier成为${e.player.reachModifier}`),this.manager.broadcast(e.player,h.PlayerInfo.sanitize))}))}onEquipped(){return r(this,void 0,void 0,(function*(){let e=this.manager.context.getPlayer(this.player);console.log("[装备] 吴六剑装备"),this.manager.getSortedByCurr(!0).filter((t=>t.player.id!==this.player&&p.FactionPlayerInfo.factionSame(e,t))).forEach((e=>{e.reachModifier+=1,console.log(`[装备] ${e.player.id} 受吴六剑装备的影响, reachModifier成为${e.reachModifier}`),this.manager.broadcast(e,h.PlayerInfo.sanitize)})),this.manager.equipmentRegistry.onGeneral(f.RevealPlayerEvent,this.onNewBuddyRevealed)}))}onDropped(){return r(this,void 0,void 0,(function*(){let e=this.manager.context.getPlayer(this.player);console.log("[装备] 吴六剑卸下"),this.manager.getSortedByCurr(!0).filter((t=>t.player.id!==this.player&&p.FactionPlayerInfo.factionSame(e,t))).forEach((e=>{e.reachModifier-=1,console.log(`[装备] ${e.player.id} 受吴六剑卸下的影响, reachModifier成为${e.reachModifier}`),this.manager.broadcast(e,h.PlayerInfo.sanitize)})),this.manager.equipmentRegistry.offGeneral(f.RevealPlayerEvent,this.onNewBuddyRevealed)}))}}t.WuLiu=WuLiu;class SanJian extends o.Equipment{constructor(){super(...arguments),this.performEffect=e=>r(this,void 0,void 0,(function*(){if(!e.source||e.source.player.id!==this.player||e.damageSource!==l.DamageSource.SLASH)return;if(e.timeline!==l.DamageTimeline.DID_DAMAGE)return;if(!e.source.getCards(d.CardPos.EQUIP).find((e=>e.type===s.CardType.SAN_JIAN)))throw`不可能! 我登记过的就应该有这个武器! 三尖两刃刀 ${this.player}`;if(e.target.isDead||e.source.isDead)return void console.log("[装备] 三尖两刃刀无法发动, 因玩家已死",e.target.isDead,e.source.isDead);if((yield this.manager.sendHint(this.player,{hintType:u.HintType.MULTI_CHOICE,hintMsg:"是否发动三尖两刃刀特效",extraButtons:[c.Button.OK,c.Button.CANCEL]})).isCancel())return void console.log("[装备] 玩家放弃发动三尖两刃刀");let t=yield this.manager.sendHint(this.player,{hintType:u.HintType.SPECIAL,specialId:s.CardType.SAN_JIAN.name,hintMsg:"发动三尖两刃刀",sourcePlayer:e.target.player.id,extraButtons:[c.Button.CANCEL]});if(t.isCancel())console.log("[装备] 玩家放弃发动三尖两刃刀");else{let n=t.getSingleCardAndPos()[0],r=t.targets[0];delete n.as,n.description=this.player+" 三尖两刃刀弃牌",this.manager.sendToWorkflow(this.player,d.CardPos.HAND,[n],!0),yield new l.default(e.source,r,1,[],l.DamageSource.SKILL).perform(this.manager)}}))}onEquipped(){return r(this,void 0,void 0,(function*(){this.manager.equipmentRegistry.on(l.default,this.player,this.performEffect)}))}onDropped(){return r(this,void 0,void 0,(function*(){this.manager.equipmentRegistry.off(l.default,this.player,this.performEffect)}))}}t.SanJian=SanJian},3632:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{l(r.next(e))}catch(e){a(e)}}function s(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.PlayerPrepChoice=t.Circus=void 0;const i=n(8572),a=n(9577),o=n(1658),s=n(5465),l=n(4527),d=n(1189),u=n(3409),c=n(5706),p=n(7296),h=n(739),f=n(9787),g=n(7011),y=n(2632),m=n(2166),v=n(1073),C=n(1480),b=n(4619),S=n(6069),E=n(3402),w=n(801),_=n(8636),P=u.GameModeEnum.FactionWarGame;t.default=class FactionWarGameHoster{constructor(e,t){this.registry=e,this.numberOfPlayer=t,this.initializer=new a.default,this.onSkillStatusUpate=e=>{this.skillRepo.onClientUpdateSkill(e)},this.shiftCard=e=>{if(this.manager&&e.pos===C.UIPosition.MY_HAND){console.log("Player shifting his cards",e.player);let t=this.manager.context.getPlayer(e.player).getCards(v.CardPos.HAND);(0,c.reorder)(t,e.from,e.to)}},e.pubsub.on(m.SkillStatus,this.onSkillStatusUpate),e.pubsub.on(v.CardPosChangeEvent,this.shiftCard),e.pubsub.on(S.VoiceRequest,(t=>{e.broadcast(t)})),e.pubsub.on(v.CardRearrangeRequest,(e=>{if(!this.manager)return;console.log("整理手牌: ",e.requester);let t=this.manager.context.getPlayer(e.requester);t.getCards(v.CardPos.HAND).sort(b.cardSorter),this.manager.send(e.requester,t)})),e.pubsub.on(S.SurrenderRequest,(e=>{var t;if(console.log("玩家投降",e.player),(0,w.canSurrender)(e.player,null===(t=this.manager)||void 0===t?void 0:t.context)&&!this.manager.manualEnding){this.manager.log(`${e.player} 投降了`),this.manager.broadcast(e);let t=this.manager.getSortedByCurr(!0).filter((t=>t.player.id!==e.player)).map((e=>e.player.id));this.manager.manualEnding=new _.default(t)}})),e.pubsub.on(S.SkinRequest,(e=>{if(!this.manager)return;console.log("更换皮肤",e.player,e.isMain);let t=this.manager.context.getPlayer(e.player),n=e.isMain?t.general:t.subGeneral;if(0===n.skins)return;let r=e.isMain?t.mainSkin:t.subSkin,i=1;if(r){i=(parseInt(r.split("_").reverse()[0])+1)%(n.skins+1)}let a=null;if(i>0){let e=n.id.split("_");e.splice(0,1),e.unshift("skin"),e.push(i.toString()),a=e.join("_")}e.isMain?t.mainSkin=a:t.subSkin=a,this.manager.broadcast(t,E.PlayerInfo.sanitize)}))}init(){console.log("[选将] 进入准备工作, 分发将牌, 等待玩家选将"),this.choices=this.generateGeneralChoices(this.numberOfPlayer),this.seating=(0,c.shuffle)([0,1,2,3,4,5,6,7].slice(0,this.numberOfPlayer)),this.circus=new Circus,this.circus.playerNo=this.numberOfPlayer,this.manager=null}onPlayerConnected(e){return r(this,void 0,void 0,(function*(){if(this.manager)yield this.resendGameToPlayer(e);else if(this.circus.statuses.find((t=>t.player.id===e)))console.log("[选将] 玩家重连: "+e),this.registry.send(e,Circus.sanitize(this.circus,e)),yield(0,c.delay)(300),this.registry.onPlayerReconnected(e);else{let t=new PlayerPrepChoice({id:e},this.seating.shift());this.circus.statuses.push(t),yield this.addNewPlayer(t)}}))}resendGameToPlayer(e){return r(this,void 0,void 0,(function*(){this.manager.onPlayerReconnected(e),this.skillRepo.getSkills(e).forEach((t=>{this.manager.send(e,t.toStatus())})),yield(0,c.delay)(500),this.registry.onPlayerReconnected(e)}))}addNewPlayer(e){return r(this,void 0,void 0,(function*(){console.log("[选将] 新玩家加入! "+e.player.id,e),this.registry.broadcast(this.circus,Circus.sanitize),yield(0,c.delay)(300),this.registry.sendServerAsk(e.player.id,{hintType:h.HintType.UI_PANEL,hintMsg:"选将",customRequest:{mode:"choose",data:{yourIdx:e.seating,generals:this.choices.shift()}}}).then((t=>{let n=t.customData;e.chosenGeneral=o.allGenerals.get(n[0]),e.chosenSubGeneral=o.allGenerals.get(n[1]),this.registry.broadcast(this.circus,Circus.sanitize),this.tryStartTheGame()}))}))}tryStartTheGame(){if(0===this.choices.length){for(let e of this.circus.statuses)if(!e.chosenGeneral||!e.chosenSubGeneral)return;return console.log("[选将] 准备完毕, 开始游戏!"),void this.startGame()}console.log("[选将] 还没有准备好")}startGame(){this.statsCollector||(this.statsCollector=new f.default(this.circus.statuses.map((e=>e.player))));let e=this.circus.statuses.sort(((e,t)=>e.seating-t.seating)).map((e=>{let t=new p.FactionPlayerInfo(e.player,e.chosenGeneral,e.chosenSubGeneral);return t.init(),t})),t=new l.default(e,P,(e=>{this.manager.setDeckRemain(e)}));this.initializer=new a.default,s.BlockedEquipment.reinit();let n=new d.default;this.manager=new i.default(t,this.registry,n,this.statsCollector);let r=new g.SequenceAwareSkillPubSub(this.manager,(e=>t.sortFromPerspective(this.manager.currPlayer().player.id,e).map((e=>e.player.id))));this.manager.init(r),this.skillRepo=new y.default(this.manager,r),n.register(this.skillRepo),this.initializer.init(this.manager),this.circus.statuses.forEach((e=>{this.resendGameToPlayer(e.player.id)})),this.manager.startGame().then((e=>{this.init(),e.forEach((e=>{let t=new PlayerPrepChoice({id:e},this.seating.shift());this.circus.statuses.push(t)})),Promise.all(this.circus.statuses.map((e=>this.addNewPlayer(e))))}))}generateGeneralChoices(e){let t=[],n=(0,c.flattenMap)(o.allGenerals).map((e=>e[1]));(0,c.shuffle)(n);let r=Math.min(Math.floor(n.length/e),7);if(r<3)throw"Not enough generals! "+n.length+" "+e;console.log("[牌局] 每人选将",n.length,r);for(let i=0;i<e;++i){let e=new Set,i=[],a=0;for(;i.length<r&&a<n.length;){let t=n[a];3!==e.size||e.has(t.faction)?(e.add(t.faction),i.push(n.splice(a,1)[0])):a++}i.length<r&&i.push(...n.splice(0,r-i.length)),t.push(i)}return t}};class Circus{constructor(){this.statuses=[],this.gameMode=P}static sanitize(e,t){let n=new Circus;return n.playerNo=e.playerNo,n.statuses=e.statuses.map((e=>PlayerPrepChoice.sanitize(e,t))),n.gameMode=e.gameMode,n}}t.Circus=Circus;class PlayerPrepChoice{constructor(e,t){this.player=e,this.seating=t}static sanitize(e,t){if(!e)throw"What??";if(t===e.player.id)return e;{let t=new PlayerPrepChoice(e.player,e.seating);return t.chosenGeneral=e.chosenGeneral?o.FactionWarGeneral.soldier_male:null,t.chosenSubGeneral=e.chosenSubGeneral?o.FactionWarGeneral.soldier_male:null,t}}}t.PlayerPrepChoice=PlayerPrepChoice},9670:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toFactionWarAvatarStyle=function(e,t){let i=t?r.get(e):n.get(e);return{backgroundImage:`url('generals/${e}.png')`,backgroundPosition:`${i.x}px ${i.y}px`,width:i.w+"%",height:i.h+"%"}};const n=new Map,r=new Map;function i(e,t,i,a,o,s,l){r.set(e,{x:t,y:i,w:a,h:a}),n.set(e,{x:o,y:s,w:l,h:l})}i("guo_soldier_male",-80,-30,180,-115,-35,200),i("guo_soldier_female",-80,-50,180,-130,-45,200),i("standard_cao_cao",-80,-30,180,-130,-25,200),i("standard_si_ma_yi",-40,0,150,-90,-15,200),i("standard_xia_hou_dun",-28,-15,150,-70,-25,200),i("standard_zhang_liao",-28,-15,150,-90,-25,200),i("standard_xu_chu",-48,-18,150,-110,-45,200),i("standard_guo_jia",-48,-18,150,-120,-15,200),i("standard_zhen_ji",-68,-5,150,-120,-15,170),i("wind_xia_hou_yuan",-28,-45,150,-80,-55,170),i("mountain_zhang_he",-38,-15,150,-80,-25,170),i("forest_xu_huang",-38,-5,150,-80,-25,170),i("wind_cao_ren",-158,-65,250,-160,-45,250),i("fire_dian_wei",-45,0,150,-110,-5,200),i("fire_xun_yu",-30,0,150,-90,-25,200),i("forest_cao_pi",-35,-30,150,-90,-55,200),i("guo_cao_pi",-28,-35,170,-70,-60,200),i("guo_yue_jin",-105,-70,200,-110,-55,200),i("standard_liu_bei",-30,-10,150,-90,-15,200),i("standard_guan_yu",-30,-10,150,-90,-15,200),i("standard_zhang_fei",-90,-60,200,-110,-45,200),i("standard_zhu_ge_liang",-50,-20,150,-120,-25,200),i("standard_zhao_yun",-30,0,150,-70,-10,170),i("standard_ma_chao",-40,-20,150,-80,-10,170),i("standard_huang_yue_ying",-20,0,150,-60,-0,170),i("standard_huang_zhong",-50,0,150,-110,-0,170),i("wind_wei_yan",-40,-30,150,-70,-30,170),i("fire_pang_tong",-20,-20,150,-40,-30,170),i("fire_wo_long",-80,-20,150,-140,-20,170),i("mountain_liu_shan",-30,-20,150,-80,-20,170),i("forest_meng_huo",-40,-50,150,-80,-50,170),i("forest_zhu_rong",-60,-20,150,-110,-30,170),i("guo_gan_fu_ren",-60,0,150,-100,-20,170),i("standard_sun_quan",-60,-30,200,-60,-20,170),i("standard_gan_ning",-40,0,150,-80,-0,170),i("standard_lv_meng",-30,0,150,-60,-0,170),i("standard_huang_gai",-30,0,150,-40,-0,170),i("standard_zhou_yu",-60,-20,200,-65,-20,170),i("standard_da_qiao",-60,-5,150,-105,-10,170),i("standard_lu_xun",-20,-25,150,-55,-30,170),i("standard_sun_shang_xiang",-20,-35,150,-35,-40,170),i("forest_sun_jian",-120,-80,240,-140,-70,250),i("wind_xiao_qiao",-50,0,150,-100,-0,170),i("fire_tai_shi_ci",-65,-40,170,-80,-50,170),i("wind_zhou_tai",-55,-20,170,-80,-20,170),i("forest_lu_su",-70,-20,170,-80,-20,170),i("mountain_er_zhang",-35,-20,150,-30,-10,110),i("guo_ding_feng",-25,-50,150,-40,-50,170),i("standard_hua_tuo",-50,-5,150,-90,-10,170),i("standard_lv_bu",-20,-25,150,-50,-20,170),i("standard_diao_chan",-30,-15,150,-60,-20,170),i("fire_yuan_shao",-50,-35,150,-110,-40,170),i("fire_yan_liang_wen_chou",-20,-25,150,-50,-40,170),i("forest_jia_xu",-45,-25,150,-90,-40,170),i("fire_pang_de",-25,-25,150,-60,-30,170),i("wind_zhang_jiao",-45,-25,150,-100,-30,170),i("mountain_cai_wen_ji",-55,-55,150,-100,-60,170),i("guo_ma_teng",-45,-15,150,-80,-30,170),i("guo_kong_rong",-35,-15,150,-60,-10,170),i("guo_ji_ling",-55,-15,150,-75,-10,170),i("guo_tian_feng",-35,-5,150,-55,0,170),i("guo_pan_feng",-55,-5,150,-95,0,170),i("guo_zou_shi",-35,-20,120,-105,-20,170),i("mountain_deng_ai",-15,-20,150,-65,-20,170),i("guo_cao_hong",-35,-0,120,-135,0,170),i("guo_jiang_wan_fei_yi",-35,-0,120,-25,0,100),i("mountain_jiang_wei",-25,-10,120,-75,0,170),i("fame_xu_sheng",-15,-10,120,-65,-10,150),i("guo_jiang_qin",-35,-0,120,-55,0,150),i("guo_he_tai_hou",-40,-20,150,-60,-10,170),i("wind_yu_ji",-85,-50,180,-125,-70,200),i("bound_li_dian",-55,-20,150,-105,-40,200),i("guo_zang_ba",-35,-40,150,-95,-70,200),i("fame_ma_dai",-55,-40,150,-125,-50,200),i("guo_mi_fu_ren",-55,-40,150,-65,-30,200),i("guo_sun_ce",-45,-20,150,-105,-20,200),i("guo_chen_wu_dong_xi",-45,-50,150,-50,-30,120),i("forest_dong_zhuo",-25,-10,150,-70,-10,170),i("guo_zhang_ren",-25,-10,150,-50,-10,170),i("fame_xun_you",-45,-30,150,-90,-30,170),i("guo_sha_mo_ke",-40,-20,150,-95,-30,200),i("fame_fa_zheng",-25,-10,150,-50,-10,170),i("guo_lv_fan",-5,-10,150,-40,-10,170),i("guo_li_jue_guo_si",-15,-30,120,-45,-40,120),i("guo_zhang_xiu",-50,-30,150,-100,-40,170),i("fame_zu_shou",-170,-35,300,-210,-50,350),i("guo_xun_chen",-50,-30,150,-80,-20,170),i("skin_cai_wen_ji_1",-40,0,150,-120,-15,200),i("skin_cai_wen_ji_2",-30,-30,150,-90,-65,200),i("skin_cai_wen_ji_3",-30,-30,150,-60,-45,200),i("skin_cai_wen_ji_4",-30,-30,150,-70,-75,200),i("skin_cai_wen_ji_5",-30,-50,150,-70,-55,200),i("skin_cao_cao_1",-20,-20,150,-40,-15,140),i("skin_cao_cao_2",-50,-10,150,-110,-25,200),i("skin_cao_cao_3",-20,0,150,-80,0,200),i("skin_cao_cao_4",-40,-0,150,-60,0,130),i("skin_cao_cao_5",-40,-0,150,-100,0,200),i("skin_cao_pi_1",-40,-30,150,-100,-40,200),i("skin_cao_pi_2",-40,-10,150,-90,-30,200),i("skin_cao_pi_3",-40,-10,150,-110,-10,200),i("skin_cao_pi_4",-60,-20,150,-115,-50,200),i("skin_cao_pi_5",0,0,100,-55,-10,150),i("skin_cao_ren_1",-40,-30,150,-55,-30,150),i("skin_cao_ren_2",-40,-20,150,-95,-30,200),i("skin_cao_ren_3",-40,-20,150,-105,-30,200),i("skin_cao_ren_4",-40,0,150,-95,0,200),i("skin_chen_wu_dong_xi_1",-30,0,120,-45,0,100),i("skin_chen_wu_dong_xi_2",-30,-20,120,-25,0,100),i("skin_da_qiao_1",-30,0,120,-120,0,200),i("skin_da_qiao_2",-30,0,120,-90,0,150),i("skin_da_qiao_3",-30,0,120,-60,0,150),i("skin_da_qiao_4",-10,0,120,-50,-10,150),i("skin_da_qiao_5",-10,0,120,-30,-10,150),i("skin_deng_ai_1",-60,0,150,-70,0,150),i("skin_deng_ai_2",-40,0,150,-90,0,200),i("skin_deng_ai_3",-40,-10,150,-110,-20,200),i("skin_deng_ai_4",-40,-10,150,-80,-40,200),i("skin_deng_ai_5",-50,0,150,-130,-10,200),i("skin_dian_wei_1",-50,0,150,-100,-10,200),i("skin_dian_wei_2",-50,-20,150,-110,-40,200),i("skin_dian_wei_3",-50,-20,150,-80,-40,200),i("skin_dian_wei_4",-50,-20,150,-100,-15,200),i("skin_dian_wei_5",-50,-20,150,-110,-20,200),i("skin_diao_chan_1",-20,0,120,-80,-10,200),i("skin_diao_chan_2",-10,-15,120,-50,-50,200),i("skin_diao_chan_3",0,0,120,-70,-30,200),i("skin_diao_chan_4",0,0,120,-60,-20,200),i("skin_diao_chan_5",-50,0,120,-140,-40,200),i("skin_dong_zhuo_1",0,0,120,-70,-40,200),i("skin_dong_zhuo_2",0,0,120,-120,-40,200),i("skin_dong_zhuo_3",-20,0,120,-120,-10,200),i("skin_dong_zhuo_4",-20,0,120,-120,-20,200),i("skin_dong_zhuo_5",-10,0,120,-100,-20,200),i("skin_er_zhang_1",-10,0,120,-70,0,150),i("skin_er_zhang_2",-10,0,120,-40,0,120),i("skin_er_zhang_3",-30,0,120,-50,0,120),i("skin_er_zhang_4",-10,0,120,-40,0,120),i("skin_er_zhang_5",-10,0,120,-40,0,120),i("skin_gan_fu_ren_1",-10,0,120,-60,-20,200),i("skin_gan_fu_ren_2",-20,0,120,-140,-10,200),i("skin_gan_fu_ren_3",-10,-30,120,-60,-40,200),i("skin_gan_fu_ren_4",-10,0,120,-40,0,150),i("skin_gan_fu_ren_5",-20,0,120,-90,-20,150),i("skin_gan_ning_1",-20,0,140,-90,0,200),i("skin_gan_ning_2",-20,-30,120,-110,-50,200),i("skin_gan_ning_3",-40,10,120,-140,-10,200),i("skin_gan_ning_4",-90,10,120,-190,-10,200),i("skin_gan_ning_5",-20,-10,120,-70,-30,200),i("skin_guan_yu_1",-50,0,150,-110,0,200),i("skin_guan_yu_2",-50,0,150,-90,-20,200),i("skin_guan_yu_3",-40,0,150,-100,0,200),i("skin_guan_yu_4",-30,0,150,-70,-20,200),i("skin_guan_yu_5",-30,0,150,-90,0,200),i("skin_guo_jia_1",-60,-30,120,-140,-60,200),i("skin_guo_jia_2",-35,0,120,-110,0,200),i("skin_guo_jia_3",-65,-20,120,-140,-40,200),i("skin_guo_jia_4",0,0,140,-40,0,150),i("skin_guo_jia_5",-50,-30,140,-100,-60,200),i("skin_he_tai_hou_1",0,0,100,-60,-10,150),i("skin_he_tai_hou_2",-30,0,140,-60,0,150),i("skin_he_tai_hou_3",-30,-30,140,-80,-50,200),i("skin_he_tai_hou_4",-50,-30,140,-130,-30,200),i("skin_he_tai_hou_5",-50,-50,140,-120,-60,200),i("skin_hua_tuo_1",-20,-40,140,-100,-60,200),i("skin_hua_tuo_2",-20,0,140,-70,-10,200),i("skin_hua_tuo_3",-20,-30,140,-80,-50,200),i("skin_hua_tuo_4",-50,0,140,-130,0,200),i("skin_hua_tuo_5",-30,0,140,-100,0,200),i("skin_huang_gai_1",-30,0,140,-100,0,200),i("skin_huang_gai_2",-30,-50,140,-120,-70,200),i("skin_huang_gai_3",-30,-20,140,-100,-50,200),i("skin_huang_gai_4",-30,-20,140,-80,-20,200),i("skin_huang_gai_5",-20,0,140,-80,-20,200),i("skin_huang_yue_ying_1",-40,-20,140,-100,-40,200),i("skin_huang_yue_ying_2",-30,-10,140,-80,-30,200),i("skin_huang_yue_ying_3",-30,0,140,-70,-10,200),i("skin_huang_yue_ying_4",-30,-20,140,-70,-40,200),i("skin_huang_yue_ying_5",-30,-10,140,-80,-20,200),i("skin_huang_zhong_1",-30,-10,140,-95,-30,200),i("skin_huang_zhong_2",-30,0,140,-95,-10,200),i("skin_huang_zhong_3",-30,0,140,-75,-20,200),i("skin_huang_zhong_4",-120,0,140,-240,-20,200),i("skin_huang_zhong_5",-70,0,140,-170,0,200),i("skin_jia_xu_1",-140,0,140,-190,-10,150),i("skin_jia_xu_2",-30,-60,140,-100,-90,200),i("skin_jia_xu_3",0,0,100,-90,-20,150),i("skin_jia_xu_4",0,0,100,-80,-20,150),i("skin_jia_xu_5",0,0,100,-60,-10,150),i("skin_jiang_wan_fei_yi_1",-50,0,100,-60,-10,150),i("skin_jiang_wan_fei_yi_2",0,0,100,-30,-10,150),i("skin_jiang_wei_1",-40,0,140,-90,-10,150),i("skin_jiang_wei_2",-40,-50,140,-130,-80,200),i("skin_jiang_wei_3",-30,-20,140,-100,-40,200),i("skin_jiang_wei_4",-30,-20,140,-140,-10,200),i("skin_jiang_wei_5",-60,0,140,-90,-10,200),i("skin_li_dian_1",-60,-10,140,-140,-30,200),i("skin_li_dian_2",-40,-20,140,-130,-30,200),i("skin_li_dian_3",-70,0,140,-160,-10,200),i("skin_li_dian_4",-80,0,200,-100,-10,200),i("skin_li_dian_5",-120,0,140,-250,-10,200),i("skin_liu_bei_1",-60,0,140,-160,-10,200),i("skin_liu_bei_2",-20,0,140,-90,0,200),i("skin_liu_bei_3",-50,0,140,-160,-20,200),i("skin_liu_bei_4",-80,-50,200,-110,-30,200),i("skin_liu_bei_5",-30,0,140,-100,-10,200),i("skin_liu_shan_1",-30,-20,140,-70,-20,150),i("skin_liu_shan_2",0,0,140,-20,0,150),i("skin_liu_shan_3",-20,0,140,-50,0,150),i("skin_liu_shan_4",0,0,100,-85,-40,150),i("skin_liu_shan_5",-80,-50,100,-50,-20,150),i("skin_lu_su_1",-40,0,140,-110,0,200),i("skin_lu_su_2",-60,0,140,-150,0,200),i("skin_lu_su_3",0,0,140,-60,0,200),i("skin_lu_su_4",0,0,140,-50,0,200),i("skin_lu_su_5",-60,-10,140,-100,-15,150),i("skin_lu_xun_1",-100,0,200,-120,0,200),i("skin_lu_xun_2",-260,-60,180,-340,-70,200),i("skin_lu_xun_3",-50,-10,180,-90,-10,200),i("skin_lu_xun_4",0,0,150,-70,-10,200),i("skin_lu_xun_5",-40,-50,150,-110,-70,200),i("skin_lv_bu_1",-120,-60,250,-100,-30,200),i("skin_lv_bu_2",-70,0,150,-100,0,150),i("skin_lv_bu_3",-50,0,150,-110,-10,200),i("skin_lv_bu_4",-100,-20,150,-200,-50,200),i("skin_lv_bu_5",-10,-10,150,-70,-30,200),i("skin_lv_meng_1",-40,-10,150,-70,-30,200),i("skin_lv_meng_2",-35,-50,150,-85,-60,200),i("skin_lv_meng_3",-25,0,150,-75,0,200),i("skin_lv_meng_4",-55,0,150,-125,-20,200),i("skin_lv_meng_5",-35,0,150,-105,0,200),i("skin_ma_chao_1",-125,0,200,-155,0,200),i("skin_ma_chao_2",-185,0,200,-225,0,200),i("skin_ma_chao_3",-65,0,150,-135,0,200),i("skin_ma_chao_4",-15,0,150,-85,-10,200),i("skin_ma_chao_5",-45,0,150,-95,-20,200),i("skin_ma_teng_1",-35,0,150,-80,-10,200),i("skin_ma_teng_2",-135,-10,150,-170,-10,150),i("skin_ma_teng_3",-75,0,150,-110,0,150),i("skin_meng_huo_1",-15,-10,150,-60,-20,200),i("skin_meng_huo_2",-15,-20,150,-60,-30,200),i("skin_meng_huo_3",-55,-30,150,-120,-60,200),i("skin_meng_huo_4",-55,-10,150,-120,-20,200),i("skin_meng_huo_5",-45,-20,150,-100,-50,200),i("skin_pan_feng_1",-45,-20,150,-100,-50,200),i("skin_pan_feng_2",-55,0,150,-70,0,150),i("skin_pan_feng_3",-185,0,150,-300,0,200),i("skin_pan_feng_4",-125,0,150,-230,-30,200),i("skin_pan_feng_5",-45,-30,150,-110,-40,200),i("skin_pang_de_1",-45,-40,150,-110,-70,200),i("skin_pang_de_2",-64,-40,150,-150,-70,200),i("skin_pang_de_3",-64,0,150,-130,0,200),i("skin_pang_de_4",-35,0,150,-110,-20,200),i("skin_pang_de_5",-35,0,150,-70,-20,200),i("skin_pang_tong_1",-95,-80,250,-80,-50,200),i("skin_pang_tong_2",-125,0,250,-100,0,200),i("skin_pang_tong_3",-110,-30,200,-120,-10,200),i("skin_pang_tong_4",-110,-60,150,-130,-60,200),i("skin_pang_tong_5",-30,0,150,-90,-20,200),i("skin_si_ma_yi_1",-30,0,150,-90,-20,200),i("skin_si_ma_yi_2",-40,0,150,-95,-30,200),i("skin_si_ma_yi_3",-40,-30,150,-75,-50,200),i("skin_si_ma_yi_4",-40,-30,150,-95,-50,200),i("skin_si_ma_yi_5",-40,0,150,-95,0,200),i("skin_sun_ce_1",-40,-30,150,-95,-50,200),i("skin_sun_ce_2",-30,-10,150,-80,-20,200),i("skin_sun_ce_3",-50,-70,150,-140,-100,200),i("skin_sun_ce_4",-50,0,150,-90,-30,200),i("skin_sun_ce_5",-160,0,200,-190,0,200),i("skin_sun_jian_1",-10,0,150,-60,-20,200),i("skin_sun_jian_2",-70,0,200,-120,-10,250),i("skin_sun_jian_3",-70,-30,200,-100,-20,200),i("skin_sun_jian_4",-130,0,150,-230,0,200),i("skin_sun_jian_5",-50,0,150,-130,0,200),i("skin_sun_quan_1",-30,-10,150,-90,-15,200),i("skin_sun_quan_2",-60,0,150,-130,0,200),i("skin_sun_quan_3",-40,0,150,-100,0,200),i("skin_sun_quan_4",-70,0,150,-150,-10,200),i("skin_sun_quan_5",-20,0,150,-70,-20,200),i("skin_sun_shang_xiang_1",-60,0,150,-110,-20,170),i("skin_sun_shang_xiang_2",-40,-10,150,-80,-20,170),i("skin_sun_shang_xiang_3",-30,0,150,-60,0,170),i("skin_sun_shang_xiang_4",-30,-10,150,-60,-10,170),i("skin_sun_shang_xiang_5",-50,-10,150,-80,0,170),i("skin_tai_shi_ci_1",-60,-10,150,-130,-20,200),i("skin_tai_shi_ci_2",-100,-10,150,-190,-50,200),i("skin_tai_shi_ci_3",-50,-10,150,-110,-40,200),i("skin_tai_shi_ci_4",-40,-10,150,-80,-40,200),i("skin_tai_shi_ci_5",-120,-10,150,-160,-20,170),i("skin_tian_feng_1",-50,0,150,-70,-20,150),i("skin_tian_feng_2",-50,0,150,-70,-20,200),i("skin_tian_feng_3",-50,-10,150,-70,-20,200),i("skin_wei_yan_1",-160,0,150,-200,0,150),i("skin_wei_yan_2",-130,-20,150,-260,-40,200),i("skin_wei_yan_3",-20,-30,150,-60,-40,200),i("skin_wei_yan_4",-50,-30,150,-120,-40,200),i("skin_wei_yan_5",-20,-30,150,-70,-40,200),i("skin_wo_long_1",-50,-20,150,-120,-40,200),i("skin_wo_long_2",-60,0,150,-130,-10,200),i("skin_wo_long_3",-30,-10,150,-90,-30,200),i("skin_wo_long_4",-80,-10,150,-150,-30,200),i("skin_wo_long_5",-120,-40,150,-160,-50,150),i("skin_xia_hou_dun_1",-50,-10,150,-80,-20,150),i("skin_xia_hou_dun_2",-50,-10,150,-110,0,150),i("skin_xia_hou_dun_3",-80,-10,150,-110,-20,150),i("skin_xia_hou_dun_4",-170,-10,150,-230,-10,150),i("skin_xia_hou_dun_5",-60,-10,150,-100,-10,150),i("skin_xia_hou_yuan_1",-30,-40,150,-40,-30,150),i("skin_xia_hou_yuan_2",-80,0,150,-150,0,150),i("skin_xia_hou_yuan_3",-80,-90,150,-110,-70,150),i("skin_xia_hou_yuan_4",-30,0,150,-50,0,150),i("skin_xia_hou_yuan_5",-70,-30,150,-110,-20,150),i("skin_xiao_qiao_1",-30,0,150,-95,-10,200),i("skin_xiao_qiao_2",-20,0,150,-25,0,150),i("skin_xiao_qiao_3",-100,-10,150,-145,-20,150),i("skin_xiao_qiao_4",-10,0,150,-30,0,150),i("skin_xiao_qiao_5",-60,0,150,-90,0,150),i("skin_xu_chu_1",-150,0,150,-210,-20,170),i("skin_xu_chu_2",-140,-10,150,-210,-20,170),i("skin_xu_chu_3",-60,-10,150,-100,-20,170),i("skin_xu_chu_4",-30,-10,150,-60,-20,170),i("skin_xu_chu_5",-140,0,150,-220,0,170),i("skin_xu_huang_1",-40,0,150,-105,-20,200),i("skin_xu_huang_2",-40,0,150,-95,-20,200),i("skin_xu_huang_3",-140,-20,150,-275,-40,200),i("skin_xu_huang_4",-30,0,150,-95,0,200),i("skin_xu_huang_5",-30,-20,150,-95,-30,200),i("skin_xu_sheng_1",-50,0,150,-115,0,200),i("skin_xu_sheng_2",-30,-20,150,-80,20,200),i("skin_xu_sheng_3",-30,-20,150,-65,-30,200),i("skin_xu_sheng_4",-90,0,150,-190,0,200),i("skin_xun_you_1",-30,-20,150,-80,-30,200),i("skin_xun_you_2",-30,-30,150,-85,-40,200),i("skin_xun_you_3",-50,-30,150,-115,-40,200),i("skin_xun_you_4",-30,0,150,-95,-10,200),i("skin_xun_you_5",-30,-50,150,-105,-70,200),i("skin_xun_yu_1",-30,0,150,-95,-20,200),i("skin_xun_yu_2",-30,0,150,-95,-20,200),i("skin_xun_yu_3",-30,-10,150,-95,-30,200),i("skin_xun_yu_4",-30,0,150,-95,-20,200),i("skin_xun_yu_5",-10,0,150,-65,-10,200),i("skin_yan_liang_wen_chou_1",-20,0,120,-25,0,100),i("skin_yan_liang_wen_chou_2",-20,-30,120,-25,0,100),i("skin_yan_liang_wen_chou_3",-20,0,120,-40,0,120),i("skin_yan_liang_wen_chou_4",-10,-10,120,-30,0,120),i("skin_yan_liang_wen_chou_5",-10,-20,120,-40,-20,120),i("skin_yuan_shao_1",0,0,120,-70,-20,200),i("skin_yuan_shao_2",0,0,120,-90,-10,200),i("skin_yuan_shao_3",-10,0,120,-75,-30,200),i("skin_yuan_shao_4",-120,0,120,-335,-40,200),i("skin_yuan_shao_5",-40,0,150,-125,0,200),i("skin_yue_jin_1",-40,-20,150,-95,-30,200),i("skin_yue_jin_2",-30,-20,150,-75,-30,200),i("skin_yue_jin_3",-10,-40,150,-35,-50,200),i("skin_yue_jin_4",-30,-20,150,-75,-30,200),i("skin_zhang_fei_1",-30,-20,150,-45,-30,200),i("skin_zhang_fei_2",-60,-50,150,-125,-90,200),i("skin_zhang_fei_3",-70,-20,150,-145,-20,200),i("skin_zhang_fei_4",-40,-10,150,-75,-20,200),i("skin_zhang_fei_5",-160,-10,150,-275,-20,200),i("skin_zhang_he_1",-160,-10,150,-285,-40,200),i("skin_zhang_he_2",-60,-40,150,-115,-50,200),i("skin_zhang_he_3",-150,-10,150,-295,-30,200),i("skin_zhang_he_4",-60,-20,150,-150,-30,200),i("skin_zhang_he_5",-60,0,150,-120,-20,200),i("skin_zhang_jiao_1",-160,0,150,-230,-20,170),i("skin_zhang_jiao_2",-110,-110,250,-90,-70,200),i("skin_zhang_jiao_3",-40,-10,150,-80,-20,200),i("skin_zhang_jiao_4",-60,-40,150,-120,-60,200),i("skin_zhang_jiao_5",-60,-40,150,-120,-60,200),i("skin_zhang_liao_1",-10,0,150,-50,-10,200),i("skin_zhang_liao_2",-50,0,150,-80,-10,200),i("skin_zhang_liao_3",-130,0,150,-230,-20,200),i("skin_zhang_liao_4",-180,-30,150,-290,-40,200),i("skin_zhang_liao_5",-180,0,150,-330,-10,200),i("skin_zhang_xiu_1",-140,0,150,-250,-10,200),i("skin_zhang_xiu_2",-80,-20,150,-160,-50,200),i("skin_zhang_xiu_3",-60,-20,150,-140,-50,200),i("skin_zhang_xiu_4",-120,-20,150,-230,-30,200),i("skin_zhao_yun_1",-50,0,150,-110,-10,200),i("skin_zhao_yun_2",-150,-20,150,-270,-50,200),i("skin_zhao_yun_3",-50,0,150,-110,-10,200),i("skin_zhao_yun_4",-70,0,150,-130,-15,200),i("skin_zhao_yun_5",-130,-20,150,-240,-45,200),i("skin_zhen_ji_1",-60,-20,150,-90,-15,200),i("skin_zhen_ji_2",-60,0,150,-140,-15,200),i("skin_zhen_ji_3",-40,-20,150,-80,-30,200),i("skin_zhen_ji_4",-40,-40,150,-90,-50,200),i("skin_zhen_ji_5",-10,-10,150,-40,-20,200),i("skin_zhou_tai_1",-30,0,150,-80,0,200),i("skin_zhou_tai_2",-10,-10,150,-50,-20,200),i("skin_zhou_tai_3",-150,-10,150,-300,-30,200),i("skin_zhou_tai_4",-50,-30,150,-70,-50,200),i("skin_zhou_tai_5",-50,-30,150,-70,-50,200),i("skin_zhou_yu_1",0,-60,150,-50,-80,200),i("skin_zhou_yu_2",-30,-10,150,-90,-20,200),i("skin_zhou_yu_3",-30,0,150,-90,0,200),i("skin_zhou_yu_4",-30,0,150,-90,0,200),i("skin_zhou_yu_5",-60,0,100,-190,0,150),i("skin_zhu_ge_liang_1",-30,0,150,-70,-10,200),i("skin_zhu_ge_liang_2",-90,0,150,-190,0,200),i("skin_zhu_ge_liang_3",-150,0,150,-250,-10,200),i("skin_zhu_ge_liang_4",-50,0,150,-120,-10,200),i("skin_zhu_ge_liang_5",-70,0,200,-125,0,250),i("skin_zhu_rong_1",-70,0,200,-90,0,200),i("skin_zhu_rong_2",-100,-40,200,-130,-30,200),i("skin_zhu_rong_3",-50,-10,170,-90,-20,200),i("skin_zhu_rong_4",-150,-10,170,-270,-10,200),i("skin_zhu_rong_5",-210,-10,170,-330,-10,200),i("skin_zu_shou_1",-80,-20,170,-130,-20,200),i("skin_zu_shou_2",-70,0,170,-110,-10,200),i("skin_zu_shou_3",-90,0,170,-120,-15,200),i("skin_zu_shou_4",-50,0,170,-105,-15,200)},1658:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generalPairs=t.FactionWarGeneral=t.DUMMY_GENERAL_NAME=t.allGenerals=void 0,t.hasSub=function(e){return e.isRevealed()&&(!e.isSubGeneralRevealed||e.subGeneral.name!==t.DUMMY_GENERAL_NAME)};const r=n(1633),i=n(1449);t.allGenerals=new Map,t.DUMMY_GENERAL_NAME="士兵";class FactionWarGeneral extends r.General{constructor(e,n,r,i,...a){super(e,n,r,i,a),this.hpAsMainDelta=0,this.hpAsSubDelta=0,this.nameForCardsOnMe="未知",this.id&&"guo_soldier_female"!==e&&"guo_soldier_male"!==e&&t.allGenerals.set(e,this)}hpDelta(e,t){return this.hpAsMainDelta=e,this.hpAsSubDelta=t,this}resolveHp(e){return this.hp+(e?this.hpAsMainDelta:this.hpAsSubDelta)}setCardName(e){return this.nameForCardsOnMe=e,this}}t.FactionWarGeneral=FactionWarGeneral,FactionWarGeneral.soldier_male=new FactionWarGeneral("guo_soldier_male",t.DUMMY_GENERAL_NAME,r.Faction.UNKNOWN,0).withSkin(0),FactionWarGeneral.soldier_female=new FactionWarGeneral("guo_soldier_female",t.DUMMY_GENERAL_NAME,r.Faction.UNKNOWN,0).withSkin(0),FactionWarGeneral.cao_cao=new FactionWarGeneral("standard_cao_cao","曹操",r.Faction.WEI,2.5,"奸雄"),FactionWarGeneral.si_ma_yi=new FactionWarGeneral("standard_si_ma_yi","司马懿",r.Faction.WEI,1.5,"反馈","鬼才"),FactionWarGeneral.xia_hou_dun=new FactionWarGeneral("standard_xia_hou_dun","夏侯惇",r.Faction.WEI,2,"刚烈"),FactionWarGeneral.zhang_liao=new FactionWarGeneral("standard_zhang_liao","张辽",r.Faction.WEI,2,"突袭"),FactionWarGeneral.xu_chu=new FactionWarGeneral("standard_xu_chu","许褚",r.Faction.WEI,2,"裸衣"),FactionWarGeneral.guo_jia=new FactionWarGeneral("standard_guo_jia","郭嘉",r.Faction.WEI,1.5,"天妒","遗计"),FactionWarGeneral.zhen_ji=new FactionWarGeneral("standard_zhen_ji","甄姬",r.Faction.WEI,1.5,"洛神","倾国").asFemale(),FactionWarGeneral.xia_hou_yuan=new FactionWarGeneral("wind_xia_hou_yuan","夏侯渊",r.Faction.WEI,2,"神速"),FactionWarGeneral.xu_huang=new FactionWarGeneral("forest_xu_huang","徐晃",r.Faction.WEI,2,"断粮"),FactionWarGeneral.dian_wei=new FactionWarGeneral("fire_dian_wei","典韦",r.Faction.WEI,2,"强袭"),FactionWarGeneral.cao_ren=new FactionWarGeneral("wind_cao_ren","曹仁",r.Faction.WEI,2,"据守").withSkin(4),FactionWarGeneral.xun_yu=new FactionWarGeneral("fire_xun_yu","荀彧",r.Faction.WEI,1.5,"驱虎","节命"),FactionWarGeneral.cao_pi=new FactionWarGeneral("guo_cao_pi","曹丕",r.Faction.WEI,1.5,"行殇","放逐"),FactionWarGeneral.yue_jin=new FactionWarGeneral("guo_yue_jin","乐进",r.Faction.WEI,2,"骁果"),FactionWarGeneral.zhang_he=new FactionWarGeneral("mountain_zhang_he","张郃",r.Faction.WEI,2,"巧变"),FactionWarGeneral.deng_ai=new FactionWarGeneral("mountain_deng_ai","邓艾",r.Faction.WEI,2,"屯田","资粮","急袭").hpDelta(-.5,0).setCardName("田"),FactionWarGeneral.li_dian=new FactionWarGeneral("bound_li_dian","李典",r.Faction.WEI,1.5,"恂恂","忘隙"),FactionWarGeneral.zang_ba=new FactionWarGeneral("guo_zang_ba","臧霸",r.Faction.WEI,2,"横江").withSkin(0),FactionWarGeneral.liu_bei=new FactionWarGeneral("standard_liu_bei","刘备",r.Faction.SHU,2,"仁德"),FactionWarGeneral.guan_yu=new FactionWarGeneral("standard_guan_yu","关羽",r.Faction.SHU,2.5,"武圣"),FactionWarGeneral.zhang_fei=new FactionWarGeneral("standard_zhang_fei","张飞",r.Faction.SHU,2,"咆哮"),FactionWarGeneral.zhao_yun=new FactionWarGeneral("standard_zhao_yun","赵云",r.Faction.SHU,2,"龙胆"),FactionWarGeneral.ma_chao=new FactionWarGeneral("standard_ma_chao","马超",r.Faction.SHU,2,"马术","铁骑"),FactionWarGeneral.huang_zhong=new FactionWarGeneral("standard_huang_zhong","黄忠",r.Faction.SHU,2,"烈弓"),FactionWarGeneral.wei_yan=new FactionWarGeneral("wind_wei_yan","魏延",r.Faction.SHU,2,"狂骨"),FactionWarGeneral.wo_long=new FactionWarGeneral("fire_wo_long","诸葛亮",r.Faction.SHU,1.5,"八阵","火计","看破"),FactionWarGeneral.sha_mo_ke=new FactionWarGeneral("guo_sha_mo_ke","沙摩柯",r.Faction.SHU,2,"蒺藜").withSkin(0),FactionWarGeneral.liu_shan=new FactionWarGeneral("mountain_liu_shan","刘禅",r.Faction.SHU,1.5,"享乐","放权"),FactionWarGeneral.huang_yue_ying=new FactionWarGeneral("standard_huang_yue_ying","黄月英",r.Faction.SHU,1.5,"集智","奇才").asFemale(),FactionWarGeneral.meng_huo=new FactionWarGeneral("forest_meng_huo","孟获",r.Faction.SHU,2,"祸首","再起"),FactionWarGeneral.zhu_rong=new FactionWarGeneral("forest_zhu_rong","祝融",r.Faction.SHU,2,"巨象","烈刃").asFemale(),FactionWarGeneral.pang_tong=new FactionWarGeneral("fire_pang_tong","庞统",r.Faction.SHU,1.5,"连环","涅槃"),FactionWarGeneral.gan_fu_ren=new FactionWarGeneral("guo_gan_fu_ren","甘夫人",r.Faction.SHU,1.5,"淑慎","神智").asFemale(),FactionWarGeneral.jiang_wan_fei_yi=new FactionWarGeneral("guo_jiang_wan_fei_yi","蒋琬费祎",r.Faction.SHU,1.5,"生息","守成").withSkin(2),FactionWarGeneral.zhu_ge_liang=new FactionWarGeneral("standard_zhu_ge_liang","诸葛亮",r.Faction.SHU,1.5,"观星","空城"),FactionWarGeneral.jiang_wei=new FactionWarGeneral("mountain_jiang_wei","姜维",r.Faction.SHU,2,"挑衅","遗志","天覆").hpDelta(0,-.5),FactionWarGeneral.sun_quan=new FactionWarGeneral("standard_sun_quan","孙权",r.Faction.WU,2,"制衡"),FactionWarGeneral.gan_ning=new FactionWarGeneral("standard_gan_ning","甘宁",r.Faction.WU,2,"奇袭"),FactionWarGeneral.huang_gai=new FactionWarGeneral("standard_huang_gai","黄盖",r.Faction.WU,2,"苦肉"),FactionWarGeneral.tai_shi_ci=new FactionWarGeneral("fire_tai_shi_ci","太史慈",r.Faction.WU,2,"天义"),FactionWarGeneral.lu_xun=new FactionWarGeneral("standard_lu_xun","陆逊",r.Faction.WU,1.5,"谦逊","度势"),FactionWarGeneral.sun_shang_xiang=new FactionWarGeneral("standard_sun_shang_xiang","孙尚香",r.Faction.WU,1.5,"枭姬","结姻").asFemale(),FactionWarGeneral.er_zhang=new FactionWarGeneral("mountain_er_zhang","张昭张纮",r.Faction.WU,1.5,"直谏","固政"),FactionWarGeneral.zhou_yu=new FactionWarGeneral("standard_zhou_yu","周瑜",r.Faction.WU,1.5,"英姿","反间"),FactionWarGeneral.da_qiao=new FactionWarGeneral("standard_da_qiao","大乔",r.Faction.WU,1.5,"国色","流离").asFemale(),FactionWarGeneral.sun_jian=new FactionWarGeneral("forest_sun_jian","孙坚",r.Faction.WU,2.5,"英魂"),FactionWarGeneral.xiao_qiao=new FactionWarGeneral("wind_xiao_qiao","小乔",r.Faction.WU,1.5,"天香","红颜").asFemale(),FactionWarGeneral.lu_su=new FactionWarGeneral("forest_lu_su","鲁肃",r.Faction.WU,1.5,"好施","缔盟"),FactionWarGeneral.xu_sheng=new FactionWarGeneral("fame_xu_sheng","徐盛",r.Faction.WU,2,"疑城").withSkin(4),FactionWarGeneral.lv_meng=new FactionWarGeneral("standard_lv_meng","吕蒙",r.Faction.WU,2,"克己","谋断"),FactionWarGeneral.chen_wu_dong_xi=new FactionWarGeneral("guo_chen_wu_dong_xi","陈武董袭",r.Faction.WU,2,"断绁","奋命").withSkin(2),FactionWarGeneral.zhou_tai=new FactionWarGeneral("wind_zhou_tai","周泰",r.Faction.WU,2,"不屈","奋激").setCardName("创"),FactionWarGeneral.sun_ce=new FactionWarGeneral("guo_sun_ce","孙策",r.Faction.WU,2,"激昂","鹰扬","魂殇").hpDelta(0,-.5),FactionWarGeneral.lv_fan=new FactionWarGeneral("guo_lv_fan","吕范",r.Faction.WU,1.5,"调度","典财").withSkin(0),FactionWarGeneral.hua_tuo=new FactionWarGeneral("standard_hua_tuo","华佗",r.Faction.QUN,1.5,"除疠","急救"),FactionWarGeneral.lv_bu=new FactionWarGeneral("standard_lv_bu","吕布",r.Faction.QUN,2.5,"无双"),FactionWarGeneral.diao_chan=new FactionWarGeneral("standard_diao_chan","貂蝉",r.Faction.QUN,1.5,"闭月","离间").asFemale(),FactionWarGeneral.yan_liang_wen_chou=new FactionWarGeneral("fire_yan_liang_wen_chou","颜良文丑",r.Faction.QUN,2,"双雄"),FactionWarGeneral.jia_xu=new FactionWarGeneral("forest_jia_xu","贾诩",r.Faction.QUN,1.5,"完杀","乱武","帷幕"),FactionWarGeneral.he_tai_hou=new FactionWarGeneral("guo_he_tai_hou","何太后",r.Faction.QUN,1.5,"鸩毒","戚乱").asFemale(),FactionWarGeneral.zhang_xiu=new FactionWarGeneral("guo_zhang_xiu","张绣",r.Faction.QUN,2,"附敌","从谏"),FactionWarGeneral.pang_de=new FactionWarGeneral("fire_pang_de","庞德",r.Faction.QUN,2,"马术(庞)","鞬出"),FactionWarGeneral.ma_teng=new FactionWarGeneral("guo_ma_teng","马腾",r.Faction.QUN,2,"马术(腾)","雄异").withSkin(3),FactionWarGeneral.zhang_jiao=new FactionWarGeneral("wind_zhang_jiao","张角",r.Faction.QUN,1.5,"雷击","鬼道"),FactionWarGeneral.yuan_shao=new FactionWarGeneral("fire_yuan_shao","袁绍",r.Faction.QUN,2,"乱击"),FactionWarGeneral.tian_feng=new FactionWarGeneral("guo_tian_feng","田丰",r.Faction.QUN,1.5,"死谏","随势").withSkin(3),FactionWarGeneral.li_jue_guo_si=new FactionWarGeneral("guo_li_jue_guo_si","李傕郭汜",r.Faction.QUN,2,"凶算").withSkin(0),FactionWarGeneral.pan_feng=new FactionWarGeneral("guo_pan_feng","潘凤",r.Faction.QUN,2,"狂斧"),FactionWarGeneral.cai_wen_ji=new FactionWarGeneral("mountain_cai_wen_ji","蔡文姬",r.Faction.QUN,1.5,"悲歌","断肠").asFemale(),FactionWarGeneral.dong_zhuo=new FactionWarGeneral("forest_dong_zhuo","董卓",r.Faction.QUN,2,"横征","暴凌","崩坏"),FactionWarGeneral.zhang_ren=new FactionWarGeneral("guo_zhang_ren","张任",r.Faction.QUN,2,"穿心","锋矢").withSkin(0),FactionWarGeneral.kong_rong=new FactionWarGeneral("guo_kong_rong","孔融",r.Faction.QUN,1.5,"名士","礼让").withSkin(0),FactionWarGeneral.ji_ling=new FactionWarGeneral("guo_ji_ling","纪灵",r.Faction.QUN,2,"双刃").withSkin(0),FactionWarGeneral.yu_ji=new FactionWarGeneral("wind_yu_ji","于吉",r.Faction.QUN,1.5,"千幻").withSkin(0).setCardName("幻"),t.generalPairs=new i.Pairs,t.generalPairs.registerPair("刘备","甘夫人"),t.generalPairs.registerPair("刘备","关羽"),t.generalPairs.registerPair("刘备","张飞"),t.generalPairs.registerPair("刘备","法正"),t.generalPairs.registerPair("赵云","刘禅"),t.generalPairs.registerPair("诸葛亮","黄月英"),t.generalPairs.registerPair("诸葛亮","庞统"),t.generalPairs.registerPair("魏延","黄忠"),t.generalPairs.registerPair("孟获","祝融"),t.generalPairs.registerPair("马超","马岱"),t.generalPairs.registerPair("曹操","许褚"),t.generalPairs.registerPair("曹操","典韦"),t.generalPairs.registerPair("曹操","卞夫人"),t.generalPairs.registerPair("曹操","郭嘉"),t.generalPairs.registerPair("夏侯惇","夏侯渊"),t.generalPairs.registerPair("李典","乐进"),t.generalPairs.registerPair("臧霸","张辽"),t.generalPairs.registerPair("荀彧","荀攸"),t.generalPairs.registerPair("曹丕","甄姬"),t.generalPairs.registerPair("曹仁","曹洪"),t.generalPairs.registerPair("孙策","大乔"),t.generalPairs.registerPair("孙策","周瑜"),t.generalPairs.registerPair("孙权","太史慈"),t.generalPairs.registerPair("孙权","周泰"),t.generalPairs.registerPair("周瑜","黄盖"),t.generalPairs.registerPair("周瑜","小乔"),t.generalPairs.registerPair("大乔","小乔"),t.generalPairs.registerPair("徐盛","丁奉"),t.generalPairs.registerPair("蒋钦","周泰"),t.generalPairs.registerPair("吕布","貂蝉"),t.generalPairs.registerPair("袁绍","颜良文丑"),t.generalPairs.registerPair("凌统","甘宁"),t.generalPairs.registerPair("贾诩","李傕郭汜"),t.generalPairs.registerPair("贾诩","邹氏"),t.generalPairs.registerPair("贾诩","张绣")},9577:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{l(r.next(e))}catch(e){a(e)}}function s(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.RevealPlayerEvent=t.RemoveGeneralEvent=t.RevealGeneralEvent=void 0;const i=n(9575),a=n(1073),o=n(3402),s=n(739),l=n(1480),d=n(8411),u=n(1633),c=n(5935),p=n(1131),h=n(8636),f=n(2608),g=n(129),y=n(1658),m=n(1802);class RevealGeneralEvent{constructor(e,t,n){this.playerId=e,this.mainReveal=t,this.subReveal=n}}t.RevealGeneralEvent=RevealGeneralEvent;t.RemoveGeneralEvent=class RemoveGeneralEvent{constructor(e,t){this.playerId=e,this.isMain=t}};class RevealPlayerEvent{constructor(e){this.player=e}}t.RevealPlayerEvent=RevealPlayerEvent;t.default=class FactionWarInitializer{init(e){(0,g.default)(e),e.adminRegistry.onGeneral(d.StageStartFlow,(t=>r(this,void 0,void 0,(function*(){if(t.stage!==c.Stage.ROUND_BEGIN)return;let n=t.info,r=[];if(n.isGeneralRevealed||r.push(new l.Button("general","明置主将")),n.isSubGeneralRevealed||r.push(new l.Button("subgeneral","明置副将")),n.isGeneralRevealed||n.isSubGeneralRevealed||r.push(new l.Button("all","全部明置")),0===r.length)return;let i=yield e.sendHint(n.player.id,{hintType:s.HintType.MULTI_CHOICE,hintMsg:"回合开始, 你是否要明置武将?",extraButtons:[...r,l.Button.CANCEL]});if(i.isCancel())return;let a=i.button;if("general"===a)yield e.events.publish(new RevealGeneralEvent(n.player.id,!0,!1));else if("subgeneral"===a)yield e.events.publish(new RevealGeneralEvent(n.player.id,!1,!0));else{if("all"!==a)throw"Unknown option "+a;yield e.events.publish(new RevealGeneralEvent(n.player.id,!0,!0))}})))),e.adminRegistry.onGeneral(RevealGeneralEvent,(t=>r(this,void 0,void 0,(function*(){console.log("[牌局] 明置武将 ",t.playerId,t.mainReveal,t.subReveal);let n=e.context.getPlayer(t.playerId),r=n.isRevealed();if(n.isGeneralRevealed=n.isGeneralRevealed||t.mainReveal,n.isSubGeneralRevealed=n.isSubGeneralRevealed||t.subReveal,n.isGeneralRevealed&&n.isSubGeneralRevealed){y.generalPairs.isPaired(n.general.name,n.subGeneral.name)&&(n.signs["珠"]?console.error("已经有了珠联璧合了，咋回事？？",n,t):n.signs["珠"]={displayName:"珠联璧合",enabled:!0,owner:"player",type:"usable-sign"});let e=n.general.resolveHp(!0),r=n.subGeneral.resolveHp(!1);1===Math.round(2*(e+r-Math.floor(r+e)))&&(n.signs["鱼"]?console.error("已经有了阴阳鱼了，咋回事？？",n,t):n.signs["鱼"]={displayName:"阴阳鱼",enabled:!0,owner:"player",type:"usable-sign"})}let i=n.isRevealed();!r&&i&&(yield e.events.publish(new RevealPlayerEvent(n))),e.broadcast(n,o.PlayerInfo.sanitize),e.log(`${n.player.id} 明置 ${t.mainReveal?"主将"+n.general.name:""} ${t.subReveal?"副将"+n.subGeneral.name:""}`),this.checkGameEndingCondition(e.context.playerInfos.filter((e=>!e.isDead)),e)})))),e.adminRegistry.onGeneral(p.default,(t=>r(this,void 0,void 0,(function*(){let n=t.deceased,r=t.killer;if(t.timeline===p.DeathTimeline.AFTER_REVEAL)return n.isRevealed()||(console.log(`[牌局] ${n.player.id} 未亮明身份, 强行翻开`),n.isDead=!0,n.isGeneralRevealed=!0,n.isSubGeneralRevealed=!0,this.computeFactionForPlayer(n,e)),void this.checkGameEndingCondition(e.getSortedByCurr(!0).filter((e=>e.player.id!==n.player.id)),e);if(t.timeline===p.DeathTimeline.AFTER_DEATH)if(r)if(r.isRevealed())if(r.getFaction()===u.Faction.YE)console.log(`[牌局] ${r.player.id} 野人杀人拿三张`),yield new f.default(r,3).perform(e);else if((0,u.factionsSame)(r.getFaction(),n.getFaction())){console.log(`[牌局] ${r.player.id} 杀死了阵营相同的 ${n.player.id} 弃置所有牌`);let t=r.getCards(a.CardPos.EQUIP).map((e=>(e.description=`${r.player.id} 杀害队友被弃置`,e)));e.sendToWorkflow(r.player.id,a.CardPos.EQUIP,t),yield e.events.publish(new i.CardBeingDroppedEvent(r.player.id,t.map((e=>[e,a.CardPos.EQUIP]))));let o=r.getCards(a.CardPos.HAND).map((e=>(e.description=`${r.player.id} 杀害队友被弃置`,e)));e.sendToWorkflow(r.player.id,a.CardPos.HAND,o),yield e.events.publish(new i.CardBeingDroppedEvent(r.player.id,o.map((e=>[e,a.CardPos.HAND]))))}else{let t=e.getSortedByCurr(!0).filter((e=>e!==n)).filter((e=>(0,u.factionsSame)(e.getFaction(),n.getFaction()))).length+1;console.log(`[牌局] ${r.player.id} 杀死了阵营不同的 ${n.player.id} 获得 ${t} 张牌`),yield new f.default(r,t).perform(e)}else console.log(`[牌局] ${r.player.id} 未亮明身份不来奖惩`);else console.log("[牌局] 天谴死亡, 不计奖惩...")}))));let t=!0;e.adminRegistry.onGeneral(RevealPlayerEvent,(n=>r(this,void 0,void 0,(function*(){t&&e.context.playerInfos.length>5&&(t=!1,n.player.signs["先"]={displayName:"先驱",enabled:!0,owner:"player",type:"usable-sign"}),this.computeFactionForPlayer(n.player,e)})))),e.adminRegistry.onGeneral(m.default,(t=>r(this,void 0,void 0,(function*(){if(t.timeline===m.DropTimeline.BEFORE&&t.player.signs["鱼"]&&t.limit<t.player.getCards(a.CardPos.HAND).length){(yield e.sendHint(t.player.player.id,{hintType:s.HintType.MULTI_CHOICE,hintMsg:"是否弃置阴阳鱼标记使本回合弃牌阶段手牌上限+2?",extraButtons:[l.Button.OK,l.Button.CANCEL]})).isCancel()||(e.log(`${t.player} 弃置阴阳鱼标记使手牌上限+2`),t.limit+=2,console.log("[鱼] 改变手牌上限为",t.limit),delete t.player.signs["鱼"],e.broadcast(t.player,o.PlayerInfo.sanitize))}}))))}computeFactionForPlayer(e,t){console.log(`[牌局] ${e.player.id} 身份亮明`),t.context.playerInfos.filter((t=>t.getFaction().name===e.getFaction().name)).length>t.context.playerInfos.length/2&&(console.log(`[牌局] ${e.player.id} 野了`),e.faction=u.Faction.YE),t.broadcast(e,o.PlayerInfo.sanitize)}checkAoZhan(e){let t=e.getSortedByCurr(!0);if(t.length<=4){let e=new Set;for(let n of t){let t=n.getFaction();if(e.has(t)&&t.name!==u.Faction.YE.name&&t.name!==u.Faction.UNKNOWN.name)return!1;e.add(t)}}return!0}checkGameEndingCondition(e,t){if(1===e.length)console.log("[牌局] 只剩一人了!"),e[0].isRevealed()||(e[0].isGeneralRevealed=!0,e[0].isSubGeneralRevealed=!0,this.computeFactionForPlayer(e[0],t)),this.declareWinners(e[0],t);else{let n;for(let t of e){if(t.getFaction()===u.Faction.UNKNOWN||t.getFaction()===u.Faction.YE)return void console.log("[牌局] 尚有人野/未亮明, 不能结束游戏");if(n&&n!==t.getFaction())return void console.log("[牌局] 尚有人势力相同, 不能结束游戏");n=t.getFaction()}this.declareWinners(e[0],t)}}declareWinners(e,t){console.log("[牌局] 胜利条件达到, 计算胜利者!");let n=e.getFaction();throw n===u.Faction.UNKNOWN?"How????":n===u.Faction.YE?new h.default([e.player.id]):new h.default(t.context.playerInfos.filter((e=>e.getFaction()===n)).map((e=>e.player.id)))}}},1764:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){let[e,t]=r.useState("选将与势力");return r.createElement("div",{className:"rule-book"},r.createElement("div",{className:"rule-col"},Object.keys(i).map((n=>r.createElement("div",{key:n,className:n===e?"rule-item active":"rule-item",onClick:()=>t(n)},n+">")))),r.createElement("div",{className:"rule-content"},i[e]))};const r=n(6540),i={选将与势力:r.createElement("div",null,r.createElement("p",null,"游戏开始时,每位玩家需要从至多七张武将牌中选出两张势力相同的作为自己的武将牌"),r.createElement("p",null,"两张武将牌分为主将和副将。游戏开始时两张武将牌均为暗置，其他玩家不可见。玩家的血量为这两张武将牌标记血量之和（向下取整。多出来的半血会在玩家明置双将时作为阴阳鱼标记给予玩家）"),r.createElement("p",null,"暗置的武将没有势力，性别和技能，需要明置势力或性别的技能无法发动（例：貂蝉离间，雌雄双股剑，锦囊牌远交近攻）"),r.createElement("p",null,"若玩家已明置武将，其角色性别取决于主将的性别。若主将未明置则取决于副将的性别"),r.createElement("p",null,"玩家任何武将明置时确定势力。若明置后你的势力超过了全部玩家的半数，则你的势力变为“野心家”"),r.createElement("p",null,"特殊的武将技能取决于其位置，例如董卓，邓艾，姜维")),胜利条件与击杀奖惩:r.createElement("div",null,r.createElement("p",null,"击杀所有其他势力与你不同的玩家即可获得胜利。每个野心家单独为一股势力，不与其他野心家为盟友，所以野心家需要最终击杀其他所有人来获得胜利"),r.createElement("p",null,"被击杀的角色若为暗置，则强制验明身份以确认势力"),r.createElement("p",null,"即使你的角色死亡，只要你的势力最终获得了胜利，你依然是胜利者"),r.createElement("p",null,"击杀奖惩："),r.createElement("ul",null,r.createElement("li",null,"只有明置了武将牌确认了势力的人才计算奖惩。若你击杀其他角色时仍为暗置，则不计任何奖惩"),r.createElement("li",null,"野心家击杀任何人均获得3张手牌"),r.createElement("li",null,"击杀势力与你不同的人则你获得对方势力人数相同的手牌（包含击杀对象）"),r.createElement("li",null,"击杀势力与你相同的人则你弃置所有牌（先弃置所有装备，再弃置所有手牌）"))),明置武将的条件:r.createElement("div",null,r.createElement("p",null,"每个玩家在开始自己的回合前可以明置自己主将/副将"),r.createElement("ul",null,r.createElement("li",null,"主动技能（如关羽‘武圣’，贾诩‘乱武’）在发动的时候会自动明置相关武将"),r.createElement("li",null,"特殊技能可以在出牌阶段主动明置武将（如‘马术’）"),r.createElement("li",null,"被动技能需要在事件触发前设置预亮（点击技能按钮至闪烁状态），则可在满足技能发动条件时获得提示，否则无法发动技能也不能明置武将。",r.createElement("br",null),"例：郭嘉‘遗计’若未预亮，则在受到伤害时无法发动"),r.createElement("li",null,"注: 预亮功能是为了防止暴露你暗置的武将技能，例如张角的鬼道改判定"))),标记:r.createElement("div",null,r.createElement("p",null,"玩家可能有如下标记:"),r.createElement("p",null,"限定技标记: 用来明示玩家是否能够发动限定技"),r.createElement("p",null,"国战标记: 共有三种"),r.createElement("ul",null,r.createElement("li",null,"先驱: 当有五名以上的玩家时，第一个明确势力的玩家获得此标记。 出牌阶段时，你可以弃置标记，将手牌补至4张并观看一个暗置的武将牌。"),r.createElement("li",null,"阴阳鱼: 你的武将牌血量若有多余的半血阴阳鱼，则在你首次明置两张武将牌时获得此标记。 你可以：1.出牌阶段时，弃置标记摸一张牌。 2.弃牌阶段弃置标记令手牌上限+2。"),r.createElement("li",null,"珠联璧合: 若你选择了特殊的武将组合(如夏侯渊+夏侯惇)，则在你首次明置两张武将牌时获得此标记。 你可以：1.出牌阶段或其他角色濒死时可以弃置此标记，视为使用一张桃 2.出牌阶段可以弃置此标记，摸2张牌。"))),阵法:r.createElement("div",null,r.createElement("p",null,"阵法技: 在全场存活角色数至少为4时锁定生效的技能。拥有阵法技的角色可在准备阶段或者出牌阶段发起‘阵法召唤’"),r.createElement("p",null,"阵法召唤: 由拥有阵法技的角色发起，满足阵法技条件的未明确势力（即未明置武将）的玩家可顺序依次明置一张武将牌（响应阵法召唤），以发挥阵法技的效果"),r.createElement("p",null,"相邻: 两名角色之间没有其他存活的角色，视为‘相邻’"),r.createElement("p",null,"围攻: 一名角色的上家和下家为另外两名势力相同的角色（且与该角色势力不同）时，该角色被“围攻”，称为“被围攻角色”；该角色的上家和下家称为“围攻角色”；“围攻角色”和“被围攻角色”处于同一“围攻关系”。"),r.createElement("p",null,"队列：连续相邻的若干名（至少2名）势力相同的角色称为同一“队列”。"))}},801:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{l(r.next(e))}catch(e){a(e)}}function s(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.getNumberOfFactions=function(e){let t=e.getSortedByCurr(!0).filter((e=>e.isRevealed())),n=0,r=new Set;return t.forEach((e=>{if(e.getFaction()===i.Faction.UNKNOWN)throw"Not possible!!";e.getFaction()===i.Faction.YE?n++:r.add(e.getFaction().name)})),r.size+n},t.getFactionMembers=d,t.getFactionsWithLeastMembers=function(e){let t=d(e),n=999,r=new Set;if(t.forEach(((e,t)=>{let a=t===i.Faction.YE?1:e.size;a<n?(n=a,r=new Set([t])):a===n&&r.add(t)})),0===r.size)throw"Unable to determine faction with least members: "+t;return r},t.canSurrender=function(e,t){if(!t)return!1;let n=t.playerInfos.filter((e=>!e.isDead));if(n.length<=2)return!0;let r=new Set;for(let t of n){if(!t.isRevealed())return!1;t.player.id!==e&&r.add(t.getFaction())}return 1===r.size},t.askAbandonBasicCard=function(e,t,n,i){return r(this,void 0,void 0,(function*(){let r=t.getCards(s.CardPos.HAND).filter((e=>!e.type.isBasic())).map((e=>e.id)),l=yield e.sendHint(t.player.id,{hintType:a.HintType.CHOOSE_CARD,hintMsg:n,positions:[o.UIPosition.MY_HAND],minQuantity:1,quantity:1,forbidden:r,extraButtons:i?[o.Button.CANCEL]:[]});return!l.isCancel()&&(yield l.dropCardsFromSource(t+" 弃置"),!0)}))},t.askAbandonEquip=function(e,t,n,i){return r(this,void 0,void 0,(function*(){let r=t.getCards(s.CardPos.HAND).filter((e=>!e.type.isEquipment())).map((e=>e.id)),l=yield e.sendHint(t.player.id,{hintType:a.HintType.CHOOSE_CARD,hintMsg:n,positions:[o.UIPosition.MY_EQUIP,o.UIPosition.MY_HAND],minQuantity:1,quantity:1,forbidden:r,extraButtons:i?[o.Button.CANCEL]:[]});return!l.isCancel()&&(yield l.dropCardsFromSource(t.player.id+" 弃置"),!0)}))},t.getFactionIfRevealNow=function(e,t){let n=e;if(n.isRevealed())return n.getFaction();if(t.context.playerInfos.filter((e=>e.player.id!==n.player.id&&e.getFaction().name===n.getFaction().name)).length+1>t.context.playerInfos.length/2)return i.Faction.YE;return n.general.faction};const i=n(1633),a=n(739),o=n(1480),s=n(1073),l=n(1449);function d(e){let t=e.getSortedByCurr(!0).filter((e=>e.isRevealed())),n=new l.Multimap;return t.forEach((e=>{if(e.getFaction()===i.Faction.UNKNOWN)throw"Not possible!!";n.set(e.getFaction(),e)})),n}},8696:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{l(r.next(e))}catch(e){a(e)}}function s(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.areNeighbor=function(e,t,n){let r=n.playerInfos.filter((e=>!e.isDead)).findIndex((t=>t.player.id===e)),i=n.playerInfos.filter((e=>!e.isDead)).findIndex((e=>e.player.id===t));return 1===Math.abs(r-i)},t.areInFormation=function(e,t,n){if(e===t)return!1;let r=n.cursor(e),a=r.get(),o=0;do{if(r.up(),r.get().player.id===t)return!0;o++}while((0,i.factionsSame)(r.get().getFaction(),a.getFaction())&&o<50);let s=n.cursor(e);do{if(s.down(),s.get().player.id===t)return!0;o++}while((0,i.factionsSame)(s.get().getFaction(),a.getFaction())&&o<50);o>=50&&console.error("Infinite Loop? ",e,t,n.playerInfos.map((e=>[e.player.id,e.getFaction().name])));return!1},t.getSiegeContext=function(e,t,n){let r=n.cursor(e),a=r.get(),o=r.up().get(),s=r.down().down().get();if(t!==o.player.id&&t!==s.player.id)return null;if((0,i.factionsSame)(o.getFaction(),s.getFaction())&&o!==s&&(0,i.factionDiffers)(o.getFaction(),a.getFaction()))return{siegers:[o.player.id,s.player.id],victim:e};return null},t.hasGeneral=function(e,t){return t?e.general!==s.FactionWarGeneral.soldier_male&&e.general!==s.FactionWarGeneral.soldier_female:e.subGeneral!==s.FactionWarGeneral.soldier_male&&e.subGeneral!==s.FactionWarGeneral.soldier_female},t.removeGeneral=function(e,t,n,i){return r(this,void 0,void 0,(function*(){let r=e.context.getPlayer(n),d=i?"main":"sub";for(let n of t.getSkills(r.player.id))n.position===d&&(n.isGone=!0,n.onRemoval(e.context));yield e.events.publish(new o.GeneralSkillStatusUpdate(this.displayName,r,d,!1,!0)),yield e.events.publish(new l.RemoveGeneralEvent(n,i));let u="M"===(i?r.general:r.subGeneral).gender?s.FactionWarGeneral.soldier_male:s.FactionWarGeneral.soldier_female;i?(r.general=u,r.isGeneralRevealed=!0):(r.subGeneral=u,r.isSubGeneralRevealed=!0),e.broadcast(r,a.PlayerInfo.sanitize)}))};const i=n(1633),a=n(3402),o=n(2166),s=n(1658),l=n(9577);var d;!function(e){e[e.SIEGE=0]="SIEGE",e[e.LINE=1]="LINE"}(d||(d={}))},1259:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{l(r.next(e))}catch(e){a(e)}}function s(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.QianHuan=t.FengShi=t.ChuanXin=t.ShuangRen=t.LiRang=t.MingShi=t.BengHuai=t.BaoLing=t.HengZheng=t.BeiGe=t.DuanChange=t.KuangFu=t.XiongSuan=t.SuiShiDeath=t.SuiShiDying=t.SuiShi=t.SiJian=t.LuanJi=t.XiongYi=t.JianChu=t.MaShuTeng=t.MaShuPang=t.LeiJi=t.GuiDao=t.CongJian=t.FuDi=t.QiLuan=t.ZhenDu=t.WeiMu=t.LuanWu=t.WanSha=t.ShuangXiong=t.BiYue=t.LiJian=t.WuShuang=t.JiJiu=t.ChuLi=void 0;const i=n(2166),a=n(8651),o=n(739),s=n(8663),l=n(1480),d=n(1633),u=n(7296),c=n(5706),p=n(1802),h=n(1073),f=n(3402),g=n(2608),y=n(9820),m=n(2421),v=n(4910),C=n(4619),b=n(9575),S=n(9550),E=n(3484),w=n(6652),_=n(8411),P=n(5935),N=n(3160),I=n(5796),k=n(9716),A=n(2985),x=n(1189),T=n(7844),D=n(1131),O=n(1730),R=n(1633),F=n(1628),M=n(5125),U=n(801),H=n(1613),L=n(9421),G=n(4105),B=n(6652),W=n(1658),z=n(8696),j=n(6069);class ChuLi extends i.Skill{constructor(){super(...arguments),this.id="除疠",this.displayName="除疠",this.description="出牌阶段限一次，你可以选择至多三名势力各不相同或未确定势力的其他角色，然后你弃置你和这些角色的各一张牌。被弃置黑桃牌的角色各摸一张牌。",this.hiddenType=i.HiddenType.NONE,this.hint="因为能同时拆三个不同势力, 是相当容易招仇恨的技能. 另外因为小乔没有黑桃, 可以白嫖"}bootstrapClient(){a.playerActionDriverProvider.registerProvider(o.HintType.PLAY_HAND,(e=>new s.default("除疠").expectChoose([l.UIPosition.MY_SKILL],1,1,((t,n)=>!e.roundStat.customData[this.id]&&t===this.id)).expectChoose([l.UIPosition.PLAYER],1,3,((e,t,n)=>{let r=t.getPlayer(e),i=n.getArr(l.UIPosition.PLAYER).map((e=>t.getPlayer(e).getFaction()));return e!==this.playerId&&r.hasOwnCards()&&(!r.isRevealed()||(0,c.all)(i,(e=>(0,d.factionDiffers)(e,r.getFaction()))))}),(()=>"(除疠)至多三名势力各不相同或未确定势力的其他角色")).expectAnyButton("点击确定发动除疠").build(e)))}onPlayerAction(e,t,n){return r(this,void 0,void 0,(function*(){n.roundStats.customData[this.id]=!0,this.invokeEffects(n,e.targets.map((e=>e.player.id)));let t=[],r=new p.DropCardRequest;yield r.perform(this.playerId,1,n,"(除疬)请弃一张牌",[l.UIPosition.MY_EQUIP,l.UIPosition.MY_HAND]);let i=r.dropped[0];"spade"===n.interpret(this.playerId,i).suit&&t.push(e.source);let a=n.context.sortFromPerspective(this.playerId,e.targets.map((e=>e.player.id))),o=e.source;for(let e of a){let r=yield(new p.DropOthersCardRequest).perform(n,o,e,`请弃置${e}的一张牌`,[h.CardPos.EQUIP,h.CardPos.HAND]);"spade"===n.interpret(e.player.id,r[0]).suit&&t.push(e)}for(let e of t)yield new g.default(e,1).perform(n)}))}}t.ChuLi=ChuLi;class JiJiu extends i.Skill{constructor(){super(...arguments),this.id="急救",this.displayName="急救",this.description="你的回合外，你可以将一张红色牌当【桃】使用。",this.hint="拥有者常常忘了这是你的回合外. 另外, 红色装备牌也是桃"}bootstrapClient(){(0,H.registerPeach)(((e,t)=>e.expectChoose([l.UIPosition.MY_SKILL],1,1,((e,t)=>e===this.id&&t.curr!==this.playerId)).expectChoose([l.UIPosition.MY_HAND,l.UIPosition.MY_EQUIP],1,1,((e,t)=>(0,v.isSuitRed)(t.interpret(e).suit)),(()=>"(急救)将一张红色牌当【桃】使用"))))}onPlayerAction(e,t,n){return r(this,void 0,void 0,(function*(){if(n.currPlayer().player.id===this.playerId)throw"急救只能在你的回合之外!!";this.invokeEffects(n,[t.deadman.player.id]);let r=e.getSingleCardAndPos(),i=r[0];i.as=C.CardType.PEACH;let a=t.goodman.player.id,o=t.deadman.player.id;i.description=`${a} 对 ${o} 使用 ${i.type.name}`,n.sendToWorkflow(a,r[1],[i]),yield n.events.publish(new b.CardBeingUsedEvent(a,[r],i.type,!0,!1)),yield new m.default(t.goodman,t.deadman,1).perform(n)}))}}t.JiJiu=JiJiu;class WuShuangSlash extends i.SimpleTrigger{conditionFulfilled(e,t){return e.timeline===E.Timeline.AFTER_CONFIRMING_TARGET&&e.source.player.id===this.skill.playerId}doInvoke(e,t){return r(this,void 0,void 0,(function*(){this.skill.invokeEffects(t,[e.getTarget().player.id]),e.dodgesRequired=2}))}}class WuShuangJueDou extends i.SimpleTrigger{conditionFulfilled(e,t){return e.timeline===E.Timeline.AFTER_BECOMING_TARGET&&(e.source.player.id===this.skill.playerId||e.getTarget().player.id===this.skill.playerId)}doInvoke(e,t){return r(this,void 0,void 0,(function*(){e.slashCountDecider=(e,n)=>e.player.id===this.skill.playerId?(this.skill.invokeEffects(t,[n.player.id]),2):1}))}}class WuShuang extends i.Skill{constructor(){super(...arguments),this.id="无双",this.displayName="无双",this.description="锁定技，你使用的【杀】需两张【闪】才能抵消；与你进行【决斗】的角色每次需打出两张【杀】。",this.isLocked=!0,this.hint="很适合配合貂蝉离间, 纪灵的双刃, 张任的穿心, 颜良文丑的双雄, 潘凤的狂斧"}bootstrapServer(e,t){e.on(S.SlashOP,new WuShuangSlash(this,t)),e.on(w.JueDou,new WuShuangJueDou(this,t))}}t.WuShuang=WuShuang;class LiJian extends i.Skill{constructor(){super(...arguments),this.id="离间",this.displayName="离间",this.description="出牌阶段限一次，你可以弃置一张牌并选择两名其他男性角色，然后令其中一名男性角色视为对另一名男性角色使用一张【决斗】。",this.hiddenType=i.HiddenType.NONE,this.hint="请参考国战双将下性别的判定. 注意你可以弃装备牌, 比如狮子"}bootstrapClient(){a.playerActionDriverProvider.registerProvider(o.HintType.PLAY_HAND,(e=>new s.default("离间").expectChoose([l.UIPosition.MY_SKILL],1,1,((t,n)=>t===this.id&&!e.roundStat.customData[this.id])).expectChoose([l.UIPosition.MY_HAND,l.UIPosition.MY_EQUIP],1,1,((e,t)=>!0),(()=>"(离间)弃置一张牌")).expectChoose([l.UIPosition.PLAYER],2,2,((e,t)=>e!==this.playerId&&"M"===t.getPlayer(e).getGender()),(()=>"(离间)选择两名其他男性角色(先选的对后选的出决斗)")).expectAnyButton("点击确定发动离间").build(e)))}onPlayerAction(e,t,n){return r(this,void 0,void 0,(function*(){this.invokeEffects(n,e.targets.map((e=>e.player.id))),n.roundStats.customData[this.id]=!0,e.dropCardsFromSource(`[${this.id}] 弃置`),yield new w.JueDou(e.targets[0],e.targets[1],[]).perform(n)}))}}t.LiJian=LiJian;class BiYue extends i.SimpleConditionalSkill{constructor(){super(...arguments),this.id="闭月",this.displayName="闭月",this.description="结束阶段，你可以摸一张牌。",this.hint="防御神技, 增加过牌, 单挑十分好用"}bootstrapServer(e,t){e.on(_.StageStartFlow,this)}conditionFulfilled(e,t){return e.isFor(this.playerId,P.Stage.ROUND_END)}doInvoke(e,t){return r(this,void 0,void 0,(function*(){this.invokeEffects(t),yield new g.default(t.context.getPlayer(this.playerId),1).perform(t)}))}}t.BiYue=BiYue;class ShuangXiong extends i.SimpleConditionalSkill{constructor(){super(...arguments),this.id="双雄",this.displayName="双雄",this.description="摸牌阶段，你可以改为进行判定，你获得生效后的判定牌，然后本回合你可以将与判定结果颜色不同的一张手牌当【决斗】使用。",this.hint="一波流, 需要手牌够多来支撑, 所以要么配合刷牌技能(马腾), 要么配合爆发收人头赏金, 要么配合袁绍(拿先驱, 珠联璧合)"}bootstrapClient(){a.playerActionDriverProvider.registerProvider(o.HintType.PLAY_HAND,(e=>{let t=e.roundStat.customData[this.id];return new s.default("双雄").expectChoose([l.UIPosition.MY_SKILL],1,1,((e,n)=>e===this.id&&!!t)).expectChoose([l.UIPosition.MY_HAND],1,1,((e,n)=>{let r=n.interpret(e).suit;return"red"===t?(0,v.isSuitBlack)(r):(0,v.isSuitRed)(r)}),(()=>`(双雄)使用一张${"red"===t?"黑色":"红色"}手牌作为决斗打出`)).expectChoose([l.UIPosition.PLAYER],1,1,((e,t)=>e!==this.playerId),(()=>"(双雄)选择一名角色发动决斗")).expectAnyButton("点击确定发动决斗").build(e)}))}onPlayerAction(e,t,n){return r(this,void 0,void 0,(function*(){this.invokeEffects(n,[e.targets[0].player.id]);let t=e.getSingleCardAndPos()[0];t.as=C.CardType.JUE_DOU,t.description=this.displayName,n.sendToWorkflow(e.source.player.id,h.CardPos.HAND,[t],!0),yield n.events.publish(new b.CardBeingUsedEvent(e.source.player.id,[[t,h.CardPos.HAND]],C.CardType.JUE_DOU,!0)),yield new w.JueDou(e.source,e.targets[0],[t]).perform(n)}))}bootstrapServer(e,t){e.on(g.TakeCardStageOp,this)}conditionFulfilled(e,t){return e.player.player.id===this.playerId}doInvoke(e,t){return r(this,void 0,void 0,(function*(){this.invokeEffects(t),e.amount=-999;let n=yield new N.default("双雄判定",this.playerId).perform(t);yield t.takeFromWorkflow(this.playerId,h.CardPos.HAND,[n]),t.roundStats.customData[this.id]=(0,v.deriveColor)([t.interpret(this.playerId,n).suit])}))}}t.ShuangXiong=ShuangXiong;class WanSha extends i.SimpleConditionalSkill{constructor(){super(...arguments),this.id="完杀",this.displayName="完杀",this.description="锁定技，你的回合内，只有你和处于濒死状态的角色才能使用【桃】。",this.isLocked=!0,this.hint="非常克制地方抱团, 但也小心踩了自己的脚..."}bootstrapServer(e,t){e.on(y.AskSavingAround,this)}conditionFulfilled(e,t){return t.currPlayer().player.id===this.playerId}doInvoke(e,t){return r(this,void 0,void 0,(function*(){this.invokeEffects(t,[e.deadman.player.id]),e.toAsk=e.toAsk.filter((t=>t.player.id===this.playerId||t.player.id===e.deadman.player.id))}))}}t.WanSha=WanSha;class LuanWu extends i.Skill{constructor(){super(...arguments),this.id="乱武",this.displayName="乱武",this.description="限定技，出牌阶段，你可以令所有其他角色除非对各自距离最小的另一名角色使用一张【杀】，否则失去1点体力。",this.hiddenType=i.HiddenType.NONE,this.hint="注意发动时机, 小心踩了自己的脚... 注意失去体力死掉的不算任何人杀死的"}bootstrapClient(){a.playerActionDriverProvider.registerProvider(o.HintType.PLAY_HAND,(e=>new s.default("乱武").expectChoose([l.UIPosition.MY_SKILL],1,1,((e,t)=>e===this.id&&t.getPlayer(this.playerId).signs["乱"].enabled)).expectAnyButton("点击确定发动乱武").build(e)))}onPlayerAction(e,t,n){return r(this,void 0,void 0,(function*(){this.invokeEffects(n),e.source.signs["乱"].enabled=!1,n.broadcast(e.source,f.PlayerInfo.sanitize);let t=n.getSortedByCurr(!1);for(let e of t){if(e.isDead)continue;let t=n.context.findingNearestNeighbors(e.player.id);console.log(`【乱武】离${e}最近的邻居为${t}`),t=t.filter((t=>(console.log(`【乱武】${e}能否砍到${t}? ${n.context.computeDistance(e.player.id,t.player.id)} <= ${e.getReach()} ?`),n.context.computeDistance(e.player.id,t.player.id)<=e.getReach()))),console.log(`离${e}最近的为${t}`);let r=yield n.sendHint(e.player.id,{hintType:o.HintType.PLAY_SLASH,hintMsg:`${this.playerId} 发动乱武, 你需要对离你距离最小的角色出杀`,forbidden:t.map((e=>e.player.id)),extraButtons:[new l.Button(l.Button.CANCEL.id,"放弃")]});r.isCancel()?yield new I.default(e,e,1,[],I.DamageSource.SKILL,I.DamageType.ENERGY).perform(n):yield n.resolver.on(r,n)}}))}bootstrapServer(e,t){t.context.getPlayer(this.playerId).signs["乱"]={enabled:!0,type:"limit-skill",displayName:this.displayName,owner:this.position}}}t.LuanWu=LuanWu;class MultiRuseCancellor{constructor(e){this.skill=e,this.needRepeatedCheck=!1}getSkill(){return this.skill}invokeMsg(e,t){return"发动"+this.skill.displayName}conditionFulfilled(e,t){return e.timeline===E.Timeline.BECOME_TARGET&&!!e.targets.find((e=>e.player.id===this.getSkill().playerId))&&"black"===(0,v.deriveColor)(e.cards.map((e=>t.interpret(this.getSkill().playerId,e).suit)))}getSkillTriggerer(e,t){return this.skill.playerId}doInvoke(e,t){return r(this,void 0,void 0,(function*(){this.skill.invokeEffects(t),e.targets.splice(e.targets.findIndex((e=>e.player.id===this.getSkill().playerId)),1)}))}}class WeiMu extends i.SimpleConditionalSkill{constructor(){super(...arguments),this.id="帷幕",this.displayName="帷幕",this.description="锁定技，当你成为黑色锦囊牌的目标时，则取消之。",this.isLocked=!0,this.hint="红色的负面锦囊只有万箭, 一张过拆一张顺手的样子"}bootstrapServer(e,t){e.on(w.ShunShou,this),e.on(w.GuoHe,this),e.on(w.JueDou,this),e.on(w.JieDao,this),e.on(x.ZhiJiZhiBi,this),e.on(x.YuanJiao,this),e.on(k.UseDelayedRuseOp,this);let n=new MultiRuseCancellor(this);e.on(A.DoTieSuo,n),e.on(A.NanMan,n),e.on(w.WuZhong,this),e.on(w.HuoGong,this),e.on(A.TaoYuan,n),e.on(A.WanJian,n),e.on(A.WuGu,n),e.on(x.YiYiDaiLao,n)}conditionFulfilled(e,t){return e.timeline===E.Timeline.BECOME_TARGET&&e.getTarget().player.id===this.playerId&&"black"===(0,v.deriveColor)(e.cards.map((e=>t.interpret(this.playerId,e).suit)))}invokeMsg(e,t){return`发动帷幕使 ${e.ruseType.name} 对你无效`}doInvoke(e,t){return r(this,void 0,void 0,(function*(){this.invokeEffects(t,[],`${this.playerId} 发动了 ${this.displayName} 使 ${e.ruseType.name} 失效`),e.removeTarget(this.playerId)}))}}t.WeiMu=WeiMu;class ZhenDu extends i.SimpleConditionalSkill{constructor(){super(...arguments),this.id="鸩毒",this.displayName="鸩毒",this.description="一名角色的出牌阶段开始时，你可以弃置一张手牌，然后该角色视为使用一张【酒】，若该角色不是你，你对其造成1点伤害。",this.hint="一旦进入残局, 何太后就要出来搞事情"}bootstrapServer(e,t){e.on(_.StageStartFlow,this)}invokeMsg(e,t){return e.info.player.id!==this.playerId?`对${e.info}发动鸩毒, 对其造成一点伤害并视为其使用一张【酒】`:"发动鸩毒弃置一张牌, 视为使用一张【酒】"}conditionFulfilled(e,t){return e.stage===P.Stage.USE_CARD&&t.context.getPlayer(this.playerId).getCards(h.CardPos.HAND).length>0&&!t.roundStats.skipStages.get(P.Stage.USE_CARD)}doInvoke(e,t){return r(this,void 0,void 0,(function*(){(yield(new p.DropCardRequest).perform(this.playerId,1,t,"(鸩毒)弃置一张牌",[l.UIPosition.MY_HAND],!0))&&(this.invokeEffects(t,[e.info.player.id]),yield new T.default(e.info).perform(t),e.info.player.id!==this.playerId&&(yield new I.default(t.context.getPlayer(this.playerId),e.info,1,[],I.DamageSource.SKILL).perform(t)))}))}}t.ZhenDu=ZhenDu;class QiLuan extends i.SimpleConditionalSkill{constructor(){super(...arguments),this.id="戚乱",this.displayName="戚乱",this.description="一名角色的回合结束时，你每杀死过一名其他角色，便摸三张牌；每有一名其他角色死亡(不是你杀死)，你摸一张牌。",this.bounty=0,this.hint="爆发神技. 因为威力太大, 甚至可以让敌人不再内斗, 甚至面对毒酒会互相出桃救援"}bootstrapServer(e,t){e.on(_.StageEndFlow,this),e.onEvent(D.default,this.playerId,(e=>r(this,void 0,void 0,(function*(){e.timeline===D.DeathTimeline.BEFORE_REVEAL&&(e.killer&&e.killer.player.id===this.playerId?this.bounty+=3:this.bounty+=1)}))))}conditionFulfilled(e,t){return e.stage===P.Stage.ROUND_END&&this.bounty>0}doInvoke(e,t){return r(this,void 0,void 0,(function*(){yield new g.default(t.context.getPlayer(this.playerId),this.bounty).perform(t),this.bounty=0}))}}t.QiLuan=QiLuan;class FuDi extends O.SkillForDamageTaken{constructor(){super(...arguments),this.id="附敌",this.displayName="附敌",this.description="当你受到来自其他角色的伤害后，你可以交给伤害来源一张手牌。若如此做，你对与其势力相同的角色中体力值最多且不小于你的一名角色造成1点伤害。",this.hint="配合从谏让夏侯惇直呼内行. 注意若敌人势力血量都比你小就会白给手牌"}bootstrapServer(e){e.on(I.default,this)}conditionFulfilled(e,t){return this.isMyDamage(e)&&this.damageFromOthers(e)&&e.target.hasCardAt(h.CardPos.HAND)}getChoices(e,t){let n,r=e.source.getFaction(),i=e.target;if(r===R.Faction.UNKNOWN||r===R.Faction.YE)n=e.source.hp>=i.hp?[e.source.player.id]:[];else{let r=0;n=[],t.context.playerInfos.forEach((t=>{u.FactionPlayerInfo.factionSame(t,e.source)&&t.hp>=i.hp&&(t.hp>r?(n=[t.player.id],r=t.hp):t.hp===r&&n.push(t.player.id))}))}return n}doInvoke(e,t){return r(this,void 0,void 0,(function*(){let n=yield t.sendHint(e.target.player.id,{hintType:o.HintType.CHOOSE_CARD,hintMsg:`请选择一张手牌交给${e.source}`,quantity:1,positions:[l.UIPosition.MY_HAND],extraButtons:[l.Button.CANCEL]});if(n.isCancel())return;this.invokeEffects(t,[e.source.player.id]);let r=n.getSingleCardAndPos()[0];t.transferCards(this.playerId,e.source.player.id,h.CardPos.HAND,h.CardPos.HAND,[r]);let i=this.getChoices(e,t);if(i.length>0){let n;if(1===i.length)n=t.context.getPlayer(i[0]);else{n=(yield t.sendHint(this.playerId,{hintType:o.HintType.CHOOSE_PLAYER,hintMsg:"[附敌] 请选择附敌要造成伤害的对象",minQuantity:1,quantity:1,forbidden:i})).targets[0]}yield new I.default(e.target,n,1,[],I.DamageSource.SKILL).perform(t)}}))}}t.FuDi=FuDi;class CongJian extends i.SimpleConditionalSkill{constructor(){super(...arguments),this.id="从谏",this.displayName="从谏",this.description="锁定技，当你于回合外造成伤害时或于回合内受到伤害时，伤害值+1。",this.isLocked=!0,this.hint="所以不要给张绣配李傕郭汜, 而且怕何太后的毒, 或者决斗踩自己的脚. 配个吕布, 配合貂蝉离间则爽歪歪"}bootstrapServer(e){e.on(I.default,this)}conditionFulfilled(e,t){return e.target.player.id===this.playerId&&t.currPlayer().player.id===this.playerId&&e.timeline===I.DamageTimeline.TAKING_DAMAGE||!(!e.source||e.source.player.id!==this.playerId||t.currPlayer().player.id===this.playerId||e.timeline!==I.DamageTimeline.DOING_DAMAGE)}doInvoke(e,t){return r(this,void 0,void 0,(function*(){this.invokeEffects(t,[e.target.player.id]),e.amount+=1}))}}t.CongJian=CongJian;class GuiDao extends i.SimpleConditionalSkill{constructor(){super(...arguments),this.id="鬼道",this.displayName="鬼道",this.description="当一名角色的判定牌生效前，你可以打出一张黑色牌替换之。",this.hint="包括你的装备牌"}bootstrapServer(e){e.on(N.default,this)}conditionFulfilled(e,t){return e.timeline===N.JudgeTimeline.CONFIRMING&&t.context.getPlayer(this.playerId).hasOwnCards()}doInvoke(e,t){return r(this,void 0,void 0,(function*(){let n=yield t.sendHint(this.playerId,{hintType:o.HintType.CHOOSE_CARD,hintMsg:"请选择要改变的判定牌",quantity:1,positions:[l.UIPosition.MY_HAND,l.UIPosition.MY_EQUIP],extraButtons:[l.Button.CANCEL],suits:["club","spade"]});if(n.isCancel())console.log("[鬼道] 最终放弃了");else{let r=n.getSingleCardAndPos(),i=r[0],a=r[1];this.invokeEffects(t,[e.owner],`${this.playerId} 发动 ${this.displayName} 将判定牌替换为 ${i}`),i.description=this.playerId+" 鬼道改判定",t.sendToWorkflow(this.playerId,a,[i],!1),yield t.events.publish(new b.CardBeingUsedEvent(this.playerId,[r],null,!0,!1)),yield t.takeFromWorkflow(this.playerId,h.CardPos.HAND,[e.judgeCard]),e.judgeCard=i}}))}}t.GuiDao=GuiDao;class LeiJi extends i.SimpleConditionalSkill{constructor(){super(...arguments),this.id="雷击",this.displayName="雷击",this.description="当你使用或打出【闪】时，你可以令一名其他角色进行判定，若结果为黑桃，你对该角色造成2点雷电伤害。",this.hint="大家都很熟悉的技能了"}bootstrapServer(e){e.on(F.DodgePlayed,this)}conditionFulfilled(e,t){return e.player===this.playerId}doInvoke(e,t){return r(this,void 0,void 0,(function*(){let e=yield t.sendHint(this.playerId,{hintType:o.HintType.CHOOSE_PLAYER,hintMsg:"选择雷击的对象",forbidden:[this.playerId],minQuantity:1,quantity:1,extraButtons:[l.Button.CANCEL]});if(e.isCancel())return;let n=e.targets[0].player.id;this.invokeEffects(t,[n]);let r=yield new N.default("雷击判定",n).perform(t),i=t.interpret(n,r).suit;"spade"===i?yield new I.default(t.context.getPlayer(this.playerId),e.targets[0],2,[],I.DamageSource.SKILL,I.DamageType.THUNDER).perform(t):t.log(`雷击判定为${c.Suits[i]}, 失效`)}))}}t.LeiJi=LeiJi;class MaShuPang extends M.MaShu{constructor(){super(...arguments),this.id="马术(庞)"}}t.MaShuPang=MaShuPang;class MaShuTeng extends M.MaShu{constructor(){super(...arguments),this.id="马术(腾)"}}t.MaShuTeng=MaShuTeng;class JianChu extends i.SimpleConditionalSkill{constructor(){super(...arguments),this.id="鞬出",this.displayName="鞬出",this.description="当你使用【杀】指定一个目标后，你可以弃置其一张牌，若弃置的牌：是装备牌，该角色不能使用【闪】；不是装备牌，该角色获得此【杀】。",this.hint="搭配纪灵, 张任, 潘凤都有不错的效果. 即使对方没有装备牌, 也可以弃掉对方可能的闪和桃"}bootstrapServer(e){e.on(S.SlashOP,this)}conditionFulfilled(e,t){return e.timeline===E.Timeline.AFTER_CONFIRMING_TARGET&&e.source.player.id===this.playerId&&e.getTarget().player.id!==this.playerId&&e.getTarget().hasOwnCards()}invokeMsg(e,t){return`对${e.getTarget()}发动鞬出`}doInvoke(e,t){return r(this,void 0,void 0,(function*(){let n=t.context.getPlayer(this.playerId),r=yield(new p.DropOthersCardRequest).perform(t,n,e.getTarget(),`${this.displayName}弃置对方一张牌`,[h.CardPos.HAND,h.CardPos.EQUIP]);this.invokeEffects(t,[e.getTarget().player.id]),r[0].type.isEquipment()?e.undodegables.add(e.getTarget().player.id):yield t.takeFromWorkflow(e.getTarget().player.id,h.CardPos.HAND,e.cards)}))}}t.JianChu=JianChu;class XiongYi extends i.Skill{constructor(){super(...arguments),this.id="雄异",this.displayName="雄异",this.description="限定技，出牌阶段，你可以令与你势力相同的所有角色各摸三张牌，然后若你的势力是全场角色最少的势力，则你回复1点体力。",this.hiddenType=i.HiddenType.NONE,this.hint="马老板发工资了!"}bootstrapClient(){a.playerActionDriverProvider.registerProvider(o.HintType.PLAY_HAND,(e=>new s.default("雄异").expectChoose([l.UIPosition.MY_SKILL],1,1,((e,t)=>e===this.id&&t.getPlayer(this.playerId).signs["雄"].enabled)).expectAnyButton("点击确定发动雄异").build(e)))}onPlayerAction(e,t,n){return r(this,void 0,void 0,(function*(){e.source.signs["雄"]={enabled:!1,type:"limit-skill",displayName:this.displayName,owner:this.position},n.broadcast(e.source,f.PlayerInfo.sanitize);let t,r=e.source;t=r.getFaction()===R.Faction.YE?[r]:(0,U.getFactionMembers)(n).getArr(r.getFaction());let i=t.map((e=>e.player.id));this.invokeEffects(n,i);for(let e of t)yield new g.default(e,3).perform(n);(0,U.getFactionsWithLeastMembers)(n).has(r.getFaction())&&r.hp<r.maxHp&&(yield new m.default(r,r,1).perform(n))}))}bootstrapServer(e,t){t.context.getPlayer(this.playerId).signs["雄"]={enabled:!0,type:"limit-skill",displayName:this.displayName,owner:this.position}}}t.XiongYi=XiongYi;class LuanJi extends i.Skill{constructor(){super(...arguments),this.id="乱击",this.displayName="乱击",this.description="你可以将两张手牌当【万箭齐发】使用（不能使用本回合此前发动此技能时已用过的花色）。若如此做，其他与你同势力角色使用【闪】响应此【万箭齐发】时，其可摸一张牌。",this.hiddenType=i.HiddenType.NONE,this.hint="一般袁绍如果要先亮, 尽量只亮单袁绍, 那样队友孔融就不怕你的万箭"}bootstrapClient(){a.playerActionDriverProvider.registerProvider(o.HintType.PLAY_HAND,(e=>new s.default("乱击").expectChoose([l.UIPosition.MY_SKILL],1,1,((e,t)=>e===this.id)).expectChoose([l.UIPosition.MY_HAND],2,2,((t,n)=>{let r=e.roundStat.customData[this.id];return!r||!r.has(n.interpret(t).suit)}),(()=>"(乱击)请选择两张手牌(不能使用本回合乱击用过的花色)")).expectAnyButton("点击确定发动乱击").build(e)))}onPlayerAction(e,t,n){return r(this,void 0,void 0,(function*(){let t=n.roundStats.customData[this.id]||new Set,r=e.getCardsAtPos(h.CardPos.HAND);r.forEach((r=>{r.as=C.CardType.WAN_JIAN,r.description=e.source+" "+this.displayName,t.add(n.interpret(this.playerId,r).suit)})),n.roundStats.customData[this.id]=t;let i=n.getSortedByCurr(!1);this.invokeEffects(n,[],`${this.playerId} 用 ${r} 发动了 ${this.displayName}`),n.sendToWorkflow(this.playerId,h.CardPos.HAND,r,!0),yield n.events.publish(new b.CardBeingUsedEvent(this.playerId,r.map((e=>[e,h.CardPos.HAND])),C.CardType.WAN_JIAN,!0)),yield new A.WanJian(r,e.source,C.CardType.WAN_JIAN,i).perform(n)}))}}t.LuanJi=LuanJi;class SiJian extends i.SimpleConditionalSkill{constructor(){super(...arguments),this.id="死谏",this.displayName="死谏",this.description="当你失去最后的手牌时，你可以弃置一名其他角色的一张牌。",this.needRepeatedCheck=!1,this.hint="用得好可以和随势联动, 用牌伤害濒死的人->死谏弃他的防御牌->濒死->摸牌->继续"}bootstrapServer(e,t){e.on(b.CardBeingDroppedEvent,this),e.on(b.CardBeingTakenEvent,this),e.on(b.CardBeingUsedEvent,this)}conditionFulfilled(e,t){return!(e.player!==this.playerId||0!==t.context.getPlayer(this.playerId).getCards(h.CardPos.HAND).length||!(0,c.any)(e.cards,(e=>e[1]===h.CardPos.HAND)))}doInvoke(e,t){return r(this,void 0,void 0,(function*(){let e=t.getOthers(this.playerId).filter((e=>!e.hasOwnCards())).map((e=>e.player.id)),n=yield t.sendHint(this.playerId,{hintType:o.HintType.CHOOSE_PLAYER,hintMsg:"选择死谏的对象(弃置其一张牌)",minQuantity:1,quantity:1,forbidden:[this.playerId,...e],extraButtons:[l.Button.CANCEL]});n.isCancel()||(this.invokeEffects(t,[n.targets[0].player.id]),yield(new p.DropOthersCardRequest).perform(t,n.source,n.targets[0],`${this.displayName} 弃置对方一张牌`,[h.CardPos.HAND,h.CardPos.EQUIP]))}))}}t.SiJian=SiJian;class SuiShi extends i.Skill{constructor(){super(...arguments),this.id="随势",this.displayName="随势",this.description="锁定技，当其他角色进入濒死状态时，若伤害来源与你势力相同，你摸一张牌；当其他角色死亡时，若其与你势力相同，你失去1点体力。",this.needRepeatedCheck=!1,this.isLocked=!0,this.hint="用得好可以达到联营的效果. 配合连弩堪比李典忘隙, 田丰的南蛮万箭可以尽量留着, 用来收人头刷牌"}bootstrapServer(e,t){e.on(I.EnterDyingEvent,new SuiShiDying(this,t)),e.on(D.default,new SuiShiDeath(this,t))}}t.SuiShi=SuiShi;class SuiShiDying extends i.SimpleTrigger{conditionFulfilled(e,t){if(e.damage.target.player.id!==this.skill.playerId&&e.damage.source&&e.damage.type!==I.DamageType.ENERGY){let t=e.damage.source.getFaction(),n=this.player.getFaction();return(0,d.factionsSame)(t,n)}return!1}doInvoke(e,t){return r(this,void 0,void 0,(function*(){this.skill.invokeEffects(t),yield new g.default(this.player,1).perform(t)}))}invokeMsg(e,t){return"发动"+this.getSkill().displayName+"获得一张牌"}}t.SuiShiDying=SuiShiDying;class SuiShiDeath extends i.SimpleTrigger{conditionFulfilled(e,t){if(e.deceased.player.id!==this.skill.playerId&&e.timeline===D.DeathTimeline.IN_DEATH){let t=e.deceased.getFaction(),n=this.player.getFaction();return(0,d.factionsSame)(t,n)}return!1}doInvoke(e,t){return r(this,void 0,void 0,(function*(){this.skill.invokeEffects(t),yield new I.default(this.player,this.player,1,[],I.DamageSource.SKILL,I.DamageType.ENERGY).perform(t)}))}invokeMsg(e,t){return"发动"+this.getSkill().displayName+"失去一点体力"}}t.SuiShiDeath=SuiShiDeath;class XiongSuan extends i.Skill{constructor(){super(...arguments),this.id="凶算",this.displayName="凶算",this.description="限定技，出牌阶段，你可以弃置一张手牌并选择与你势力相同的一名角色，对其造成1点伤害，然后你摸三张牌。若该角色有已发动的限定技，则你选择其一个限定技，此回合结束时视为该限定技未发动过。",this.hint="可以修复队友/自己的限定技, 如果修复凶算本身, 效果类似于苦肉",this.toRestore=null}bootstrapClient(){a.playerActionDriverProvider.registerProvider(o.HintType.PLAY_HAND,(e=>new s.default("凶算").expectChoose([l.UIPosition.MY_SKILL],1,1,((e,t)=>e===this.id&&t.getPlayer(this.playerId).signs["凶"].enabled)).expectChoose([l.UIPosition.MY_HAND],1,1,(e=>!0),(()=>"(凶算)选择一张手牌弃置")).expectChoose([l.UIPosition.PLAYER],1,1,((e,t)=>{if(e===this.playerId)return!0;let n=t.getPlayer(this.playerId).getFaction(),r=t.getPlayer(e).getFaction();return(0,d.factionsSame)(n,r)}),(()=>"(凶算)选择一名势力与你相同的角色,对其造成一点伤害,本回合后恢复其一个限定技")).expectAnyButton("点击确定发动凶算").build(e)))}onPlayerAction(e,t,n){return r(this,void 0,void 0,(function*(){if(e.source.signs["凶"].enabled=!1,n.broadcast(e.source,f.PlayerInfo.sanitize),this.invokeEffects(n,[e.targets[0].player.id]),yield e.dropCardsFromSource("凶算弃置"),yield new I.default(e.source,e.targets[0],1,[],I.DamageSource.SKILL).perform(n),e.source.isDead)return void console.log("[凶算] 把自己整死了...");yield new g.default(e.source,3).perform(n);let t=[];for(let n of Object.keys(e.targets[0].signs)){let r=e.targets[0].signs[n];"limit-skill"!==r.type||r.enabled||t.push(new l.Button(n,r.displayName))}if(t.length>0){let r=yield n.sendHint(this.playerId,{hintType:o.HintType.MULTI_CHOICE,hintMsg:`(凶算) 请选择 ${e.targets[0]} 未发动过的技能`,extraButtons:t});this.toRestore=[e.targets[0],r.button]}}))}bootstrapServer(e,t){t.context.getPlayer(this.playerId).signs["凶"]={enabled:!0,type:"limit-skill",displayName:this.displayName,owner:this.position},e.onEvent(_.StageEndFlow,this.playerId,(e=>r(this,void 0,void 0,(function*(){if(e.info.player.id===this.playerId&&this.toRestore){let e=this.toRestore[0].signs[this.toRestore[1]];e.enabled=!0,t.broadcast(this.toRestore[0],f.PlayerInfo.sanitize),t.log(`(凶算) ${this.toRestore[0]} 的限定技 ${e.displayName} 视为未发动`)}}))))}}t.XiongSuan=XiongSuan;class KuangFu extends i.SimpleConditionalSkill{constructor(){super(...arguments),this.id="狂斧",this.displayName="狂斧",this.description="当你使用【杀】对目标角色造成伤害后，你可以将其装备区里的一张牌置入你的装备区或弃置之。",this.hint="可以修复队友/自己的限定技, 如果修复凶算本身, 效果类似于苦肉"}bootstrapServer(e,t){e.on(I.default,this)}conditionFulfilled(e,t){return!!(e.source&&e.source.player.id===this.playerId&&e.target.player.id!==this.playerId&&e.timeline===I.DamageTimeline.DID_DAMAGE&&e.damageSource===I.DamageSource.SLASH&&e.target.getCards(h.CardPos.EQUIP).length>0)}doInvoke(e,t){return r(this,void 0,void 0,(function*(){let n=(yield(0,p.SelectACardAt)(t,e.source,e.target,"(狂斧)选择对方一张装备牌",h.CardPos.EQUIP))[0],r=[new l.Button("take","装备之"),new l.Button("drop","弃置之")];e.source.findCardAt(h.CardPos.EQUIP,n.type.genre)&&r[0].disable();let i=yield t.sendHint(this.playerId,{hintType:o.HintType.MULTI_CHOICE,hintMsg:"(狂斧)选择弃置还是获得"+n,extraButtons:r});this.invokeEffects(t,[e.target.player.id]),"take"===i.button?yield new G.EquipOp(e.source,n,h.CardPos.EQUIP,e.target).perform(t):(t.log(`${e.source} 弃置了 ${e.target} 的 ${n}`),n.description=`${e.target} 被弃置`,t.sendToWorkflow(e.target.player.id,h.CardPos.EQUIP,[n]),yield t.events.publish(new b.CardBeingDroppedEvent(e.target.player.id,[[n,h.CardPos.EQUIP]])))}))}}t.KuangFu=KuangFu;class DuanChange extends i.SimpleConditionalSkill{constructor(){super(...arguments),this.id="断肠",this.displayName="断肠",this.description="锁定技，当你死亡时，你令杀死你的角色失去一张武将牌的所有技能。",this.isLocked=!0,this.hint="毒菜的标志技能"}bootstrapServer(e,t,n){e.on(D.default,this),this.skillRepo=n}conditionFulfilled(e,t){return!(e.deceased.player.id!==this.playerId||e.timeline!==D.DeathTimeline.IN_DEATH||!e.killer||e.killer.isDead)}doInvoke(e,t){return r(this,void 0,void 0,(function*(){this.invokeEffects(t,[e.killer.player.id]);let n=[new l.Button("main","主将的技能"),new l.Button("sub","副将的技能")],r=e.killer;(0,z.hasGeneral)(r,!0)||n[0].disable(),(0,z.hasGeneral)(r,!1)||n[1].disable();let a=(yield t.sendHint(this.playerId,{hintType:o.HintType.MULTI_CHOICE,hintMsg:`请选择令${r}失去哪一张武将牌的技能`,extraButtons:n})).button;for(let e of this.skillRepo.getSkills(r.player.id))e.position===a&&(e.isGone=!0,e.onRemoval(t.context));yield t.events.publish(new i.GeneralSkillStatusUpdate(this.displayName,r,a,!1,!0))}))}}t.DuanChange=DuanChange;class BeiGe extends i.SimpleConditionalSkill{constructor(){super(...arguments),this.id="悲歌",this.displayName="悲歌",this.description="当一名角色受到【杀】造成的伤害后，你可以弃置一张牌，然后令其进行判定，若结果为：红桃，其回复1点体力；方块，其摸两张牌；梅花，伤害来源弃置两张牌；黑桃，伤害来源翻面。",this.hint="骚扰别人出杀, 难得的令其他人翻面的技能"}bootstrapServer(e){e.on(I.default,this)}conditionFulfilled(e,t){return!(e.damageSource!==I.DamageSource.SLASH||e.timeline!==I.DamageTimeline.TAKEN_DAMAGE||!t.context.getPlayer(this.playerId).hasOwnCards())}doInvoke(e,t){return r(this,void 0,void 0,(function*(){if(!(yield(new p.DropCardRequest).perform(this.playerId,1,t,"(悲歌)请弃置一张牌",[l.UIPosition.MY_HAND,l.UIPosition.MY_EQUIP],!1)))return void console.error("??????");this.invokeEffects(t,[e.target.player.id]);let n=yield new N.default(this.displayName+" 判定",e.target.player.id).perform(t),r=t.interpret(e.target.player.id,n);"heart"===r.suit?yield new m.default(e.target,e.target,1).perform(t):"diamond"===r.suit?yield new g.default(e.target,2).perform(t):"club"===r.suit?e.source.hasOwnCards()&&(yield(new p.DropCardRequest).perform(e.source.player.id,2,t,"(悲歌)请弃置两张牌",[l.UIPosition.MY_HAND,l.UIPosition.MY_EQUIP],!1)):yield(0,b.turnOver)(t.context.getPlayer(this.playerId),e.source,this.displayName,t)}))}}t.BeiGe=BeiGe;class HengZheng extends i.SimpleConditionalSkill{constructor(){super(...arguments),this.id="横征",this.displayName="横征",this.description="摸牌阶段，若你的体力值为1或你没有手牌，则你可以改为获得每名其他角色区域里的一张牌。",this.hint="技能过于强大, 拥有者一般都要藏着等待发动时机"}bootstrapServer(e){e.on(_.StageStartFlow,this)}conditionFulfilled(e,t){if(e.isFor(this.playerId,P.Stage.TAKE_CARD)&&!t.roundStats.skipStages.get(P.Stage.TAKE_CARD)){let e=t.context.getPlayer(this.playerId);return 1===e.hp||!e.hasCardAt(h.CardPos.HAND)}return!1}doInvoke(e,t){return r(this,void 0,void 0,(function*(){let n=t.getSortedByCurr(!1).filter((e=>e.hasCards()));t.roundStats.skipStages.set(P.Stage.TAKE_CARD,!0),this.invokeEffects(t,n.map((e=>e.player.id)));for(let r of n)yield(0,B.GrabCard)(e.info,r,`${this.displayName} > ${r}`,t,[h.CardPos.HAND,h.CardPos.EQUIP,h.CardPos.JUDGE])}))}}t.HengZheng=HengZheng;class BaoLing extends i.SimpleConditionalSkill{constructor(){super(...arguments),this.id="暴凌",this.displayName="暴凌",this.description="主将技，锁定技，出牌阶段结束时，若你有副将，则你移除副将，然后加3点体力上限，回复3点体力，并获得“崩坏”。",this.isLocked=!0,this.disabledForSub=!0,this.hint="可以配合后期废柴的将, 比如孔融张任, 扔了不心疼 :)"}bootstrapServer(e,t,n){e.on(_.StageEndFlow,this),this.skillRepo=n}conditionFulfilled(e,t){if(e.isFor(this.playerId,P.Stage.USE_CARD)){let e=t.context.getPlayer(this.playerId);return(0,W.hasSub)(e)}return!1}doInvoke(e,t){return r(this,void 0,void 0,(function*(){this.invokeEffects(t);let e=t.context.getPlayer(this.playerId);e.maxHp+=3,e.hp+=3,yield(0,z.removeGeneral)(t,this.skillRepo,this.playerId,!1),console.log(`[${this.id}] 获得技能'崩坏'`);let n=new BengHuai(this.playerId);n.isRevealed=!0,n.position="main",this.skillRepo.addSkill(this.playerId,n),t.send(this.playerId,n.toStatus())}))}}t.BaoLing=BaoLing;class BengHuai extends i.SimpleConditionalSkill{constructor(){super(...arguments),this.id="崩坏",this.displayName="崩坏",this.description="锁定技，结束阶段，若你不是体力值最小的角色，你失去1点体力或减1点体力上限。",this.hiddenType=i.HiddenType.NONE,this.isLocked=!0,this.disabledForMain=!0,this.disabledForSub=!0,this.hint="没啥好说的负面技"}bootstrapServer(e){e.on(_.StageStartFlow,this)}conditionFulfilled(e,t){if(e.isFor(this.playerId,P.Stage.ROUND_END)){let e=t.getSortedByCurr(!1).map((e=>e.hp)),n=t.context.getPlayer(this.playerId).hp;if(Math.min(...e)<n)return!0}return!1}doInvoke(e,t){return r(this,void 0,void 0,(function*(){let n=[new l.Button("hp","失去一点体力"),new l.Button("maxHp","减1点体力上限")];e.info.maxHp<=1&&n[1].disable();let r=yield t.sendHint(this.playerId,{hintType:o.HintType.MULTI_CHOICE,hintMsg:"请选择崩坏的效果",extraButtons:n});this.invokeEffects(t);let i=t.context.getPlayer(this.playerId);"hp"===r.button?yield new I.default(i,i,1,[],I.DamageSource.SKILL,I.DamageType.ENERGY).perform(t):(i.changeMax(-1),t.broadcast(i,f.PlayerInfo.sanitize))}))}}t.BengHuai=BengHuai;class MingShi extends i.SimpleConditionalSkill{constructor(){super(...arguments),this.id="名士",this.displayName="名士",this.description="锁定技，当你受到伤害时，若伤害来源有暗置的武将牌，此伤害-1。",this.isLocked=!0,this.hint="所以要大杀四方的时候要在回合开始时双亮, 避免砍到孔融的尴尬局面"}bootstrapServer(e){e.on(I.default,this)}conditionFulfilled(e,t){let n=e.source;return n&&!(n.isGeneralRevealed&&n.isSubGeneralRevealed)&&e.target.player.id===this.playerId&&e.timeline===I.DamageTimeline.TAKING_DAMAGE&&e.type!==I.DamageType.ENERGY}doInvoke(e,t){return r(this,void 0,void 0,(function*(){this.invokeEffects(t,[e.target.player.id]),e.amount-=1}))}}t.MingShi=MingShi;class LiRang extends i.SimpleConditionalSkill{constructor(){super(...arguments),this.id="礼让",this.displayName="礼让",this.description="当你的牌因弃置而置入弃牌堆时，你可以将其中的任意张牌交给其他角色。",this.hint="以逸待劳可以不浪费牌甚至形成配合, 如果刘备是一边的就特别环保"}bootstrapClient(){a.playerActionDriverProvider.registerSpecial(this.id,(e=>{let t=new Set(e.forbidden);return new s.default("礼让").expectChoose([l.UIPosition.MY_HAND],1,2,((e,n)=>t.has(e)),(()=>e.hintMsg)).expectChoose([l.UIPosition.PLAYER],1,1,((e,t)=>e!==this.playerId),(()=>"选择将牌交给的对象")).expectAnyButton("点击确认将牌交给指定对象").build(e,[l.Button.OK])}))}bootstrapServer(e){e.on(b.CardBeingDroppedEvent,this)}conditionFulfilled(e,t){return e.isCardFrom(this.playerId)}doInvoke(e,t){return r(this,void 0,void 0,(function*(){let n=e.cards.map((e=>e[0])).filter((e=>t.stillInWorkflow(e)));console.log("[礼让] 弃置了牌",n);let r=t.context.getPlayer(this.playerId);t.send(r.player.id,j.CardTransit.fromWorkflow(r.player.id,h.CardPos.HAND,n));let i=!1;for(;n.length>0&&!i;){let e=yield t.sendHint(this.playerId,{hintType:o.HintType.SPECIAL,specialId:this.id,hintMsg:"选择将弃置的牌交给另一名角色",forbidden:n.map((e=>e.id)),extraButtons:[l.Button.CANCEL]});if(e.isCancel())i=!0;else{this.invokeEffects(t,[e.targets[0].player.id]);let i=e.getCardsAtPos(h.CardPos.HAND),a=e.targets[0];n=n.filter((e=>i.findIndex((t=>t.id===e.id))<0)),t.send(r.player.id,j.CardTransit.toWorkflow(r.player.id,h.CardPos.HAND,i,!1,!1)),yield(0,c.delay)(300),yield t.takeFromWorkflow(a.player.id,h.CardPos.HAND,i)}}n.length>0&&t.send(r.player.id,j.CardTransit.toWorkflow(r.player.id,h.CardPos.HAND,n,!1,!1))}))}}t.LiRang=LiRang;class ShuangRen extends i.SimpleConditionalSkill{constructor(){super(...arguments),this.id="双刃",this.displayName="双刃",this.description="出牌阶段开始时，你可以与一名角色拼点。若你赢，你视为对其或与其势力相同的另一名角色使用一张【杀】；若你没赢，你结束出牌阶段。",this.hint="双刃就是双刃剑. 配合庞德吕布相当不错"}bootstrapServer(e){e.on(_.InStageStart,this)}conditionFulfilled(e,t){return e.isFor(this.playerId,P.Stage.USE_CARD)}doInvoke(e,t){return r(this,void 0,void 0,(function*(){let n=t.context.playerInfos.filter((e=>!(0,L.canCardFight)(e.player.id,this.playerId,t))),r=yield t.sendHint(this.playerId,{hintType:o.HintType.CHOOSE_PLAYER,hintMsg:"请选择发动双刃拼点的对象",forbidden:n.map((e=>e.player.id)),minQuantity:1,quantity:1,extraButtons:[l.Button.CANCEL]});if(r.isCancel())return;let i=t.context.getPlayer(this.playerId),a=r.targets[0];if(this.invokeEffects(t,[a.player.id]),yield new L.default(i,a,this.displayName).perform(t)){let e=a;if(a.isRevealed()){let n=[],r=t.context.playerInfos.filter((e=>{let t=e;return!(!t.isDead&&t.player.id!==this.playerId)||(!(!t.isRevealed()||!(0,d.factionDiffers)(a.getFaction(),t.getFaction()))||(n.push(t),!1))}));if(1===n.length)e=n[0];else{e=(yield t.sendHint(this.playerId,{hintType:o.HintType.CHOOSE_PLAYER,hintMsg:"请选择发动双刃出杀的对象",forbidden:r.map((e=>e.player.id)),minQuantity:1,quantity:1})).targets[0]}}this.invokeEffects(t,[e.player.id]),yield new S.SlashOP(t.context.getPlayer(this.playerId),[e],[],1,I.DamageType.NORMAL,"n.a.").perform(t)}else e.endStage=!0}))}}t.ShuangRen=ShuangRen;class ChuanXin extends i.SimpleConditionalSkill{constructor(){super(...arguments),this.id="穿心",this.displayName="穿心",this.description="当你于出牌阶段内使用【杀】或【决斗】对目标角色造成伤害时，若其与你势力不同且有副将，你可以防止此伤害。若如此做，该角色选择一项：1.弃置装备区里的所有牌，若如此做，其失去1点体力；2.移除副将。",this.hint="杀人诛心之技能"}bootstrapServer(e,t,n){e.on(I.default,this),this.skillRepo=n}conditionFulfilled(e,t){let n=e.target;return(e.damageSource===I.DamageSource.DUEL||e.damageSource===I.DamageSource.SLASH)&&e.source&&e.source.player.id===this.playerId&&t.currPlayer().player.id===this.playerId&&t.currEffect.stage===P.Stage.USE_CARD&&e.timeline===I.DamageTimeline.DOING_DAMAGE&&n.isRevealed()&&(0,d.factionDiffers)((0,U.getFactionIfRevealNow)(e.source,t),n.getFaction())&&(0,W.hasSub)(n)}doInvoke(e,t){return r(this,void 0,void 0,(function*(){e.amount=-999;let n=[new l.Button("drop","弃置装备区里的所有牌，然后失去1点体力"),new l.Button("remove","移除你的副将")];if(e.target.hasCardAt(h.CardPos.EQUIP)||n[0].disable(),this.invokeEffects(t,[e.target.player.id]),"drop"===(yield t.sendHint(e.target.player.id,{hintType:o.HintType.MULTI_CHOICE,hintMsg:"你受到穿心之痛, 请选择",extraButtons:n})).button){let n=e.target.getCards(h.CardPos.EQUIP).slice();n.forEach((t=>t.description=`${e.target} 穿心弃置`)),console.log("[穿心] 弃置装备",n.map((e=>e.toString()))),t.sendToWorkflow(e.target.player.id,h.CardPos.EQUIP,n,!1);let r=n.map((e=>[e,h.CardPos.EQUIP]));yield t.events.publish(new b.CardBeingDroppedEvent(e.target.player.id,r)),yield new I.default(e.target,e.target,1,[],I.DamageSource.SKILL,I.DamageType.ENERGY).perform(t)}else yield(0,z.removeGeneral)(t,this.skillRepo,e.target.player.id,!1)}))}}t.ChuanXin=ChuanXin;class FengShi extends i.SimpleConditionalSkill{constructor(){super(...arguments),this.id="锋矢",this.displayName="锋矢",this.description="阵法技，在同一个围攻关系中，若你是围攻角色，则你或另一名围攻角色使用【杀】指定被围攻角色为目标后，可令该角色弃置装备区里的一张牌。",this.hint="没啥特别的"}bootstrapServer(e,t,n){e.on(S.SlashOP,this)}conditionFulfilled(e,t){if(e.targets.length>1)return!1;let n=(0,z.getSiegeContext)(e.getTarget().player.id,this.playerId,t.context);return e.timeline===E.Timeline.AFTER_CONFIRMING_TARGET&&e.getTarget().hasCardAt(h.CardPos.EQUIP)&&n&&(n.siegers[0]===this.playerId||n.siegers[1]===this.playerId)}doInvoke(e,t){return r(this,void 0,void 0,(function*(){yield(new p.DropCardRequest).perform(e.getTarget().player.id,1,t,`${this.playerId} 发动锋矢令你弃置一张装备`,[l.UIPosition.MY_EQUIP])}))}}t.FengShi=FengShi;class QianHuanTrigger{constructor(e){this.skill=e,this.needRepeatedCheck=!1}getSkillTriggerer(e,t){return this.skill.playerId}getSkill(){return this.skill}invokeMsg(e,t){return`发动千幻抵消${e.whatIsThis}对${e.targets[0]}的效果`}conditionFulfilled(e,t){if(1!==e.targets.length||e.timeline!==E.Timeline.BECOME_TARGET)return!1;let n=e.getTarget(),r=t.context.getPlayer(this.skill.playerId),i="main"===this.skill.position?h.CardPos.ON_GENERAL:h.CardPos.ON_SUB_GENERAL;return n.isRevealed()&&(0,d.factionsSame)(n.getFaction(),(0,U.getFactionIfRevealNow)(r,t))&&r.getCards(i).length>0}doInvoke(e,t){return r(this,void 0,void 0,(function*(){let n=t.context.getPlayer(this.skill.playerId),r="main"===this.skill.position?h.CardPos.ON_GENERAL:h.CardPos.ON_SUB_GENERAL,i=n.getCards(r),a=i[(yield t.sendHint(this.skill.playerId,{hintType:o.HintType.UI_PANEL,hintMsg:"请选择使用哪一张幻",customRequest:{data:{rowsOfCard:{幻:i},title:"千幻",chooseSize:1},mode:"choose"}})).customData[0].idx];t.sendToWorkflow(this.skill.playerId,r,[a],!1),this.skill.invokeEffects(t),this.skill.allowedSuits.add(t.interpret(this.skill.playerId,a).suit),e.removeTarget(e.getTarget().player.id)}))}}class QianHuan extends i.SimpleConditionalSkill{constructor(){super(...arguments),this.id="千幻",this.displayName="千幻",this.description="当与你势力相同的一名角色受到伤害后，你可以将一张与你武将牌上花色均不同的牌置于你的武将牌上。当一名与你势力相同的角色成为基本牌或锦囊牌的唯一目标时，你可以移去一张“千幻”牌，取消之。",this.allowedSuits=new Set(["club","heart","diamond","spade"]),this.hint="可以抵消掉杀, 甚至五谷, 万箭. 注意必须是唯一目标, 所以太史慈的双杀不满足千幻条件"}bootstrapServer(e,t,n){e.on(I.default,this);let r=new QianHuanTrigger(this);e.on(A.WanJian,r),e.on(A.NanMan,r),e.on(A.WuGu,r),e.on(A.TaoYuan,r),e.on(A.TieSuo,r),e.on(x.YiYiDaiLao,r),e.on(x.ZhiJiZhiBi,r),e.on(x.YuanJiao,r),e.on(w.JueDou,r),e.on(w.HuoGong,r),e.on(w.JieDao,r),e.on(w.GuoHe,r),e.on(w.ShunShou,r),e.on(k.UseDelayedRuseOp,r),e.on(S.SlashOP,r)}conditionFulfilled(e,t){if(e.timeline!==I.DamageTimeline.TAKEN_DAMAGE)return!1;let n=e.target,r=t.context.getPlayer(this.playerId);return n.isRevealed()&&(0,d.factionsSame)(n.getFaction(),(0,U.getFactionIfRevealNow)(r,t))&&r.hasOwnCards()}doInvoke(e,t){return r(this,void 0,void 0,(function*(){let e=yield t.sendHint(this.playerId,{hintType:o.HintType.CHOOSE_CARD,hintMsg:"[千幻] 请选择放置于武将牌上作为'幻'的牌",quantity:1,positions:[l.UIPosition.MY_HAND,l.UIPosition.MY_EQUIP],extraButtons:[l.Button.CANCEL],suits:[...this.allowedSuits]});if(e.isCancel())return;let n=e.getSingleCardAndPos();n[0].description="幻",t.sendToWorkflow(this.playerId,n[1],[n[0]],!1),this.invokeEffects(t),this.allowedSuits.delete(t.interpret(this.playerId,n[0]).suit),yield t.takeFromWorkflow(this.playerId,"main"===this.position?h.CardPos.ON_GENERAL:h.CardPos.ON_SUB_GENERAL,[n[0]])}))}}t.QianHuan=QianHuan},5125:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{l(r.next(e))}catch(e){a(e)}}function s(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.YongJue=t.CunSi=t.GuiXiu=t.TianFu=t.KanPoJiangWei=t.YiZhi=t.GuanXingJiangWei=t.TiaoXin=t.KongCheng=t.KongChengCancellor=t.GuanXing=t.ShouCheng=t.ShengXi=t.ShenZhi=t.ShuShen=t.LieRen=t.JuXiang=t.ZaiQi=t.HuoShou=t.NiePan=t.LianHuan=t.QiCai=t.JiZhi=t.FangQuan=t.XiangLe=t.JiLi=t.LieGong=t.KuangGu=t.KanPo=t.HuoJi=t.BaZhen=t.MaShu=t.TieQi=t.LongDan=t.PaoXiao=t.WuSheng=t.Rende=void 0;const i=n(2166),a=n(5796),o=n(8411),s=n(5935),l=n(1480),d=n(8663),u=n(739),c=n(8651),p=n(6069),h=n(1073),f=n(3587),g=n(4619),y=n(1613),m=n(7844),v=n(5278),C=n(9550),b=n(4910),S=n(9575),E=n(2608),w=n(1628),_=n(2421),P=n(3484),N=n(3160),I=n(7296),k=n(5706),A=n(3402),x=n(5465),T=n(6652),D=n(4739),O=n(801),R=n(2985),F=n(9820),M=n(9421),U=n(6203),H=n(1802),L=n(8696),G=n(9577),B=[C.SlashType.RED,C.SlashType.BLACK,C.SlashType.FIRE,C.SlashType.THUNDER];class Rende extends i.Skill{constructor(){super(...arguments),this.id="仁德",this.displayName="仁德",this.description='出牌阶段每名角色限一次，你可以将任意张手牌交给一名其他角色。当你给出第二张"仁德"牌时，你可以视为使用一张基本牌。',this.givenAmount=0,this.hiddenType=i.HiddenType.NONE,this.hint="所以看到刘备不要乱穿藤甲...刘备不缺酒和火杀"}bootstrapClient(){c.playerActionDriverProvider.registerProvider(u.HintType.PLAY_HAND,(e=>new d.default("仁德给牌").expectChoose([l.UIPosition.MY_SKILL],1,1,((e,t)=>e===this.id)).expectChoose([l.UIPosition.MY_HAND],1,999,((e,t)=>!0),(()=>"选择任意张手牌交给另一名玩家")).expectChoose([l.UIPosition.PLAYER],1,1,((t,n)=>{let r=e.roundStat.customData[this.id];return!(t===this.playerId||r&&r.has(t))}),(()=>"选择一名此回合尚未给过牌的其他玩家")).expectAnyButton("点击确定使用仁德").build(e))),c.playerActionDriverProvider.registerSpecial(this.id,(e=>new d.default("仁德使用桃酒").expectChoose([l.UIPosition.BUTTONS],1,1,((e,t)=>e===g.CardType.WINE.id||e===g.CardType.PEACH.id)).build(e,[]))),c.playerActionDriverProvider.registerSpecial(this.id,(e=>{let{slashMax:t,slashCount:n,slashNumber:r}=e.roundStat;return new d.default("仁德使用杀").expectChoose([l.UIPosition.PLAYER],1,r,((e,r)=>(0,y.slashTargetFilter)(e,r)&&t>n),(()=>`选择‘杀’的对象，可选${r}个`)).expectChoose([l.UIPosition.BUTTONS],1,1,((e,t)=>!!B.find((t=>t.text===e))),(()=>"选择出何种杀牌")).build(e,[])}))}onPlayerAction(e,t,n){return r(this,void 0,void 0,(function*(){let t=n.roundStats.customData[this.id],r=e.targets[0],i=n.context.getPlayer(this.playerId);t.add(r.player.id),this.playSound(n,3),n.log(`${this.playerId} 发动了 ${this.displayName}`),n.broadcast(new p.TextFlashEffect(this.playerId,[r.player.id],this.id));let a=e.getCardsAtPos(h.CardPos.HAND);if(0===a.length)throw`[仁德] 牌呢?? ${e.source.player.id} ${a}`;if(yield n.transferCards(this.playerId,r.player.id,h.CardPos.HAND,h.CardPos.HAND,a),this.givenAmount<2&&this.givenAmount+a.length>=2){console.log("[仁德] 给出了第二张牌, 询问使用何种基本牌");let e=n.roundStats,t=B.map((e=>new l.Button(e.text,e.text))),r=new l.Button(g.CardType.WINE.id,"酒"),a=new l.Button(g.CardType.PEACH.id,"桃");e.customData[f.WINE_TAKEN]&&r.disable(),t.forEach((t=>{t.enabled=e.slashMax>e.slashCount,t.isDirect=!1})),i.hp>=i.maxHp&&a.disable();let o=yield n.sendHint(this.playerId,{hintType:u.HintType.SPECIAL,specialId:this.id,hintMsg:"[仁德]先选择杀的对象再选杀的类型, 或直接使用桃/酒",extraButtons:[...t,a,r,l.Button.CANCEL]});if(o.isCancel())console.log("[仁德] 放弃使用基本牌");else{let e=o.button,t=o.targets;switch(console.log("[仁德] 选择使用",e),e){case g.CardType.WINE.id:yield new m.default(o.source).perform(n),n.playSound(i.getGender(),g.CardType.WINE.id),n.log(`${this.playerId} ${this.displayName}视为使用酒`);break;case g.CardType.PEACH.id:yield new v.default(o.source).perform(n),n.playSound(i.getGender(),g.CardType.PEACH.id),n.log(`${this.playerId} ${this.displayName}视为使用桃`);break;case C.SlashType.RED.text:yield(0,C.PlaySlashOpNoCards)(n,i,t,C.SlashType.RED),n.log(`${this.playerId} ${this.displayName}视为对 ${t} 使用红杀`);break;case C.SlashType.BLACK.text:yield(0,C.PlaySlashOpNoCards)(n,i,t,C.SlashType.BLACK),n.log(`${this.playerId} ${this.displayName}视为对 ${t} 使用黑杀`);break;case C.SlashType.THUNDER.text:yield(0,C.PlaySlashOpNoCards)(n,i,t,C.SlashType.THUNDER),n.log(`${this.playerId} ${this.displayName}视为对 ${t} 使用雷杀`);break;case C.SlashType.FIRE.text:yield(0,C.PlaySlashOpNoCards)(n,i,t,C.SlashType.FIRE),n.log(`${this.playerId} ${this.displayName}视为对 ${t} 使用火杀`);break;default:throw"[仁德] Unknown Choice"+e}}}this.givenAmount+=a.length}))}bootstrapServer(e,t){e.onEvent(o.StageStartFlow,this.playerId,(e=>r(this,void 0,void 0,(function*(){e.info.player.id===this.playerId&&e.stage===s.Stage.ROUND_BEGIN&&(this.givenAmount=0,t.roundStats.customData[this.id]=new Set)}))))}}t.Rende=Rende;class WuSheng extends i.Skill{constructor(){super(...arguments),this.id="武圣",this.displayName="武圣",this.description="你可以将一张红色牌当【杀】使用或打出。",this.hiddenType=i.HiddenType.NONE,this.hint="包括红色装备",this.wusheng=(e,t)=>e.expectChoose([l.UIPosition.MY_SKILL],1,1,(e=>e===this.id)).expectChoose([l.UIPosition.MY_HAND,l.UIPosition.MY_EQUIP],1,1,((e,t)=>(0,b.isSuitRed)(t.interpret(e).suit)),(()=>"选择一张红色的手牌/装备牌当做杀打出"))}bootstrapClient(){(0,y.registerSlashPlayingHand)(this.wusheng),(0,y.registerPlaySlash)(this.wusheng),(0,y.registerSlash)(this.wusheng)}onPlayerAction(e,t,n){return r(this,void 0,void 0,(function*(){if(t&&!(t instanceof C.AskForSlashOp))throw"[武圣] 不会对此做出反应: "+t;this.playSound(n,2),n.log(`${this.playerId} 发动了 ${this.displayName}`);let r=e.getSingleCardAndPos(),i=r[0];i.description=this.id;let a=r[1];if(t)t instanceof C.AskForSlashOp&&(i.as=g.CardType.SLASH,i.description=this.displayName,n.sendToWorkflow(e.source.player.id,a,[i]),yield n.events.publish(new S.CardBeingUsedEvent(e.source.player.id,[[i,a]],g.CardType.SLASH,!0,!1)));else{i.as=g.CardType.SLASH,i.description=this.displayName;let t=e.targets;n.sendToWorkflow(e.source.player.id,a,[i],!0),yield n.events.publish(new S.CardBeingUsedEvent(e.source.player.id,[[i,a]],g.CardType.SLASH,!0)),yield new C.default(e.source,t,[i]).perform(n)}}))}}t.WuSheng=WuSheng;class PaoXiao extends i.SimpleConditionalSkill{constructor(){super(...arguments),this.id="咆哮",this.displayName="咆哮",this.description="锁定技，你使用【杀】无次数限制。当你于当前回合使用第二张【杀】时，你摸一张牌。",this.hiddenType=i.HiddenType.REVEAL_IN_MY_USE_CARD,this.needRepeatedCheck=!1,this.isLocked=!0,this.slashNumber=0,this.hint="张飞可以适当地留杀, 以保证下回合还可以连续出两张"}bootstrapServer(e,t){e.on(C.SlashOP,this),e.onEvent(o.StageStartFlow,this.playerId,(e=>r(this,void 0,void 0,(function*(){this.isInactive()||e.stage!==s.Stage.ROUND_BEGIN||this.playerId!==e.info.player.id||(console.log("[咆哮] 增加 900 出杀次数"),t.roundStats.slashMax+=900,this.slashNumber=0)}))))}conditionFulfilled(e,t){return e.source.player.id===this.playerId&&e.timeline===P.Timeline.CHOOSING_TARGET&&(t.roundStats.slashCount>1&&this.playSound(t,2),this.slashNumber++,2===this.slashNumber)}onStatusUpdated(e){return r(this,void 0,void 0,(function*(){this.isInactive()||e.currPlayer().player.id!==this.playerId||(console.log("[咆哮] 增加 900 出杀次数"),e.roundStats.slashMax+=900,e.reissue())}))}invokeMsg(){return"(咆哮)摸牌"}doInvoke(e,t){return r(this,void 0,void 0,(function*(){console.log("[咆哮] 玩家出了第二次杀, 摸牌"),yield new E.default(t.context.getPlayer(this.playerId),1).perform(t)}))}}t.PaoXiao=PaoXiao;class LongDan extends i.SimpleConditionalSkill{constructor(){super(...arguments),this.id="龙胆",this.displayName="龙胆",this.description="你可以将【杀】当【闪】、【闪】当【杀】使用或打出。当你通过发动【龙胆】使用的【杀】被一名角色使用的【闪】抵消时，你可以对另一名角色造成1点伤害。当一名角色使用的【杀】被你通过发动【龙胆】使用的【闪】抵消时，你可以令另一名其他角色回复1点体力。",this.hiddenType=i.HiddenType.NONE,this.hint="和曹丕一样, 杀赵云的一般是队友...",this.longdan=(e,t)=>e.expectChoose([l.UIPosition.MY_SKILL],1,1,((e,t)=>e===this.id),(()=>t.hintMsg)).expectChoose([l.UIPosition.MY_HAND],1,1,((e,t)=>t.interpret(e).type===g.CardType.DODGE),(()=>"选择一张闪当杀打出"))}bootstrapClient(){(0,y.registerSlashPlayingHand)(this.longdan),(0,y.registerPlaySlash)(this.longdan),(0,y.registerSlash)(this.longdan),c.playerActionDriverProvider.registerProvider(u.HintType.DODGE,(e=>new d.default("龙胆出闪").expectChoose([l.UIPosition.MY_SKILL],1,1,(e=>e===this.id)).expectChoose([l.UIPosition.MY_HAND],1,1,((e,t)=>t.interpret(e).type.isSlash()),(()=>"选择一张杀当闪打出")).expectAnyButton("点击确定使用闪").build(e,[l.Button.OK])))}onPlayerAction(e,t,n){return r(this,void 0,void 0,(function*(){let r=e.getSingleCardAndPos(),i=r[0],a=r[1];if(t)t instanceof C.AskForSlashOp?(i.as=g.CardType.SLASH,i.description=this.id,this.invokeEffects(n,e.targets.map((e=>e.player.id))),n.sendToWorkflow(e.source.player.id,a,[i]),yield n.events.publish(new S.CardBeingUsedEvent(e.source.player.id,[[i,a]],g.CardType.SLASH,!0,!1))):t instanceof w.default&&(i.as=g.CardType.DODGE,i.description=this.id,this.invokeEffects(n,e.targets.map((e=>e.player.id))),n.sendToWorkflow(e.source.player.id,a,[i]),yield n.events.publish(new S.CardBeingUsedEvent(e.source.player.id,[[i,a]],g.CardType.DODGE,!0,!1)));else{i.as=g.CardType.SLASH,i.description=this.id;let t=e.targets;this.invokeEffects(n,e.targets.map((e=>e.player.id))),n.sendToWorkflow(e.source.player.id,a,[i],!0),yield n.events.publish(new S.CardBeingUsedEvent(e.source.player.id,[[i,a]],g.CardType.SLASH,!0)),yield new C.default(e.source,t,[i]).perform(n)}}))}bootstrapServer(e,t){e.on(C.SlashDodgedEvent,this)}conditionFulfilled(e,t){return this.isLongDanSlash(e)||this.isLongDanDodge(e)}doInvoke(e,t){return r(this,void 0,void 0,(function*(){if(this.isLongDanSlash(e)){console.log("[龙胆] 发动的杀被抵消, 可令一人掉血");let n=yield t.sendHint(this.playerId,{hintType:u.HintType.CHOOSE_PLAYER,hintMsg:"[龙胆] 请选择一名玩家受到你的伤害",minQuantity:1,quantity:1,forbidden:[e.slashOp.target.player.id],extraButtons:[l.Button.CANCEL]});if(!n.isCancel()){let r=n.targets[0];console.log("[龙胆] 造成伤害",r.player.id),yield new a.default(e.slashOp.source,r,1,[],a.DamageSource.SKILL).perform(t)}}if(this.isLongDanDodge(e)){console.log("[龙胆] 发动的闪被抵消了杀, 可令一人回血");let n=yield t.sendHint(this.playerId,{hintType:u.HintType.CHOOSE_PLAYER,hintMsg:"[龙胆] 请选择一名玩家回复一点体力",minQuantity:1,quantity:1,forbidden:[e.slashOp.source.player.id,this.playerId],extraButtons:[l.Button.CANCEL]});if(!n.isCancel()){let r=n.targets[0];if(r.hp>=r.maxHp)return void console.log("[龙胆] 无法回复体力,已是满体力",r.player.id);console.log("[龙胆] 回复体力",r.player.id),yield new _.default(e.slashOp.target,r,1).perform(t)}}}))}isLongDanSlash(e){if(e.slashOp.source.player.id!==this.playerId)return!1;let{source:t,cards:n}=e.slashOp;return t.player.id===this.playerId&&n&&1===n.length&&n[0].description===this.id}isLongDanDodge(e){if(e.slashOp.target.player.id!==this.playerId)return!1;let{target:t,dodgeResp:n}=e.dodgeOp;if(!n)return!1;let r=n.getCardsAtPos(h.CardPos.HAND);return t.player.id===this.playerId&&r&&1===r.length&&r[0].description===this.id}}t.LongDan=LongDan;class TieQi extends i.SimpleConditionalSkill{constructor(){super(...arguments),this.id="铁骑",this.displayName="铁骑",this.description="当你使用【杀】指定一个目标后，你可以进行判定。然后你选择其一张明置的武将牌，令此武将牌上的所有非锁定技于此回合内失效。最后除非该角色弃置与结果花色相同的一张牌，否则不能使用【闪】。",this.cache=new Set,this.hint="界马超的技能, 专治魏国卖血流和吴国刷牌流. 小乔看了发抖, 曹丕看了吓尿"}bootstrapServer(e,t){e.on(C.SlashOP,this),e.onEvent(o.StageEndFlow,this.playerId,(e=>r(this,void 0,void 0,(function*(){if(e.info.player.id===this.playerId&&e.stage===s.Stage.ROUND_END){console.log("[铁骑] 恢复玩家技能",this.cache.size);for(let e of this.cache)e.enable=!0,yield t.events.publish(e);this.cache.clear()}}))))}conditionFulfilled(e,t){return e.source.player.id===this.playerId&&e.timeline===P.Timeline.AFTER_CONFIRMING_TARGET}doInvoke(e,t){return r(this,void 0,void 0,(function*(){for(let n of e.targets){this.invokeEffects(t,[n.player.id]);let r=yield new N.default("铁骑判定",this.playerId).perform(t);console.log("[铁骑] 判定牌为",r.id);let a=n;if(a.isRevealed()){console.log("[铁骑] 选择将要失效的武将牌");let e=[];a.isGeneralRevealed&&e.push(new l.Button("main","封禁主将技能: "+a.general.name)),a.isSubGeneralRevealed&&e.push(new l.Button("sub","封禁副将技能: "+a.subGeneral.name));let n=yield t.sendHint(this.playerId,{hintType:u.HintType.MULTI_CHOICE,hintMsg:"请选择对 "+a+" 使用[铁骑]要封禁的武将牌",extraButtons:e});console.log("[铁骑] 封禁",a.player.id,n.button),t.log(`${this.playerId} ${this.displayName}封禁了 ${a} 的 ${"main"===n.button?"主将":"副将"} 的非锁定技`);let r=new i.GeneralSkillStatusUpdate(this.id,a,n.button,!1);this.cache.add(r),yield t.events.publish(r)}let o=t.interpret(this.playerId,r).suit,s=yield t.sendHint(a.player.id,{hintType:u.HintType.CHOOSE_CARD,hintMsg:`请弃置一张花色为[${k.Suits[o]}]的手牌, 否则不能出闪`,quantity:1,positions:[l.UIPosition.MY_HAND,l.UIPosition.MY_EQUIP],extraButtons:[l.Button.CANCEL],suits:[o]});if(s.isCancel())console.log("[铁骑] 对方没有弃置同花色牌, 无法出闪"),e.undodegables.add(a.player.id);else{console.log("[铁骑] 对方弃置了牌以获得出闪的权利");let e=s.getSingleCardAndPos();t.sendToWorkflow(a.player.id,e[1],[e[0]]),yield t.events.publish(new S.CardBeingDroppedEvent(a.player.id,[e]))}}}))}}t.TieQi=TieQi;class MaShu extends i.Skill{constructor(){super(...arguments),this.id="马术",this.displayName="马术",this.description="出牌阶段，你可以明置此武将牌；你计算与其他角色的距离-1。",this.isApplied=!1,this.isLocked=!0,this.hiddenType=i.HiddenType.REVEAL_IN_MY_USE_CARD,this.hint="没啥好说的, 经常带来负面影响(借刀,驱虎)"}onRemoval(e){if(this.isApplied){let t=e.getPlayer(this.playerId);this.isApplied=!1,console.log(`[${this.id}] Remove, 失效, 计算与他人距离时不再减1`,this.playerId),t.distanceModTargetingOthers+=1}}onStatusUpdated(e){return r(this,void 0,void 0,(function*(){let t=e.context.getPlayer(this.playerId);this.isApplied||this.isInactive()||(console.log(`[${this.id}] 生效, 计算与他人距离时减1`,this.playerId),t.distanceModTargetingOthers-=1,e.broadcast(t,A.PlayerInfo.sanitize),this.isApplied=!0),this.isApplied&&this.isInactive()&&(console.log(`[${this.id}] 失效, 计算与他人距离时不再减1`,this.playerId),t.distanceModTargetingOthers+=1,e.broadcast(t,A.PlayerInfo.sanitize),this.isApplied=!1)}))}}t.MaShu=MaShu;class BaZhen extends i.SimpleConditionalSkill{constructor(){super(...arguments),this.id="八阵",this.displayName="八阵",this.description="锁定技，若你的装备区里没有防具牌，你视为装备着【八卦阵】",this.hint='"二张, 快给诸葛穿上藤甲!"'}bootstrapServer(e,t){e.on(w.default,this),this.myBaGua=new x.BaGua(this.playerId,g.CardType.BA_GUA,t)}conditionFulfilled(e,t){return e.target.player.id===this.playerId&&!t.context.getPlayer(this.playerId).findCardAt(h.CardPos.EQUIP,"shield")&&!x.BlockedEquipment.isBlocked(this.playerId)}doInvoke(e,t){return r(this,void 0,void 0,(function*(){this.invokeEffects(t),yield this.myBaGua.doEffect(e)}))}}t.BaZhen=BaZhen;class HuoJi extends i.Skill{constructor(){super(...arguments),this.id="火计",this.displayName="火计",this.description="你可以将一张红色手牌当【火攻】使用。",this.hiddenType=i.HiddenType.NONE,this.hint="搭配凤雏, 穿上藤甲, 连上自己, 火攻自己..."}bootstrapClient(){c.playerActionDriverProvider.registerProvider(u.HintType.PLAY_HAND,(e=>new d.default("火计").expectChoose([l.UIPosition.MY_SKILL],1,1,((e,t)=>e===this.id)).expectChoose([l.UIPosition.MY_HAND],1,1,((e,t)=>(0,b.isSuitRed)(t.interpret(e).suit)),(()=>"选择一张红色手牌")).expectChoose([l.UIPosition.PLAYER],1,1,((e,t)=>t.getPlayer(e).getCards(h.CardPos.HAND).length>0),(()=>"选择‘火攻’的对象")).expectAnyButton("点击确定发动火攻").build(e)))}onPlayerAction(e,t,n){return r(this,void 0,void 0,(function*(){let t=e.getSingleCardAndPos();this.invokeEffects(n),t[0].as=g.CardType.HUO_GONG,n.sendToWorkflow(e.source.player.id,h.CardPos.HAND,[t[0]],!0),yield n.events.publish(new S.CardBeingUsedEvent(e.source.player.id,[t],t[0].type,!0)),yield new T.HuoGong(e.source,e.targets[0],[t[0]]).perform(n)}))}}t.HuoJi=HuoJi;class KanPo extends i.Skill{constructor(){super(...arguments),this.id="看破",this.displayName="看破",this.description="你可以将一张黑色手牌当【无懈可击】使用。",this.hint="配合蒋琬费祎, 敌方就不要想用锦囊牌了",this.canStillProcess=e=>e.context.getPlayer(this.playerId).getCards(h.CardPos.HAND).filter((t=>(0,b.isSuitBlack)(e.interpret(this.playerId,t).suit))).length>0,this.doProcess=(e,t)=>r(this,void 0,void 0,(function*(){yield this.revealMySelfIfNeeded(t);let n=e.getSingleCardAndPos()[0];console.log(`[无懈的结算] (看破) 打出了${n.id}作为无懈`),n.description=`${e.source.player.id} 看破`,n.as=g.CardType.WU_XIE,t.sendToWorkflow(e.source.player.id,h.CardPos.HAND,[n]),this.invokeEffects(t),yield t.events.publish(new S.CardBeingUsedEvent(e.source.player.id,[[n,h.CardPos.HAND]],n.type,!0))}))}bootstrapClient(){c.playerActionDriverProvider.registerProvider(u.HintType.WU_XIE,(e=>new d.default("看破").expectChoose([l.UIPosition.MY_SKILL],1,1,((e,t)=>e===this.id)).expectChoose([l.UIPosition.MY_HAND],1,1,((e,t)=>(0,b.isSuitBlack)(t.interpret(e).suit)),(()=>"选择一张黑色手牌")).expectAnyButton("点击确定使用无懈可击").build(e,[l.Button.OK])))}bootstrapServer(e,t){e.onEvent(D.WuXieContext,this.playerId,(e=>r(this,void 0,void 0,(function*(){this.isDisabled||this.isGone||!this.isRevealed&&!this.isForewarned||(console.log("[看破] 预发动"),t.context.getPlayer(this.playerId).getCards(h.CardPos.HAND).filter((e=>(0,b.isSuitBlack)(t.interpret(this.playerId,e).suit))).length>0&&(console.log("[看破] 添加技能处理"),e.candidates.add(this.playerId),e.processors.set(this.playerId,this)))}))))}}t.KanPo=KanPo;class KuangGu extends i.SimpleConditionalSkill{constructor(){super(...arguments),this.id="狂骨",this.displayName="狂骨",this.description="锁定技，当你对距离1以内的一名角色造成1点伤害后，你回复1点体力。",this.hint="单挑神技",this.isLocked=!0}bootstrapServer(e){e.on(a.default,this)}conditionFulfilled(e,t){return e.isFrom(this.playerId)&&e.timeline===a.DamageTimeline.DID_DAMAGE&&t.context.computeDistance(this.playerId,e.target.player.id)<=1&&e.source.hp<e.source.maxHp}doInvoke(e,t){return r(this,void 0,void 0,(function*(){let n=e.source;this.invokeEffects(t,[e.target.player.id]),console.log("[狂骨] 发动, 回血",e.amount),yield new _.default(n,n,e.amount).perform(t)}))}}t.KuangGu=KuangGu;class LieGong extends i.SimpleConditionalSkill{constructor(){super(...arguments),this.id="烈弓",this.displayName="烈弓",this.description="当你于出牌阶段内使用【杀】指定一个目标后，若该角色的手牌数不小于你的体力值或不大于你的攻击范围，则你可以令其不能使用【闪】响应此【杀】。",this.hint="没啥好说的"}bootstrapServer(e,t){e.on(C.SlashOP,this)}conditionFulfilled(e,t){return e.source.player.id===this.playerId&&e.timeline===P.Timeline.AFTER_CONFIRMING_TARGET&&(e.getTarget().getCards(h.CardPos.HAND).length>=e.source.hp||e.getTarget().getCards(h.CardPos.HAND).length<=e.source.getReach())}doInvoke(e,t){return r(this,void 0,void 0,(function*(){console.log("[烈弓] 发动, 不能闪"),this.invokeEffects(t,[e.getTarget().player.id]),e.undodegables.add(e.getTarget().player.id)}))}}t.LieGong=LieGong;class JiLi extends i.SimpleConditionalSkill{constructor(){super(...arguments),this.id="蒺藜",this.displayName="蒺藜",this.description="当你于一回合内使用或打出第X张牌时，你可以摸X张牌（X为你的攻击范围）",this.playedInThisRound=0,this.needRepeatedCheck=!1,this.hint="注意假如你有距离为2的武器, 需要首先使用, 因为你使用武器牌的时候你的攻击范围还没变. 沙摩柯回合内有武器很强, 回合外没有武器很强"}bootstrapServer(e,t){e.on(S.CardBeingUsedEvent,this),e.onEvent(o.StageStartFlow,this.playerId,(e=>r(this,void 0,void 0,(function*(){e.stage===s.Stage.ROUND_BEGIN&&(console.log("[蒺藜] 使用牌数清零"),this.playedInThisRound=0)}))))}conditionFulfilled(e,t){if(e.player===this.playerId){let n=this.playedInThisRound;this.playedInThisRound+=e.cards.length;let r=t.context.getPlayer(this.playerId).getReach();return console.log("[蒺藜] 使用牌数为",n,this.playedInThisRound,r),n<r&&this.playedInThisRound>=r}return!1}doInvoke(e,t){return r(this,void 0,void 0,(function*(){let e=t.context.getPlayer(this.playerId);console.log("[蒺藜] 发动蒺藜拿牌",e.getReach()),this.invokeEffects(t),yield new E.default(e,e.getReach()).perform(t)}))}}t.JiLi=JiLi;class XiangLe extends i.SimpleConditionalSkill{constructor(){super(...arguments),this.id="享乐",this.displayName="享乐",this.description="锁定技，当你成为一名角色使用【杀】的目标后，除非该角色弃置一张基本牌，否则此【杀】对你无效。",this.isLocked=!0,this.hint="没啥好说的"}bootstrapServer(e,t){e.on(C.SlashOP,this)}conditionFulfilled(e,t){return e.hasTarget(this.playerId)&&e.timeline===P.Timeline.AFTER_BECOMING_TARGET}doInvoke(e,t){return r(this,void 0,void 0,(function*(){console.log("[享乐] 发动"),this.invokeEffects(t,[e.source.player.id]),(yield(0,O.askAbandonBasicCard)(t,e.source,"请弃置一张基本牌否则你的杀无效",!0))?console.log("[享乐] 弃置了基本牌, 杀继续生效"):(console.log("[享乐] 使杀无效化"),e.removeTarget(this.playerId))}))}}t.XiangLe=XiangLe;class FangQuan extends i.SimpleConditionalSkill{constructor(){super(...arguments),this.id="放权",this.displayName="放权",this.description="你可以跳过出牌阶段，然后此回合结束时，你可以弃置一张手牌并令一名其他角色获得一个额外的回合。",this.invoked=!1,this.hint="一般用于配合蜀国厉害的爆发"}bootstrapClient(){c.playerActionDriverProvider.registerSpecial(this.id,(e=>new d.default("放权").expectChoose([l.UIPosition.MY_HAND],1,1,((e,t)=>!0),(()=>"请弃置一张手牌")).expectChoose([l.UIPosition.PLAYER],1,1,((e,t)=>e!==t.myself.player.id),(()=>"请选择一名其他玩家放权")).expectAnyButton("点击确定对其发动放权").build(e)))}bootstrapServer(e,t){e.on(o.StageStartFlow,this),e.onEvent(o.StageEndFlow,this.playerId,(e=>r(this,void 0,void 0,(function*(){if(e.isFor(this.playerId,s.Stage.ROUND_END)&&this.invoked){this.invoked=!1,console.log("[放权] 多出一回合");let e=yield t.sendHint(this.playerId,{hintType:u.HintType.SPECIAL,specialId:this.id,hintMsg:"放权"});if(!e.isCancel()){let n=e.targets[0];console.log("[放权] 给了",n.player.id),yield e.dropCardsFromSource(this.playerId+" 放权"),this.invokeEffects(t,[n.player.id]),t.cutQueue(n)}}}))))}conditionFulfilled(e,t){return e.info.player.id===this.playerId&&e.stage===s.Stage.USE_CARD}doInvoke(e,t){return r(this,void 0,void 0,(function*(){console.log("[放权] 发动, 跳过出牌阶段"),this.invoked=!0,t.roundStats.skipStages.set(s.Stage.USE_CARD,!0)}))}}t.FangQuan=FangQuan;class JiZhi extends i.SimpleConditionalSkill{constructor(){super(...arguments),this.id="集智",this.displayName="集智",this.description="当你使用一张非转化的普通锦囊牌时，你可以摸一张牌。",this.hint="蜀国的核心技能"}bootstrapServer(e,t){e.on(S.CardBeingUsedEvent,this)}conditionFulfilled(e,t){return e.player===this.playerId&&1===e.cards.length&&!e.cards[0][0].as&&!e.isFromSkill&&e.cards[0][0].type.isRuse()}doInvoke(e,t){return r(this,void 0,void 0,(function*(){console.log("[集智] 发动, 摸一张牌"),this.invokeEffects(t),yield new E.default(t.context.getPlayer(this.playerId),1).perform(t)}))}}t.JiZhi=JiZhi;class QiCai extends i.Skill{constructor(){super(...arguments),this.id="奇才",this.displayName="奇才",this.description="出牌阶段，你可以明置此武将牌；你使用锦囊牌无距离限制。",this.isWorking=!1,this.hiddenType=i.HiddenType.REVEAL_IN_MY_USE_CARD,this.hint="没啥好说的"}bootstrapServer(e,t){e.onEvent(o.StageStartFlow,this.playerId,(e=>r(this,void 0,void 0,(function*(){e.isFor(this.playerId,s.Stage.ROUND_BEGIN)&&this.isWorking&&(console.log("[奇才] 改变锦囊距离限制",this.playerId),t.roundStats.binLiangReach=99,t.roundStats.shunshouReach=99)}))))}onStatusUpdated(e){return r(this,void 0,void 0,(function*(){this.isInactive()?(console.log("[奇才] 失效",this.playerId),this.isWorking=!1,e.currPlayer().player.id===this.playerId&&(e.roundStats.binLiangReach=1,e.roundStats.shunshouReach=1,e.reissue())):(console.log("[奇才] 生效",this.playerId),this.isWorking=!0,e.currPlayer().player.id===this.playerId&&(e.roundStats.binLiangReach=99,e.roundStats.shunshouReach=99,e.reissue()))}))}}t.QiCai=QiCai;class LianHuan extends i.Skill{constructor(){super(...arguments),this.id="连环",this.displayName="连环",this.description="你可以将一张梅花手牌当【铁索连环】使用或重铸。",this.hiddenType=i.HiddenType.NONE,this.hint="增强过牌能力"}bootstrapClient(){c.playerActionDriverProvider.registerProvider(u.HintType.PLAY_HAND,(e=>new d.default("连环").expectChoose([l.UIPosition.MY_SKILL],1,1,((e,t)=>e===this.id)).expectChoose([l.UIPosition.MY_HAND],1,1,((e,t)=>"club"===t.interpret(e).suit),(()=>"选择一张梅花手牌")).expectChoose([l.UIPosition.PLAYER],1,2,((e,t)=>!0),(()=>"选择1到2个‘铁索连环’的对象, 或者直接重铸")).expectAnyButton("点击确定使用铁索连环 或重铸").build(e,[l.Button.OK,l.Button.CANCEL,new l.Button("chong_zhu","重铸")])))}onPlayerAction(e,t,n){return r(this,void 0,void 0,(function*(){this.playSound(n,2),n.log(`${this.playerId} 发动了 ${this.displayName}`);let t=e.getSingleCardAndPos();t[0].as=g.CardType.TIE_SUO,t[0].description="连环",0===e.targets.length||"chong_zhu"===e.button?(yield e.dropCardsFromSource("重铸"),yield new R.TieSuo(e.source,e.targets,!0,[t[0]]).perform(n)):(n.sendToWorkflow(e.source.player.id,t[1],[t[0]],!0),yield n.events.publish(new S.CardBeingUsedEvent(e.source.player.id,[t],g.CardType.TIE_SUO,!0,!0)),yield new R.TieSuo(e.source,e.targets,!1,[t[0]]).perform(n))}))}}t.LianHuan=LianHuan;class NiePan extends i.SimpleConditionalSkill{constructor(){super(...arguments),this.id="涅槃",this.displayName="涅槃",this.description="限定技，当你处于濒死状态时，你可以弃置所有牌，然后复原你的武将牌，摸三张牌，将体力回复至3点。",this.hint="配合甘夫人可以摸三张牌"}bootstrapServer(e,t){t.context.getPlayer(this.playerId).signs["涅"]={enabled:!0,type:"limit-skill",displayName:this.displayName,owner:this.position},e.on(F.default,this)}conditionFulfilled(e,t){return e.deadman.player.id===this.playerId&&e.goodman.player.id===this.playerId}doInvoke(e,t){return r(this,void 0,void 0,(function*(){let e=t.context.getPlayer(this.playerId),n=e.getAllCards();for(let r of n)r[0].description=`${e} 涅槃弃牌`,t.sendToWorkflow(e.player.id,r[1],[r[0]]);yield t.events.publish(new S.CardBeingDroppedEvent(e.player.id,n)),e.signs["涅"].enabled=!1,e.isDrunk=!1,e.isChained=!1,e.isTurnedOver=!1,e.hp=0,yield new _.default(e,e,3).perform(t),t.broadcast(e,A.PlayerInfo.sanitize),this.invokeEffects(t),yield new E.default(t.context.getPlayer(this.playerId),3).perform(t)}))}}t.NiePan=NiePan;class HuoShou extends i.SimpleConditionalSkill{constructor(){super(...arguments),this.id="祸首",this.displayName="祸首",this.description="锁定技，【南蛮入侵】对你无效；当其他角色使用【南蛮入侵】指定目标后，你代替其成为此牌造成的伤害的来源。",this.isLocked=!0,this.hint="让李典哭泣的技能(不能南蛮刷牌了), 但也会莫名其妙的被刚烈,反馈,甚至断肠"}bootstrapServer(e,t){e.on(R.NanMan,this)}conditionFulfilled(e,t){return!!e.targets.find((e=>e.player.id===this.playerId))&&e.timeline===P.Timeline.BECOME_TARGET}doInvoke(e,t){return r(this,void 0,void 0,(function*(){this.invokeEffects(t),e.targets.splice(e.targets.findIndex((e=>e.player.id===this.playerId)),1),e.damageDealer=t.context.getPlayer(this.playerId)}))}}t.HuoShou=HuoShou;class ZaiQi extends i.SimpleConditionalSkill{constructor(){super(...arguments),this.id="再起",this.displayName="再起",this.description="摸牌阶段，你可以改为亮出牌堆顶的X张牌（X为你已损失的体力值），然后回复等同于其中红桃牌数量的体力，并获得其余的牌。",this.hint="搭配观星可以比较稳定的回血"}bootstrapServer(e,t){e.on(E.TakeCardStageOp,this)}conditionFulfilled(e,t){let n=t.context.getPlayer(this.playerId);return e.player===n&&n.hp<n.maxHp}doInvoke(e,t){return r(this,void 0,void 0,(function*(){this.playSound(t,2),t.broadcast(new p.TextFlashEffect(this.playerId,[],this.id)),e.amount=-999;let n=t.context.getPlayer(this.playerId),r=n.maxHp-n.hp,i=t.context.deck.getCardsFromTop(r).map((e=>(e.description=this.displayName,e))),a=p.CardTransit.deckToWorkflow(i);a.specialEffect="flip",t.broadcast(a);let o=[];i.forEach((e=>{t.context.workflowCards.add(e),"heart"!==t.interpret(this.playerId,e).suit&&o.push(e)}));let s=i.length-o.length,l=`${this.playerId} 发动了 ${this.displayName}`;s>0&&(l+=` 回复了${s}点体力`),o.length>0&&(l+=` 并获得了${o}`),t.log(l),yield new _.default(n,n,s).perform(t),yield t.takeFromWorkflow(this.playerId,h.CardPos.HAND,o)}))}}t.ZaiQi=ZaiQi;class JuXiang extends i.SimpleConditionalSkill{constructor(){super(...arguments),this.id="巨象",this.displayName="巨象",this.description="锁定技，【南蛮入侵】对你无效；当其他角色使用的【南蛮入侵】结算结束后，你获得之。",this.isLocked=!0,this.hint="搭配仁德刘, 配合黄月英永动机...巨象收南蛮 > 仁德给月英 > 月英放南蛮"}bootstrapServer(e,t){e.on(R.NanMan,this)}conditionFulfilled(e,t){return!!e.targets.find((e=>e.player.id===this.playerId))&&e.timeline===P.Timeline.BECOME_TARGET||e.source.player.id!==this.playerId&&e.timeline===P.Timeline.COMPUTE_FINISH}doInvoke(e,t){return r(this,void 0,void 0,(function*(){e.timeline===P.Timeline.BECOME_TARGET&&(this.invokeEffects(t),e.targets.splice(e.targets.findIndex((e=>e.player.id===this.playerId)),1)),e.timeline===P.Timeline.COMPUTE_FINISH&&(console.log("[巨象] 南蛮结算完毕",e.cards.map((e=>e.id)),(0,k.all)(e.cards,(e=>t.stillInWorkflow(e)))),e.cards.length>0&&(0,k.all)(e.cards,(e=>t.stillInWorkflow(e)))&&(this.playSound(t,2),t.broadcast(new p.TextFlashEffect(this.playerId,[],this.id)),t.log(`${this.playerId} 获得南蛮入侵牌 ${e.cards}`),yield t.takeFromWorkflow(this.playerId,h.CardPos.HAND,e.cards)))}))}}t.JuXiang=JuXiang;class LieRen extends i.SimpleConditionalSkill{constructor(){super(...arguments),this.id="烈刃",this.displayName="烈刃",this.description="当你使用【杀】对目标角色造成伤害后，你可以与其拼点，若你赢，你获得其一张牌。",this.hint="烈刃加咆哮加雌雄双股剑, 对面连渣都不剩了"}bootstrapServer(e,t){e.on(a.default,this)}conditionFulfilled(e,t){return!(!e.isFrom(this.playerId)||e.timeline!==a.DamageTimeline.DID_DAMAGE||e.damageSource!==a.DamageSource.SLASH||e.target.player.id===this.playerId)&&(0,M.canCardFight)(this.playerId,e.target.player.id,t)}doInvoke(e,t){return r(this,void 0,void 0,(function*(){this.invokeEffects(t,[e.target.player.id]),(yield new M.default(e.source,e.target,this.displayName).perform(t))&&(yield(0,T.GrabCard)(e.source,e.target,"烈刃拼点成功获得对方一张牌",t,[h.CardPos.HAND,h.CardPos.EQUIP]))}))}}t.LieRen=LieRen;class ShuShen extends i.SimpleConditionalSkill{constructor(){super(...arguments),this.id="淑慎",this.displayName="淑慎",this.description="当你回复1点体力后，你可以令一名其他角色摸一张牌。",this.hint="敌人更加不敢杀你队友赵云了..."}bootstrapServer(e,t){e.on(_.default,this)}conditionFulfilled(e,t){return e.target.player.id===this.playerId&&e.amount>0&&e.timeline===_.HealTimeline.AFTER}doInvoke(e,t){return r(this,void 0,void 0,(function*(){let n=e.amount;for(;n>0;){n--;let e=yield t.sendHint(this.playerId,{hintType:u.HintType.CHOOSE_PLAYER,hintMsg:"选择一名其他角色摸牌",forbidden:[this.playerId],minQuantity:1,quantity:1,extraButtons:[l.Button.CANCEL]});if(e.isCancel())return;{let n=e.targets[0];this.invokeEffects(t,[n.player.id]),yield new E.default(n,1).perform(t)}}}))}}t.ShuShen=ShuShen;class ShenZhi extends i.SimpleConditionalSkill{constructor(){super(...arguments),this.id="神智",this.displayName="神智",this.description="准备阶段，你可以弃置所有手牌，若你以此法弃置的手牌数不小于你的体力值，你回复1点体力。",this.hint="单挑挺有用的技能"}bootstrapServer(e,t){e.on(o.StageStartFlow,this)}conditionFulfilled(e,t){let n=t.context.getPlayer(this.playerId);return e.info.player.id===this.playerId&&e.stage===s.Stage.ROUND_BEGIN&&n.getCards(h.CardPos.HAND).length>0}doInvoke(e,t){return r(this,void 0,void 0,(function*(){let e=t.context.getPlayer(this.playerId),n=e.getCards(h.CardPos.HAND);this.invokeEffects(t);let r=n.map((e=>(delete e.as,e.description=`${this.displayName} 弃置`,e)));t.sendToWorkflow(this.playerId,h.CardPos.HAND,r,!0),yield t.events.publish(new S.CardBeingDroppedEvent(this.playerId,r.map((e=>[e,h.CardPos.HAND])))),r.length>=e.hp&&e.hp<e.maxHp&&(yield new _.default(e,e,1).perform(t))}))}}t.ShenZhi=ShenZhi;class ShengXi extends i.SimpleConditionalSkill{constructor(){super(...arguments),this.id="生息",this.displayName="生息",this.description="弃牌阶段开始时，若你此回合内没有造成过伤害，你可以摸两张牌。",this.hasDealtDamage=!1,this.needRepeatedCheck=!1,this.hint="大量增加过牌的技能"}bootstrapServer(e,t){e.on(o.StageStartFlow,this),e.onEvent(a.default,this.playerId,(e=>r(this,void 0,void 0,(function*(){e.isFrom(this.playerId)&&e.type!==a.DamageType.ENERGY&&(this.hasDealtDamage=!0)}))))}conditionFulfilled(e,t){return e.info.player.id===this.playerId&&(e.stage===s.Stage.ROUND_BEGIN&&(this.hasDealtDamage=!1),e.stage===s.Stage.DROP_CARD&&!this.hasDealtDamage)}doInvoke(e,t){return r(this,void 0,void 0,(function*(){this.invokeEffects(t),yield new E.default(t.context.getPlayer(this.playerId),2).perform(t)}))}}t.ShengXi=ShengXi;class ShouCheng extends i.SimpleConditionalSkill{constructor(){super(...arguments),this.id="守成",this.displayName="守成",this.description="当与你势力相同的一名角色于其回合外失去最后手牌时，你可以令其摸一张牌。",this.needRepeatedCheck=!1,this.hint="全势力回合外获得连营"}bootstrapServer(e,t){e.on(S.CardBeingDroppedEvent,this),e.on(S.CardBeingTakenEvent,this),e.on(S.CardBeingUsedEvent,this)}conditionFulfilled(e,t){let n=t.context.getPlayer(this.playerId),r=t.context.getPlayer(e.player);return t.currPlayer()!==r&&!(!I.FactionPlayerInfo.factionSame(n,r)||0!==r.getCards(h.CardPos.HAND).length||!(0,k.any)(e.cards,(e=>e[1]===h.CardPos.HAND)))}doInvoke(e,t){return r(this,void 0,void 0,(function*(){this.invokeEffects(t),yield new E.default(t.context.getPlayer(e.player),1).perform(t)}))}}t.ShouCheng=ShouCheng;class GuanXing extends i.SimpleConditionalSkill{constructor(){super(...arguments),this.id="观星",this.displayName="观星",this.description="准备阶段，你可以观看牌堆顶的X张牌（X为存活角色数且最多为5），然后以任意顺序放回牌堆顶或牌堆底。",this.hint="一切皆有可能, 观下家的兵/乐, 观死周泰, 观别人的八卦",this.xDeterminer=e=>Math.min(5,e.getSortedByCurr(!0).length)}bootstrapServer(e,t){e.on(o.StageStartFlow,this)}conditionFulfilled(e,t){return e.isFor(this.playerId,s.Stage.ROUND_BEGIN)}doInvoke(e,t){return r(this,void 0,void 0,(function*(){let e=this.xDeterminer(t),n=t.context.deck.getCardsFromTop(e);this.data=new U.CustomUIData("guanxing",{title:`${this.playerId} 观星`,size:e,isController:!0,top:n.map(((e,t)=>["guanxing"+t,e])),btm:[]}),this.invokeEffects(t);let{top:r,btm:i}=this.data.data;const a=e=>{e.applyToTopBtm(r,i),t.broadcast(e)};t.pubsub().on(h.CardMovementEvent,a),this.setBroadcast(t),yield t.sendHint(this.playerId,{hintType:u.HintType.UI_PANEL,hintMsg:"ignore",customRequest:{mode:"choose",data:!0}}),t.context.deck.placeCardsAtTop(r.map((e=>e[1]))),t.context.deck.placeCardsAtBtm(i.map((e=>e[1]))),t.log(`${this.playerId} 将 ${r.length}张牌置于牌堆顶, ${i.length}张牌置于牌堆底`),t.broadcast(new U.CustomUIData(U.CustomUIData.STOP,null)),t.pubsub().off(h.CardMovementEvent,a),this.data=null,t.onReconnect=null}))}setBroadcast(e){e.onReconnect=()=>{e.broadcast(this.data,((e,t)=>{if(t!==this.playerId){return new U.CustomUIData("guanxing",{title:`${this.playerId} 观星`,size:this.data.data.size,isController:!1,top:this.data.data.top.map((e=>[e[0],g.Card.DUMMY])),btm:this.data.data.btm.map((e=>[e[0],g.Card.DUMMY]))})}return e}))},e.onReconnect()}}t.GuanXing=GuanXing;class KongChengCancellor{constructor(e){this.skill=e,this.needRepeatedCheck=!1}getSkill(){return this.skill}invokeMsg(e,t){return"发动"+this.skill.displayName}getSkillTriggerer(e,t){return this.skill.playerId}conditionFulfilled(e,t){if(0===t.context.getPlayer(this.skill.playerId).getCards(h.CardPos.HAND).length&&e.timeline===P.Timeline.BECOME_TARGET&&e.hasTarget(this.skill.playerId)){if(e instanceof P.RuseOp&&e.ruseType===g.CardType.JUE_DOU)return!0;if(e instanceof C.SlashOP)return!0}return!1}doInvoke(e,t){return r(this,void 0,void 0,(function*(){this.skill.invokeEffects(t),e.removeTarget(this.skill.playerId)}))}}t.KongChengCancellor=KongChengCancellor;class KongCheng extends i.Skill{constructor(){super(...arguments),this.id="空城",this.displayName="空城",this.description="锁定技，当你成为【杀】或【决斗】的目标时，若你没有手牌，你取消此目标。",this.hint="再加个藤甲就比较无敌了",this.needRepeatedCheck=!1,this.isLocked=!0}bootstrapServer(e,t){e.on(C.SlashOP,new KongChengCancellor(this)),e.on(T.JueDou,new KongChengCancellor(this));const n=e=>r(this,void 0,void 0,(function*(){this.isInactive()||e.player!==this.playerId||0!==t.context.getPlayer(this.playerId).getCards(h.CardPos.HAND).length||this.invokeEffects(t)}));e.onEvent(S.CardBeingDroppedEvent,this.playerId,n),e.onEvent(S.CardBeingTakenEvent,this.playerId,n),e.onEvent(S.CardBeingUsedEvent,this.playerId,n)}}t.KongCheng=KongCheng;class TiaoXin extends i.Skill{constructor(){super(...arguments),this.id="挑衅",this.displayName="挑衅",this.description="出牌阶段限一次，你可以选择一名攻击范围内含有你的角色，然后除非该角色对你使用一张【杀】，否则你弃置其一张牌。",this.hiddenType=i.HiddenType.NONE,this.hint="配合空城/防御装备可以比较安全地挑衅别人..."}bootstrapClient(){c.playerActionDriverProvider.registerProvider(u.HintType.PLAY_HAND,(e=>new d.default("挑衅").expectChoose([l.UIPosition.MY_SKILL],1,1,((t,n)=>t===this.id&&!e.roundStat.customData[this.id])).expectChoose([l.UIPosition.PLAYER],1,1,((e,t)=>e!==this.playerId&&t.computeDistance(e,this.playerId)<=t.getPlayer(e).getReach()),(()=>"选择一名攻击范围内含有你的角色")).expectAnyButton("点击确定发动挑衅").build(e)))}onPlayerAction(e,t,n){return r(this,void 0,void 0,(function*(){n.roundStats.customData[this.id]=!0;let t=e.targets[0];this.invokeEffects(n,[t.player.id]);let r=yield n.sendHint(t.player.id,{hintType:u.HintType.PLAY_SLASH,hintMsg:`${this.playerId} 发动 挑衅 令你对其出杀, 若你取消他将弃置你一张牌`,targetPlayers:[e.source.player.id],extraButtons:[new l.Button(l.Button.CANCEL.id,"放弃")]});r.isCancel()?(console.log("玩家放弃出杀, 弃置其一张牌"),yield(new H.DropOthersCardRequest).perform(n,e.source,t,`(挑衅)弃置${t}一张牌`,[h.CardPos.HAND,h.CardPos.EQUIP])):(console.log("玩家出杀, 开始结算吧"),r.targets.push(e.source),yield n.resolver.on(r,n))}))}}t.TiaoXin=TiaoXin;class GuanXingJiangWei extends GuanXing{constructor(){super(...arguments),this.id="观星(姜维)"}}t.GuanXingJiangWei=GuanXingJiangWei;class YiZhi extends i.Skill{constructor(){super(...arguments),this.id="遗志",this.displayName="遗志",this.description="副将技，此武将牌上单独的阴阳鱼个数-1。若你的主将拥有技能“观星”，则将其描述中的X改为5；若你的主将没有技能“观星”，则你拥有技能“观星”。",this.disabledForMain=!0,this.hiddenType=i.HiddenType.NONE,this.hint="一切皆有可能, 观下家的兵/乐, 观死周泰, 观别人的八卦"}onStatusUpdated(e,t){return r(this,void 0,void 0,(function*(){if(!this.isInactive()){this.isGone=!0;try{let e=t.getSkill(this.playerId,"观星");"main"===e.position?(console.log(`[${this.id}] 生效改变观星描述为5`),e.xDeterminer=()=>5):console.error("发现观星技能但不是主将技??!!",e.playerId,e.id)}catch(n){console.log(`[${this.id}] 生效增加姜维的观星技能`);let r=new GuanXingJiangWei(this.playerId);r.isRevealed=!0,t.addSkill(this.playerId,r),e.send(this.playerId,r.toStatus())}e.send(this.playerId,this.toStatus())}}))}}t.YiZhi=YiZhi;class KanPoJiangWei extends KanPo{constructor(){super(...arguments),this.id="看破(姜维)"}}t.KanPoJiangWei=KanPoJiangWei;class TianFu extends i.Skill{constructor(){super(...arguments),this.id="天覆",this.displayName="天覆",this.description="主将技，阵法技，若当前回合角色与你处于同一队列，你拥有技能“看破”。",this.disabledForSub=!0,this.hiddenType=i.HiddenType.NONE,this.hint="鸡肋"}onStatusUpdated(e,t){return r(this,void 0,void 0,(function*(){this.isInactive()||(this.isGone=!0,console.log(`[${this.id}] 生效增加姜维的看破技能`),this.myKanPo=new KanPoJiangWei(this.playerId),this.myKanPo.isRevealed=!0,this.myKanPo.position="main",t.addSkill(this.playerId,this.myKanPo),(0,L.areInFormation)(e.currPlayer().player.id,this.playerId,e.context)?(console.log(`${this.displayName} 使看破生效`),this.myKanPo.isDisabled=!1):(console.log(`${this.displayName} 使看破禁用`),this.myKanPo.isDisabled=!0),e.send(this.playerId,this.myKanPo.toStatus()),e.send(this.playerId,this.toStatus()))}))}bootstrapServer(e,t,n){e.onEvent(o.StageStartFlow,this.playerId,(e=>r(this,void 0,void 0,(function*(){this.myKanPo&&((0,L.areInFormation)(this.playerId,e.info.player.id,t.context)&&t.getSortedByCurr(!0).length>=4?this.myKanPo.isDisabled&&(console.log(`${this.displayName} 使看破生效`),yield n.changeSkillDisabledness(this.myKanPo,!1,this.displayName,null)):this.myKanPo.isDisabled||(console.log(`${this.displayName} 使看破禁用`),yield n.changeSkillDisabledness(this.myKanPo,!0,this.displayName,null)))}))))}}t.TianFu=TianFu;class GuiXiu extends i.SimpleConditionalSkill{constructor(){super(...arguments),this.id="闺秀",this.displayName="闺秀",this.description="当你明置此武将牌时，你可以摸两张牌；当你移除此武将牌时，你可以回复1点体力。",this.hint="没啥好说的"}bootstrapServer(e,t){e.on(G.RevealGeneralEvent,this),e.onEvent(G.RemoveGeneralEvent,this.playerId,(e=>r(this,void 0,void 0,(function*(){if(e.playerId===this.playerId&&e.isMain===("sub"===this.position)){let e=t.context.getPlayer(this.playerId);yield new _.default(e,e,1).perform(t)}}))))}conditionFulfilled(e,t){return e.playerId===this.playerId&&(e.mainReveal&&"main"===this.position||e.subReveal&&"sub"===this.position)}doInvoke(e,t){return r(this,void 0,void 0,(function*(){this.invokeEffects(t),yield new E.default(t.context.getPlayer(this.playerId),2).perform(t)}))}}t.GuiXiu=GuiXiu;class CunSi extends i.Skill{constructor(){super(...arguments),this.id="存嗣",this.displayName="存嗣",this.description="出牌阶段，你可以移除此武将牌并选择一名角色，然后其获得技能“勇决”（若与你势力相同的一名角色于其回合内使用的第一张牌为【杀】，则该角色可以在此【杀】结算完成后获得之），若你没有获得“勇决”，则获得“勇决”的角色摸两张牌。",this.hint="把自己的副将移除, 让张任/蔡文姬哭泣"}}t.CunSi=CunSi;class YongJue extends i.Skill{constructor(){super(...arguments),this.id="勇决",this.displayName="勇决",this.description="若与你势力相同的一名角色于其回合内使用的第一张牌为【杀】，则此【杀】结算后进入弃牌堆时，该角色可以在此【杀】结算完成后获得之"}}t.YongJue=YongJue},1730:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{l(r.next(e))}catch(e){a(e)}}function s(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.HengJiang=t.WangXi=t.XunXun=t.JiXi=t.ZiLiang=t.TunTian=t.XiaoGuo=t.QiaoBian=t.YiJi=t.JieMing=t.QuHu=t.FangZhu=t.XingShang=t.QiangXi=t.JuShou=t.DuanLiang=t.ShenSu=t.LuoShen=t.QinGuo=t.TianDu=t.LuoYi=t.TuXi=t.GangLie=t.GuiCai=t.FanKui=t.JianXiong=t.SkillForDamageTaken=void 0;const i=n(5796),a=n(2166),o=n(1073),s=n(739),l=n(9575),d=n(3160),u=n(1480),c=n(5706),p=n(8411),h=n(5935),f=n(2608),g=n(6069),y=n(8651),m=n(8663),v=n(4910),C=n(4619),b=n(9550),S=n(4105),E=n(9716),w=n(1131),_=n(3402),P=n(9421),N=n(1802),I=n(801),k=n(1034),A=n(6652),x=n(7296),T=n(6203);class SkillForDamageTaken extends a.SimpleConditionalSkill{isMyDamage(e){return e.target.player.id===this.playerId&&e.timeline===i.DamageTimeline.TAKEN_DAMAGE&&e.type!==i.DamageType.ENERGY&&!e.target.isDead}damageHasSource(e){return e.source&&!e.source.isDead}damageFromOthers(e){return e.source&&!e.source.isDead&&e.source.player.id!==this.playerId}}t.SkillForDamageTaken=SkillForDamageTaken;t.JianXiong=class JianXiong extends SkillForDamageTaken{constructor(){super(...arguments),this.id="奸雄",this.displayName="奸雄",this.description="当你受到伤害后，你可以获得造成此伤害的牌。",this.hint="十分适合吸收万箭南蛮再次施放, 和其他魏国卖血流联动",this.isLocked=!1}bootstrapServer(e){e.on(i.default,this)}conditionFulfilled(e,t){return e.cards&&e.cards.length>0&&this.isMyDamage(e)}doInvoke(e,t){return r(this,void 0,void 0,(function*(){e.cards&&e.cards.length>0&&(this.playSound(t,2),t.log(`${this.playerId} 发动了 ${this.displayName}`),t.broadcast(new g.TextFlashEffect(this.playerId,[],this.id)),yield t.takeFromWorkflow(this.playerId,o.CardPos.HAND,e.cards))}))}};t.FanKui=class FanKui extends SkillForDamageTaken{constructor(){super(...arguments),this.id="反馈",this.displayName="反馈",this.description="当你受到伤害后，你可以获得伤害来源的一张牌。",this.hint="可以用来反馈队友/地方的明装备牌等用以改判定"}bootstrapServer(e){e.on(i.default,this)}conditionFulfilled(e,t){return this.isMyDamage(e)&&this.damageFromOthers(e)&&e.source.hasOwnCards()}invokeMsg(e){return`对 ${e.source} 发动 ${this.displayName}`}doInvoke(e,t){return r(this,void 0,void 0,(function*(){let n=e.source,r=n.player.id;t.broadcast(new g.TextFlashEffect(this.playerId,[r],this.id));let i=yield t.sendHint(this.playerId,{hintType:s.HintType.UI_PANEL,hintMsg:"请选择对方一张牌",customRequest:{data:{rowsOfCard:(0,l.gatherCards)(n,[o.CardPos.HAND,o.CardPos.EQUIP]),title:`反馈 > ${r}`,chooseSize:1},mode:"choose"}});console.log("反馈成功!",i);let a=i.customData,d=(0,l.findCard)(n,a)[0],u=d[0],c=d[1];delete u.description,delete u.as,this.playSound(t,2),t.log(`${this.playerId} 发动了 ${this.displayName}`),yield t.transferCards(r,this.playerId,c,o.CardPos.HAND,[u])}))}};class GuiCai extends a.SimpleConditionalSkill{constructor(){super(...arguments),this.id="鬼才",this.displayName="鬼才",this.description="当一名角色的判定牌生效前，你可以打出一张手牌代替之。",this.hint="注意改判定顺序是从当前角色开始, 如果张角在你后面改的话...你懂的"}bootstrapServer(e){e.on(d.default,this)}conditionFulfilled(e,t){return console.log("[鬼才] 条件达成? ",e.timeline===d.JudgeTimeline.CONFIRMING,t.context.getPlayer(this.playerId).getCards(o.CardPos.HAND).length>0),e.timeline===d.JudgeTimeline.CONFIRMING&&t.context.getPlayer(this.playerId).getCards(o.CardPos.HAND).length>0}doInvoke(e,t){return r(this,void 0,void 0,(function*(){let n=yield t.sendHint(this.playerId,{hintType:s.HintType.CHOOSE_CARD,hintMsg:"请选择要改变的判定牌",quantity:1,positions:[u.UIPosition.MY_HAND],extraButtons:[u.Button.CANCEL]});if(n.isCancel())console.log("[鬼才] 最终放弃了");else{t.broadcast(new g.TextFlashEffect(this.playerId,[e.owner],this.id));let r=n.getCardsAtPos(o.CardPos.HAND)[0];console.log("[鬼才] 改变判定牌 "+r.id),r.description=this.playerId+" 鬼才改判定",this.playSound(t,2),t.log(`${this.playerId} 发动 ${this.displayName} 将判定牌改为 ${r}`),t.sendToWorkflow(this.playerId,o.CardPos.HAND,[r],!1),yield t.events.publish(new l.CardBeingUsedEvent(this.playerId,[[r,o.CardPos.HAND]],null,!0,!1)),e.judgeCard=r}}))}}t.GuiCai=GuiCai;t.GangLie=class GangLie extends SkillForDamageTaken{constructor(){super(...arguments),this.id="刚烈",this.displayName="刚烈",this.description="当你受到伤害后，你可以进行判定，若结果不为红桃，伤害来源弃置两张手牌或受到1点伤害。",this.hint="可以适当刚烈魏国卖血流队友, 亮明身份的同时达成配合"}bootstrapServer(e){e.on(i.default,this)}conditionFulfilled(e,t){return this.isMyDamage(e)&&this.damageHasSource(e)}invokeMsg(e){return`对 ${e.source} 发动 ${this.displayName}`}doInvoke(e,t){return r(this,void 0,void 0,(function*(){this.playSound(t,2),t.log(`${this.playerId} 发动了 ${this.displayName}`);let n=yield new d.default("刚烈判定",this.playerId).perform(t);if("heart"!==t.interpret(this.playerId,n).suit){console.log("[刚烈] 判定成功 "+n.id);let r=e.source.player.id;(yield(new N.DropCardRequest).perform(r,2,t,"请选择弃置两张手牌或者取消受到一点伤害",[u.UIPosition.MY_HAND],!0))?console.log("[刚烈] 玩家弃置两张牌 "+n.id):(console.log("[刚烈] 玩家选择掉血"),yield new i.default(e.target,e.source,1,[],i.DamageSource.SKILL).perform(t))}else console.log("[刚烈] 判定失败 "+n.id)}))}};class TuXi extends a.SimpleConditionalSkill{constructor(){super(...arguments),this.id="突袭",this.displayName="突袭",this.description="摸牌阶段，你可以改为获得最多两名角色的各一张手牌。",this.hint="一般适合在局势明朗的时候使用, 以免拉过多的仇恨. 如果你的另一个将是李典, 你可以通过突袭和恂恂的联动控下家下回合摸的牌"}bootstrapServer(e){e.on(f.TakeCardStageOp,this)}conditionFulfilled(e,t){return e.player.player.id===this.playerId}doInvoke(e,t){return r(this,void 0,void 0,(function*(){console.log("[突袭] 选择突袭");let n=yield t.sendHint(this.playerId,{hintType:s.HintType.CHOOSE_PLAYER,hintMsg:"选择1到2名玩家获得各一张手牌",minQuantity:1,quantity:2,forbidden:[...t.getSortedByCurr(!1).filter((e=>0===e.getCards(o.CardPos.HAND).length)).map((e=>e.player.id)),this.playerId],extraButtons:[u.Button.CANCEL]});if(n.isCancel())console.log("[突袭] 玩家最终放弃了突袭");else{this.playSound(t,2);let r=t.sortByCurrent(n.targets);t.log(`${this.playerId} 对 ${r.map((e=>e.player.id))} 发动了 ${this.displayName}`),console.log("[突袭] 玩家选择了突袭, 放弃了摸牌",r.map((e=>e.player.id))),t.broadcast(new g.TextFlashEffect(this.playerId,r.map((e=>e.player.id)),this.id));for(let e of r)e.hasCardAt(o.CardPos.HAND)&&(yield(0,A.GrabCard)(n.source,e,"突袭摸牌 > "+e,t,[o.CardPos.HAND]));e.amount=0}}))}}t.TuXi=TuXi;class LuoYi extends a.SimpleConditionalSkill{constructor(){super(...arguments),this.displayName="裸衣",this.description="摸牌阶段，你可以少摸一张牌，然后本回合你使用【杀】或【决斗】造成的伤害+1",this.id="裸衣",this.hint="国战最废技能之一, 大概只有配合主将邓艾(裸衣然后把敌方手牌顺光...)",this.isTriggered=!1,this.changeDamage=e=>r(this,void 0,void 0,(function*(){this.isTriggered&&e.isFrom(this.playerId)&&e.timeline===i.DamageTimeline.DOING_DAMAGE&&(e.damageSource===i.DamageSource.DUEL||e.damageSource===i.DamageSource.SLASH)&&(console.log("[裸衣] 伤害加深"),e.amount+=1)})),this.endEffect=e=>r(this,void 0,void 0,(function*(){e.isFor(this.playerId,h.Stage.ROUND_END)&&(console.log("[裸衣] 穿回去..."),this.isTriggered=!1)}))}bootstrapServer(e){e.on(f.TakeCardStageOp,this),e.onEvent(i.default,this.playerId,this.changeDamage),e.onEvent(p.StageEndFlow,this.playerId,this.endEffect)}conditionFulfilled(e,t){return e.player.player.id===this.playerId&&e.amount>0}doInvoke(e,t){return r(this,void 0,void 0,(function*(){console.log("[裸衣] 脱!"),this.playSound(t,2),t.log(`${this.playerId} 发动了 ${this.displayName}`),t.broadcast(new g.TextFlashEffect(this.playerId,[],this.id)),this.isTriggered=!0,e.amount-=1}))}}t.LuoYi=LuoYi;class TianDu extends a.SimpleConditionalSkill{constructor(){super(...arguments),this.id="天妒",this.displayName="天妒",this.description="当你的判定牌生效后，你可以获得此牌。",this.hint="配合夏侯惇就是著名的郭得刚组合"}bootstrapServer(e){e.on(d.default,this)}conditionFulfilled(e,t){return e.owner===this.playerId&&e.timeline===d.JudgeTimeline.CONFIRMED}doInvoke(e,t){return r(this,void 0,void 0,(function*(){delete e.judgeCard.as,delete e.judgeCard.description,this.playSound(t,2),t.log(`${this.playerId} 发动了 ${this.displayName} 拿走了 ${e.judgeCard}`),t.broadcast(new g.TextFlashEffect(this.playerId,[],this.id)),yield t.takeFromWorkflow(this.playerId,o.CardPos.HAND,[e.judgeCard])}))}}t.TianDu=TianDu;class QinGuo extends a.Skill{constructor(){super(...arguments),this.id="倾国",this.displayName="倾国",this.description="你可以将一张黑色手牌当【闪】使用或打出。",this.hint="所以甄姬一般不要留红闪"}bootstrapClient(){y.playerActionDriverProvider.registerProvider(s.HintType.DODGE,(e=>new m.default("倾国出闪").expectChoose([u.UIPosition.MY_SKILL],1,1,((e,t)=>e===this.id)).expectChoose([u.UIPosition.MY_HAND],1,1,((e,t)=>(0,v.isSuitBlack)(t.interpret(e).suit)),(()=>"选择一张黑色手牌作为闪")).expectAnyButton("点击确定使用倾国").build(e,[u.Button.OK])))}onPlayerAction(e,t,n){return r(this,void 0,void 0,(function*(){this.playSound(n,2),n.log(`${this.playerId} 发动了 ${this.displayName}`),n.broadcast(new g.TextFlashEffect(t.target.player.id,[t.source.player.id],"闪"));let r=e.getCardsAtPos(o.CardPos.HAND);if(1!==r.length)throw`Player played dodge cards but not one card!!!! ${e.source.player.id} ${r}`;r[0].as=C.CardType.DODGE,r[0].description="倾国",n.sendToWorkflow(t.target.player.id,o.CardPos.HAND,r)}))}}t.QinGuo=QinGuo;class LuoShen extends a.SimpleConditionalSkill{constructor(){super(...arguments),this.id="洛神",this.displayName="洛神",this.description="准备阶段，你可以进行判定，若结果为黑色，你可以重复此流程。然后你获得所有的黑色判定牌。",this.hint="配合天妒可以保证收益至少一张牌. 配合鬼才可以多留黑色手牌尽可能的多洛神"}bootstrapServer(e){e.on(p.StageStartFlow,this)}conditionFulfilled(e,t){return e.info.player.id===this.playerId&&e.stage===h.Stage.ROUND_BEGIN}doInvoke(e,t){return r(this,void 0,void 0,(function*(){let e=[];for(;;){this.playSound(t,2);let n=yield new d.default("洛神判定",this.playerId).perform(t);if(!(0,v.isSuitBlack)(t.interpret(this.playerId,n).suit)){console.log("[洛神] 判定失败, 结束洛神",n.id);break}if(e.push(n),console.log("[洛神] 成功",n.id),(yield t.sendHint(this.playerId,{hintType:s.HintType.MULTI_CHOICE,hintMsg:"是否继续洛神?",extraButtons:[u.Button.OK,u.Button.CANCEL]})).isCancel()){console.log("[洛神] 玩家放弃洛神, 结束洛神",n);break}}e=e.filter((e=>t.stillInWorkflow(e))),e.length>0?(console.log("[洛神] 获得牌",e.map((e=>e.id))),yield t.takeFromWorkflow(this.playerId,o.CardPos.HAND,e)):console.log("[洛神] 没有获得牌")}))}}t.LuoShen=LuoShen;class ShenSu extends a.SimpleConditionalSkill{constructor(){super(...arguments),this.id="神速",this.displayName="神速",this.description="你可以做出如下选择：1.跳过判定阶段和摸牌阶段。2.跳过出牌阶段并弃置一张装备牌。你每选择一项，便视为你使用一张无距离限制的【杀】。",this.hint="从此魏国不怕乐. 注意神速的杀没有花色的普通杀, 不被仁王盾抵挡, 但是会被藤甲抵消"}bootstrapClient(){y.playerActionDriverProvider.registerSpecial("神速",(e=>new m.default("神速出杀").expectChoose([u.UIPosition.MY_HAND,u.UIPosition.MY_EQUIP],1,1,((e,t)=>t.interpret(e).type.isEquipment()),(()=>"选择要弃置的装备牌")).expectChoose([u.UIPosition.PLAYER],1,1,((e,t)=>e!==this.playerId),(()=>"选择出杀的对象")).expectAnyButton("点击确定跳过出牌阶段并弃置装备牌, 视为出杀").build(e,[u.Button.OK])))}bootstrapServer(e){e.on(p.StageStartFlow,this)}conditionFulfilled(e,t){return e.info.player.id===this.playerId&&(e.stage===h.Stage.ROUND_BEGIN?!t.roundStats.skipStages.get(h.Stage.JUDGE)&&!t.roundStats.skipStages.get(h.Stage.TAKE_CARD):e.stage===h.Stage.USE_CARD&&!t.roundStats.skipStages.get(h.Stage.USE_CARD))}invokeMsg(e,t){if(e.stage===h.Stage.ROUND_BEGIN)return"[神速]跳过判定与摸牌";if(e.stage===h.Stage.USE_CARD)return"[神速]跳过出牌并弃置一张装备牌";throw"[神速] 不应该在此时发动 "+e.stage.name}doInvoke(e,t){return r(this,void 0,void 0,(function*(){if(e.stage===h.Stage.ROUND_BEGIN){let e=yield t.sendHint(this.playerId,{hintType:s.HintType.CHOOSE_PLAYER,hintMsg:"选择一名杀的目标",minQuantity:1,quantity:1,forbidden:[this.playerId],extraButtons:[u.Button.CANCEL]});if(!e.isCancel()){this.playSound(t,2);let n=e.targets[0];t.log(`${this.playerId} 发动${this.displayName} 跳过判定和摸牌 视为对 ${n} 出杀`),console.log("[神速] 跳过判定和摸牌出杀",this.playerId,n),t.roundStats.skipStages.set(h.Stage.JUDGE,!0),t.roundStats.skipStages.set(h.Stage.TAKE_CARD,!0),t.broadcast(new g.TextFlashEffect(this.playerId,[n.player.id],"神速")),yield new b.SlashOP(t.context.getPlayer(this.playerId),[n],[],1,i.DamageType.NORMAL,"n.a.").perform(t)}}else if(e.stage===h.Stage.USE_CARD){let e=yield t.sendHint(this.playerId,{hintType:s.HintType.SPECIAL,specialId:"神速",hintMsg:"Placeholder, ignored",extraButtons:[u.Button.CANCEL]});if(!e.isCancel()){this.playSound(t,2);let n=e.targets[0],r=e.getSingleCardAndPos();console.log("[神速] 跳过出牌并弃装备牌出杀",this.playerId,n),t.log(`${this.playerId} 发动${this.displayName} 跳过出牌并弃装备牌 视为对 ${n} 出杀`);let a=r[1],s=r[0];console.log("[神速] 弃置的为",o.CardPos[a],s.id),delete s.as,s.description="神速弃置",t.sendToWorkflow(this.playerId,a,[s],!1),yield t.events.publish(new l.CardBeingDroppedEvent(this.playerId,[[s,a]])),t.roundStats.skipStages.set(h.Stage.USE_CARD,!0),t.broadcast(new g.TextFlashEffect(this.playerId,[n.player.id],"神速")),yield new b.SlashOP(t.context.getPlayer(this.playerId),[n],[],1,i.DamageType.NORMAL,"n.a.").perform(t)}}}))}}t.ShenSu=ShenSu;class DuanLiang extends a.Skill{constructor(){super(...arguments),this.id="断粮",this.displayName="断粮",this.description="出牌阶段，你可以明置此武将牌；你可以将一张黑色基本牌或黑色装备牌当【兵粮寸断】使用；你可以对距离为2的角色使用【兵粮寸断】。",this.hiddenType=a.HiddenType.REVEAL_IN_MY_USE_CARD,this.hint="单挑达人. 团战的话由于消耗牌量大, 适合配合甄姬或者郭嘉这种很容易刷到牌的人"}bootstrapClient(){y.playerActionDriverProvider.registerProvider(s.HintType.PLAY_HAND,(e=>new m.default("断粮黑色基本牌").expectChoose([u.UIPosition.MY_SKILL],1,1,((e,t)=>e===this.id)).expectChoose([u.UIPosition.MY_HAND,u.UIPosition.MY_EQUIP],1,1,((e,t)=>{let n=t.interpret(e);return(0,v.isSuitBlack)(n.suit)&&(n.type.isEquipment()||n.type.isBasic())}),(()=>"选择一张黑色基本牌或装备牌当做兵粮寸断")).expectChoose([u.UIPosition.PLAYER],1,1,((e,t)=>e!==this.playerId&&t.getMyDistanceTo(e)<=t.serverHint.hint.roundStat.binLiangReach&&!t.getPlayer(e).hasJudgeCard(C.CardType.BING_LIANG)),(()=>"选择兵粮寸断的对象")).expectAnyButton("点击确定打出兵粮寸断").build(e)))}onPlayerAction(e,t,n){return r(this,void 0,void 0,(function*(){let t=e.targets[0],r=e.getSingleCardAndPos(),i=r[1],a=r[0];a.as=C.CardType.BING_LIANG,a.description="兵粮",this.invokeEffects(n,[t.player.id]),yield new E.UseDelayedRuseOp(a,e.source,i,t).perform(n),yield n.events.publish(new l.CardBeingUsedEvent(e.source.player.id,[[a,i]],C.CardType.BING_LIANG,!0))}))}bootstrapServer(e,t){e.onEvent(p.StageStartFlow,this.playerId,(e=>r(this,void 0,void 0,(function*(){e.info.player.id===this.playerId&&e.stage===h.Stage.ROUND_BEGIN&&(t.roundStats.binLiangReach=2)}))))}}t.DuanLiang=DuanLiang;class JuShou extends a.SimpleConditionalSkill{constructor(){super(...arguments),this.id="据守",this.displayName="据守",this.description="结束阶段开始时，你可以发动此技能。然后你摸X张牌，选择一项：1.弃置一张不为装备牌的手牌；2.使用一张装备牌。若X大于2，则你将武将牌翻面。（X为此时亮明势力数）",this.hint="单挑达人. 团战的话摸四张翻面还可以, 摸三张翻面血亏. 如果要发动技能就要注意不要着急在出牌阶段挂装备"}bootstrapClient(e,t){let n=[new u.Button("equip","装备").inDirect(),new u.Button("drop","弃置")];y.playerActionDriverProvider.registerSpecial(this.id,(e=>new m.default("据守").expectChoose([u.UIPosition.MY_HAND],1,1,((e,t)=>!0),(()=>"[据守] 选择一张手牌")).expectChoose([u.UIPosition.BUTTONS],1,1,((e,t,n)=>!!t.interpret(n.getArr(u.UIPosition.MY_HAND)[0]).type.isEquipment()||"equip"!==e),(()=>"选择操作")).build(e,n)))}bootstrapServer(e,t){e.on(p.StageStartFlow,this)}conditionFulfilled(e,t){return e.info.player.id===this.playerId&&e.stage===h.Stage.ROUND_END}doInvoke(e,t){return r(this,void 0,void 0,(function*(){this.invokeEffects(t);let e=t.context.getPlayer(this.playerId),n=(0,I.getNumberOfFactions)(t);console.log("[据守] 场上亮明势力数为",n),yield new f.default(e,n).perform(t);let r=yield t.sendHint(this.playerId,{hintType:s.HintType.SPECIAL,specialId:this.id,hintMsg:"[据守] 选择一张手牌, 若为装备则使用, 否则弃置"}),i=r.getCardsAtPos(o.CardPos.HAND)[0];console.log("[据守] 弃置"+i),i.type.isEquipment()&&"equip"===r.button?(i.description=`${this.playerId} 装备`,t.sendToWorkflow(this.playerId,o.CardPos.HAND,[i],!1,!0),yield t.events.publish(new l.CardBeingUsedEvent(this.playerId,[[i,o.CardPos.HAND]],i.type)),yield new S.EquipOp(e,i).perform(t)):(delete i.as,i.description="据守弃置",t.sendToWorkflow(this.playerId,o.CardPos.HAND,[i],!1),yield t.events.publish(new l.CardBeingDroppedEvent(this.playerId,[[i,o.CardPos.HAND]]))),n>2&&(console.log("[据守] 翻面",n),yield(0,l.turnOver)(e,e,this.displayName,t))}))}}t.JuShou=JuShou;class QiangXi extends a.Skill{constructor(){super(...arguments),this.id="强袭",this.displayName="强袭",this.description="出牌阶段限一次，你可以失去1点体力或弃置一张武器牌，并对你攻击范围内的一名其他角色造成1点伤害。",this.hiddenType=a.HiddenType.NONE,this.hint="单挑达人. 稳定输出, 即使是自杀也会在死后造成伤害的神"}bootstrapClient(){y.playerActionDriverProvider.registerProvider(s.HintType.PLAY_HAND,(e=>new m.default("强袭").expectChoose([u.UIPosition.MY_SKILL],1,1,((t,n)=>!e.roundStat.customData[this.id]&&t===this.id)).expectChoose([u.UIPosition.PLAYER],1,1,((e,t)=>e!==this.playerId&&t.getMyDistanceTo(e)<=t.getPlayer(this.playerId).getReach()),(()=>"选择强袭的对象")).expectChoose([u.UIPosition.MY_HAND,u.UIPosition.MY_EQUIP],0,1,((e,t)=>"weapon"===t.interpret(e).type.genre),(()=>"选择一张武器牌弃置或直接确定失去一点体力")).expectAnyButton("点击确定强袭").build(e)))}onPlayerAction(e,t,n){return r(this,void 0,void 0,(function*(){if(e.isCancel())return void console.error("[强袭] 怎么可能cancel??");this.playSound(n,2),n.log(`${this.playerId} 发动了 ${this.displayName}`),n.roundStats.customData[this.id]=!0;let t=e.targets[0];n.broadcast(new g.TextFlashEffect(this.playerId,[t.player.id],this.id));let r=e.source,a=e.getPosAndCards(o.CardPos.HAND,o.CardPos.EQUIP);if(a.length>0){let e=a[0];console.log("[强袭] 弃置武器牌",e);let t=e[0],r=e[1][0];r.description="强袭弃置",n.sendToWorkflow(this.playerId,t,[r]),yield n.events.publish(new l.CardBeingDroppedEvent(this.playerId,[[r,t]]))}else console.log("[强袭] 自减体力"),yield new i.default(r,r,1,[],i.DamageSource.SKILL,i.DamageType.ENERGY).perform(n);yield new i.default(r,t,1,[],i.DamageSource.SKILL,i.DamageType.NORMAL).perform(n)}))}}t.QiangXi=QiangXi;class XingShang extends a.SimpleConditionalSkill{constructor(){super(...arguments),this.id="行殇",this.displayName="行殇",this.description="当其他角色死亡时，你可以获得其所有牌。",this.hint="杀人诛心, 配合连弩李典(忘隙)可以横扫全场"}bootstrapServer(e,t){e.on(w.default,this)}conditionFulfilled(e,t){return e.deceased.player.id!==this.playerId&&e.deceased.hasOwnCards()&&e.timeline===w.DeathTimeline.IN_DEATH}invokeMsg(e){return`发动 ${this.displayName} 获得 ${e.deceased} 的所有手牌/装备牌`}doInvoke(e,t){return r(this,void 0,void 0,(function*(){this.playSound(t,2),t.log(`${this.playerId} 发动了 ${this.displayName}`),t.broadcast(new g.TextFlashEffect(this.playerId,[],this.id));let n=[],r=[];e.deceased.getAllCards().forEach((e=>{e[1]===o.CardPos.HAND?n.push(e[0]):e[1]===o.CardPos.EQUIP&&r.push(e[0])})),n.length>0&&(console.log("[行殇] 行殇拿手牌...",n.length),yield t.transferCards(e.deceased.player.id,this.playerId,o.CardPos.HAND,o.CardPos.HAND,n)),r.length>0&&(console.log("[行殇] 行殇拿装备牌...",r.length),yield t.transferCards(e.deceased.player.id,this.playerId,o.CardPos.EQUIP,o.CardPos.HAND,r))}))}}t.XingShang=XingShang;t.FangZhu=class FangZhu extends SkillForDamageTaken{constructor(){super(...arguments),this.id="放逐",this.displayName="放逐",this.description="当你受到伤害后，你可以令一名其他角色翻面，然后该角色摸X张牌（X为你已损失的体力值）。",this.hint="魏国核心技能, 极大损害他人游戏体验, 过于强大使得敌方不愿意碰曹丕, 队友则拼命想砍曹丕"}bootstrapServer(e){e.on(i.default,this)}conditionFulfilled(e,t){return this.isMyDamage(e)}doInvoke(e,t){return r(this,void 0,void 0,(function*(){let e=yield t.sendHint(this.playerId,{hintType:s.HintType.CHOOSE_PLAYER,hintMsg:"请选择放逐的对象",forbidden:[this.playerId],minQuantity:1,quantity:1,extraButtons:[u.Button.CANCEL]});if(e.isCancel())return void console.log("[放逐] 放弃了");this.playSound(t,2);let n=e.targets[0];console.log("[放逐] > ",n.player.id),yield(0,l.turnOver)(t.context.getPlayer(this.playerId),n,this.displayName,t),yield new f.default(n,e.source.maxHp-e.source.hp).perform(t)}))}};class QuHu extends a.SimpleConditionalSkill{constructor(){super(...arguments),this.id="驱虎",this.displayName="驱虎",this.description="出牌阶段限一次，你可以与体力值大于你的一名角色拼点：若你赢，你令该角色对其攻击范围内的另一名角色造成1点伤害；若你没赢，其对你造成1点伤害。",this.hiddenType=a.HiddenType.NONE,this.hint="可以拿自己的最后一张小点去驱虎卖血换牌, 也可以令敌人砍死队友丧失全部牌"}bootstrapClient(){y.playerActionDriverProvider.registerProvider(s.HintType.PLAY_HAND,(e=>new m.default("驱虎").expectChoose([u.UIPosition.MY_SKILL],1,1,((t,n)=>!e.roundStat.customData[this.id]&&t===this.id&&n.getPlayer(this.playerId).getCards(o.CardPos.HAND).length>0)).expectChoose([u.UIPosition.PLAYER],1,1,((e,t)=>e!==this.playerId&&t.getPlayer(e).hp>t.getPlayer(this.playerId).hp&&t.getPlayer(e).getCards(o.CardPos.HAND).length>0),(()=>"选择驱虎拼点的对象")).expectAnyButton("点击确定与其拼点").build(e)))}onPlayerAction(e,t,n){return r(this,void 0,void 0,(function*(){n.roundStats.customData[this.id]=!0;let t=e.targets[0];if(this.playSound(n,2),n.log(`${this.playerId} 对 ${t} 发动了${this.displayName} `),n.broadcast(new g.TextFlashEffect(this.playerId,[t.player.id],this.id)),console.log("[驱虎] 发动"),yield new P.default(e.source,t,"驱虎").perform(n)){console.log("[驱虎] 成功",t.player.id);let e=n.getSortedByCurr(!0).map((e=>e.player.id)).filter((e=>e===t.player.id||n.context.computeDistance(t.player.id,e)>t.getReach()));if(console.log(n.getSortedByCurr(!0).map((e=>e.player.id))),console.log(e),e.length===n.getSortedByCurr(!0).length)return void console.log("[驱虎] 无法进行, ",t.player.id," 打不着任何人");{console.log("[驱虎] 请求指定伤害对象");let r=(yield n.sendHint(this.playerId,{hintType:s.HintType.CHOOSE_PLAYER,hintMsg:"请选择驱虎伤害的对象",minQuantity:1,quantity:1,forbidden:e})).targets[0];console.log("[驱虎] 伤害对象为",r.player.id),n.log(`${this.playerId} 指定 ${r} 为${this.displayName}的伤害目标`),n.broadcast(new g.TextFlashEffect(this.playerId,[r.player.id],this.id)),yield new i.default(t,r,1,[],i.DamageSource.SKILL,i.DamageType.NORMAL).perform(n)}}else console.log("[驱虎] 失败"),yield new i.default(t,e.source,1,[],i.DamageSource.SKILL,i.DamageType.NORMAL).perform(n)}))}}t.QuHu=QuHu;t.JieMing=class JieMing extends SkillForDamageTaken{constructor(){super(...arguments),this.id="节命",this.displayName="节命",this.description="当你受到1点伤害后，你可以令一名角色将手牌摸至X张（X为其体力上限且最多为5）。",this.hint="卖血流, 不多解释"}bootstrapServer(e){e.on(i.default,this)}conditionFulfilled(e,t){return this.isMyDamage(e)}doInvoke(e,t){return r(this,void 0,void 0,(function*(){let n=e.amount;for(;0!==n;){n--;let e=yield t.sendHint(this.playerId,{hintType:s.HintType.CHOOSE_PLAYER,hintMsg:"请选择一名角色将手牌补至体力上限(至多为5)",minQuantity:1,quantity:1,extraButtons:[u.Button.CANCEL]});this.playSound(t,2);let r=e.targets[0];t.log(`${this.playerId} 发动了 ${this.displayName} 为 ${r} 补牌`),t.broadcast(new g.TextFlashEffect(this.playerId,[r.player.id],this.id));let i=r.getCards(o.CardPos.HAND).length,a=Math.min(5,r.maxHp);i<a?(console.log("[节命] 使人补牌",r.player.id),yield new f.default(r,a-i).perform(t)):console.log("[节命] 无法发动, 此人的牌太多了",r.player.id)}}))}};t.YiJi=class YiJi extends SkillForDamageTaken{constructor(){super(...arguments),this.id="遗计",this.displayName="遗计",this.description="当你受到1点伤害后，你可以观看牌堆顶的两张牌，然后将这些牌交给任意角色。",this.hint="卖血流, 不多解释"}bootstrapClient(){y.playerActionDriverProvider.registerSpecial(this.id,(e=>{let t=new Set(e.forbidden);return(0,c.checkThat)(t.size<=2,"遗计牌至多有俩"),new m.default("遗计").expectChoose([u.UIPosition.MY_HAND],1,2,((e,n)=>t.has(e)),(()=>e.hintMsg)).expectChoose([u.UIPosition.PLAYER],1,1,((e,t)=>e!==this.playerId),(()=>"选择将牌交给的对象")).expectAnyButton("点击将牌交出, 取消自己拿着").build(e,[u.Button.OK])}))}bootstrapServer(e){e.on(i.default,this)}conditionFulfilled(e,t){return this.isMyDamage(e)}doInvoke(e,t){return r(this,void 0,void 0,(function*(){let n=e.amount;for(;0!==n;){n--;let r=yield new f.default(e.target,2).perform(t);this.playSound(t,1),t.log(`${this.playerId} 发动了 ${this.displayName}`),t.broadcast(new g.TextFlashEffect(this.playerId,[],this.id));let i=yield t.sendHint(this.playerId,{hintType:s.HintType.SPECIAL,specialId:this.id,hintMsg:`选择将${r[0].toString()}/${r[1].toString()}交给另一名角色, 或者取消自己拿`,forbidden:r.map((e=>e.id)),extraButtons:[u.Button.CANCEL]});if(!i.isCancel()){console.log("[遗计] 给了牌");let e=i.getCardsAtPos(o.CardPos.HAND),n=i.targets[0];if(yield t.transferCards(this.playerId,n.player.id,o.CardPos.HAND,o.CardPos.HAND,e),e.length<2){console.log("[遗计] 继续询问");let n=r.filter((t=>t.id!==e[0].id))[0],i=yield t.sendHint(this.playerId,{hintType:s.HintType.SPECIAL,specialId:this.id,hintMsg:`选择将${n.toString()}交给另一名角色, 或者取消自己拿`,forbidden:[n.id],extraButtons:[u.Button.CANCEL]});if(!i.isCancel()){console.log("[遗计] 又给了牌");let e=i.getCardsAtPos(o.CardPos.HAND),n=i.targets[0];yield t.transferCards(this.playerId,n.player.id,o.CardPos.HAND,o.CardPos.HAND,e)}}}}}))}};class QiaoBian extends a.SimpleConditionalSkill{constructor(){super(...arguments),this.id="巧变",this.displayName="巧变",this.description="你可以弃置一张手牌并跳过一个阶段：若跳过摸牌阶段，你可以获得至多两名角色的各一张手牌；若跳过出牌阶段，你可以移动场上的一张牌。",this.hint="不怕乐, 不怕手牌多要弃牌, 可以把兵/乐扔别人身上, 还可以把狮子在队友身上挪来挪去回血的神技"}invokeMsg(e){return"[巧变] 跳过"+e.stage.name}bootstrapServer(e){e.on(p.StageStartFlow,this)}conditionFulfilled(e,t){return(0,c.any)(h.USEFUL_STAGES,(n=>this.skippable(e,n,t)))&&t.context.getPlayer(this.playerId).getCards(o.CardPos.HAND).length>0}doInvoke(e,t){return r(this,void 0,void 0,(function*(){if(console.log("[巧变] 发动, 试图跳过阶段",e.stage.name),yield(new N.DropCardRequest).perform(this.playerId,1,t,"巧变弃牌跳过"+e.stage.name,[u.UIPosition.MY_HAND],!0)){if(console.log("[巧变] 成功, 发动!"),this.playSound(t,2),t.roundStats.skipStages.set(e.stage,!0),e.stage===h.Stage.TAKE_CARD){console.log("[巧变] 向至多两人摸牌");let e=yield t.sendHint(this.playerId,{hintType:s.HintType.CHOOSE_PLAYER,hintMsg:"选择1到2名玩家获得各一张手牌",minQuantity:1,quantity:2,forbidden:[...t.getSortedByCurr(!1).filter((e=>0===e.getCards(o.CardPos.HAND).length)).map((e=>e.player.id)),this.playerId]}),n=t.sortByCurrent(e.targets);console.log("[巧变] 玩家选择摸",n.map((e=>e.player.id))),t.log(`${this.playerId} 发动了 ${this.displayName} 向 ${n} 各摸一张手牌`),t.broadcast(new g.TextFlashEffect(this.playerId,n.map((e=>e.player.id)),this.id));for(let r of n)r.hasCardAt(o.CardPos.HAND)&&(yield(0,A.GrabCard)(e.source,r,"巧变摸牌 > "+r,t,[o.CardPos.HAND]))}e.stage===h.Stage.USE_CARD&&(console.log("[巧变] 移动场上的牌"),yield(0,k.MoveCardOnField)(t,e.info,this.displayName))}else console.log("[巧变] 取消")}))}skippable(e,t,n){if(e.info.player.id!==this.playerId)return!1;let r=n.context.getPlayer(this.playerId);return(e.stage!==h.Stage.JUDGE||0!==r.getCards(o.CardPos.JUDGE).length)&&(!(e.stage===h.Stage.DROP_CARD&&r.getCards(o.CardPos.HAND).length<=r.hp)&&(e.stage===t&&!n.roundStats.skipStages.get(t)))}}t.QiaoBian=QiaoBian;class XiaoGuo extends a.SimpleConditionalSkill{constructor(){super(...arguments),this.id="骁果",this.displayName="骁果",this.description="其他角色的结束阶段，你可以弃置一张基本牌，然后除非该角色弃置一张装备牌，否则受到你造成的1点伤害。",this.hint="可以配合队友卖血, 也可以用这种方法让队友弃狮子回血, 也可以欺负没有装备牌的人"}invokeMsg(e){return`对${e.info.player.id}发动骁果`}bootstrapServer(e){e.on(p.InStageEnd,this)}conditionFulfilled(e,t){if(e.stage===h.Stage.ROUND_END&&e.info.player.id!==this.playerId){if(t.context.getPlayer(this.playerId).getCards(o.CardPos.HAND).filter((e=>e.type.isBasic())).length>0)return!0}return!1}doInvoke(e,t){return r(this,void 0,void 0,(function*(){let n=t.context.getPlayer(this.playerId);if(yield(0,I.askAbandonBasicCard)(t,n,"请弃置一张基本牌发动骁果",!0)){console.log("[骁果] 弃置了基本牌, 对方需要弃置装备牌",e.info),this.invokeEffects(t,[e.info.player.id]),(yield(0,I.askAbandonEquip)(t,e.info,"请弃置一张装备牌, 否则受到骁果的伤害",!0))?console.log("[骁果] 对方弃置了装备牌, ok lor"):(console.log("[骁果] 对方没有弃置装备牌, 受到伤害"),yield new i.default(n,e.info,1,[],i.DamageSource.SKILL).perform(t))}}))}}t.XiaoGuo=XiaoGuo;class TunTian extends a.SimpleConditionalSkill{constructor(){super(...arguments),this.id="屯田",this.displayName="屯田",this.description="当你于回合外失去牌后，你可以进行判定，若结果不为红桃，你可将此牌置于武将牌上，称为“田”；你计算与其他角色的距离-X（X为“田”的数量）。）",this.hint="所以顺/拆邓艾的装备不怎么影响他的攻击距离. 注意可以配合鬼才刷田..."}bootstrapServer(e){e.on(l.CardBeingUsedEvent,this),e.on(l.CardBeingTakenEvent,this),e.on(l.CardBeingDroppedEvent,this)}conditionFulfilled(e,t){return t.currPlayer().player.id!==this.playerId&&e.isCardFrom(this.playerId)&&e.cards.filter((e=>e[1]===o.CardPos.HAND||e[1]===o.CardPos.EQUIP)).length>0}doInvoke(e,t){return r(this,void 0,void 0,(function*(){this.invokeEffects(t);let e=yield new d.default(this.playerId+" 屯田判定",this.playerId).perform(t);if(t.stillInWorkflow(e)&&"heart"!==t.interpret(this.playerId,e).suit){if(!(yield t.sendHint(this.playerId,{hintType:s.HintType.MULTI_CHOICE,hintMsg:`你是否将${e}作为田置于你武将牌上?`,extraButtons:[u.Button.OK,u.Button.CANCEL]})).isCancel()){let n=t.context.getPlayer(this.playerId);n.distanceModTargetingOthers-=1,t.broadcast(n,_.PlayerInfo.sanitize),yield t.takeFromWorkflow(this.playerId,"main"===this.position?o.CardPos.ON_GENERAL:o.CardPos.ON_SUB_GENERAL,[e])}}}))}}t.TunTian=TunTian;class ZiLiang extends a.SimpleConditionalSkill{constructor(){super(...arguments),this.id="资粮",this.displayName="资粮",this.description="副将技，当与你势力相同的一名角色受到伤害后，你可以将一张“田”交给该角色。",this.disabledForMain=!0,this.hint="邓艾被低估的技能. 注意你的田没有红桃, 所以资粮桃子不要想了(只有一个方片桃)"}bootstrapServer(e){e.on(i.default,this)}conditionFulfilled(e,t){let n=t.context.getPlayer(this.playerId);return x.FactionPlayerInfo.factionSame(e.target,n)&&e.timeline===i.DamageTimeline.TAKEN_DAMAGE&&e.type!==i.DamageType.ENERGY&&!e.target.isDead&&n.getCards(o.CardPos.ON_SUB_GENERAL).length>0}doInvoke(e,t){return r(this,void 0,void 0,(function*(){let n=t.context.getPlayer(this.playerId),r=n.getCards(o.CardPos.ON_SUB_GENERAL),i=yield t.sendHint(this.playerId,{hintType:s.HintType.UI_PANEL,hintMsg:"(资粮)请选择要交给对方的田",customRequest:{data:{rowsOfCard:{田:r},title:"(资粮)请选择要交给对方的田",chooseSize:1},mode:"choose"}});n.distanceModTargetingOthers+=1,t.broadcast(n,_.PlayerInfo.sanitize);let a=r[i.customData[0].idx];this.invokeEffects(t,[e.target.player.id],`${this.playerId} 发动 ${this.displayName} 将 ${a} 交给了 ${e.target.player.id}`),yield t.transferCards(this.playerId,e.target.player.id,o.CardPos.ON_SUB_GENERAL,o.CardPos.HAND,[a])}))}}t.ZiLiang=ZiLiang;class JiXi extends a.Skill{constructor(){super(...arguments),this.id="急袭",this.displayName="急袭",this.description="主将技，此武将牌减少半个阴阳鱼；你可以将一张“田”当【顺手牵羊】使用。",this.disabledForSub=!0,this.hiddenType=a.HiddenType.NONE,this.hint="可以把别人扒光的技能, 因为需要田很适合搭配甄姬的倾国或者改判的鬼才"}bootstrapClient(){y.playerActionDriverProvider.registerProvider(s.HintType.PLAY_HAND,(e=>new m.default("急袭").expectChoose([u.UIPosition.MY_SKILL],1,1,((e,t)=>e===this.id&&t.getPlayer(this.playerId).getCards(o.CardPos.ON_GENERAL).length>0)).expectChoose([u.UIPosition.ON_MY_GENERAL],1,1,(e=>!0),(()=>"选择要使用的田")).expectChoose([u.UIPosition.PLAYER],1,1,((e,t)=>e!==t.myself.player.id&&t.getPlayer(e).hasCards()&&t.getMyDistanceTo(e)<=t.serverHint.hint.roundStat.shunshouReach),(()=>"选择急袭的对象")).expectAnyButton("点击确定发动急袭").build(e)))}onPlayerAction(e,t,n){return r(this,void 0,void 0,(function*(){let t=e.cardsOnGeneral[0];t.as=C.CardType.SHUN_SHOU,t.description=`${e.source} 急袭`;let r=n.context.getPlayer(this.playerId);r.distanceModTargetingOthers+=1,n.broadcast(r,_.PlayerInfo.sanitize),this.invokeEffects(n,[e.targets[0].player.id]),n.sendToWorkflow(e.source.player.id,o.CardPos.ON_GENERAL,[t],!0),yield n.events.publish(new l.CardBeingUsedEvent(e.source.player.id,[[t,o.CardPos.ON_GENERAL]],C.CardType.SHUN_SHOU,!0)),yield new A.ShunShou(e.source,e.targets[0],[t]).perform(n)}))}}t.JiXi=JiXi;class XunXun extends a.SimpleConditionalSkill{constructor(){super(...arguments),this.id="恂恂",this.displayName="恂恂",this.description="摸牌阶段开始时，你可以观看牌堆顶的四张牌，然后将其中的两张牌置于牌堆顶，将其余的牌置于牌堆底。",this.hint="小观星, 可惜不能观判定牌, 但是可以配合突袭控下家的牌"}bootstrapServer(e){e.on(p.InStageStart,this)}conditionFulfilled(e,t){return e.isFor(this.playerId,h.Stage.TAKE_CARD)}doInvoke(e,t){return r(this,void 0,void 0,(function*(){let e=t.context.deck.getCardsFromTop(4);this.data=new T.CustomUIData("xunxun",{title:`${this.playerId} 恂恂`,isController:!0,top:e.map(((e,t)=>["guanxing"+t,e])),btm:[]}),this.invokeEffects(t);let{top:n,btm:r}=this.data.data;const i=e=>{e.applyToTopBtm(n,r),t.broadcast(e)};t.pubsub().on(o.CardMovementEvent,i),this.setBroadcast(t),yield t.sendHint(this.playerId,{hintType:s.HintType.UI_PANEL,hintMsg:"ignore",customRequest:{mode:"choose",data:!0}}),t.context.deck.placeCardsAtTop(n.map((e=>e[1]))),t.context.deck.placeCardsAtBtm(r.map((e=>e[1]))),t.log(`${this.playerId} 将 ${n.length}张牌置于牌堆顶, ${r.length}张牌置于牌堆底`),t.broadcast(new T.CustomUIData(T.CustomUIData.STOP,null)),t.pubsub().off(o.CardMovementEvent,i),this.data=null,t.onReconnect=null}))}setBroadcast(e){e.onReconnect=()=>{e.broadcast(this.data,((e,t)=>{if(t!==this.playerId){return new T.CustomUIData("xunxun",{title:`${this.playerId} 恂恂`,isController:!1,top:this.data.data.top.map((e=>[e[0],C.Card.DUMMY])),btm:this.data.data.btm.map((e=>[e[0],C.Card.DUMMY]))})}return e}))},e.onReconnect()}}t.XunXun=XunXun;t.WangXi=class WangXi extends SkillForDamageTaken{constructor(){super(...arguments),this.id="忘隙",this.displayName="忘隙",this.description="当你造成或受到其他角色的1点伤害后，你可以与其各摸一张牌。",this.hint="魏国又一核心技能, 所以李典最爱南蛮万箭, 可以说李典放南蛮万箭不卖血的统统不是魏"}bootstrapServer(e){e.on(i.default,this)}conditionFulfilled(e,t){return!(e.timeline!==i.DamageTimeline.DID_DAMAGE||!e.source||e.source.player.id!==this.playerId||e.target.player.id===this.playerId)||!(e.timeline!==i.DamageTimeline.TAKEN_DAMAGE||!this.isMyDamage(e)||!this.damageFromOthers(e))}doInvoke(e,t){return r(this,void 0,void 0,(function*(){this.invokeEffects(t,[e.source.player.id,e.target.player.id]);for(let n=0;n<e.amount;++n)yield new f.default(e.source,1).perform(t),yield new f.default(e.target,1).perform(t),yield(0,c.delay)(300)}))}};t.HengJiang=class HengJiang extends SkillForDamageTaken{constructor(){super(...arguments),this.id="横江",this.displayName="横江",this.description="当你受到1点伤害后，你可以令当前回合角色本回合的手牌上限-1。然后若其弃牌阶段内没有弃牌，则你摸一张牌。",this.expectDrop=!1,this.hint="鸡肋"}bootstrapServer(e,t){let n=t.context.getPlayer(this.playerId);e.on(i.default,this),e.onEvent(N.default,this.playerId,(e=>r(this,void 0,void 0,(function*(){if(e.timeline===N.DropTimeline.BEFORE){let n=this.getMarksOfCurrentPlayer(t),r=n[this.id];if(r){let t=Number.parseInt(r.substring(2));console.log("[横江] 需要多弃",t,r),e.limit-=t}delete n[this.id],t.broadcast(t.currPlayer(),_.PlayerInfo.sanitize)}else console.log("[横江] 弃牌阶段结束, expectDrop flag存在且弃牌阶段未弃牌, 横江摸一张牌"),this.expectDrop&&0===e.dropped.length&&!n.isDead&&(yield new f.default(n,1).perform(t)),this.expectDrop=!1})))),e.onEvent(p.StageEndFlow,this.playerId,(e=>r(this,void 0,void 0,(function*(){if(this.expectDrop&&e.stage===h.Stage.DROP_CARD){n.isDead||(console.log("[横江] 弃牌阶段结束, expectDrop flag依然存在, 说明弃牌阶段跳过了, 摸一张牌"),this.invokeEffects(t),yield new f.default(n,1).perform(t)),delete this.getMarksOfCurrentPlayer(t)[this.id],t.broadcast(t.currPlayer(),_.PlayerInfo.sanitize),this.expectDrop=!1}}))))}getMarksOfCurrentPlayer(e){return e.currPlayer().mainMark}conditionFulfilled(e,t){return this.isMyDamage(e)&&this.damageFromOthers(e)}doInvoke(e,t){return r(this,void 0,void 0,(function*(){this.expectDrop=!0;let e=this.getMarksOfCurrentPlayer(t),n=e[this.id];if(n){let t=Number.parseInt(n.substring(2));e[this.id]=this.id+(t+1)}else e[this.id]=this.id+"1";this.invokeEffects(t,[t.currPlayer().player.id]),t.broadcast(t.currPlayer(),_.PlayerInfo.sanitize)}))}}},1703:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{l(r.next(e))}catch(e){a(e)}}function s(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.DianCai=t.DiaoDuo=t.HunShang=t.YingHunCe=t.YingZiCe=t.YingYang=t.JiAng=t.FenJi=t.BuQu=t.FenMing=t.DuanXie=t.MouDuan=t.KeJi=t.YiCheng=t.DiMeng=t.HaoShi=t.TianXiang=t.HongYan=t.GuZheng=t.ZhiJian=t.TianYi=t.YingHun=t.XiaoJi=t.JieYin=t.DuoShi=t.QianXun=t.LiuLi=t.GuoSe=t.FanJian=t.YingZi=t.KuRou=t.QiXi=t.ZhiHeng=void 0;const i=n(2166),a=n(739),o=n(8663),s=n(8651),l=n(1480),d=n(6069),u=n(1073),c=n(9575),p=n(4619),h=n(2608),f=n(4910),g=n(6652),y=n(5796),m=n(8411),v=n(1802),C=n(5706),b=n(9716),S=n(9550),E=n(3484),w=n(1189),_=n(2421),P=n(5935),N=n(9421),I=n(4105),k=n(7296),A=n(1034),x=n(2985),T=n(9820),D=n(3402),O=n(1633),R=n(801);class ZhiHeng extends i.Skill{constructor(){super(...arguments),this.id="制衡",this.displayName="制衡",this.description="出牌阶段限一次，你可以弃置至多X张牌（X为你的体力上限），然后摸等量的牌。",this.hiddenType=i.HiddenType.NONE,this.hint="孙权经典技能, 没啥好说的. 注意国战制衡有上限"}bootstrapClient(){s.playerActionDriverProvider.registerProvider(a.HintType.PLAY_HAND,((e,t)=>{let n=t.getPlayer(this.playerId).maxHp;return new o.default("制衡").expectChoose([l.UIPosition.MY_SKILL],1,1,((t,n)=>!e.roundStat.customData[this.id]&&t===this.id)).expectChoose([l.UIPosition.MY_HAND,l.UIPosition.MY_EQUIP],1,n,((e,t)=>!0),(()=>`请弃置至多${n}张牌`)).expectAnyButton("点击确定发动制衡").build(e)}))}onPlayerAction(e,t,n){return r(this,void 0,void 0,(function*(){if(e.isCancel())return void console.error("[制衡] 怎么可能cancel??");this.playSound(n,2),n.log(`${this.playerId} 发动了 ${this.displayName}`),n.broadcast(new d.TextFlashEffect(this.playerId,[],this.id)),n.roundStats.customData[this.id]=!0;let t=e.source,r=e.cardsAndPos.length;yield e.dropCardsFromSource("制衡"),console.log("[制衡] 一共弃置牌数",r),yield new h.default(t,r).perform(n)}))}}t.ZhiHeng=ZhiHeng;class QiXi extends i.Skill{constructor(){super(...arguments),this.id="奇袭",this.displayName="奇袭",this.description="你可以将一张黑色牌当【过河拆桥】使用。",this.hiddenType=i.HiddenType.NONE,this.hint="牌的消耗量大, 适合搭配过牌能力强的如孙尚香, 二张"}bootstrapClient(){s.playerActionDriverProvider.registerProvider(a.HintType.PLAY_HAND,(e=>new o.default("奇袭").expectChoose([l.UIPosition.MY_SKILL],1,1,((e,t)=>e===this.id)).expectChoose([l.UIPosition.MY_HAND,l.UIPosition.MY_EQUIP],1,1,((e,t)=>(0,f.isSuitBlack)(t.interpret(e).suit)),(()=>"(奇袭)选择一张黑色牌")).expectChoose([l.UIPosition.PLAYER],1,1,((e,t)=>e!==t.myself.player.id&&t.getPlayer(e).hasCards()),(()=>"选择‘奇袭’的对象")).expectAnyButton("点击确定发动奇袭(过河拆桥)").build(e)))}onPlayerAction(e,t,n){return r(this,void 0,void 0,(function*(){let t=e.getSingleCardAndPos();this.playSound(n,2),n.log(`${this.playerId} 使用${this.displayName}将${t[0]}作为过河拆桥打出`),t[0].as=p.CardType.GUO_HE,n.sendToWorkflow(e.source.player.id,t[1],[t[0]],!0),yield n.events.publish(new c.CardBeingUsedEvent(e.source.player.id,[t],p.CardType.GUO_HE,!0)),yield new g.GuoHe(e.source,e.targets[0],[t[0]]).perform(n)}))}}t.QiXi=QiXi;class KuRou extends i.Skill{constructor(){super(...arguments),this.id="苦肉",this.displayName="苦肉",this.description="出牌阶段限一次，你可以弃一张牌。若如此做，你失去1点体力，然后摸三张牌，此阶段你使用【杀】的次数上限+1",this.hiddenType=i.HiddenType.NONE,this.hint="可以在不满血的情况下扔狮子苦肉, 也可以搭配孙尚香扔装备苦肉. 搭配太史慈理论上可以达到三张杀杀六次的爆发"}bootstrapClient(){s.playerActionDriverProvider.registerProvider(a.HintType.PLAY_HAND,(e=>new o.default("苦肉").expectChoose([l.UIPosition.MY_SKILL],1,1,((t,n)=>!e.roundStat.customData[this.id]&&t===this.id)).expectChoose([l.UIPosition.MY_HAND,l.UIPosition.MY_EQUIP],1,1,((e,t)=>!0),(()=>"(苦肉)请弃置一张牌")).expectAnyButton("点击确定发动苦肉").build(e)))}onPlayerAction(e,t,n){return r(this,void 0,void 0,(function*(){n.roundStats.customData[this.id]=!0,this.playSound(n,2),n.log(`${this.playerId} 发动了 ${this.displayName}`),yield e.dropCardsFromSource("苦肉弃牌");let t=n.context.getPlayer(this.playerId);yield new y.default(t,t,1,[],y.DamageSource.SKILL,y.DamageType.ENERGY).perform(n),t.isDead||(n.roundStats.slashMax+=1,yield new h.default(t,3).perform(n))}))}}t.KuRou=KuRou;class YingZi extends i.SimpleConditionalSkill{constructor(){super(...arguments),this.id="英姿",this.displayName="英姿",this.description="锁定技，摸牌阶段，你多摸一张牌；你的手牌上限等于X（X为你的体力上限）。",this.isLocked=!0,this.hint="增加手牌上限大大增强了周瑜的防御能力"}bootstrapServer(e,t){e.on(h.TakeCardStageOp,this),e.onEvent(v.default,this.playerId,(e=>r(this,void 0,void 0,(function*(){if(!this.isInactive()&&e.player.player.id===this.playerId&&e.timeline===v.DropTimeline.BEFORE){let n=t.context.getPlayer(this.playerId);e.limit+=n.maxHp-n.hp,console.log("[英姿] 改变手牌上限为",e.limit)}}))))}conditionFulfilled(e,t){return e.player.player.id===this.playerId}doInvoke(e,t){return r(this,void 0,void 0,(function*(){console.log("[英姿] 发动"),this.playSound(t,2),t.broadcast(new d.TextFlashEffect(this.playerId,[],this.id)),e.amount+=1}))}}t.YingZi=YingZi;class FanJian extends i.SimpleConditionalSkill{constructor(){super(...arguments),this.id="反间",this.displayName="反间",this.description="出牌阶段限一次，你可以展示一张手牌并交给一名其他角色，其选择一项：1.展示所有手牌，然后弃置你与此牌同花色的牌(包括装备牌)；2.失去1点体力。",this.hiddenType=i.HiddenType.NONE,this.hint="可以用来弃置地方明置的装备牌, 也可以反间弃掉对方的闪/桃"}bootstrapClient(){s.playerActionDriverProvider.registerProvider(a.HintType.PLAY_HAND,(e=>new o.default("反间").expectChoose([l.UIPosition.MY_SKILL],1,1,((e,t)=>e===this.id)).expectChoose([l.UIPosition.MY_HAND],1,1,((e,t)=>!0),(()=>"(反间)选择一张要展示的手牌")).expectChoose([l.UIPosition.PLAYER],1,1,((e,t)=>e!==t.myself.player.id),(()=>"选择‘反间’的对象给与此牌")).expectAnyButton("点击确定使用反间").build(e)))}onPlayerAction(e,t,n){return r(this,void 0,void 0,(function*(){this.playSound(n,2),n.log(`${this.playerId} 发动了 ${this.displayName}`);let t=e.getSingleCardAndPos(),r=e.targets[0],i=r.player.id,o=t[0];o.description=this.playerId+" 反间 "+i+" 使用的牌",n.sendToWorkflow(this.playerId,u.CardPos.HAND,[o],!0,!0),yield n.transferCards(this.playerId,i,u.CardPos.HAND,u.CardPos.HAND,[o]);let s=n.interpret(i,o).suit,d=(yield n.sendHint(i,{hintType:a.HintType.MULTI_CHOICE,hintMsg:"请选择对反间的反应",extraButtons:[new l.Button("cards",`展示所有手牌，然后弃置你所有${C.Suits[s]}花色的手牌和装备牌`),new l.Button("hp","失去一点体力")]})).button;if(console.log("[反间] 对方选择了",d),"cards"===d){let e=r.getCards(u.CardPos.HAND),t=[],a=[],o=[];e.forEach((e=>{n.interpret(i,e).suit===s?(e.description="反间弃置手牌",a.push(e)):(e.description="反间展示手牌",t.push(e))})),r.getCards(u.CardPos.EQUIP).forEach((e=>{n.interpret(i,e).suit===s&&(e.description="反间弃置装备牌",o.push(e))})),a.length>0&&(n.sendToWorkflow(i,u.CardPos.HAND,a,!1),yield n.events.publish(new c.CardBeingDroppedEvent(i,a.map((e=>[e,u.CardPos.HAND]))))),o.length>0&&(n.sendToWorkflow(i,u.CardPos.EQUIP,o,!1),yield n.events.publish(new c.CardBeingDroppedEvent(i,o.map((e=>[e,u.CardPos.EQUIP]))))),t.length>0&&n.sendToWorkflow(i,u.CardPos.HAND,t,!1,!0)}else{if("hp"!==d)throw"WHAT??? "+d;yield new y.default(r,r,1,[],y.DamageSource.SKILL,y.DamageType.ENERGY).perform(n)}}))}}t.FanJian=FanJian;class GuoSe extends i.Skill{constructor(){super(...arguments),this.id="国色",this.displayName="国色",this.description="你可以将一张方块牌当【乐不思蜀】使用。",this.hiddenType=i.HiddenType.NONE,this.hint="可以搭配孙尚香用方片装备刷牌, 也可以搭配二张捡别人弃置的方片"}bootstrapClient(){s.playerActionDriverProvider.registerProvider(a.HintType.PLAY_HAND,(e=>new o.default("国色").expectChoose([l.UIPosition.MY_SKILL],1,1,((e,t)=>e===this.id)).expectChoose([l.UIPosition.MY_HAND,l.UIPosition.MY_EQUIP],1,1,((e,t)=>"diamond"===t.interpret(e).suit),(()=>"(国色)选择一张方片牌")).expectChoose([l.UIPosition.PLAYER],1,1,((e,t)=>e!==t.myself.player.id),(()=>"选择‘国色’的对象")).expectAnyButton("点击确定发动国色(乐不思蜀)").build(e)))}onPlayerAction(e,t,n){return r(this,void 0,void 0,(function*(){let t=e.getSingleCardAndPos(),r=t[0],i=t[1];r.as=p.CardType.LE_BU,this.invokeEffects(n,[e.targets[0].player.id]),yield new b.UseDelayedRuseOp(r,e.source,i,e.targets[0]).perform(n),yield n.events.publish(new c.CardBeingUsedEvent(e.source.player.id,[t],p.CardType.LE_BU,!0))}))}}t.GuoSe=GuoSe;class LiuLi extends i.SimpleConditionalSkill{constructor(){super(...arguments),this.id="流离",this.displayName="流离",this.description="当你成为【杀】的目标时，你可以弃置一张牌并将此【杀】转移给你攻击范围内的一名其他角色。",this.hint="可以搭配孙尚香用装备流离刷牌"}bootstrapClient(){s.playerActionDriverProvider.registerSpecial(this.id,(e=>new o.default("流离").expectChoose([l.UIPosition.MY_HAND,l.UIPosition.MY_EQUIP],1,1,((e,t)=>!0),(()=>"(流离)选择一张牌弃置")).expectChoose([l.UIPosition.PLAYER],1,1,((t,n)=>t!==n.myself.player.id&&t!==e.sourcePlayer&&n.computeDistance(this.playerId,t)<=n.getPlayer(this.playerId).getReach()),(()=>"选择‘流离’的对象")).expectAnyButton("点击确定发动流离").build(e,[l.Button.OK])))}bootstrapServer(e,t){e.on(S.SlashOP,this)}conditionFulfilled(e,t){return e.timeline===E.Timeline.BECOME_TARGET&&e.hasTarget(this.playerId)}doInvoke(e,t){return r(this,void 0,void 0,(function*(){let n=yield t.sendHint(this.playerId,{hintType:a.HintType.SPECIAL,specialId:this.id,hintMsg:"请选择发动流离",sourcePlayer:e.source.player.id,extraButtons:[l.Button.CANCEL]});if(n.isCancel())return;let r=n.targets[0];this.invokeEffects(t,[r.player.id]),yield n.dropCardsFromSource(this.displayName),e.removeTarget(this.playerId),e.targets.push(r)}))}}t.LiuLi=LiuLi;class SingleRuseCancellor{constructor(e,t){this.skill=e,this.cardType=t,this.needRepeatedCheck=!1}getSkill(){return this.skill}invokeMsg(e,t){return"发动"+this.skill.displayName}conditionFulfilled(e,t){return e.timeline===E.Timeline.BECOME_TARGET&&e.getTarget().player.id===this.skill.playerId&&e.ruseType===this.cardType}getSkillTriggerer(e,t){return this.skill.playerId}doInvoke(e,t){return r(this,void 0,void 0,(function*(){this.skill.invokeEffects(t),e.removeTarget(this.skill.playerId)}))}}class QianXun extends i.Skill{constructor(){super(...arguments),this.id="谦逊",this.displayName="谦逊",this.description="锁定技，当你成为【顺手牵羊】或【乐不思蜀】的目标时，则取消之。",this.isLocked=!0,this.hint="注意预亮, 不然被乐了/顺了是自己的锅..."}bootstrapServer(e,t){e.on(b.UseDelayedRuseOp,new SingleRuseCancellor(this,p.CardType.LE_BU)),e.on(g.ShunShou,new SingleRuseCancellor(this,p.CardType.SHUN_SHOU))}}t.QianXun=QianXun;class DuoShi extends i.Skill{constructor(){super(...arguments),this.id="度势",this.displayName="度势",this.description="出牌阶段限四次，你可以将一张红色手牌当【以逸待劳】使用。",this.hiddenType=i.HiddenType.NONE,this.hint="吴国开团神将, 配合孙尚香可以在自己的回合自娱自乐十分钟"}bootstrapClient(){s.playerActionDriverProvider.registerProvider(a.HintType.PLAY_HAND,(e=>{let t=e.roundStat.customData[this.id]||0;return new o.default("度势").expectChoose([l.UIPosition.MY_SKILL],1,1,((e,n)=>t<4&&e===this.id)).expectChoose([l.UIPosition.MY_HAND],1,1,((e,t)=>(0,f.isSuitRed)(t.interpret(e).suit)),(()=>"(度势)选择一张红色手牌")).expectAnyButton("点击确定发动度势(以逸待劳)").build(e)}))}onPlayerAction(e,t,n){return r(this,void 0,void 0,(function*(){let t=e.getSingleCardAndPos();this.playSound(n,2);let r=t[0],i=t[1];n.log(`${this.playerId} 发动 ${this.displayName} 将${r}作为以逸待劳打出`),r.as=p.CardType.YI_YI,n.roundStats.customData[this.id]=(n.roundStats.customData[this.id]||0)+1,n.sendToWorkflow(e.source.player.id,i,[r],!0),yield n.events.publish(new c.CardBeingUsedEvent(e.source.player.id,[t],p.CardType.YI_YI,!0)),yield w.YiYiDaiLao.do([r],e.source,n)}))}}t.DuoShi=DuoShi;class JieYin extends i.Skill{constructor(){super(...arguments),this.id="结姻",this.displayName="结姻",this.description="出牌阶段限一次，你可以弃置两张手牌，令你和一名已受伤的男性角色各回复1点体力。",this.hiddenType=i.HiddenType.NONE,this.hint="注意此技能不要求使用者是女性(比如孙尚香副将配男性主将也是可以发动结姻的)"}bootstrapClient(){s.playerActionDriverProvider.registerProvider(a.HintType.PLAY_HAND,(e=>new o.default("结姻").expectChoose([l.UIPosition.MY_SKILL],1,1,((t,n)=>!e.roundStat.customData[this.id]&&t===this.id)).expectChoose([l.UIPosition.MY_HAND],2,2,((e,t)=>!0),(()=>"(结姻)选择弃置两张手牌")).expectChoose([l.UIPosition.PLAYER],1,1,((e,t)=>{let n=t.getPlayer(e);return"M"===n.getGender()&&n.hp<n.maxHp}),(()=>"(结姻)选择一名已受伤的男性角色")).expectAnyButton("点击确定发动结姻").build(e)))}onPlayerAction(e,t,n){return r(this,void 0,void 0,(function*(){n.roundStats.customData[this.id]=!0,yield e.dropCardsFromSource("结姻"),this.invokeEffects(n,[e.targets[0].player.id]),e.source.hp<e.source.maxHp&&(yield new _.default(e.source,e.source,1).perform(n)),yield new _.default(e.targets[0],e.targets[0],1).perform(n)}))}}t.JieYin=JieYin;class XiaoJi extends i.SimpleConditionalSkill{constructor(){super(...arguments),this.id="枭姬",this.displayName="枭姬",this.description="当你失去装备区里的牌后，你可以摸两张牌。",this.hint="孙尚香攒牌爆发技能, 注意如果一次弃置两张装备(比如制衡/以逸待劳)也只能摸两张. 适合搭配队友凌统, 孙坚, 陆逊, 徐盛, 二张弃置/增加你的装备; 双将搭配孙权, 黄盖, 大乔(用方片装备发动国色)"}bootstrapServer(e,t){e.on(c.CardBeingDroppedEvent,this),e.on(c.CardBeingUsedEvent,this),e.on(c.CardBeingTakenEvent,this)}conditionFulfilled(e,t){return e.player===this.playerId&&e.cards.length>0&&(0,C.any)(e.cards,(e=>e[1]===u.CardPos.EQUIP))}doInvoke(e,t){return r(this,void 0,void 0,(function*(){let n=e.cards.filter((e=>e[1]===u.CardPos.EQUIP)).length;for(this.invokeEffects(t);n>0;)n--,yield new h.default(t.context.getPlayer(this.playerId),2).perform(t)}))}}t.XiaoJi=XiaoJi;class YingHun extends i.SimpleConditionalSkill{constructor(){super(...arguments),this.id="英魂",this.displayName="英魂",this.description="准备阶段，若你已受伤，你可以选择一名其他角色并选择一项：1.令其摸X张牌，然后弃置一张牌；2.令其摸一张牌，然后弃置X张牌。（X为你已损失的体力值）",this.hint="收益最大化是令人摸三弃一或者摸一弃三. 所以当你是满血的情况下等于是白板"}bootstrapClient(){s.playerActionDriverProvider.registerSpecial(this.id,((e,t)=>new o.default("英魂").expectChoose([l.UIPosition.PLAYER],1,1,((e,t)=>e!==this.playerId),(()=>"(英魂)选择一名其他角色")).expectAnyButton("选择发动的选项").build(e,[])))}bootstrapServer(e,t){e.on(m.StageStartFlow,this)}conditionFulfilled(e,t){if(e.isFor(this.playerId,P.Stage.ROUND_BEGIN)){let e=t.context.getPlayer(this.playerId);return e.hp<e.maxHp}return!1}doInvoke(e,t){return r(this,void 0,void 0,(function*(){let e=t.context.getPlayer(this.playerId),n=e.maxHp-e.hp,r=[new l.Button("take",`摸一张,弃${(0,C.toChinese)(n-1)}张`).inDirect(),new l.Button("drop",`摸${(0,C.toChinese)(n-1)}张, 弃一张`).inDirect()];1===n&&(r=[new l.Button("take","摸一张,弃一张").inDirect()]);let i=yield t.sendHint(this.playerId,{hintType:a.HintType.SPECIAL,specialId:this.id,hintMsg:"英魂",extraButtons:[...r,l.Button.CANCEL]});if(i.isCancel())return;let o=i.targets[0];if(this.invokeEffects(t,[o.player.id]),"take"===i.button)yield new h.default(o,1).perform(t),yield(new v.DropCardRequest).perform(o.player.id,n,t,`${i.source} 发动英魂令你弃置 ${n} 张牌`,[l.UIPosition.MY_HAND,l.UIPosition.MY_EQUIP]);else{if("drop"!==i.button)throw"WTF??"+i.button;yield new h.default(o,n).perform(t),yield(new v.DropCardRequest).perform(o.player.id,1,t,`${i.source} 发动英魂令你弃置一张牌`,[l.UIPosition.MY_HAND,l.UIPosition.MY_EQUIP])}}))}}t.YingHun=YingHun;class TianYi extends i.Skill{constructor(){super(...arguments),this.id="天义",this.displayName="天义",this.description="出牌阶段限一次，你可以与一名角色拼点：若你赢，本回合你可以多使用一张【杀】、使用【杀】无距离限制且可以多选择一个目标；若你没赢，本回合你不能使用【杀】。",this.hiddenType=i.HiddenType.NONE,this.hint="由于拼点输了没有惩罚, 可以将废牌拼掉敌方的手牌. 天义的收益对手牌要求较高(1张拼点牌+2张杀), 适合能爆发刷牌的双将, 例如黄盖,孙权,孙尚香,孙策"}bootstrapClient(){s.playerActionDriverProvider.registerProvider(a.HintType.PLAY_HAND,(e=>new o.default("天义").expectChoose([l.UIPosition.MY_SKILL],1,1,((t,n)=>!e.roundStat.customData[this.id]&&t===this.id&&n.getPlayer(this.playerId).getCards(u.CardPos.HAND).length>0)).expectChoose([l.UIPosition.PLAYER],1,1,((e,t)=>e!==this.playerId&&t.getPlayer(e).getCards(u.CardPos.HAND).length>0),(()=>"(天义)选择一名角色拼点")).expectAnyButton("点击确定发动天义").build(e)))}onPlayerAction(e,t,n){return r(this,void 0,void 0,(function*(){this.invokeEffects(n,[e.targets[0].player.id]),n.roundStats.customData[this.id]=!0,(yield new N.default(e.source,e.targets[0],this.displayName).perform(n))?(n.roundStats.slashMax+=1,n.roundStats.slashNumber+=1,n.roundStats.slashReach=999):n.roundStats.slashMax=-99999}))}}t.TianYi=TianYi;class ZhiJian extends i.Skill{constructor(){super(...arguments),this.id="直谏",this.displayName="直谏",this.description="出牌阶段，你可以将手牌中的一张装备牌置于其他角色的装备区里，然后摸一张牌。",this.hiddenType=i.HiddenType.NONE,this.hint="适合配合孙尚香, 凌统这种需要装备牌的队友, 也可以把藤甲装在敌人身上"}bootstrapClient(){s.playerActionDriverProvider.registerProvider(a.HintType.PLAY_HAND,(e=>new o.default("直谏").expectChoose([l.UIPosition.MY_SKILL],1,1,((e,t)=>e===this.id)).expectChoose([l.UIPosition.MY_HAND],1,1,((e,t)=>t.interpret(e,t.myself).type.isEquipment()),(()=>"选择手牌中的一张装备牌")).expectChoose([l.UIPosition.PLAYER],1,1,((e,t,n)=>{let r=t.interpret(n.getArr(l.UIPosition.MY_HAND)[0],t.myself),i=t.getPlayer(e);return e!==this.playerId&&!i.findCardAt(u.CardPos.EQUIP,r.type.genre)}),(()=>"(直谏)选择一名角色将此装备牌放置(不能替换已有的)")).expectAnyButton("点击确定发动直谏").build(e)))}onPlayerAction(e,t,n){return r(this,void 0,void 0,(function*(){let t=e.getSingleCardAndPos()[0];this.invokeEffects(n,e.targets.map((e=>e.player.id))),yield new I.EquipOp(e.targets[0],t,u.CardPos.HAND,e.source).perform(n),yield new h.default(e.source,1).perform(n)}))}}t.ZhiJian=ZhiJian;class GuZheng extends i.SimpleConditionalSkill{constructor(){super(...arguments),this.id="固政",this.displayName="固政",this.description="其他角色的弃牌阶段结束时，你可以将此阶段中的一张弃牌返还给该角色，然后你获得其余的弃牌。",this.hint="适合配合容易积攒大量手牌的爆发型队友, 比如孙尚香. 搭配大乔可以乐全场然后发动<固政>从被乐的人弃牌中找方片无限循环"}bootstrapServer(e,t){e.on(v.default,this)}conditionFulfilled(e,t){return e.player.player.id!==this.playerId&&e.timeline===v.DropTimeline.AFTER&&e.dropped.filter((e=>t.stillInWorkflow(e))).length>0}doInvoke(e,t){return r(this,void 0,void 0,(function*(){let n=e.dropped.filter((e=>t.stillInWorkflow(e)));this.invokeEffects(t,[e.player.player.id]);let r=(yield t.sendHint(this.playerId,{hintType:a.HintType.UI_PANEL,hintMsg:`请在${e.player}的弃牌中选择一张返还`,customRequest:{mode:"choose",data:{rowsOfCard:{弃置:n},title:`请在${e.player}的弃牌中选择一张返还`,chooseSize:1}}})).customData[0],i=n.splice(r.idx,1);yield t.takeFromWorkflow(e.player.player.id,u.CardPos.HAND,i),yield t.takeFromWorkflow(this.playerId,u.CardPos.HAND,n)}))}}t.GuZheng=GuZheng;class HongYan extends i.Skill{constructor(){super(...arguments),this.id="红颜",this.displayName="红颜",this.description="出牌阶段，你可明置此武将牌；锁定技，你的黑桃牌视为红桃牌。",this.hiddenType=i.HiddenType.REVEAL_IN_MY_USE_CARD,this.isLocked=!0,this.hint="注意当你的武将暗置时, 红颜是不会触发的, 即:暗置的小乔不可以用黑桃发动天香, 因为发动天香时尚未明置",this.interpret=e=>{if(this.isInactive())return e;let t=(0,f.mimicCard)(e);return"spade"===t.suit&&(console.log("[红颜] 将黑桃改红桃"),t.suit="heart"),t}}bootstrapClient(e){e.registerInterpreter(this.playerId,this.interpret)}bootstrapServer(e,t){t.context.registerInterpreter(this.playerId,this.interpret)}onRemoval(e){e.registerInterpreter(this.playerId,null)}}t.HongYan=HongYan;class TianXiang extends i.SimpleConditionalSkill{constructor(){super(...arguments),this.id="天香",this.displayName="天香",this.description="当你受到伤害时，你可以弃置一张红桃手牌,防止此次伤害并选择一名其他角色，你选择一项：令来源对其造成1点伤害，然后摸X张牌（X为其已损失体力值且至多为5）；令其失去1点体力，然后其获得你弃置的牌。",this.hint="因为反弹的特性, 小乔只要保持手牌数量够多就能保持低仇恨, 后期单挑更是少有对手. 让人损失体力的特性十分克制魏国卖血流"}bootstrapClient(){s.playerActionDriverProvider.registerSpecial(this.id,(e=>new o.default("天香").expectChoose([l.UIPosition.MY_HAND],1,1,((e,t)=>"heart"===t.interpret(e).suit),(()=>"选择一张红桃手牌")).expectChoose([l.UIPosition.PLAYER],1,1,(e=>e!==this.playerId),(()=>"(天香)选择一名其他角色")).expectAnyButton("选择发动天香令其...").build(e,[])))}bootstrapServer(e,t){e.on(y.default,this)}conditionFulfilled(e,t){return e.target.player.id===this.playerId&&e.timeline===y.DamageTimeline.TAKING_DAMAGE&&e.type!==y.DamageType.ENERGY}doInvoke(e,t){return r(this,void 0,void 0,(function*(){let n=[new l.Button("damage","受到一点伤害然后摸其损失体力值的牌").inDirect(),new l.Button("energy","损失一点体力获得你的天香牌").inDirect()],r=yield t.sendHint(this.playerId,{hintType:a.HintType.SPECIAL,specialId:this.id,hintMsg:"天香",extraButtons:[...n,l.Button.CANCEL]});if(r.isCancel())return;r.source;let i=r.targets[0];this.invokeEffects(t,[i.player.id]),e.amount=-999,yield r.dropCardsFromSource("[天香] 弃置"),"damage"===r.button?(yield new y.default(e.source,i,1,[],y.DamageSource.SKILL).perform(t),!i.isDead&&i.hp<i.maxHp&&(yield new h.default(i,Math.max(5,i.maxHp-i.hp)).perform(t))):(yield new y.default(i,i,1,[],y.DamageSource.SKILL,y.DamageType.ENERGY).perform(t),i.isDead||(yield t.takeFromWorkflow(i.player.id,u.CardPos.HAND,[r.getSingleCardAndPos()[0]])))}))}}t.TianXiang=TianXiang;class HaoShi extends i.SimpleConditionalSkill{constructor(){super(...arguments),this.id="好施",this.displayName="好施",this.description="摸牌阶段，你可以多摸两张牌，然后若你的手牌数大于5，则你将一半的手牌交给手牌最少的一名其他角色。",this.hasInvoked=!1,this.hint="可以发动好施将多出来的手牌交给队友, 但是发动好施可能最终手牌数少于不发动, 导致不能缔盟, 所以是非常需要计算的技能"}bootstrapClient(){s.playerActionDriverProvider.registerSpecial(this.id,((e,t)=>{let n=Math.floor(t.myself.getCards(u.CardPos.HAND).length/2),r=1/0,i=new Set;return t.playerInfos.filter((e=>!e.isDead&&e.player.id!==this.playerId)).forEach((e=>{let t=e.getCards(u.CardPos.HAND).length;t<r?(r=t,i.clear(),i.add(e.player.id)):t===r&&i.add(e.player.id)})),i.size<1&&console.error("没有找到好施的对象!!! 不可能!!"),console.log("[好施] 手牌最少的为",r,i),new o.default("好施").expectChoose([l.UIPosition.PLAYER],1,1,(e=>i.has(e)),(()=>"(好施)选择手牌最少的一名其他角色")).expectChoose([l.UIPosition.MY_HAND],n,n,((e,t)=>!0),(()=>`请选择${n}张手牌交给此角色`)).expectAnyButton("点击确定完成好施").build(e,[l.Button.OK])}))}bootstrapServer(e,t){e.on(h.TakeCardStageOp,this),e.onEvent(m.StageEndFlow,this.playerId,(e=>r(this,void 0,void 0,(function*(){if(e.isFor(this.playerId,P.Stage.TAKE_CARD)&&this.hasInvoked){if(this.hasInvoked=!1,console.log("[好施] 负面效果发动"),t.context.getPlayer(this.playerId).getCards(u.CardPos.HAND).length>5){let e=yield t.sendHint(this.playerId,{hintType:a.HintType.SPECIAL,hintMsg:"好施",specialId:this.id}),n=e.cards.get(u.CardPos.HAND);t.log(`${this.playerId} 将 ${n.length} 张手牌交给 ${e.targets[0]}`),yield t.transferCards(this.playerId,e.targets[0].player.id,u.CardPos.HAND,u.CardPos.HAND,n)}}}))))}conditionFulfilled(e,t){return e.player.player.id===this.playerId}doInvoke(e,t){return r(this,void 0,void 0,(function*(){this.invokeEffects(t),this.hasInvoked=!0,e.amount+=2}))}}t.HaoShi=HaoShi;class DiMeng extends i.SimpleConditionalSkill{constructor(){super(...arguments),this.id="缔盟",this.displayName="缔盟",this.description="出牌阶段限一次，你可以选择两名其他角色并弃置X张牌（X为这两名角色手牌数的差），然后令这两名角色交换手牌。",this.hiddenType=i.HiddenType.NONE,this.hint="鲁肃非常招仇恨的技能, 要在保障自己安全的情况下使用, 注意可以弃置装备牌"}bootstrapClient(){s.playerActionDriverProvider.registerProvider(a.HintType.PLAY_HAND,(e=>new o.default("缔盟").expectChoose([l.UIPosition.MY_SKILL],1,1,((t,n)=>!e.roundStat.customData[this.id]&&t===this.id)).expectChoose([l.UIPosition.PLAYER],2,2,((e,t)=>e!==this.playerId),(()=>"(缔盟)选择两名其他角色")).expectAnyButton("点击确定发动缔盟并弃牌").build(e)))}onPlayerAction(e,t,n){return r(this,void 0,void 0,(function*(){let t=e.targets[0],r=e.targets[1],i=Math.abs(t.getCards(u.CardPos.HAND).length-r.getCards(u.CardPos.HAND).length);if(i>0){if(!(yield(new v.DropCardRequest).perform(this.playerId,i,n,`请弃置${i}张牌完成缔盟, 或取消以放弃`,[l.UIPosition.MY_EQUIP,l.UIPosition.MY_HAND],!0)))return void console.log("[缔盟] 取消了, 玩家不愿意弃牌")}this.invokeEffects(n,e.targets.map((e=>e.player.id))),n.roundStats.customData[this.id]=!0;let a=t.getCards(u.CardPos.HAND);t.cards.set(u.CardPos.HAND,[]);let o=r.getCards(u.CardPos.HAND);r.cards.set(u.CardPos.HAND,[]),yield n.events.publish(new c.CardBeingTakenEvent(t.player.id,a.map((e=>[e,u.CardPos.HAND])))),yield n.events.publish(new c.CardBeingTakenEvent(r.player.id,o.map((e=>[e,u.CardPos.HAND])))),t.cards.set(u.CardPos.HAND,o),r.cards.set(u.CardPos.HAND,a),n.broadcast(new d.CardTransit(t.player.id,u.CardPos.HAND,r.player.id,u.CardPos.HAND,a,1e3),d.CardTransit.defaultSanitize),n.broadcast(new d.CardTransit(r.player.id,u.CardPos.HAND,t.player.id,u.CardPos.HAND,o,1e3),d.CardTransit.defaultSanitize),yield n.events.publish(new c.CardObtainedEvent(t.player.id,o.map((e=>[e,u.CardPos.HAND])))),yield n.events.publish(new c.CardObtainedEvent(r.player.id,a.map((e=>[e,u.CardPos.HAND]))))}))}}t.DiMeng=DiMeng;class YiCheng extends i.SimpleConditionalSkill{constructor(){super(...arguments),this.id="疑城",this.displayName="疑城",this.description="当与你势力相同的一名角色成为【杀】的目标后，你可以令该角色摸一张牌然后弃置一张牌。",this.hint="本身强度不高, 但如果配合/搭配孙尚香/凌统则可以产生联动"}bootstrapServer(e,t){e.on(S.SlashOP,this)}conditionFulfilled(e,t){return this.getBuddies(e,t).length>0}invokeMsg(e,t){return`对${e.targets[0]}发动疑城令其摸一张牌然后弃置一张牌`}doInvoke(e,t){return r(this,void 0,void 0,(function*(){let n=this.getBuddies(e,t),r=!0;for(let e of n){let n=!0;if(r)r=!1;else{"yes"!==(yield t.sendHint(this.playerId,{hintType:a.HintType.MULTI_CHOICE,hintMsg:`是否对${e}发动疑城`,extraButtons:[new l.Button("yes","发动"),new l.Button("no","不发动")]})).button&&(n=!1)}n&&(this.invokeEffects(t,[e.player.id]),yield new h.default(e,1).perform(t),yield(new v.DropCardRequest).perform(e.player.id,1,t,"(疑城)请弃置一张牌",[l.UIPosition.MY_HAND,l.UIPosition.MY_EQUIP]))}}))}getBuddies(e,t){let n=t.context.getPlayer(this.playerId),r=(0,R.getFactionIfRevealNow)(n,t);return e.targets.filter((t=>{(t.player.id===this.playerId||(0,O.factionsSame)(t.getFaction(),r))&&(e.timeline,E.Timeline.AFTER_BECOMING_TARGET)}))}}t.YiCheng=YiCheng;class KeJi extends i.SimpleConditionalSkill{constructor(){super(...arguments),this.id="克己",this.displayName="克己",this.description="锁定技，弃牌阶段开始时，若你未于出牌阶段内使用过颜色不同的牌或出牌阶段被跳过，你的手牌上限于此回合内+4",this.isLocked=!0,this.colorsUsed=new Set,this.hint="保持手牌数量可以极大增强你的回合外防御力. 注意搭配小乔的话你的黑桃是红桃, 不要搞错了你用牌的颜色"}bootstrapServer(e,t){e.on(v.default,this),e.onEvent(m.StageStartFlow,this.playerId,(e=>r(this,void 0,void 0,(function*(){e.isFor(this.playerId,P.Stage.USE_CARD)&&this.colorsUsed.clear()})))),e.onEvent(c.CardBeingUsedEvent,this.playerId,(e=>r(this,void 0,void 0,(function*(){t.currEffect.stage===P.Stage.USE_CARD&&t.currPlayer().player.id===this.playerId&&e.player===this.playerId&&e.cards.forEach((e=>{this.colorsUsed.add((0,f.deriveColor)([t.interpret(this.playerId,e[0]).suit]))}))}))))}conditionFulfilled(e,t){return e.player.player.id===this.playerId&&this.colorsUsed.size<2&&e.timeline===v.DropTimeline.BEFORE}doInvoke(e,t){return r(this,void 0,void 0,(function*(){console.log("[克己] 发动"),this.invokeEffects(t),e.limit+=4}))}}t.KeJi=KeJi;class MouDuan extends i.SimpleConditionalSkill{constructor(){super(...arguments),this.id="谋断",this.displayName="谋断",this.description="结束阶段开始时，若你于出牌阶段内使用过四种花色或三种类别的牌，则你可以移动场上的一张牌。",this.suitsUsed=new Set,this.typesUsed=new Set,this.hint="类似张郃巧变, 使用得当达到奇效, 比如转移队友的乐, 挪动关键装备牌"}bootstrapServer(e,t){e.on(m.StageStartFlow,this),e.onEvent(c.CardBeingUsedEvent,this.playerId,(e=>r(this,void 0,void 0,(function*(){t.currEffect.stage===P.Stage.USE_CARD&&t.currPlayer().player.id===this.playerId&&e.player===this.playerId&&e.cards.forEach((e=>{this.suitsUsed.add(e[0].suit),this.typesUsed.add(e[0].type.getSuperGenre())}))}))))}conditionFulfilled(e,t){return e.isFor(this.playerId,P.Stage.USE_CARD)&&(this.suitsUsed.clear(),this.typesUsed.clear()),!!e.isFor(this.playerId,P.Stage.ROUND_END)&&(4===this.suitsUsed.size||3===this.typesUsed.size)}doInvoke(e,t){return r(this,void 0,void 0,(function*(){this.invokeEffects(t),yield(0,A.MoveCardOnField)(t,e.info,this.displayName)}))}}t.MouDuan=MouDuan;class DuanXie extends i.Skill{constructor(){super(...arguments),this.id="断绁",this.displayName="断绁",this.description="出牌阶段限一次，你可以令一名其他角色进入连环状态(横置)，然后你若未横置进入连环状态(横置)。",this.hiddenType=i.HiddenType.NONE,this.hint="一种以命搏命的做法, 在手上/队友有铁索连环时可以很快达到效果最大化: 你和多个敌人连着, 队友可以对你使用属性杀造成大量伤害, 而你也可以通过<奋命>每回合弃置地方大量的牌"}bootstrapClient(){s.playerActionDriverProvider.registerProvider(a.HintType.PLAY_HAND,(e=>new o.default("断绁").expectChoose([l.UIPosition.MY_SKILL],1,1,((t,n)=>!e.roundStat.customData[this.id]&&t===this.id)).expectChoose([l.UIPosition.PLAYER],1,1,((e,t)=>e!==this.playerId&&!t.getPlayer(e).isChained),(()=>"(断绁)选择一名未横置(连环)的角色")).expectAnyButton("点击确定发动断绁").build(e)))}onPlayerAction(e,t,n){return r(this,void 0,void 0,(function*(){n.roundStats.customData[this.id]=!0,this.invokeEffects(n,[e.targets[0].player.id]),yield new x.DoTieSuo([],e.source,p.CardType.TIE_SUO,[]).doForOne(e.targets[0],n),e.source.isChained||(yield new x.DoTieSuo([],e.source,p.CardType.TIE_SUO,[]).doForOne(e.source,n))}))}}t.DuanXie=DuanXie;class FenMing extends i.SimpleConditionalSkill{constructor(){super(...arguments),this.id="奋命",this.displayName="奋命",this.description="结束阶段，若你处于连环(横置)状态，则你可以弃置所有处于连环(横置)状态的角色的各一张牌。",this.hint="在手上/队友有铁索连环时可以很快达到效果最大化: 你和多个敌人连着然后通过<奋命>每回合弃置地方大量的牌"}bootstrapServer(e,t){e.on(m.StageStartFlow,this)}conditionFulfilled(e,t){return!(!e.isFor(this.playerId,P.Stage.ROUND_END)||!e.info.isChained)}doInvoke(e,t){return r(this,void 0,void 0,(function*(){let n=t.getSortedByCurr(!0).filter((e=>e.hasOwnCards()&&e.isChained));this.invokeEffects(t,n.map((e=>e.player.id)));for(let r of n)yield(new v.DropOthersCardRequest).perform(t,e.info,r,`(奋命)弃置${r}一张牌`,[u.CardPos.HAND,u.CardPos.EQUIP])}))}}t.FenMing=FenMing;class BuQu extends i.SimpleConditionalSkill{constructor(){super(...arguments),this.id="不屈",this.displayName="不屈",this.description='锁定技，当你处于濒死状态时，你将牌堆顶的一张牌置于你的武将牌上，称为"创"：若此牌点数与已有的"创"点数均不同，你将体力回复至1点；若点数相同，将此牌置入弃牌堆。',this.isLocked=!0,this.wounds=new Set,this.hint="注意<不屈>判定成功是直接回复至1点, 所以不管受到多少伤害都是回复至一点. 但是如果<不屈>判定失败, 则按正常流程求桃"}bootstrapServer(e,t){e.on(T.default,this)}conditionFulfilled(e,t){return e.deadman.player.id===this.playerId&&e.goodman.player.id===this.playerId}doInvoke(e,t){return r(this,void 0,void 0,(function*(){this.invokeEffects(t);let n=t.context.deck.getCardsFromTop(1)[0];n.description=this.playerId+" > 不屈牌";let r=n.size.size,i=d.CardTransit.deckToWorkflow([n]);i.specialEffect="flip",t.broadcast(i),t.context.workflowCards.add(n),this.wounds.has(r)||(yield t.takeFromWorkflow(this.playerId,"main"===this.position?u.CardPos.ON_GENERAL:u.CardPos.ON_SUB_GENERAL,[n]),this.wounds.add(r),e.deadman.hp=1,t.broadcast(e.deadman,D.PlayerInfo.sanitize))}))}}t.BuQu=BuQu;class FenJi extends i.SimpleConditionalSkill{constructor(){super(...arguments),this.id="奋激",this.displayName="奋激",this.description="一名角色的结束阶段开始时，若其没有手牌，你可令其摸两张牌。若如此做，你失去1点体力。",this.hint="可以帮助队友补手牌, 特殊情况下可以破敌方<空城>, 或者配合乐不思蜀和二张刷牌"}bootstrapServer(e,t){e.on(m.StageStartFlow,this)}conditionFulfilled(e,t){return e.stage===P.Stage.ROUND_END&&0===e.info.getCards(u.CardPos.HAND).length}doInvoke(e,t){return r(this,void 0,void 0,(function*(){this.invokeEffects(t),yield new h.default(e.info,2).perform(t);let n=t.context.getPlayer(this.playerId);yield new y.default(n,n,1,[],y.DamageSource.SKILL,y.DamageType.ENERGY).perform(t)}))}}t.FenJi=FenJi;class RedSlashTrigger{constructor(e){this.skill=e,this.needRepeatedCheck=!1}getSkill(){return this.skill}invokeMsg(e,t){return"发动"+this.skill.displayName}getSkillTriggerer(e,t){return this.skill.playerId}conditionFulfilled(e,t){return e.timeline===E.Timeline.AFTER_BECOMING_TARGET&&e.hasTarget(this.skill.playerId)&&"red"===e.color?(console.log("[激昂] 被红杀摸牌"),!0):e.timeline===E.Timeline.AFTER_CONFIRMING_TARGET&&e.source.player.id===this.skill.playerId&&"red"===e.color&&(console.log("[激昂] 出红杀摸牌"),!0)}doInvoke(e,t){return r(this,void 0,void 0,(function*(){this.skill.invokeEffects(t),yield new h.default(t.context.getPlayer(this.skill.playerId),1).perform(t)}))}}class JueDouTrigger{constructor(e){this.skill=e,this.needRepeatedCheck=!1}getSkill(){return this.skill}invokeMsg(e,t){return"发动"+this.skill.displayName}conditionFulfilled(e,t){return e.timeline===E.Timeline.AFTER_BECOMING_TARGET&&e.getTarget().player.id===this.skill.playerId?(console.log("[激昂] 被决斗摸牌"),!0):e.timeline===E.Timeline.AFTER_CONFIRMING_TARGET&&e.source.player.id===this.skill.playerId&&(console.log("[激昂] 出决斗摸牌"),!0)}getSkillTriggerer(e,t){return this.skill.playerId}doInvoke(e,t){return r(this,void 0,void 0,(function*(){this.skill.invokeEffects(t),yield new h.default(t.context.getPlayer(this.skill.playerId),1).perform(t)}))}}class JiAng extends i.Skill{constructor(){super(...arguments),this.id="激昂",this.displayName="激昂",this.description="当你使用【决斗】或红色【杀】指定目标后，或成为【决斗】或红色【杀】的目标后，你可以摸一张牌。",this.hint="注意丈八蛇矛使用两张红牌时也算红色杀"}bootstrapServer(e,t){e.on(S.SlashOP,new RedSlashTrigger(this)),e.on(g.JueDou,new JueDouTrigger(this))}}t.JiAng=JiAng;class YingYang extends i.SimpleConditionalSkill{constructor(){super(...arguments),this.id="鹰扬",this.displayName="鹰扬",this.description="当你拼点的牌亮出后，你可以令此牌的点数+3或-3。(最大为 K 最小为 A )",this.hint="可以配合需要拼点的队友(如太史慈)"}bootstrapServer(e,t){e.on(N.default,this)}conditionFulfilled(e,t){return e.initiater.player.id===this.playerId||e.target.player.id===this.playerId}doInvoke(e,t){return r(this,void 0,void 0,(function*(){let n=yield t.sendHint(this.playerId,{hintType:a.HintType.MULTI_CHOICE,hintMsg:"请选择让你的拼点牌点数:",extraButtons:[new l.Button("+3","+3"),new l.Button("-3","-3"),l.Button.CANCEL]});if(n.isCancel())return;let r=0;r="+3"===n.button?3:-3,e.initiater.player.id===this.playerId?e.initiatorPoint=Math.min(p.CardSize.MAX,Math.max(p.CardSize.MIN,e.initiatorPoint+r)):e.targetPoint=Math.min(p.CardSize.MAX,Math.max(p.CardSize.MIN,e.targetPoint+r)),this.invokeEffects(t,[],`${this.playerId} 发动 ${this.displayName} 使其判定牌点数 ${r}`)}))}}t.YingYang=YingYang;class YingZiCe extends YingZi{constructor(){super(...arguments),this.id="英姿(策)"}}t.YingZiCe=YingZiCe;class YingHunCe extends YingHun{constructor(){super(...arguments),this.id="英魂(策)"}}t.YingHunCe=YingHunCe;class HunShang extends i.Skill{constructor(){super(...arguments),this.id="魂殇",this.displayName="魂殇",this.description="副将技，此武将牌减少半个阴阳鱼；准备阶段，若你的体力值不大于1，则你本回合获得“英姿”和“英魂”。",this.hiddenType=i.HiddenType.NONE,this.disabledForMain=!0,this.isLocked=!0,this.hint="由于孙策作为副将一般是三血, 所以不如孙坚的英魂. 但是如果孙坚是主将, 则可以连续发动两次, 而且效果加强"}onStatusUpdated(e,t){return r(this,void 0,void 0,(function*(){if(!this.isInactive()){this.isGone=!0,console.log(`[${this.id}] 生效增加孙策技能`);let n=new YingZiCe(this.playerId);n.isRevealed=!0,n.isForewarned=!0,t.addSkill(this.playerId,n),this.myYingZi=n;let r=new YingHunCe(this.playerId);r.isRevealed=!0,n.isForewarned=!0,this.myYingHun=r,t.addSkill(this.playerId,r),e.currEffect.stage===P.Stage.ROUND_BEGIN&&e.currEffect.player===this.playerId||(yield t.changeSkillDisabledness(this.myYingZi,!1,this.displayName,null),yield t.changeSkillDisabledness(this.myYingHun,!1,this.displayName,null)),e.send(this.playerId,n.toStatus()),e.send(this.playerId,r.toStatus()),e.send(this.playerId,this.toStatus())}}))}bootstrapServer(e,t,n){e.onEvent(m.StageStartFlow,this.playerId,(e=>r(this,void 0,void 0,(function*(){e.stage===P.Stage.ROUND_BEGIN&&(e.info.player.id===this.playerId?this.myYingHun&&this.myYingZi&&this.myYingHun.isDisabled&&t.context.getPlayer(this.playerId).hp<=1&&(console.log(`${this.displayName} 英姿英魂生效`),yield n.changeSkillDisabledness(this.myYingZi,!0,this.displayName,null),yield n.changeSkillDisabledness(this.myYingHun,!0,this.displayName,null)):this.myYingHun&&this.myYingZi&&!this.myYingHun.isDisabled&&(console.log(`${this.displayName} 英姿英魂失效`),yield n.changeSkillDisabledness(this.myYingZi,!1,this.displayName,null),yield n.changeSkillDisabledness(this.myYingHun,!1,this.displayName,null)))}))))}}t.HunShang=HunShang;class DiaoDuoStart extends i.SimpleTrigger{invokeMsg(e,t){return"发动调度获得势力相同角色的一张装备"}conditionFulfilled(e,t){return e.isFor(this.player.player.id,P.Stage.USE_CARD)}doInvoke(e,t){return r(this,void 0,void 0,(function*(){let e=yield t.sendHint(this.player.player.id,{hintType:a.HintType.SPECIAL,specialId:this.skill.id,hintMsg:"请选择调度的对象",extraButtons:[l.Button.CANCEL]});if(e.isCancel())return;let n=e.targets[0],r=yield(0,v.SelectACardAt)(t,this.player,n,`(调度)获得一张${n}的装备牌`,u.CardPos.EQUIP);if(!r)return void console.error("???");this.skill.invokeEffects(t,[n.player.id]),yield t.transferCards(n.player.id,this.player.player.id,u.CardPos.EQUIP,u.CardPos.HAND,[r[0]]);let i=yield t.sendHint(this.player.player.id,{hintType:a.HintType.CHOOSE_PLAYER,hintMsg:`请选择将${r[0]}交给另一名角色(或点击取消自己保留)`,forbidden:[this.player.player.id],minQuantity:1,quantity:1,extraButtons:[l.Button.CANCEL]});i.isCancel()||(n=i.targets[0],this.skill.invokeEffects(t,[n.player.id]),yield t.transferCards(this.player.player.id,n.player.id,u.CardPos.HAND,u.CardPos.HAND,[r[0]]))}))}}class DiaoDuo extends i.SimpleConditionalSkill{constructor(){super(...arguments),this.id="调度",this.displayName="调度",this.description="与你势力相同的角色使用装备牌时可以摸一张牌。出牌阶段开始时，你可以获得与你势力相同的一名角色装备区里的一张牌，然后可以将此牌交给另一名角色。",this.hint="与二张的直谏略有冲突, 配合孙尚香/凌统用装备刷牌收益非常高"}bootstrapClient(){s.playerActionDriverProvider.registerSpecial(this.id,((e,t)=>new o.default("调度").expectChoose([l.UIPosition.PLAYER],1,1,((e,t)=>{let n=t.getPlayer(e),r=t.myself;return n.hasCardAt(u.CardPos.EQUIP)&&k.FactionPlayerInfo.factionSame(n,r)}),(()=>"(调度)选择与你势力相同且有装备牌的一名角色")).expectAnyButton("选择发动调度").build(e,[l.Button.OK])))}bootstrapServer(e,t){e.on(I.EquipOp,this),e.on(m.StageStartFlow,new DiaoDuoStart(this,t))}invokeMsg(e,t){return"发动调度 摸一张牌"}conditionFulfilled(e,t){let n=t.context.getPlayer(this.playerId);if("main"===this.position&&n.isGeneralRevealed||"sub"===this.position&&n.isSubGeneralRevealed){let r=e.beneficiary;return e.beneficiary===e.source&&(0,O.factionsSame)((0,R.getFactionIfRevealNow)(r,t),n.getFaction())}}getSkillTriggerer(e,t){return e.beneficiary.player.id}doInvoke(e,t){return r(this,void 0,void 0,(function*(){this.invokeEffects(t),yield new h.default(e.source,1).perform(t)}))}}t.DiaoDuo=DiaoDuo;class DianCai extends i.SimpleConditionalSkill{constructor(){super(...arguments),this.id="典财",this.displayName="典财",this.description="其他角色的出牌阶段结束时，若你于此阶段失去了X张或更多的牌(X为你的体力值)，则你可以将手牌摸至体力上限。",this.cardLoss=0,this.hint="技能决定你的血量越少, 就越有几率发动这个技能. (比如一血一手牌时, 则别人对你出杀就会担心你手中是闪/酒/桃, 然后你就可以补三张牌)"}bootstrapServer(e,t){const n=e=>r(this,void 0,void 0,(function*(){e.player===this.playerId&&(this.cardLoss+=e.cards.length)}));e.onEvent(m.StageStartFlow,this.playerId,(e=>r(this,void 0,void 0,(function*(){this.cardLoss=0})))),e.on(m.StageEndFlow,this),e.onEvent(c.CardBeingUsedEvent,this.playerId,n),e.onEvent(c.CardBeingDroppedEvent,this.playerId,n),e.onEvent(c.CardBeingTakenEvent,this.playerId,n)}conditionFulfilled(e,t){if(e.stage===P.Stage.USE_CARD&&e.info.player.id!==this.playerId){let e=t.context.getPlayer(this.playerId);if(this.cardLoss>=e.hp&&e.maxHp-e.getCards(u.CardPos.HAND).length>0)return!0}return!1}doInvoke(e,t){return r(this,void 0,void 0,(function*(){let e=t.context.getPlayer(this.playerId),n=e.maxHp-e.getCards(u.CardPos.HAND).length;n<=0&&console.error("huh??",e),this.invokeEffects(t),yield new h.default(e,n).perform(t)}))}}t.DianCai=DianCai},2632:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{l(r.next(e))}catch(e){a(e)}}function s(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.FactionSkillProviders=void 0;const i=n(1449),a=n(2166),o=n(9577),s=n(5167),l=n(9222),d=n(1730),u=n(5125),c=n(1703),p=n(5935),h=n(3402),f=n(1259);t.FactionSkillProviders=new class FactionSkillProvider{constructor(){this._map=new Map}register(e,t){this._map.set(e,t),s.describer.register(e,t("dummy").description)}get(e,t){let n=this._map.get(e);if(!n)throw"No Skill Provider Found for "+e;return n(t)}},t.FactionSkillProviders.register("奸雄",(e=>new d.JianXiong(e))),t.FactionSkillProviders.register("反馈",(e=>new d.FanKui(e))),t.FactionSkillProviders.register("鬼才",(e=>new d.GuiCai(e))),t.FactionSkillProviders.register("突袭",(e=>new d.TuXi(e))),t.FactionSkillProviders.register("刚烈",(e=>new d.GangLie(e))),t.FactionSkillProviders.register("裸衣",(e=>new d.LuoYi(e))),t.FactionSkillProviders.register("天妒",(e=>new d.TianDu(e))),t.FactionSkillProviders.register("遗计",(e=>new d.YiJi(e))),t.FactionSkillProviders.register("倾国",(e=>new d.QinGuo(e))),t.FactionSkillProviders.register("洛神",(e=>new d.LuoShen(e))),t.FactionSkillProviders.register("神速",(e=>new d.ShenSu(e))),t.FactionSkillProviders.register("据守",(e=>new d.JuShou(e))),t.FactionSkillProviders.register("断粮",(e=>new d.DuanLiang(e))),t.FactionSkillProviders.register("强袭",(e=>new d.QiangXi(e))),t.FactionSkillProviders.register("放逐",(e=>new d.FangZhu(e))),t.FactionSkillProviders.register("行殇",(e=>new d.XingShang(e))),t.FactionSkillProviders.register("节命",(e=>new d.JieMing(e))),t.FactionSkillProviders.register("驱虎",(e=>new d.QuHu(e))),t.FactionSkillProviders.register("巧变",(e=>new d.QiaoBian(e))),t.FactionSkillProviders.register("骁果",(e=>new d.XiaoGuo(e))),t.FactionSkillProviders.register("屯田",(e=>new d.TunTian(e))),t.FactionSkillProviders.register("急袭",(e=>new d.JiXi(e))),t.FactionSkillProviders.register("资粮",(e=>new d.ZiLiang(e))),t.FactionSkillProviders.register("恂恂",(e=>new d.XunXun(e))),t.FactionSkillProviders.register("忘隙",(e=>new d.WangXi(e))),t.FactionSkillProviders.register("横江",(e=>new d.HengJiang(e))),t.FactionSkillProviders.register("龙胆",(e=>new u.LongDan(e))),t.FactionSkillProviders.register("仁德",(e=>new u.Rende(e))),t.FactionSkillProviders.register("武圣",(e=>new u.WuSheng(e))),t.FactionSkillProviders.register("咆哮",(e=>new u.PaoXiao(e))),t.FactionSkillProviders.register("马术",(e=>new u.MaShu(e))),t.FactionSkillProviders.register("铁骑",(e=>new u.TieQi(e))),t.FactionSkillProviders.register("火计",(e=>new u.HuoJi(e))),t.FactionSkillProviders.register("八阵",(e=>new u.BaZhen(e))),t.FactionSkillProviders.register("看破",(e=>new u.KanPo(e))),t.FactionSkillProviders.register("狂骨",(e=>new u.KuangGu(e))),t.FactionSkillProviders.register("烈弓",(e=>new u.LieGong(e))),t.FactionSkillProviders.register("蒺藜",(e=>new u.JiLi(e))),t.FactionSkillProviders.register("放权",(e=>new u.FangQuan(e))),t.FactionSkillProviders.register("享乐",(e=>new u.XiangLe(e))),t.FactionSkillProviders.register("集智",(e=>new u.JiZhi(e))),t.FactionSkillProviders.register("奇才",(e=>new u.QiCai(e))),t.FactionSkillProviders.register("连环",(e=>new u.LianHuan(e))),t.FactionSkillProviders.register("涅槃",(e=>new u.NiePan(e))),t.FactionSkillProviders.register("巨象",(e=>new u.JuXiang(e))),t.FactionSkillProviders.register("烈刃",(e=>new u.LieRen(e))),t.FactionSkillProviders.register("再起",(e=>new u.ZaiQi(e))),t.FactionSkillProviders.register("祸首",(e=>new u.HuoShou(e))),t.FactionSkillProviders.register("淑慎",(e=>new u.ShuShen(e))),t.FactionSkillProviders.register("神智",(e=>new u.ShenZhi(e))),t.FactionSkillProviders.register("生息",(e=>new u.ShengXi(e))),t.FactionSkillProviders.register("守成",(e=>new u.ShouCheng(e))),t.FactionSkillProviders.register("空城",(e=>new u.KongCheng(e))),t.FactionSkillProviders.register("观星",(e=>new u.GuanXing(e))),t.FactionSkillProviders.register("挑衅",(e=>new u.TiaoXin(e))),t.FactionSkillProviders.register("观星(姜维)",(e=>new u.GuanXingJiangWei(e))),t.FactionSkillProviders.register("遗志",(e=>new u.YiZhi(e))),t.FactionSkillProviders.register("看破(姜维)",(e=>new u.KanPoJiangWei(e))),t.FactionSkillProviders.register("天覆",(e=>new u.TianFu(e))),t.FactionSkillProviders.register("制衡",(e=>new c.ZhiHeng(e))),t.FactionSkillProviders.register("奇袭",(e=>new c.QiXi(e))),t.FactionSkillProviders.register("苦肉",(e=>new c.KuRou(e))),t.FactionSkillProviders.register("反间",(e=>new c.FanJian(e))),t.FactionSkillProviders.register("英姿",(e=>new c.YingZi(e))),t.FactionSkillProviders.register("国色",(e=>new c.GuoSe(e))),t.FactionSkillProviders.register("流离",(e=>new c.LiuLi(e))),t.FactionSkillProviders.register("谦逊",(e=>new c.QianXun(e))),t.FactionSkillProviders.register("度势",(e=>new c.DuoShi(e))),t.FactionSkillProviders.register("结姻",(e=>new c.JieYin(e))),t.FactionSkillProviders.register("枭姬",(e=>new c.XiaoJi(e))),t.FactionSkillProviders.register("英魂",(e=>new c.YingHun(e))),t.FactionSkillProviders.register("天义",(e=>new c.TianYi(e))),t.FactionSkillProviders.register("固政",(e=>new c.GuZheng(e))),t.FactionSkillProviders.register("直谏",(e=>new c.ZhiJian(e))),t.FactionSkillProviders.register("红颜",(e=>new c.HongYan(e))),t.FactionSkillProviders.register("天香",(e=>new c.TianXiang(e))),t.FactionSkillProviders.register("好施",(e=>new c.HaoShi(e))),t.FactionSkillProviders.register("缔盟",(e=>new c.DiMeng(e))),t.FactionSkillProviders.register("疑城",(e=>new c.YiCheng(e))),t.FactionSkillProviders.register("克己",(e=>new c.KeJi(e))),t.FactionSkillProviders.register("谋断",(e=>new c.MouDuan(e))),t.FactionSkillProviders.register("奋命",(e=>new c.FenMing(e))),t.FactionSkillProviders.register("断绁",(e=>new c.DuanXie(e))),t.FactionSkillProviders.register("不屈",(e=>new c.BuQu(e))),t.FactionSkillProviders.register("奋激",(e=>new c.FenJi(e))),t.FactionSkillProviders.register("英姿(策)",(e=>new c.YingZiCe(e))),t.FactionSkillProviders.register("英魂(策)",(e=>new c.YingHunCe(e))),t.FactionSkillProviders.register("魂殇",(e=>new c.HunShang(e))),t.FactionSkillProviders.register("激昂",(e=>new c.JiAng(e))),t.FactionSkillProviders.register("鹰扬",(e=>new c.YingYang(e))),t.FactionSkillProviders.register("调度",(e=>new c.DiaoDuo(e))),t.FactionSkillProviders.register("典财",(e=>new c.DianCai(e))),t.FactionSkillProviders.register("除疠",(e=>new f.ChuLi(e))),t.FactionSkillProviders.register("急救",(e=>new f.JiJiu(e))),t.FactionSkillProviders.register("无双",(e=>new f.WuShuang(e))),t.FactionSkillProviders.register("离间",(e=>new f.LiJian(e))),t.FactionSkillProviders.register("闭月",(e=>new f.BiYue(e))),t.FactionSkillProviders.register("双雄",(e=>new f.ShuangXiong(e))),t.FactionSkillProviders.register("完杀",(e=>new f.WanSha(e))),t.FactionSkillProviders.register("乱武",(e=>new f.LuanWu(e))),t.FactionSkillProviders.register("帷幕",(e=>new f.WeiMu(e))),t.FactionSkillProviders.register("鸩毒",(e=>new f.ZhenDu(e))),t.FactionSkillProviders.register("戚乱",(e=>new f.QiLuan(e))),t.FactionSkillProviders.register("从谏",(e=>new f.CongJian(e))),t.FactionSkillProviders.register("附敌",(e=>new f.FuDi(e))),t.FactionSkillProviders.register("鬼道",(e=>new f.LeiJi(e))),t.FactionSkillProviders.register("雷击",(e=>new f.GuiDao(e))),t.FactionSkillProviders.register("马术(庞)",(e=>new f.MaShuPang(e))),t.FactionSkillProviders.register("马术(腾)",(e=>new f.MaShuTeng(e))),t.FactionSkillProviders.register("鞬出",(e=>new f.JianChu(e))),t.FactionSkillProviders.register("雄异",(e=>new f.XiongYi(e))),t.FactionSkillProviders.register("随势",(e=>new f.SuiShi(e))),t.FactionSkillProviders.register("死谏",(e=>new f.SiJian(e))),t.FactionSkillProviders.register("乱击",(e=>new f.LuanJi(e))),t.FactionSkillProviders.register("凶算",(e=>new f.XiongSuan(e))),t.FactionSkillProviders.register("狂斧",(e=>new f.KuangFu(e))),t.FactionSkillProviders.register("悲歌",(e=>new f.BeiGe(e))),t.FactionSkillProviders.register("断肠",(e=>new f.DuanChange(e))),t.FactionSkillProviders.register("横征",(e=>new f.HengZheng(e))),t.FactionSkillProviders.register("暴凌",(e=>new f.BaoLing(e))),t.FactionSkillProviders.register("崩坏",(e=>new f.BengHuai(e))),t.FactionSkillProviders.register("穿心",(e=>new f.ChuanXin(e))),t.FactionSkillProviders.register("锋矢",(e=>new f.FengShi(e))),t.FactionSkillProviders.register("礼让",(e=>new f.LiRang(e))),t.FactionSkillProviders.register("名士",(e=>new f.MingShi(e))),t.FactionSkillProviders.register("双刃",(e=>new f.ShuangRen(e))),t.FactionSkillProviders.register("千幻",(e=>new f.QianHuan(e)));t.default=class FactionWarSkillRepo{constructor(e,t){this.manager=e,this.skillRegistry=t,this.allSkills=new i.Multimap,this.disablers=[],this.onGeneralSkillUpdate=e=>r(this,void 0,void 0,(function*(){let t="main"===e.position?e.target.mainMark:e.target.subMark,n=this.allSkills.getArr(e.target.player.id).filter((t=>t.position===e.position));e.includeLocked||(n=n.filter((e=>!e.isLocked))),console.log("[技能] 收到对武将牌封禁的修改",e.reason,e.target.player.id,n.map((e=>e.id)));for(let r of n)yield this.changeSkillDisabledness(r,e.enable,e.reason,t);this.manager.broadcast(e.target,h.PlayerInfo.sanitize)})),this.onRevealEvent=e=>r(this,void 0,void 0,(function*(){let t=this.allSkills.getArr(e.playerId);for(let n of t)"main"===n.position&&e.mainReveal&&(n.isRevealed=!0),"sub"===n.position&&e.subReveal&&(n.isRevealed=!0),console.log("[技能] 有武将明置, 技能展示",e.playerId,n.id,n.isRevealed),yield n.onStatusUpdated(this.manager,this),this.manager.send(e.playerId,n.toStatus())})),e.context.playerInfos.forEach((t=>{let n=t;n.getSkills(l.GameMode.get(e.context.gameMode)).forEach((e=>{this.addSkill(n.player.id,e)}))})),e.adminRegistry.onGeneral(o.RevealGeneralEvent,this.onRevealEvent),e.adminRegistry.onGeneral(a.GeneralSkillStatusUpdate,this.onGeneralSkillUpdate)}addSkill(e,t){console.log("[技能] 添加技能",e,t.id),this.allSkills.set(e,t),t.bootstrapServer(this.skillRegistry,this.manager,this)}onClientUpdateSkill(e){return r(this,void 0,void 0,(function*(){let t=this.allSkills.getArr(e.playerId).find((t=>t.id===e.id));console.log(t.isForewarned,e.isForewarned,t.isRevealed,e.isRevealed),t.isForewarned!==e.isForewarned&&(console.log("[技能] 改变技能预亮",t.id,t.playerId,e.isForewarned),t.isForewarned=e.isForewarned,yield t.onStatusUpdated(this.manager,this)),t.isRevealed!==e.isRevealed&&e.isRevealed&&(t.hiddenType===a.HiddenType.REVEAL_IN_MY_USE_CARD&&this.manager.currPlayer().player.id===t.playerId&&this.manager.currEffect.stage===p.Stage.USE_CARD?(console.log("[技能] 想要reveal??",t.id,t.playerId,e.isRevealed),yield this.manager.events.publish(new o.RevealGeneralEvent(t.playerId,"main"===t.position,"sub"===t.position))):console.warn("[技能] 只能在你自己的出牌阶段里reveal!",t.id,t.playerId,e.isRevealed)),this.manager.send(e.playerId,t.toStatus())}))}getSkills(e){return this.allSkills.get(e)}getSkill(e,t){let n;if(this.allSkills.get(e).forEach((e=>{e.id===t&&(n=e)})),!n)throw"[技能] 未找到技能: "+e+" > "+t;return n}changeSkillDisabledness(e,t,n,i){return r(this,void 0,void 0,(function*(){let r=this.disablers.find((t=>t.playerId===e.playerId&&t.skillId===e.id));if(console.log("[技能] 已有的封禁理由: ",e.id,r?r.reasons:[]),t){if(!r||!r.reasons.has(n))throw"Impossible!, How can we enable if we did NOT disable?";r.reasons.delete(n),i&&delete i[n],0===r.reasons.size&&(console.log("[技能] 恢复技能",e.playerId,e.id),e.isDisabled=!1,yield e.onStatusUpdated(this.manager,this),this.manager.send(e.playerId,e.toStatus()))}else r||(r=new Disabler(e.playerId,e.id),this.disablers.push(r)),0===r.reasons.size&&(console.log("[技能] 禁止技能",e.playerId,e.id),e.isDisabled=!0,yield e.onStatusUpdated(this.manager,this),this.manager.send(e.playerId,e.toStatus())),i&&(i[n]=n),r.reasons.add(n)}))}};class Disabler{constructor(e,t){this.playerId=e,this.skillId=t,this.reasons=new Set}}},7011:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{l(r.next(e))}catch(e){a(e)}}function s(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.SequenceAwareSkillPubSub=void 0;const i=n(1449),a=n(2166),o=n(1480),s=n(739),l=n(5706),d=n(9577),u=n(787),c=n(8411);t.SequenceAwareSkillPubSub=class SequenceAwareSkillPubSub{constructor(e,t){this.manager=e,this.sorter=t,this._map=new Map,this._pubsub=new u.SequenceAwarePubSub(t)}onPlayerDead(e){this._map.forEach((t=>t.removeAll(e)))}on(e,t){let n=this._map.get(e)||new i.Multimap;if(n.contains(t.getSkill().playerId,t))throw`Already has this skill!! ${t.getSkill().playerId} ${t.getSkill().id}`;n.set(t.getSkill().playerId,t),this._map.set(e,n)}onEvent(e,t,n){e===c.StageEndFlow&&console.log("Stage End Subscribing!"),this._pubsub.on(e,t,n)}off(e,t){let n=this._map.get(e);if(n&&!n.remove(t.getSkill().playerId,t))throw`Did not find such skill!! ${e} ${t.getSkill().id}`}publish(e){return r(this,void 0,void 0,(function*(){let t=0,n=this._map.get(e.constructor);if(t+=(yield this._pubsub.publish(e)),!n)return;let r=this.sorter(n.keys());for(let i of r){let r,u=n.getArr(i),c=[];for(let t of u)if((0,a.invocable)(t,e,this.manager)){let n=t.getSkill();if(n.isRevealed&&n.isLocked)console.log("[技能驱动] 直接发动锁定技: ",n.id),yield t.doInvoke(e,this.manager);else{console.log("[技能驱动] 可能可以发动: ",n.id);let r=t.invokeMsg(e,this.manager);n.isRevealed||(r+="并明置"+("main"===n.position?"主将":"副将")),c.push([t,new o.Button(n.id,r)])}}if(0!==c.length)for(;c.length>0;){c=c.filter((t=>!t[0]||!t[0].needRepeatedCheck||(0,a.invocable)(t[0],e,this.manager))),c[0][0]||console.error("No SkillTrigger? ",c);let n=c[0][0].getSkillTriggerer(e,this.manager);if(r=yield this.manager.sendHint(n,{hintType:s.HintType.MULTI_CHOICE,hintMsg:"请选择发动技能或取消",extraButtons:[...c.map((e=>e[1])),o.Button.CANCEL]}),r.isCancel()){console.log("[技能驱动] 玩家放弃发动技能");break}{let n=r.button;console.log("[技能驱动] 收到玩家指示发动: ",n);let a=(0,l.takeFromArray)(u,(e=>e.getSkill().id===n));if(!a)throw"Failed to find skill! "+n;if(a.getSkill().isRevealed||(yield this.manager.events.publish(new d.RevealGeneralEvent(i,"main"===a.getSkill().position,"sub"===a.getSkill().position))),yield a.doInvoke(e,this.manager),t++,!(0,l.takeFromArray)(c,(e=>e[1].id===n)))throw"Failed to remove button! "+n}}}return t}))}}},1657:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IdentityWarCards=void 0;const r=n(4619);let i=[];i.push(new r.Card("spade",r.CardSize.ACE,r.CardType.SHAN_DIAN)),i.push(new r.Card("spade",r.CardSize.ACE,r.CardType.JUE_DOU)),i.push(new r.Card("spade",r.CardSize.ACE,r.CardType.GU_DING)),i.push(new r.Card("spade",r.CardSize.TWO,r.CardType.BA_GUA)),i.push(new r.Card("spade",r.CardSize.TWO,r.CardType.CI_XIONG)),i.push(new r.Card("spade",r.CardSize.TWO,r.CardType.HAN_BING)),i.push(new r.Card("spade",r.CardSize.TWO,r.CardType.TENG_JIA)),i.push(new r.Card("spade",r.CardSize.THREE,r.CardType.GUO_HE)),i.push(new r.Card("spade",r.CardSize.THREE,r.CardType.SHUN_SHOU)),i.push(new r.Card("spade",r.CardSize.THREE,r.CardType.WINE)),i.push(new r.Card("spade",r.CardSize.FOUR,r.CardType.GUO_HE)),i.push(new r.Card("spade",r.CardSize.FOUR,r.CardType.SHUN_SHOU)),i.push(new r.Card("spade",r.CardSize.FOUR,r.CardType.SLASH_THUNDER)),i.push(new r.Card("spade",r.CardSize.FIVE,r.CardType.QING_LONG)),i.push(new r.Card("spade",r.CardSize.FIVE,r.CardType.JUE_YING)),i.push(new r.Card("spade",r.CardSize.FIVE,r.CardType.SLASH_THUNDER)),i.push(new r.Card("spade",r.CardSize.SIX,r.CardType.LE_BU)),i.push(new r.Card("spade",r.CardSize.SIX,r.CardType.QING_GANG)),i.push(new r.Card("spade",r.CardSize.SIX,r.CardType.SLASH_THUNDER)),i.push(new r.Card("spade",r.CardSize.SEVEN,r.CardType.NAN_MAN)),i.push(new r.Card("spade",r.CardSize.SEVEN,r.CardType.SLASH)),i.push(new r.Card("spade",r.CardSize.SEVEN,r.CardType.SLASH_THUNDER)),i.push(new r.Card("spade",r.CardSize.EIGHT,r.CardType.SLASH)),i.push(new r.Card("spade",r.CardSize.EIGHT,r.CardType.SLASH)),i.push(new r.Card("spade",r.CardSize.EIGHT,r.CardType.SLASH_THUNDER)),i.push(new r.Card("spade",r.CardSize.NINE,r.CardType.SLASH)),i.push(new r.Card("spade",r.CardSize.NINE,r.CardType.SLASH)),i.push(new r.Card("spade",r.CardSize.NINE,r.CardType.WINE)),i.push(new r.Card("spade",r.CardSize.TEN,r.CardType.SLASH)),i.push(new r.Card("spade",r.CardSize.TEN,r.CardType.SLASH)),i.push(new r.Card("spade",r.CardSize.TEN,r.CardType.BING_LIANG)),i.push(new r.Card("spade",r.CardSize.JACK,r.CardType.WU_XIE)),i.push(new r.Card("spade",r.CardSize.JACK,r.CardType.SHUN_SHOU)),i.push(new r.Card("spade",r.CardSize.JACK,r.CardType.TIE_SUO)),i.push(new r.Card("spade",r.CardSize.QUEEN,r.CardType.ZHANG_BA)),i.push(new r.Card("spade",r.CardSize.QUEEN,r.CardType.GUO_HE)),i.push(new r.Card("spade",r.CardSize.QUEEN,r.CardType.TIE_SUO)),i.push(new r.Card("spade",r.CardSize.KING,r.CardType.DA_YUAN)),i.push(new r.Card("spade",r.CardSize.KING,r.CardType.NAN_MAN)),i.push(new r.Card("spade",r.CardSize.KING,r.CardType.WU_XIE)),i.push(new r.Card("heart",r.CardSize.ACE,r.CardType.TAO_YUAN)),i.push(new r.Card("heart",r.CardSize.ACE,r.CardType.WAN_JIAN)),i.push(new r.Card("heart",r.CardSize.ACE,r.CardType.WU_XIE)),i.push(new r.Card("heart",r.CardSize.TWO,r.CardType.DODGE)),i.push(new r.Card("heart",r.CardSize.TWO,r.CardType.DODGE)),i.push(new r.Card("heart",r.CardSize.TWO,r.CardType.HUO_GONG)),i.push(new r.Card("heart",r.CardSize.THREE,r.CardType.PEACH)),i.push(new r.Card("heart",r.CardSize.THREE,r.CardType.WU_GU)),i.push(new r.Card("heart",r.CardSize.THREE,r.CardType.SLASH_FIRE)),i.push(new r.Card("heart",r.CardSize.FOUR,r.CardType.PEACH)),i.push(new r.Card("heart",r.CardSize.FOUR,r.CardType.WU_GU)),i.push(new r.Card("heart",r.CardSize.FOUR,r.CardType.SLASH_FIRE)),i.push(new r.Card("heart",r.CardSize.FIVE,r.CardType.QI_LIN)),i.push(new r.Card("heart",r.CardSize.FIVE,r.CardType.CHI_TU)),i.push(new r.Card("heart",r.CardSize.FIVE,r.CardType.PEACH)),i.push(new r.Card("heart",r.CardSize.SIX,r.CardType.PEACH)),i.push(new r.Card("heart",r.CardSize.SIX,r.CardType.LE_BU)),i.push(new r.Card("heart",r.CardSize.SIX,r.CardType.PEACH)),i.push(new r.Card("heart",r.CardSize.SEVEN,r.CardType.PEACH)),i.push(new r.Card("heart",r.CardSize.SEVEN,r.CardType.WU_ZHONG)),i.push(new r.Card("heart",r.CardSize.SEVEN,r.CardType.SLASH_FIRE)),i.push(new r.Card("heart",r.CardSize.EIGHT,r.CardType.PEACH)),i.push(new r.Card("heart",r.CardSize.EIGHT,r.CardType.WU_ZHONG)),i.push(new r.Card("heart",r.CardSize.EIGHT,r.CardType.DODGE)),i.push(new r.Card("heart",r.CardSize.NINE,r.CardType.PEACH)),i.push(new r.Card("heart",r.CardSize.NINE,r.CardType.WU_ZHONG)),i.push(new r.Card("heart",r.CardSize.NINE,r.CardType.DODGE)),i.push(new r.Card("heart",r.CardSize.TEN,r.CardType.SLASH)),i.push(new r.Card("heart",r.CardSize.TEN,r.CardType.SLASH)),i.push(new r.Card("heart",r.CardSize.TEN,r.CardType.SLASH_FIRE)),i.push(new r.Card("heart",r.CardSize.JACK,r.CardType.SLASH)),i.push(new r.Card("heart",r.CardSize.JACK,r.CardType.WU_ZHONG)),i.push(new r.Card("heart",r.CardSize.JACK,r.CardType.DODGE)),i.push(new r.Card("heart",r.CardSize.QUEEN,r.CardType.PEACH)),i.push(new r.Card("heart",r.CardSize.QUEEN,r.CardType.GUO_HE)),i.push(new r.Card("heart",r.CardSize.QUEEN,r.CardType.SHAN_DIAN)),i.push(new r.Card("heart",r.CardSize.QUEEN,r.CardType.DODGE)),i.push(new r.Card("heart",r.CardSize.KING,r.CardType.ZHUA_HUANG)),i.push(new r.Card("heart",r.CardSize.KING,r.CardType.DODGE)),i.push(new r.Card("heart",r.CardSize.KING,r.CardType.WU_XIE)),i.push(new r.Card("club",r.CardSize.ACE,r.CardType.LIAN_NU)),i.push(new r.Card("club",r.CardSize.ACE,r.CardType.JUE_DOU)),i.push(new r.Card("club",r.CardSize.ACE,r.CardType.SILVER_LION)),i.push(new r.Card("club",r.CardSize.TWO,r.CardType.BA_GUA)),i.push(new r.Card("club",r.CardSize.TWO,r.CardType.SLASH)),i.push(new r.Card("club",r.CardSize.TWO,r.CardType.REN_WANG)),i.push(new r.Card("club",r.CardSize.TWO,r.CardType.TENG_JIA)),i.push(new r.Card("club",r.CardSize.THREE,r.CardType.GUO_HE)),i.push(new r.Card("club",r.CardSize.THREE,r.CardType.SLASH)),i.push(new r.Card("club",r.CardSize.THREE,r.CardType.WINE)),i.push(new r.Card("club",r.CardSize.FOUR,r.CardType.GUO_HE)),i.push(new r.Card("club",r.CardSize.FOUR,r.CardType.SLASH)),i.push(new r.Card("club",r.CardSize.FOUR,r.CardType.BING_LIANG)),i.push(new r.Card("club",r.CardSize.FIVE,r.CardType.DI_LU)),i.push(new r.Card("club",r.CardSize.FIVE,r.CardType.SLASH)),i.push(new r.Card("club",r.CardSize.FIVE,r.CardType.SLASH_THUNDER)),i.push(new r.Card("club",r.CardSize.SIX,r.CardType.LE_BU)),i.push(new r.Card("club",r.CardSize.SIX,r.CardType.SLASH)),i.push(new r.Card("club",r.CardSize.SIX,r.CardType.SLASH_THUNDER)),i.push(new r.Card("club",r.CardSize.SEVEN,r.CardType.NAN_MAN)),i.push(new r.Card("club",r.CardSize.SEVEN,r.CardType.SLASH)),i.push(new r.Card("club",r.CardSize.SEVEN,r.CardType.SLASH_THUNDER)),i.push(new r.Card("club",r.CardSize.EIGHT,r.CardType.SLASH)),i.push(new r.Card("club",r.CardSize.EIGHT,r.CardType.SLASH)),i.push(new r.Card("club",r.CardSize.EIGHT,r.CardType.SLASH_THUNDER)),i.push(new r.Card("club",r.CardSize.NINE,r.CardType.SLASH)),i.push(new r.Card("club",r.CardSize.NINE,r.CardType.SLASH)),i.push(new r.Card("club",r.CardSize.NINE,r.CardType.SLASH_THUNDER)),i.push(new r.Card("club",r.CardSize.TEN,r.CardType.SLASH)),i.push(new r.Card("club",r.CardSize.TEN,r.CardType.SLASH)),i.push(new r.Card("club",r.CardSize.TEN,r.CardType.TIE_SUO)),i.push(new r.Card("club",r.CardSize.JACK,r.CardType.SLASH)),i.push(new r.Card("club",r.CardSize.JACK,r.CardType.SLASH)),i.push(new r.Card("club",r.CardSize.JACK,r.CardType.TIE_SUO)),i.push(new r.Card("club",r.CardSize.QUEEN,r.CardType.JIE_DAO)),i.push(new r.Card("club",r.CardSize.QUEEN,r.CardType.WU_XIE)),i.push(new r.Card("club",r.CardSize.QUEEN,r.CardType.TIE_SUO)),i.push(new r.Card("club",r.CardSize.KING,r.CardType.JIE_DAO)),i.push(new r.Card("club",r.CardSize.KING,r.CardType.WU_XIE)),i.push(new r.Card("club",r.CardSize.KING,r.CardType.TIE_SUO)),i.push(new r.Card("diamond",r.CardSize.ACE,r.CardType.LIAN_NU)),i.push(new r.Card("diamond",r.CardSize.ACE,r.CardType.JUE_DOU)),i.push(new r.Card("diamond",r.CardSize.ACE,r.CardType.ZHU_QUE)),i.push(new r.Card("diamond",r.CardSize.TWO,r.CardType.DODGE)),i.push(new r.Card("diamond",r.CardSize.TWO,r.CardType.DODGE)),i.push(new r.Card("diamond",r.CardSize.TWO,r.CardType.PEACH)),i.push(new r.Card("diamond",r.CardSize.THREE,r.CardType.DODGE)),i.push(new r.Card("diamond",r.CardSize.THREE,r.CardType.SHUN_SHOU)),i.push(new r.Card("diamond",r.CardSize.THREE,r.CardType.PEACH)),i.push(new r.Card("diamond",r.CardSize.FOUR,r.CardType.DODGE)),i.push(new r.Card("diamond",r.CardSize.FOUR,r.CardType.SHUN_SHOU)),i.push(new r.Card("diamond",r.CardSize.FOUR,r.CardType.PEACH)),i.push(new r.Card("diamond",r.CardSize.FIVE,r.CardType.DODGE)),i.push(new r.Card("diamond",r.CardSize.FIVE,r.CardType.GUAN_SHI)),i.push(new r.Card("diamond",r.CardSize.FIVE,r.CardType.SLASH_FIRE)),i.push(new r.Card("diamond",r.CardSize.SIX,r.CardType.DODGE)),i.push(new r.Card("diamond",r.CardSize.SIX,r.CardType.SLASH)),i.push(new r.Card("diamond",r.CardSize.SIX,r.CardType.DODGE)),i.push(new r.Card("diamond",r.CardSize.SEVEN,r.CardType.DODGE)),i.push(new r.Card("diamond",r.CardSize.SEVEN,r.CardType.SLASH)),i.push(new r.Card("diamond",r.CardSize.SEVEN,r.CardType.DODGE)),i.push(new r.Card("diamond",r.CardSize.EIGHT,r.CardType.DODGE)),i.push(new r.Card("diamond",r.CardSize.EIGHT,r.CardType.SLASH)),i.push(new r.Card("diamond",r.CardSize.EIGHT,r.CardType.DODGE)),i.push(new r.Card("diamond",r.CardSize.NINE,r.CardType.DODGE)),i.push(new r.Card("diamond",r.CardSize.NINE,r.CardType.SLASH)),i.push(new r.Card("diamond",r.CardSize.NINE,r.CardType.WINE)),i.push(new r.Card("diamond",r.CardSize.TEN,r.CardType.DODGE)),i.push(new r.Card("diamond",r.CardSize.TEN,r.CardType.SLASH)),i.push(new r.Card("diamond",r.CardSize.TEN,r.CardType.DODGE)),i.push(new r.Card("diamond",r.CardSize.JACK,r.CardType.DODGE)),i.push(new r.Card("diamond",r.CardSize.JACK,r.CardType.DODGE)),i.push(new r.Card("diamond",r.CardSize.JACK,r.CardType.DODGE)),i.push(new r.Card("diamond",r.CardSize.QUEEN,r.CardType.PEACH)),i.push(new r.Card("diamond",r.CardSize.QUEEN,r.CardType.FANG_TIAN)),i.push(new r.Card("diamond",r.CardSize.QUEEN,r.CardType.WU_XIE)),i.push(new r.Card("diamond",r.CardSize.QUEEN,r.CardType.HUO_GONG)),i.push(new r.Card("diamond",r.CardSize.KING,r.CardType.SLASH)),i.push(new r.Card("diamond",r.CardSize.KING,r.CardType.ZI_XING)),i.push(new r.Card("diamond",r.CardSize.KING,r.CardType.HUA_LIU)),t.IdentityWarCards=new r.CardManager(i)},8348:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IdentityWarGeneral=t.Package=void 0;const r=n(1633);class Package{constructor(e,t){this.id=e,this.name=t}}t.Package=Package,Package.STANDARD=new Package("standard","标准"),Package.SP=new Package("standard","SP"),Package.ONE_GENERAL=new Package("one_general","一将成名"),Package.MOUNTAIN=new Package("mountain","山"),Package.FOREST=new Package("forest","林"),Package.FIRE=new Package("fire","火"),Package.WIND=new Package("wind","风"),Package.GOD=new Package("god","神");class IdentityWarGeneral extends r.General{constructor(e,t,n,r,i,...a){super(e,t,r,i,a),this.pack=n}}t.IdentityWarGeneral=IdentityWarGeneral,IdentityWarGeneral.standard_cao_cao=new IdentityWarGeneral("standard_cao_cao","曹操",Package.STANDARD,r.Faction.WEI,4,"奸雄","护驾"),IdentityWarGeneral.standard_liu_bei=new IdentityWarGeneral("standard_liu_bei","刘备",Package.STANDARD,r.Faction.SHU,4,"仁德","激将"),IdentityWarGeneral.standard_sun_quan=new IdentityWarGeneral("standard_sun_quan","孙权",Package.STANDARD,r.Faction.WU,4,"制衡","救援"),IdentityWarGeneral.standard_da_qiao=new IdentityWarGeneral("standard_da_qiao","大乔",Package.STANDARD,r.Faction.WU,3,"国色","游离").asFemale().withOffset(-3,-13),IdentityWarGeneral.standard_diao_chan=new IdentityWarGeneral("standard_diao_chan","貂蝉",Package.STANDARD,r.Faction.QUN,3,"闭月","离间").asFemale(),IdentityWarGeneral.standard_gan_ning=new IdentityWarGeneral("standard_gan_ning","甘宁",Package.STANDARD,r.Faction.WU,4,"奇袭"),IdentityWarGeneral.standard_guan_yu=new IdentityWarGeneral("standard_guan_yu","关羽",Package.STANDARD,r.Faction.SHU,4,"武圣").withOffset(0,0),IdentityWarGeneral.standard_zhang_fei=new IdentityWarGeneral("standard_zhang_fei","张飞",Package.STANDARD,r.Faction.SHU,4,"咆哮").withOffset(-18,-15),IdentityWarGeneral.standard_zhu_ge_liang=new IdentityWarGeneral("standard_zhu_ge_liang","诸葛亮",Package.STANDARD,r.Faction.SHU,3,"观星","空城"),IdentityWarGeneral.standard_zhao_yun=new IdentityWarGeneral("standard_zhao_yun","赵云",Package.STANDARD,r.Faction.SHU,4,"龙胆"),IdentityWarGeneral.standard_ma_chao=new IdentityWarGeneral("standard_ma_chao","马超",Package.STANDARD,r.Faction.SHU,4,"马术","铁骑"),IdentityWarGeneral.standard_huang_yue_ying=new IdentityWarGeneral("standard_huang_yue_ying","黄月英",Package.STANDARD,r.Faction.SHU,3,"急智","奇才").asFemale(),IdentityWarGeneral.standard_lv_meng=new IdentityWarGeneral("standard_lv_meng","吕蒙",Package.STANDARD,r.Faction.WU,4,"克己"),IdentityWarGeneral.standard_huang_gai=new IdentityWarGeneral("standard_huang_gai","黄盖",Package.STANDARD,r.Faction.WU,4,"苦肉").withOffset(0,0),IdentityWarGeneral.standard_zhou_yu=new IdentityWarGeneral("standard_zhou_yu","周瑜",Package.STANDARD,r.Faction.WU,3,"英姿","反间"),IdentityWarGeneral.standard_lu_xun=new IdentityWarGeneral("standard_lu_xun","陆逊",Package.STANDARD,r.Faction.WU,3,"谦逊","联营"),IdentityWarGeneral.standard_sun_shang_xiang=new IdentityWarGeneral("standard_sun_shang_xiang","孙尚香",Package.STANDARD,r.Faction.WU,3,"枭姬","结姻").asFemale(),IdentityWarGeneral.standard_si_ma_yi=new IdentityWarGeneral("standard_si_ma_yi","司马懿",Package.STANDARD,r.Faction.WEI,3,"反馈","鬼才"),IdentityWarGeneral.standard_xia_hou_dun=new IdentityWarGeneral("standard_xia_hou_dun","夏侯惇",Package.STANDARD,r.Faction.WEI,4,"刚烈"),IdentityWarGeneral.standard_zhang_liao=new IdentityWarGeneral("standard_zhang_liao","张辽",Package.STANDARD,r.Faction.WEI,4,"突袭"),IdentityWarGeneral.standard_xu_chu=new IdentityWarGeneral("standard_xu_chu","许褚",Package.STANDARD,r.Faction.WEI,4,"裸衣").withOffset(-15,-10),IdentityWarGeneral.standard_guo_jia=new IdentityWarGeneral("standard_guo_jia","郭嘉",Package.STANDARD,r.Faction.WEI,3,"天妒","遗计"),IdentityWarGeneral.standard_zhen_ji=new IdentityWarGeneral("standard_zhen_ji","甄姬",Package.STANDARD,r.Faction.WEI,3,"洛神","倾国").asFemale(),IdentityWarGeneral.standard_hua_tuo=new IdentityWarGeneral("standard_hua_tuo","华佗",Package.STANDARD,r.Faction.QUN,3,"青囊","急救").withOffset(0,-15),IdentityWarGeneral.standard_lv_bu=new IdentityWarGeneral("standard_lv_bu","吕布",Package.STANDARD,r.Faction.QUN,4,"无双"),IdentityWarGeneral.wind_zhang_jiao=new IdentityWarGeneral("wind_zhang_jiao","张角",Package.WIND,r.Faction.QUN,3,"雷击","鬼道","黄天").withOffset(-10,-15),IdentityWarGeneral.forest_dong_zhuo=new IdentityWarGeneral("forest_dong_zhuo","董卓",Package.FOREST,r.Faction.QUN,8,"酒池","肉林","崩坏","暴虐")},9384:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IdentityWarPlayerInfo=void 0;const r=n(3402),i=n(6540);n(822);class IdentityWarPlayerInfo extends r.PlayerInfo{constructor(e,t,n){super(e),this.identity=t,this.general=n}getSkills(e){return this.general.abilities.map((t=>e.skillProvider(t,this.player.id)))}init(){return this.hp=this.general.hp,this.maxHp=this.general.hp,this}getGender(){return this.general.gender}sanitize(e){if(e===this.player.id||this.isDead)return this;let t=new IdentityWarPlayerInfo(this.player,this.identity,this.general);return Object.assign(t,this),t.identity=null,t}getFaction(){return this.general.faction}draw(){return i.createElement("div",{className:"identity-war overflow-hidden"},i.createElement("div",{className:"card-avatar",style:Object.assign({backgroundImage:`url('generals/${this.general.id}.png')`},this.general.uiOffset)}),i.createElement("div",{className:"player-name"},this.player.id),i.createElement("div",{className:"general-name"},this.general.name),i.createElement("div",{className:"faction",style:{backgroundImage:`url('icons/${this.general.faction.image}.png')`}}),this.identity&&i.createElement("div",{className:"identity",style:{backgroundImage:`url('icons/${this.identity.id}.png')`}}))}drawSelf(){return this.draw()}}t.IdentityWarPlayerInfo=IdentityWarPlayerInfo},6191:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(5706),i=n(8636);t.default=class Deck{constructor(e,t){this.updateCb=t,this.dropped=[],this.deck=e.getShuffledDeck()}getCardsFromTop(e){if(e>this.deck.length+this.dropped.length)throw console.log("牌堆被拿光光了...平局"),new i.default([]);if(e>this.deck.length){let t=this.deck;return this.deck=(0,r.shuffle)(this.dropped),this.dropped=[],t.push(...this.getCardsFromTop(e-t.length)),this.updateCb(this.deck.length),t}{let t=this.deck.splice(0,e);return this.updateCb(this.deck.length),t}}placeCardsAtTop(e){this.deck.unshift(...e),this.updateCb(this.deck.length)}placeCardsAtBtm(e){this.deck.push(...e),this.updateCb(this.deck.length)}getCardsFromDropped(e){return e.map((e=>{let t=(0,r.takeFromArray)(this.dropped,(t=>t.id===e));if(!t)throw`Unable to find card in dropped pile! ${e}`;return this.updateCb(this.deck.length),t}))}size(){return this.deck.length+this.dropped.length}}},8636:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class GameEnding{constructor(e){this.winners=e}}},8572:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{l(r.next(e))}catch(e){a(e)}}function s(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const i=n(2886),a=n(3402),o=n(3484),s=n(3587),l=n(739),d=n(787),u=n(1480),c=n(1073),p=n(5935),h=n(8411),f=n(2608),g=n(1802),y=n(6069),m=n(2944),v=n(9716),C=n(8636),b=n(9575),S=n(1374);t.default=class GameManager{constructor(e,t,n,i){this.context=e,this.registry=t,this.statsCollector=i,this.currentPlayer=0,this.currEffect=new y.CurrentPlayerEffect(null,null,new Set,0),this.processCardEvent=e=>r(this,void 0,void 0,(function*(){if(!e.as||e.as.isEquipment())return;if(e.isFromSkill)return;let t=this.context.getPlayer(e.player).getGender(),n=e.as.id;this.playSound(t,n)})),this.queue=[],this.getCard=e=>{let t=this.context.cardManager.getCard(e);return delete t.as,delete t.description,t},this.resolver=new m.default(n)}init(e){let t=e=>this.context.sortFromPerspective(this.currPlayer().player.id,e).map((e=>e.player.id)),n=new d.SequenceAwarePubSub(t),r=new d.SequenceAwarePubSub(t);this.adminRegistry=r,this.equipmentRegistry=n,this.skillRegistry=e,this.events=new d.CompositeListener([r,e,n]),this.statsCollector.subscribeTo(r),r.onGeneral(b.CardBeingUsedEvent,this.processCardEvent)}sortByCurrent(e){return this.context.sortFromPerspective(this.currPlayer().player.id,e.map((e=>e.player.id)))}playSound(e,t){let n="F"===e?"female":"male";console.log("[Game Manager] Play Sound ",`audio/card/${n}/${t}.ogg`),this.broadcast(new y.PlaySound(`audio/card/${n}/${t}.ogg`))}startGame(){return r(this,void 0,void 0,(function*(){for(console.log("[Game Manager] 开始发牌, 进入游戏!"),yield Promise.all(this.context.playerInfos.map((e=>r(this,void 0,void 0,(function*(){return yield new f.default(e,4).perform(this)})))));;)try{if(yield this.doOneRound(),this.queue.length>0){console.log("[Game Manager] 存在插队者...");let e=this.currentPlayer;for(;this.queue.length>0;){let e=this.queue.shift(),t=this.context.playerInfos.findIndex((t=>t===e));console.log("[Game Manager] 插队者回合",e.player.id),this.currentPlayer=t,yield this.doOneRound()}this.currentPlayer=e}this.goToNextPlayer()}catch(e){if(e instanceof o.PlayerDeadInHisRound){console.log("Player died in his round. Proceeding to next player..."),yield this.events.publish(new h.StageEndFlow(this.currPlayer(),p.Stage.ROUND_END)),this.goToNextPlayer();continue}if(e instanceof C.default){console.log("The Game has ended",e.winners);let t=this.statsCollector.declareWinner(e.winners);return yield Promise.all(this.context.playerInfos.map((e=>this.sendHint(e.player.id,{hintType:l.HintType.UI_PANEL,hintMsg:"牌局结束",customRequest:{mode:"game-end",data:t}})))),this.context.playerInfos.map((e=>e.player.id))}console.error(e),this.goToNextPlayer()}}))}cutQueue(e){console.log("[Game Manager] 插入一个玩家的回合",e.player.id),this.queue.push(e)}doOneRound(){return r(this,void 0,void 0,(function*(){let e=this.currPlayer();if(e.isTurnedOver)return e.isTurnedOver=!1,console.log(`Player is turned back ${e.player.id}`),this.log(`${e.player.id} 将自己的武将牌翻回正面`),void this.broadcast(e,a.PlayerInfo.sanitize);this.log(`---------- 进入 ${e} 的回合 --------`),this.roundStats=new s.RoundStat,yield this.processStage(e,p.Stage.ROUND_BEGIN),yield this.processStage(e,p.Stage.JUDGE,(()=>r(this,void 0,void 0,(function*(){return yield this.processJudgingStage()})))),yield this.processStage(e,p.Stage.TAKE_CARD,(()=>r(this,void 0,void 0,(function*(){return yield this.processTakeCardStage()})))),yield this.processStage(e,p.Stage.USE_CARD,(()=>r(this,void 0,void 0,(function*(){return yield this.processUseCardStage()})))),yield this.processStage(e,p.Stage.DROP_CARD,(()=>r(this,void 0,void 0,(function*(){return yield this.processDropCardStage()})))),yield this.processStage(e,p.Stage.ROUND_END)}))}sendHint(e,t){return r(this,arguments,void 0,(function*(e,t,n=!1){return t.roundStat=this.roundStats,n||this.setPending([e]),new S.default(yield this.registry.sendServerAsk(e,t),this)}))}reissue(){this.registry.reissue()}send(e,t){this.registry.send(e,t)}pubsub(){return this.registry.pubsub}setPending(e){this.currEffect.pendingUser=new Set(e),this.broadcast(this.currEffect)}setPlayerAndStage(e,t){this.currEffect.player=e,this.currEffect.stage=t,this.currEffect.pendingUser=new Set([e]),this.broadcast(this.currEffect)}setDeckRemain(e){this.currEffect.deckRemain=e,this.broadcast(this.currEffect)}rescindAll(){return r(this,void 0,void 0,(function*(){this.setPending([]),this.registry.rescindAll()}))}broadcast(e,t=null){this.registry.broadcast(e,t)}log(e){this.broadcast(new y.LogTransit(e))}onPlayerReconnected(e){let t=new i.GameContext(this.context.playerInfos,this.context.gameMode);this.registry.send(e,t.sanitize(e)),this.currEffect&&this.registry.send(e,this.currEffect),this.onReconnect&&this.onReconnect()}currPlayer(){return this.context.playerInfos[this.currentPlayer]}getOthers(e){return this.context.playerInfos.filter((t=>!t.isDead&&t.player.id!==e))}getSortedByCurr(e){return this.context.getRingFromPerspective(this.currPlayer().player.id,e)}sendToWorkflow(e,t,n,r=!1,i=!1){i||this.context.sendToWorkflow(e,t,n),this.broadcast(y.CardTransit.toWorkflow(e,t,n,r,i))}stillInWorkflow(e){return!!this.context.workflowCards.find((t=>t.id===e.id))}takeFromWorkflow(e,t,n){return r(this,void 0,void 0,(function*(){let r=this.context.takeFromWorkflow(e,t,n);return this.broadcast(y.CardTransit.fromWorkflow(e,t,r)),yield this.events.publish(new b.CardObtainedEvent(e,n.map((e=>[e,t])))),r}))}transferCards(e,t,n,i,a){return r(this,void 0,void 0,(function*(){this.context.transferCards(e,t,n,i,a),this.broadcast(new y.CardTransit(e,n,t,i,a,1e3),y.CardTransit.defaultSanitize),yield this.events.publish(new b.CardBeingTakenEvent(e,a.map((e=>[e,n])))),yield this.events.publish(new b.CardObtainedEvent(t,a.map((e=>[e,i]))))}))}interpret(e,t){return this.context.interpretCard(e,t)}processJudgingStage(){return r(this,void 0,void 0,(function*(){let e=this.currPlayer(),t=[...e.getCards(c.CardPos.JUDGE)].reverse();for(let n=0;n<t.length;++n)console.log("[Game Manager] 延时锦囊结算",t[n].type),yield new v.JudgeDelayedRuseOp(e,t[n]).perform(this)}))}processTakeCardStage(){return r(this,void 0,void 0,(function*(){yield new f.TakeCardStageOp(this.currPlayer(),2).perform(this)}))}processUseCardStage(){return r(this,void 0,void 0,(function*(){for(;;){this.checkDeath();let e=yield this.sendHint(this.currPlayer().player.id,{hintType:l.HintType.PLAY_HAND,hintMsg:"请出牌",roundStat:this.roundStats,extraButtons:[new u.Button("abort","结束出牌")]});if("abort"===e.button)break;yield this.resolver.on(e,this)}this.currPlayer().isDrunk&&(this.currPlayer().isDrunk=!1,this.broadcast(this.currPlayer(),a.PlayerInfo.sanitize))}))}processDropCardStage(){return r(this,void 0,void 0,(function*(){yield new g.default(this.currPlayer()).perform(this)}))}processStage(e,t){return r(this,arguments,void 0,(function*(e,t,n=null){if(console.log(`[Game Manager] Enter ${e.player.id} ${t.name} 场上卡牌数 ${this.countAllCards()}`),this.checkDeath(),yield new h.StageStartFlow(e,t).perform(this),this.checkDeath(),!this.roundStats.skipStages.get(t)){let r=new h.InStageStart(e,t);yield r.perform(this),r.endStage||(this.setPlayerAndStage(this.currPlayer().player.id,t),this.broadcast(this.currEffect),n&&(yield n()),yield new h.InStageEnd(e,t).perform(this))}this.checkDeath(),yield new h.StageEndFlow(e,t).perform(this),this.context.dropWorkflowCards(),console.log(`[Game Manager] Leave ${e.player.id} ${t.name}`)}))}checkDeath(){if(this.manualEnding)throw this.manualEnding;if(this.currPlayer().isDead)throw new o.PlayerDeadInHisRound}goToNextPlayer(){do{this.currentPlayer=(this.currentPlayer+1)%this.context.playerInfos.length}while(this.currPlayer().isDead);console.log("进入下一个玩家的回合:",this.currPlayer().player.id)}countAllCards(){let e=this.context.workflowCards.size()+this.context.deck.size();return this.context.playerInfos.forEach((t=>e+=t.getAllCards().length)),e}}},9787:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{l(r.next(e))}catch(e){a(e)}}function s(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.GameStats=void 0;const i=n(1131),a=n(5796),o=n(2421);t.default=class GameStatsCollector{constructor(e){this.players=e,this.stats=new Map,this.onDeath=e=>r(this,void 0,void 0,(function*(){e.killer&&e.timeline===i.DeathTimeline.BEFORE_REVEAL&&(this.stats.get(e.killer.player.id).thisRound.kill+=1,this.stats.get(e.killer.player.id).kill+=1)})),this.onDamage=e=>r(this,void 0,void 0,(function*(){e.timeline===a.DamageTimeline.TAKEN_DAMAGE&&e.source&&(this.stats.get(e.source.player.id).thisRound.totalDamage+=e.amount,this.stats.get(e.source.player.id).totalDamage+=e.amount)})),this.onHeal=e=>r(this,void 0,void 0,(function*(){e.timeline===o.HealTimeline.AFTER&&e.source&&(this.stats.get(e.source.player.id).thisRound.totalHeal+=e.amount,this.stats.get(e.source.player.id).totalHeal+=e.amount)})),e.forEach((e=>{this.stats.set(e.id,{playerId:e.id,wins:0,kill:0,totalDamage:0,totalHeal:0,thisRound:{kill:0,totalDamage:0,totalHeal:0}})}))}subscribeTo(e){e.onGeneral(i.default,this.onDeath),e.onGeneral(a.default,this.onDamage),e.onGeneral(o.default,this.onHeal),console.log("[数据] 重置本局数据"),this.stats.forEach((e=>{e.thisRound={kill:0,totalDamage:0,totalHeal:0}}))}declareWinner(e){e.forEach((e=>{this.stats.get(e).wins+=1}));let t=[];return this.stats.forEach((e=>{t.push(e)})),new GameStats(e,t)}};class GameStats{constructor(e,t){this.winners=e,this.stats=t}}t.GameStats=GameStats},2400:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoginMessage=void 0;t.LoginMessage=class LoginMessage{constructor(e){this.id=e}}},3484:function(e,t){"use strict";var n,r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{l(r.next(e))}catch(e){a(e)}}function s(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.PlayerDeadInHisRound=t.Timeline=t.RuseOp=t.UseEventOperation=t.Operation=void 0;class Operation{}t.Operation=Operation;class UseEventOperation extends Operation{constructor(e,t){super(),this.targets=e,this.whatIsThis=t,this.timeline=n.CHOOSING_TARGET}getTarget(){return 1!==this.targets.length&&console.error("目标不唯一!!",this.targets),this.targets[0]}hasTarget(e){return this.targets.findIndex((t=>t.player.id===e))>-1}removeTarget(e){let t=this.targets.findIndex((t=>t.player.id===e));t>-1?this.targets.splice(t,1):console.error("Failed to remove target",e,this)}perform(e){return r(this,void 0,void 0,(function*(){yield e.events.publish(this);for(let t of[n.USING,n.CONFIRMING_TARGET,n.BECOME_TARGET,n.AFTER_CONFIRMING_TARGET,n.AFTER_BECOMING_TARGET])this.timeline=t,yield e.events.publish(this);if(0===this.targets.length)return yield this.onAborted(e),null;{let t=yield this.doPerform(e);return this.timeline=n.COMPUTE_FINISH,yield e.events.publish(this),t}}))}onAborted(e){return r(this,void 0,void 0,(function*(){}))}}t.UseEventOperation=UseEventOperation;t.RuseOp=class RuseOp extends UseEventOperation{constructor(e,t,n){super([e],n.name),this.target=e,this.cards=t,this.ruseType=n}},function(e){e[e.CHOOSING_TARGET=0]="CHOOSING_TARGET",e[e.USING=1]="USING",e[e.CONFIRMING_TARGET=2]="CONFIRMING_TARGET",e[e.BECOME_TARGET=3]="BECOME_TARGET",e[e.AFTER_CONFIRMING_TARGET=4]="AFTER_CONFIRMING_TARGET",e[e.AFTER_BECOMING_TARGET=5]="AFTER_BECOMING_TARGET",e[e.COMPUTE_FINISH=6]="COMPUTE_FINISH"}(n||(t.Timeline=n={}));t.PlayerDeadInHisRound=class PlayerDeadInHisRound{}},4527:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(6191),i=n(9091),a=n(2886),o=n(1073),s=n(9222);class GameServerContext extends a.GameContext{constructor(e,t,n){super(e,t),this.workflowCards=new i.default,this.cardManager=s.GameMode.get(t).cardManager;for(let t=0;t<e.length;++t)e[t].idx=t;this.deck=new r.default(this.cardManager,n)}sendToWorkflow(e,t,n){this.removeFrom(e,t,n),n.forEach(this.workflowCards.add)}takeFromWorkflow(e,t,n){let r=[];return n.forEach((n=>{this.workflowCards.removeThat((e=>e.id===n.id))&&(console.log("[牌堆] 从Workflow中取出",n.id),this.addTo(e,t,[n]),r.push(n))})),n.length!==r.length&&console.error("[牌堆] 没有拿到期待的牌:",n.map((e=>e.id)),r.map((e=>e.id))),r}dropWorkflowCards(){this.addTo(null,o.CardPos.DROPPED,this.workflowCards._data),this.workflowCards.clear()}transferCards(e,t,n,r,i){this.removeFrom(e,n,i),this.addTo(t,r,i)}removeFrom(e,t,n){try{if(0===n.length)return;if(e)n.forEach((n=>this.getPlayer(e).removeFromPos(n.id,t)));else{if(t!==o.CardPos.WORKFLOW)throw`Can't take cards from this weird position! ${o.CardPos[t]}`;n.forEach((e=>{if(!this.workflowCards.removeThat((t=>t.id===e.id)))throw`Unable to find card ${e} in workflow cards!`}))}}catch(r){console.error("Failed to remove",e,t,n,r),console.trace()}}addTo(e,t,n){if(e)n.forEach((n=>this.getPlayer(e).addCard(n,t)));else switch(t){case o.CardPos.DECK_TOP:this.deck.placeCardsAtTop(n);break;case o.CardPos.DECK_BTM:this.deck.placeCardsAtBtm(n);break;case o.CardPos.DROPPED:this.deck.dropped.push(...n.map((e=>{let t=this.cardManager.getCard(e.id);return delete t.as,delete t.description,t})));break;default:throw"Not Possible to send cards to "+o.CardPos[t]}}}t.default=GameServerContext},1374:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{l(r.next(e))}catch(e){a(e)}}function s(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const i=n(1480),a=n(1073),o=n(9575);function s(e){if(e&&e.length>0){if(e.length>1)throw"More than one item in array! "+e;return e[0]}}t.default=class PlayerAct{constructor(e,t){this.manager=t,this.cardsOnGeneral=[],this.serverHint=e.serverHint,this.customData=e.customData,this.source=t.context.getPlayer(e.actionSource),this.cards=new Map,this.cardsAndPos=[],this.targets=[],e.actionData&&(this.button=s(e.actionData[i.UIPosition.BUTTONS]),this.skill=s(e.actionData[i.UIPosition.MY_SKILL]),this.signChosen=s(e.actionData[i.UIPosition.SIGNS]),e.actionData[i.UIPosition.PLAYER]&&(this.targets=e.actionData[i.UIPosition.PLAYER].map((e=>t.context.getPlayer(e)))),[i.UIPosition.ON_MY_GENERAL,i.UIPosition.ON_MY_SUB_GENERAL].forEach((n=>{e.actionData[n]&&e.actionData[n].length>0&&this.cardsOnGeneral.push(...e.actionData[n].map((e=>t.getCard(e))))})),[i.UIPosition.MY_EQUIP,i.UIPosition.MY_HAND,i.UIPosition.MY_JUDGE].forEach((n=>{if(e.actionData[n]&&e.actionData[n].length>0){let r=e.actionData[n].map((e=>t.getCard(e))),o=function(e){switch(e){case i.UIPosition.MY_EQUIP:return a.CardPos.EQUIP;case i.UIPosition.MY_HAND:return a.CardPos.HAND;case i.UIPosition.MY_JUDGE:return a.CardPos.JUDGE;default:throw"Cannot map "+i.UIPosition[e]}}(n);this.cards.set(o,r),r.forEach((e=>{delete e.as,delete e.description,this.cardsAndPos.push([e,o])}))}})))}isCancel(){return this.button===i.Button.CANCEL.id}getPosAndCards(...e){if(0===e.length)throw"Pos Empty!";let t=[];return e.forEach((e=>{let n=this.getCardsAtPos(e);n.length>0&&t.push([e,n])})),t}getCardsAtPos(e){return this.cards.get(e)||[]}getSingleCardAndPos(){if(1!==this.cardsAndPos.length)throw"Player Action is not a single card! "+this.cardsAndPos;return this.cardsAndPos[0]}dropCardsFromSource(e){return r(this,void 0,void 0,(function*(){this.getPosAndCards(a.CardPos.HAND,a.CardPos.EQUIP).forEach((t=>{t[1].forEach((t=>t.description=e)),this.manager.sendToWorkflow(this.source.player.id,t[0],t[1])})),yield this.manager.events.publish(new o.CardBeingDroppedEvent(this.source.player.id,this.cardsAndPos))}))}toString(){return`PlayAct {${this.source} > ${this.targets}}\n            ${this.cards}\n            ${this.skill} > ${this.button}\n        `}}},2944:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{l(r.next(e))}catch(e){a(e)}}function s(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ActionResolver=void 0;const i=n(4619),a=n(9550),o=n(1073),s=n(6069),l=n(9575),d=n(5706),u=n(4105),c=n(6652),p=n(2985),h=n(9716),f=n(7844),g=n(5278);class ActionResolver{}t.ActionResolver=ActionResolver;t.default=class PlayerActionResolver extends ActionResolver{constructor(e){super(),this.delegate=e}onSkillAction(e,t,n){return r(this,void 0,void 0,(function*(){yield this.delegate.onSkillAction(e,t,n)}))}onSignAction(e,t,n){return r(this,void 0,void 0,(function*(){yield this.delegate.onSignAction(e,t,n)}))}on(e,t){return r(this,void 0,void 0,(function*(){if(!(yield this.delegate.on(e,t))){if(e.skill)throw"武将技能应当在delegate中处理完毕: "+e;if(e.getCardsAtPos(o.CardPos.EQUIP).length>0){let n=e.getCardsAtPos(o.CardPos.EQUIP)[0];if(n.type!==i.CardType.ZHANG_BA)throw`不可能吧...只有丈八蛇矛可以用...实际上却是 [${n}]`;{let n=e.getCardsAtPos(o.CardPos.HAND).map((e=>(e.as=i.CardType.SLASH,e.description="丈八蛇矛",e))),r=e.targets;t.sendToWorkflow(e.source.player.id,o.CardPos.HAND,n,!0),yield t.events.publish(new l.CardBeingUsedEvent(e.source.player.id,n.map((e=>[e,o.CardPos.HAND])),i.CardType.SLASH)),yield new a.default(e.source,r,n).perform(t)}}else if(e.getCardsAtPos(o.CardPos.HAND).length>0){let n=e.getCardsAtPos(o.CardPos.HAND);if(n.length>1)throw`How can you play 2 cards at once????? ${e}`;let r=n[0],y=t.interpret(e.source.player.id,r),m=e.targets,v=m.map((e=>e.player.id)),C=e.source+"";if(v.length>0?(C+=" 对 "+v.join(", "),r.description=`${e.source.player.id} > ${v.join(", ")}`):r.description=`${e.source.player.id} 使用`,C+=" 使用了 "+r,t.broadcast(new s.LogTransit(C)),y.type.isEquipment())return r.description=`${e.source} 装备`,t.sendToWorkflow(e.source.player.id,o.CardPos.HAND,[r],!0,!0),yield t.events.publish(new l.CardBeingUsedEvent(e.source.player.id,[[r,o.CardPos.HAND]],r.type)),void(yield new u.EquipOp(e.source,r).perform(t));switch(y.type.isDelayedRuse()||t.sendToWorkflow(e.source.player.id,o.CardPos.HAND,[r],!0),y.type===i.CardType.TIE_SUO&&0===v.length?yield t.events.publish(new l.CardBeingDroppedEvent(e.source.player.id,[[r,o.CardPos.HAND]])):yield t.events.publish(new l.CardBeingUsedEvent(e.source.player.id,[[r,o.CardPos.HAND]],r.type)),y.type){case i.CardType.SLASH:case i.CardType.SLASH_FIRE:case i.CardType.SLASH_THUNDER:yield new a.default(e.source,m,[r]).perform(t);break;case i.CardType.PEACH:(0,d.checkThat)(0===v.length,"桃不能直接用在别人身上"),yield new g.default(e.source).perform(t);break;case i.CardType.WINE:yield new f.default(e.source).perform(t);break;case i.CardType.WU_ZHONG:yield new c.WuZhong(e.source,e.source,[r]).perform(t);break;case i.CardType.JIE_DAO:yield new c.JieDao(e.source,m,[r]).perform(t);break;case i.CardType.GUO_HE:yield new c.GuoHe(e.source,m[0],[r]).perform(t);break;case i.CardType.HUO_GONG:yield new c.HuoGong(e.source,m[0],[r]).perform(t);break;case i.CardType.SHUN_SHOU:yield new c.ShunShou(e.source,m[0],[r]).perform(t);break;case i.CardType.JUE_DOU:yield new c.JueDou(e.source,m[0],[r]).perform(t);break;case i.CardType.TIE_SUO:yield new p.TieSuo(e.source,m,"chong_zhu"===e.button,[r]).perform(t);break;case i.CardType.WAN_JIAN:yield new p.WanJian([r],e.source,i.CardType.WAN_JIAN,t.getSortedByCurr(!1)).perform(t);break;case i.CardType.NAN_MAN:yield new p.NanMan([r],e.source,i.CardType.NAN_MAN,t.getSortedByCurr(!1)).perform(t);break;case i.CardType.WU_GU:yield new p.WuGu([r],e.source,i.CardType.WU_GU,t.getSortedByCurr(!0)).perform(t);break;case i.CardType.TAO_YUAN:yield new p.TaoYuan([r],e.source,i.CardType.TAO_YUAN,t.getSortedByCurr(!0).filter((e=>e.hp<e.maxHp))).perform(t);break;case i.CardType.LE_BU:case i.CardType.BING_LIANG:t.broadcast(new s.TextFlashEffect(e.source.player.id,[m[0].player.id],y.type.name)),yield new h.UseDelayedRuseOp(r,e.source,o.CardPos.HAND,m[0]).perform(t);break;case i.CardType.SHAN_DIAN:t.broadcast(new s.TextFlashEffect(e.source.player.id,[],i.CardType.SHAN_DIAN.name)),yield new h.UseDelayedRuseOp(r,e.source,o.CardPos.HAND,e.source).perform(t);break;case i.CardType.DODGE:case i.CardType.WU_XIE:case i.CardType.WU_XIE_GUO:throw`无法直接出闪/无懈可击!! ${e}`;default:throw"无法处理这张卡牌!!! "+r.type.name}}}}))}}},9820:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{l(r.next(e))}catch(e){a(e)}}function s(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.AskSavingAround=void 0;const i=n(739),a=n(1480),o=n(1073),s=n(9575),l=n(6069),d=n(2421);t.AskSavingAround=class AskSavingAround{constructor(e){this.deadman=e}perform(e){return r(this,void 0,void 0,(function*(){this.toAsk=e.getSortedByCurr(!0),yield e.events.publish(this);for(let t=0;t<this.toAsk.length&&this.deadman.isDying();++t)yield new AskSavingOp(this.deadman,this.toAsk[t]).perform(e)}))}};class AskSavingOp{constructor(e,t){this.deadman=e,this.goodman=t}perform(e){return r(this,void 0,void 0,(function*(){yield e.events.publish(this);let t=this.deadman.player.id;for(;this.deadman.isDying();){let n=1-this.deadman.hp,r=yield e.sendHint(this.goodman.player.id,{hintType:i.HintType.PEACH,hintMsg:`${this.goodman.player.id===t?"你":t} 濒死求桃 (还需要${n}个)`,sourcePlayer:t,extraButtons:[a.Button.CANCEL]});if(r.isCancel())break;if(r.skill)yield e.resolver.onSkillAction(r,this,e);else if(r.signChosen)yield e.resolver.onSignAction(r,this,e);else{let t=r.getSingleCardAndPos()[0],n=this.goodman.player.id,i=this.deadman.player.id;e.broadcast(new l.TextFlashEffect(n,[i],t.type.name)),t.description=`${n} 对 ${i} 使用 ${t.type.name}`,e.sendToWorkflow(n,o.CardPos.HAND,[t]),yield e.events.publish(new s.CardBeingUsedEvent(n,[[t,o.CardPos.HAND]],t.type,!1,!1)),yield new d.default(this.goodman,this.deadman,1).perform(e)}}}))}}t.default=AskSavingOp},9421:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{l(r.next(e))}catch(e){a(e)}}function s(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.canCardFight=function(e,t,n){if(e===t)return!1;let r=n.context.getPlayer(e),i=n.context.getPlayer(t);return r.getCards(s.CardPos.HAND).length>0&&i.getCards(s.CardPos.HAND).length>0};const i=n(3484),a=n(739),o=n(1480),s=n(1073),l=n(4619),d=n(5706),u=n(6203),c=n(9575);class CardFightOp extends i.Operation{constructor(e,t,n){if(super(),this.initiater=e,this.target=t,this.msg=n,this.sanitize=(e,t)=>{let n=new u.CustomUIData(e.type,{cardLeft:e.data.cardLeft,cardRight:e.data.cardRight,title:e.data.title});return t!==this.initiater.player.id&&e.data.cardLeft&&(n.data.cardLeft=l.Card.DUMMY),t!==this.target.player.id&&e.data.cardRight&&(n.data.cardRight=l.Card.DUMMY),n},this.title=`${this.initiater.player.id} 拼点 ${this.target}(${n})`,e===t)throw"拼点的对象不能是自己!!"+e+" "+t}perform(e){return r(this,void 0,void 0,(function*(){this.broadcast(e),yield Promise.all([e.sendHint(this.initiater.player.id,{hintType:a.HintType.CHOOSE_CARD,hintMsg:"请选择你要拼点的牌",positions:[o.UIPosition.MY_HAND],quantity:1}).then((t=>{this.initiatorCard=t.getSingleCardAndPos()[0],this.initiatorCard.description=`${this.initiater} ${this.msg} 拼点牌`,this.broadcast(e),console.log("[拼点] 发起方的牌为 ",this.initiatorCard.id)})),e.sendHint(this.target.player.id,{hintType:a.HintType.CHOOSE_CARD,hintMsg:`请选择你要和 ${this.initiater.player.id} 拼点的牌`,positions:[o.UIPosition.MY_HAND],quantity:1}).then((t=>{this.targetCard=t.getSingleCardAndPos()[0],this.targetCard.description=`${this.target} ${this.msg} 拼点牌`,this.broadcast(e),console.log("[拼点] 应战方的牌为 ",this.targetCard.id)}))]),e.sendToWorkflow(this.initiater.player.id,s.CardPos.HAND,[this.initiatorCard],!1),yield e.events.publish(new c.CardBeingDroppedEvent(this.initiater.player.id,[[this.initiatorCard,s.CardPos.HAND]])),e.sendToWorkflow(this.target.player.id,s.CardPos.HAND,[this.targetCard],!1),yield e.events.publish(new c.CardBeingDroppedEvent(this.target.player.id,[[this.targetCard,s.CardPos.HAND]])),this.initiatorPoint=this.initiatorCard.size.size,this.targetPoint=this.targetCard.size.size,yield e.events.publish(this);let t=this.initiatorPoint>this.targetPoint;return console.log("[拼点] 结果成功?",t),this.broadcast(e,!1),yield(0,d.delay)(2e3),e.broadcast(new u.CustomUIData(u.CustomUIData.STOP,null)),t}))}broadcast(e,t=!0){e.broadcast(new u.CustomUIData("card-fight",{title:this.title,cardLeft:this.initiatorCard,cardRight:this.targetCard,numberLeft:this.initiatorPoint,numberRight:this.targetPoint}),t?this.sanitize:null)}}t.default=CardFightOp},5796:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{l(r.next(e))}catch(e){a(e)}}function s(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.DamageSource=t.DamageTimeline=t.DamageType=t.EnterDyingEvent=void 0;const i=n(3484),a=n(3402),o=n(6069),s=n(1131),l=n(9820);class EnterDyingEvent{constructor(e){this.damage=e}}var d,u,c;function p(e){return e===d.FIRE||e===d.THUNDER}t.EnterDyingEvent=EnterDyingEvent,function(e){e[e.NORMAL=0]="NORMAL",e[e.FIRE=1]="FIRE",e[e.THUNDER=2]="THUNDER",e[e.ENERGY=3]="ENERGY"}(d||(t.DamageType=d={})),function(e){e[e.DOING_DAMAGE=0]="DOING_DAMAGE",e[e.TAKING_DAMAGE=1]="TAKING_DAMAGE",e[e.DID_DAMAGE=2]="DID_DAMAGE",e[e.TAKEN_DAMAGE=3]="TAKEN_DAMAGE"}(u||(t.DamageTimeline=u={})),function(e){e[e.SLASH=0]="SLASH",e[e.DUEL=1]="DUEL",e[e.NAN_MAN=2]="NAN_MAN",e[e.WAN_JIAN=3]="WAN_JIAN",e[e.SKILL=4]="SKILL",e[e.SHAN_DIAN=5]="SHAN_DIAN",e[e.HUO_GONG=6]="HUO_GONG"}(c||(t.DamageSource=c={}));class DamageOp extends i.Operation{constructor(e,t,n,r,i,a=d.NORMAL,o=!0){super(),this.source=e,this.target=t,this.amount=n,this.cards=r,this.damageSource=i,this.type=a,this.doChain=o,this.timeline=u.DOING_DAMAGE,this.source&&this.source.isDead&&(this.source=null)}isFrom(e){return this.source&&this.source.player.id===e}perform(e){return r(this,void 0,void 0,(function*(){let t=this.target.player.id;if(yield e.events.publish(this),this.amount<=0)return void console.log("[伤害结算] 伤害被防止, 停止结算");if(this.timeline=u.TAKING_DAMAGE,yield e.events.publish(this),this.amount<=0)return void console.log("[伤害结算] 伤害被防止, 停止结算");let n=Math.min(3,this.amount);if(e.broadcast(new o.PlaySound(`audio/injure${n}.ogg`)),this.target.damage(this.amount),this.type===d.ENERGY)e.log(`${this.target} 流失了 ${this.amount} 点体力`);else{let t=`${this.target} 受到了来自 ${this.source||"苍天"} 的 ${this.amount} 点伤害`;this.type===d.FIRE&&(t+="(火属性)"),this.type===d.THUNDER&&(t+="(雷属性)"),e.log(t)}e.broadcast(new o.DamageEffect(t)),e.broadcast(this.target,a.PlayerInfo.sanitize);let r=this.target.isChained;if(this.target.isDying()&&(yield e.events.publish(new EnterDyingEvent(this)),yield new l.AskSavingAround(this.target).perform(e),this.target.isDying()&&(yield new s.default(this.target,this.source,this).perform(e))),p(this.type)&&r&&(console.log("[伤害结算] 铁索连环恢复",this.target.player.id),this.target.isChained=!1,e.broadcast(this.target,a.PlayerInfo.sanitize)),this.source&&!this.source.isDead&&(this.timeline=u.DID_DAMAGE,yield e.events.publish(this)),this.target.isDead||(this.timeline=u.TAKEN_DAMAGE,yield e.events.publish(this)),p(this.type)&&r&&this.doChain){let t=e.context.getRingFromPerspective(this.target.player.id,!1).filter((e=>e.isChained));console.log("[伤害结算] 触发铁索连环于",t.map((e=>e.player.id)));for(let n of t)n.isDead||(console.log("[伤害结算] 连环伤害:",n.player.id),yield new DamageOp(this.source,n,this.amount,this.cards,this.damageSource,this.type,!1).perform(e))}}))}}t.default=DamageOp},1131:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{l(r.next(e))}catch(e){a(e)}}function s(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.DeathTimeline=void 0;const i=n(3484);var a;!function(e){e[e.BEFORE_REVEAL=0]="BEFORE_REVEAL",e[e.AFTER_REVEAL=1]="AFTER_REVEAL",e[e.IN_DEATH=2]="IN_DEATH",e[e.AFTER_DEATH=3]="AFTER_DEATH"}(a||(t.DeathTimeline=a={}));class DeathOp extends i.Operation{constructor(e,t,n){super(),this.deceased=e,this.killer=t,this.dmanageOp=n,this.timeline=a.BEFORE_REVEAL}perform(e){return r(this,void 0,void 0,(function*(){yield e.events.publish(this),this.timeline=a.AFTER_REVEAL,yield e.events.publish(this),this.timeline=a.IN_DEATH,yield e.events.publish(this),this.deceased.getAllCards().forEach((t=>{t[0].description=`${this.deceased.player.id} 阵亡弃牌`,e.sendToWorkflow(this.deceased.player.id,t[1],[t[0]])})),this.deceased.declareDeath(),e.broadcast(this.deceased),e.log(this.killer?`${this.killer} 击杀了 ${this.deceased}`:`${this.deceased} 阵亡`),this.timeline=a.AFTER_DEATH,yield e.events.publish(this),e.skillRegistry.onPlayerDead(this.deceased.player.id)}))}}t.default=DeathOp},9716:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{l(r.next(e))}catch(e){a(e)}}function s(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.JudgeDelayedRuseOp=t.UseDelayedRuseOp=void 0;const i=n(3484),a=n(4739),o=n(4619),s=n(5796),l=n(5706),d=n(1073),u=n(3160),c=n(5935);class UseDelayedRuseOp extends i.RuseOp{constructor(e,t,n,r){super(r,[e],e.as||e.type),this.card=e,this.source=t,this.sourcePos=n,this.target=r,(0,l.checkThat)(this.ruseType.isDelayedRuse(),"必须得是延时锦囊!!")}doPerform(e){return r(this,void 0,void 0,(function*(){let t=this.source.player.id,n=this.target.player.id;console.log(`${t} 对 ${n} 使用了延时锦囊 ${this.card.id} : ${this.card.as}`),e.sendToWorkflow(t,this.sourcePos,[this.card],!0,!0),yield e.transferCards(t,n,this.sourcePos,d.CardPos.JUDGE,[this.card])}))}onAborted(e){return r(this,void 0,void 0,(function*(){this.card.description="失效弃置",e.sendToWorkflow(this.source.player.id,this.sourcePos,[this.card])}))}}t.UseDelayedRuseOp=UseDelayedRuseOp;class JudgeDelayedRuseOp extends i.Operation{constructor(e,t){super(),this.player=e,this.card=t}perform(e){return r(this,void 0,void 0,(function*(){let t=this.card.as||this.card.type,n=t.name===o.CardType.SHAN_DIAN.name,r=this.player.player.id,i=new a.WuXieContext(e,t);if(yield i.init(),this.card.description=`即将判定 ${r} 的 ${t.name}`,e.log(`即将判定 ${r} 的 ${t.name}`),e.sendToWorkflow(r,d.CardPos.JUDGE,[this.card],!0,n),yield(0,l.delay)(1e3),yield i.doOneRound(this.player))if(console.log(`[延迟锦囊] 被无懈 ${t.name} ${r}`),t===o.CardType.SHAN_DIAN){let t=e.getSortedByCurr(!1).filter((e=>!e.hasJudgeCard(o.CardType.SHAN_DIAN))),n=t.length>0?t[0]:this.player;yield new UseDelayedRuseOp(this.card,this.player,d.CardPos.JUDGE,n).perform(e)}else delete this.card.description;else{console.log(`[延迟锦囊] 进入判定 ${t.name} ${r}`);let n=yield new u.default(`${r} 的 ${t.name} 判定`,r).perform(e),i=e.interpret(r,n);switch(console.log(`[延迟锦囊] 判定牌为 ${r} ${n.id} > ${i.suit}`),t){case o.CardType.LE_BU:"heart"!==i.suit?(console.log(`[延迟锦囊] 乐不思蜀生效 ${r} ${n.id} > ${i.suit}`),e.log(`${r} 的乐不思蜀生效`),e.roundStats.skipStages.set(c.Stage.USE_CARD,!0)):e.log(`${r} 的乐不思蜀失效`);break;case o.CardType.BING_LIANG:"club"!==i.suit?(console.log(`[延迟锦囊] 兵粮寸断生效 ${r} ${n.id} > ${i.suit}`),e.log(`${r} 的兵粮寸断生效`),e.roundStats.skipStages.set(c.Stage.TAKE_CARD,!0)):e.log(`${r} 的兵粮寸断失效`);break;case o.CardType.SHAN_DIAN:if("spade"===i.suit&&i.size.size>=2&&i.size.size<=9)console.log(`[延迟锦囊] 闪电生效 ${r} ${n.id} > ${i.suit} ${i.size.size}`),e.log(`${r} 的闪电生效`),this.card.description=`${r} 的闪电生效!`,e.sendToWorkflow(r,d.CardPos.JUDGE,[this.card]),yield new s.default(null,e.context.getPlayer(r),3,[n],s.DamageSource.SHAN_DIAN,s.DamageType.THUNDER).perform(e);else{let t=e.getSortedByCurr(!1).filter((e=>!e.hasJudgeCard(o.CardType.SHAN_DIAN))),n=t.length>0?t[0]:this.player;e.log(`${r} 的闪电失效`),console.log(`[延迟锦囊] 闪电失效, 移给 ${n.player.id}`),yield new UseDelayedRuseOp(this.card,this.player,d.CardPos.JUDGE,n).perform(e)}break;default:throw`未知的延时锦囊??? ${t} ${n.id} ${n.as}`}}}))}}t.JudgeDelayedRuseOp=JudgeDelayedRuseOp},1628:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{l(r.next(e))}catch(e){a(e)}}function s(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.DodgePlayed=void 0;const i=n(3484),a=n(1480),o=n(739),s=n(6069),l=n(1073),d=n(4619),u=n(9575);class DodgeOp extends i.Operation{constructor(e,t,n,r){super(),this.target=e,this.source=t,this.numberRequired=n,this.hintMsg=r,this.playedDodgeSomehow=!1}perform(e){return r(this,void 0,void 0,(function*(){let t=this.numberRequired;for(;t>0;){if(this.playedDodgeSomehow=!1,yield e.events.publish(this),this.playedDodgeSomehow){console.log("[Dodge OP] 被八卦啥的闪掉了?"),t--,yield e.events.publish(new DodgePlayed(this.target.player.id));continue}console.log("[Dodge OP] 开始求闪");let n=this.hintMsg;if(this.numberRequired>1&&(n+=`(还需要${t}张)`),this.dodgeResp=yield e.sendHint(this.target.player.id,{hintType:o.HintType.DODGE,hintMsg:n,extraButtons:[a.Button.CANCEL]}),this.dodgeResp.isCancel())return console.log("[Dodge OP] 闪避失败"),!1;if(t--,console.log("[Dodge OP] 闪避成功"),this.dodgeResp.skill)yield e.resolver.onSkillAction(this.dodgeResp,this,e);else{e.broadcast(new s.TextFlashEffect(this.target.player.id,[this.source.player.id],"闪"));let t=this.dodgeResp.getCardsAtPos(l.CardPos.HAND);if(1!==t.length)throw`Player played dodge cards but not one card!!!! ${this.dodgeResp.source.player.id} ${t}`;e.log(`${this.dodgeResp.source} 打出了 ${t}`),t[0].description=`${this.dodgeResp.source} 打出`,e.sendToWorkflow(this.target.player.id,l.CardPos.HAND,[t[0]]),yield e.events.publish(new u.CardBeingUsedEvent(this.dodgeResp.source.player.id,t.map((e=>[e,l.CardPos.HAND])),d.CardType.DODGE,!1,!1))}yield e.events.publish(new DodgePlayed(this.target.player.id))}return!0}))}}t.default=DodgeOp;class DodgePlayed{constructor(e){this.player=e}}t.DodgePlayed=DodgePlayed},1802:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{l(r.next(e))}catch(e){a(e)}}function s(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.DropCardRequest=t.DropOthersCardRequest=t.DropTimeline=void 0,t.SelectACardAt=function(e,t,n,i,...a){return r(this,void 0,void 0,(function*(){let r=n,d=(0,l.gatherCards)(r,a,t.player.id);if(!d)return console.error("[选牌] 选不了, 此玩家没有牌可以弃置",n.player.id,a.map((e=>o.CardPos[e]))),null;let u={hintType:s.HintType.UI_PANEL,hintMsg:"请选择一张牌",customRequest:{mode:"choose",data:{rowsOfCard:d,title:i,chooseSize:1}}},c=(yield e.sendHint(t.player.id,u)).customData,p=(0,l.findCard)(r,c)[0];return[p[0],p[1]]}))};const i=n(3484),a=n(1480),o=n(1073),s=n(739),l=n(9575);var d;!function(e){e[e.BEFORE=0]="BEFORE",e[e.AFTER=1]="AFTER"}(d||(t.DropTimeline=d={}));class DropCardOp extends i.Operation{constructor(e){super(),this.player=e,this.limit=0,this.timeline=d.BEFORE,this.dropped=[]}perform(e){return r(this,void 0,void 0,(function*(){let t=this.player.player.id;this.limit=this.player.hp,yield e.events.publish(this);let n=Math.max(this.player.getCards(o.CardPos.HAND).length-this.limit,0);if(console.log("[弃牌阶段] 手牌数:",this.player.getCards(o.CardPos.HAND).length," 上限 ",this.limit),n>0){let r=new DropCardRequest;yield r.perform(t,n,e,`弃牌阶段 请弃置${n}张手牌`),this.dropped=r.dropped}this.timeline=d.AFTER,yield e.events.publish(this)}))}}t.default=DropCardOp;t.DropOthersCardRequest=class DropOthersCardRequest{perform(e,t,n,i,a){return r(this,void 0,void 0,(function*(){let r=n,o=(0,l.gatherCards)(r,a,t.player.id);if(!o)return console.error("[弃牌] 无法弃置, 此玩家没有牌可以弃置"),null;let d={hintType:s.HintType.UI_PANEL,hintMsg:"请选择一张牌",customRequest:{mode:"choose",data:{rowsOfCard:o,title:i,chooseSize:1}}};console.log("[弃牌] 请求弃牌",d);let u=yield e.sendHint(t.player.id,d);console.log("[弃牌] 弃置成功!");let c=u.customData,p=(0,l.findCard)(r,c)[0],h=p[0],f=p[1];return e.log(`${t} 弃置了 ${n} 的 ${h}`),h.description=`${n.player.id} 被弃置`,e.sendToWorkflow(n.player.id,f,[h]),yield e.events.publish(new l.CardBeingDroppedEvent(n.player.id,[[h,f]])),p}))}};class DropCardRequest{constructor(){this.dropped=[]}perform(e,t,n,i){return r(this,arguments,void 0,(function*(e,t,n,r,i=[a.UIPosition.MY_HAND],d=!1){let u,c=n.context.getPlayer(e),p=(0,l.cardAmountAt)(c,i);if(p<=0)return console.error("How???"),!1;if(t>=p&&!d)u=(0,l.cardsAt)(c,i);else{let l=yield n.sendHint(e,{hintType:s.HintType.CHOOSE_CARD,hintMsg:r,quantity:t,positions:i,extraButtons:d?[a.Button.CANCEL]:[]});if(l.isCancel()){if(d)return!1;throw"How is this possible?"}u=l.getPosAndCards(o.CardPos.HAND,o.CardPos.EQUIP)}console.log("玩家弃牌: ",e,u.map((e=>o.CardPos[e[0]]+": "+e[1])));for(let t of u){let r=t[0],i=t[1].map((t=>(delete t.as,t.description=`[${e}] 弃置`,this.dropped.push(t),t)));n.sendToWorkflow(e,r,i,!1),yield n.events.publish(new l.CardBeingDroppedEvent(e,i.map((e=>[e,r]))))}return n.log(`[${e}] 弃置 `),!0}))}}t.DropCardRequest=DropCardRequest},4105:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{l(r.next(e))}catch(e){a(e)}}function s(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.UnequipOp=t.EquipOp=void 0;const i=n(1073),a=n(9575),o=n(6069);t.EquipOp=class EquipOp{constructor(e,t,n=i.CardPos.HAND,r=e){this.beneficiary=e,this.card=t,this.sourcePos=n,this.source=r}perform(e){return r(this,void 0,void 0,(function*(){let t=this.beneficiary.findCardAt(i.CardPos.EQUIP,this.card.type.genre);t&&(yield new UnequipOp(this.beneficiary,t,this.source).perform(e)),this.card.type.isHorse()?e.broadcast(new o.PlaySound("audio/card/common/horse.ogg")):e.broadcast(new o.PlaySound("audio/card/common/equipment.ogg")),yield e.transferCards(this.source.player.id,this.beneficiary.player.id,this.sourcePos,i.CardPos.EQUIP,[this.card]),yield e.events.publish(this)}))}};class UnequipOp{constructor(e,t,n=null){this.loser=e,this.card=t,this.remover=n,n||(this.remover=e)}perform(e){return r(this,void 0,void 0,(function*(){yield e.events.publish(this),this.card.description=`${this.loser} 装备区弃置`,e.sendToWorkflow(this.loser.player.id,i.CardPos.EQUIP,[this.card]),yield e.events.publish(new a.CardBeingDroppedEvent(this.loser.player.id,[[this.card,i.CardPos.EQUIP]]))}))}}t.UnequipOp=UnequipOp},5465:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{l(r.next(e))}catch(e){a(e)}}function s(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.BaiYin=t.BaGua=t.RenWang=t.TengJia=t.HanBing=t.LianNu=t.Qilin=t.GuanShi=t.GuDing=t.CiXiong=t.ZhuQue=t.QingGang=t.Weapon=t.Equipment=t.BlockedEquipment=void 0;const i=n(9550),a=n(1073),o=n(4619),s=n(3484),l=n(739),d=n(1480),u=n(5796),c=n(1802),p=n(2608),h=n(9575),f=n(8411),g=n(5935),y=n(4910),m=n(1628),v=n(3160),C=n(2421),b=n(6069),S=n(1449);t.BlockedEquipment=new class EquipBlockedPlayers{constructor(){this._data=new S.Multimap}reinit(){this._data=new S.Multimap}block(e,t){console.log("[装备] 无视了防具",e,t),this._data.set(e,t)}release(e,t){console.log("[装备] 撤销了无视防具",e,t),this._data.remove(e,t)}isBlocked(e){return this._data.get(e).size>0}};class Equipment{constructor(e,t,n){this.player=e,this.cardType=t,this.manager=n}show(){let e=this.cardType;this.manager.broadcast(new b.PlaySound(`audio/equip/${e.id}.ogg`)),this.manager.broadcast(new b.TextFlashEffect(this.player,[],e.name))}}t.Equipment=Equipment;class Weapon extends Equipment{constructor(){super(...arguments),this.performEffect=e=>r(this,void 0,void 0,(function*(){if(e.source.player.id!==this.player)return;if(!e.hasTarget(this.player))return;if(e.timeline!==s.Timeline.AFTER_CONFIRMING_TARGET)return;if(!e.source.getCards(a.CardPos.EQUIP).find((e=>e.type===this.myType())))throw`不可能! 我登记过的就应该有这个武器! ${this.myType.name} ${this.player}`;yield this.doEffect(e)}))}onEquipped(){return r(this,void 0,void 0,(function*(){this.manager.equipmentRegistry.on(i.SlashOP,this.player,this.performEffect)}))}onDropped(){return r(this,void 0,void 0,(function*(){this.manager.equipmentRegistry.off(i.SlashOP,this.player,this.performEffect)}))}}t.Weapon=Weapon;t.QingGang=class QingGang extends Weapon{myType(){return o.CardType.QING_GANG}doEffect(e){return r(this,void 0,void 0,(function*(){e.timeline===s.Timeline.AFTER_CONFIRMING_TARGET?(this.show(),this.manager.log(`${this.player} 的青釭剑效果触发`),t.BlockedEquipment.block(this.player,this.cardType.name)):e.timeline===s.Timeline.COMPUTE_FINISH&&t.BlockedEquipment.release(this.player,this.cardType.name)}))}};t.ZhuQue=class ZhuQue extends Equipment{constructor(){super(...arguments),this.performEffect=e=>r(this,void 0,void 0,(function*(){if(e.damageType===u.DamageType.NORMAL&&e.source.player.id===this.player&&e.timeline===s.Timeline.AFTER_CONFIRMING_TARGET){(yield this.manager.sendHint(this.player,{hintType:l.HintType.MULTI_CHOICE,hintMsg:"是否发动朱雀羽扇的效果?",extraButtons:[d.Button.OK,d.Button.CANCEL]})).isCancel()||(this.show(),this.manager.log(`${this.player} 发动了朱雀羽扇的效果`),console.log(`[装备] ${this.player} 发动了朱雀羽扇`),e.damageType=u.DamageType.FIRE)}}))}onEquipped(){return r(this,void 0,void 0,(function*(){this.manager.equipmentRegistry.on(i.SlashOP,this.player,this.performEffect)}))}onDropped(){return r(this,void 0,void 0,(function*(){this.manager.equipmentRegistry.off(i.SlashOP,this.player,this.performEffect)}))}};t.CiXiong=class CiXiong extends Weapon{myType(){return o.CardType.CI_XIONG}doEffect(e){return r(this,void 0,void 0,(function*(){let t=e.targets.filter((t=>this.differentSex(e.source,t)));for(let n of t){if(!(yield this.manager.sendHint(this.player,{hintType:l.HintType.MULTI_CHOICE,hintMsg:`是否对 ${n} 发动雌雄双股剑`,extraButtons:[d.Button.OK,d.Button.CANCEL]})).isCancel()){this.show(),console.log(`[装备] ${this.player} 发动了雌雄双股剑`),this.manager.log(`${this.player} 发动了雌雄双股剑的效果`),(yield(new c.DropCardRequest).perform(n.player.id,1,this.manager,`${this.player} 对你发动了雌雄双股剑, 请弃置一张手牌或点击取消令其摸一张牌`,[d.UIPosition.MY_HAND],!0))?console.log(`[装备] ${n} 选择弃置了牌`):(console.log(`[装备] ${n} 选择让 ${this.player} 摸一张牌`),yield new p.default(e.source,1).perform(this.manager))}}}))}differentSex(e,t){return e.getGender()!==t.getGender()&&"Nil"!==e.getGender()&&"Nil"!==t.getGender()}};t.GuDing=class GuDing extends Equipment{constructor(){super(...arguments),this.performEffect=e=>r(this,void 0,void 0,(function*(){if(!e.source||e.source.player.id!==this.player||e.damageSource!==u.DamageSource.SLASH)return;if(!e.source.getCards(a.CardPos.EQUIP).find((e=>e.type===o.CardType.GU_DING)))throw`不可能! 我登记过的就应该有这个武器! 古锭刀 ${this.player}`;e.timeline===u.DamageTimeline.DOING_DAMAGE&&0===e.target.getCards(a.CardPos.HAND).length&&(this.show(),this.manager.log(`${this.player} 的古锭刀效果触发`),console.log("[装备] 古锭刀伤害加1"),e.amount+=1)}))}onEquipped(){return r(this,void 0,void 0,(function*(){this.manager.equipmentRegistry.on(u.default,this.player,this.performEffect)}))}onDropped(){return r(this,void 0,void 0,(function*(){this.manager.equipmentRegistry.off(u.default,this.player,this.performEffect)}))}};t.GuanShi=class GuanShi extends Equipment{constructor(){super(...arguments),this.performEffect=e=>r(this,void 0,void 0,(function*(){let t=e.slashOp;if(t.source.player.id!==this.player)return;let n=t.source.getCards(a.CardPos.EQUIP).find((e=>e.type===o.CardType.GUAN_SHI));if(!n)throw`不可能! 我登记过的就应该有这个武器! 贯石斧 ${this.player}`;let r=yield this.manager.sendHint(this.player,{hintType:l.HintType.CHOOSE_CARD,hintMsg:"请选择弃置两张牌发动贯石斧或取消放弃发动",positions:[d.UIPosition.MY_HAND,d.UIPosition.MY_EQUIP],quantity:2,forbidden:[n.id],extraButtons:[d.Button.CANCEL]});if(r.isCancel())console.log("[装备] 玩家放弃发动贯石斧");else{this.show();let e=r.getPosAndCards(a.CardPos.HAND,a.CardPos.EQUIP);this.manager.log(`${this.player} 发动贯石斧`),console.log("[装备] 玩家发动贯石斧造成伤害: ",this.player,e);for(let t of e){let e=t[0],n=t[1].map((e=>(delete e.as,e.description=`[${this.player}] 使用贯石斧弃置`,e)));this.manager.sendToWorkflow(this.player,e,n,!0),yield this.manager.events.publish(new h.CardBeingDroppedEvent(this.player,n.map((t=>[t,e]))))}yield new u.default(t.source,t.target,t.damageAmount,t.cards,u.DamageSource.SLASH,t.damageType).perform(this.manager)}}))}onEquipped(){return r(this,void 0,void 0,(function*(){this.manager.equipmentRegistry.on(i.SlashDodgedEvent,this.player,this.performEffect)}))}onDropped(){return r(this,void 0,void 0,(function*(){this.manager.equipmentRegistry.off(i.SlashDodgedEvent,this.player,this.performEffect)}))}};t.Qilin=class Qilin extends Equipment{constructor(){super(...arguments),this.performEffect=e=>r(this,void 0,void 0,(function*(){if(e.source&&e.source.player.id===this.player&&e.damageSource===u.DamageSource.SLASH&&e.timeline===u.DamageTimeline.DOING_DAMAGE&&e.amount>0){if(!e.source.getCards(a.CardPos.EQUIP).find((e=>e.type===o.CardType.QI_LIN)))throw`不可能! 我登记过的就应该有这个武器! 麒麟弓 ${this.player}`;let t=e.target.getCards(a.CardPos.EQUIP).filter((e=>e.type.isHorse()));if(0===t.length)return void console.log("[装备] 麒麟弓发现没啥好射的");if((yield this.manager.sendHint(this.player,{hintType:l.HintType.MULTI_CHOICE,hintMsg:`是否对 ${e.target.player.id} 发动麒麟弓特效`,extraButtons:[d.Button.OK,d.Button.CANCEL]})).isCancel())return void console.log("[装备] 玩家放弃发动麒麟弓");let n=yield this.manager.sendHint(this.player,{hintType:l.HintType.UI_PANEL,hintMsg:"请选择对方坐骑",customRequest:{data:{rowsOfCard:{坐骑:t},title:`麒麟弓射 ${e.target.player.id} 的坐骑`,chooseSize:1},mode:"choose"}});this.show();let r=t[n.customData[0].idx];console.log(`[装备] 玩家发动麒麟弓射下了 ${r.id}`),this.manager.log(`${this.player} 发动麒麟弓效果`),r.description=`${e.target.player.id} 被弃置`,this.manager.sendToWorkflow(e.target.player.id,a.CardPos.EQUIP,[r]),yield this.manager.events.publish(new h.CardBeingDroppedEvent(e.target.player.id,[[r,a.CardPos.EQUIP]]))}}))}onEquipped(){return r(this,void 0,void 0,(function*(){this.manager.equipmentRegistry.on(u.default,this.player,this.performEffect)}))}onDropped(){return r(this,void 0,void 0,(function*(){this.manager.equipmentRegistry.off(u.default,this.player,this.performEffect)}))}};t.LianNu=class LianNu extends Equipment{constructor(){super(...arguments),this.performEffect=e=>r(this,void 0,void 0,(function*(){if(e.info.player.id!==this.player)return;if(!e.info.getCards(a.CardPos.EQUIP).find((e=>e.type===o.CardType.LIAN_NU)))throw`不可能! 我登记过的就应该有这个武器! 连弩 ${this.player}`;e.stage===g.Stage.ROUND_BEGIN&&(console.log(`[装备] ${this.player} 回合开始时装备了连弩, 立即获得 +900 出杀上限 = ${this.manager.roundStats.slashMax}`),this.manager.roundStats.slashMax+=900)}))}onEquipped(){return r(this,void 0,void 0,(function*(){this.manager.currPlayer().player.id===this.player&&(this.manager.roundStats.slashMax+=900,console.log(`[装备] ${this.player} 装备了连弩, 立即获得 +900 出杀上限 变成: ${this.manager.roundStats.slashMax}`)),this.manager.equipmentRegistry.on(f.StageStartFlow,this.player,this.performEffect),this.manager.equipmentRegistry.on(i.SlashOP,this.player,(e=>r(this,void 0,void 0,(function*(){e.source.player.id===this.player&&this.manager.roundStats.slashCount>1&&this.show()}))))}))}onDropped(){return r(this,void 0,void 0,(function*(){this.manager.currPlayer().player.id===this.player&&(this.manager.roundStats.slashMax-=900,console.log(`[装备] ${this.player} 卸下了了连弩, 立即损失 900 出杀上限 = ${this.manager.roundStats.slashMax}`)),this.manager.equipmentRegistry.off(f.StageStartFlow,this.player,this.performEffect)}))}};t.HanBing=class HanBing extends Equipment{constructor(){super(...arguments),this.performEffect=e=>r(this,void 0,void 0,(function*(){if(!e.source||e.source.player.id!==this.player||e.damageSource!==u.DamageSource.SLASH)return;if(!e.source.getCards(a.CardPos.EQUIP).find((e=>e.type===o.CardType.HAN_BING)))throw`不可能! 我登记过的就应该有这个武器! 寒冰剑 ${this.player}`;if(e.timeline===u.DamageTimeline.DOING_DAMAGE&&e.amount>0){if(0===e.target.getAllCards().length)return void console.log("[装备] 对象没有牌, 无法发动寒冰剑");if((yield this.manager.sendHint(this.player,{hintType:l.HintType.MULTI_CHOICE,hintMsg:`是否对 ${e.target.player.id} 发动寒冰剑特效`,extraButtons:[d.Button.OK,d.Button.CANCEL]})).isCancel())return void console.log("[装备] 放弃发动寒冰剑");console.log("[装备] 选择发动寒冰剑弃牌"),this.manager.log(`${this.player} 发动寒冰剑效果`),this.show(),e.amount=-999,yield(new c.DropOthersCardRequest).perform(this.manager,e.source,e.target,"寒冰剑弃置对方的手牌/装备牌",[a.CardPos.HAND,a.CardPos.EQUIP]),e.target.getAllCards().length>0&&(console.log("[装备] 发动寒冰剑弃置第二张牌"),yield(new c.DropOthersCardRequest).perform(this.manager,e.source,e.target,"寒冰剑弃置对方的手牌/装备牌",[a.CardPos.HAND,a.CardPos.EQUIP]))}}))}onEquipped(){return r(this,void 0,void 0,(function*(){this.manager.equipmentRegistry.on(u.default,this.player,this.performEffect)}))}onDropped(){return r(this,void 0,void 0,(function*(){this.manager.equipmentRegistry.off(u.default,this.player,this.performEffect)}))}};t.TengJia=class TengJia extends Equipment{constructor(){super(...arguments),this.abortSlash=e=>r(this,void 0,void 0,(function*(){if(e.hasTarget(this.player)&&e.timeline===s.Timeline.AFTER_BECOMING_TARGET&&e.damageType===u.DamageType.NORMAL){if(t.BlockedEquipment.isBlocked(this.player))return void console.warn("[装备] 被无视, 无法发动 "+this.cardType.name);console.log(`[装备] 藤甲令 ${e.source.player.id} 的杀无效`),this.manager.log(`${this.player} 的藤甲触发`),this.manager.broadcast(new b.PlaySound("audio/equip/teng_jia_good.ogg")),this.manager.broadcast(new b.TextFlashEffect(this.player,[],"藤甲_好")),e.removeTarget(this.player)}})),this.amplifyFire=e=>r(this,void 0,void 0,(function*(){e.target.player.id===this.player&&e.timeline===u.DamageTimeline.TAKING_DAMAGE&&(t.BlockedEquipment.isBlocked(this.player)?console.warn("[装备] 被无视, 无法发动 "+this.cardType.name):e.type===u.DamageType.FIRE&&(this.manager.broadcast(new b.PlaySound("audio/equip/teng_jia_bad.ogg")),this.manager.broadcast(new b.TextFlashEffect(this.player,[],"藤甲_坏")),console.log("[装备] 藤甲令火伤害+1"),this.manager.log(`${this.player} 的藤甲使火焰伤害+1`),e.amount+=1))}))}onEquipped(){return r(this,void 0,void 0,(function*(){this.manager.equipmentRegistry.on(u.default,this.player,this.amplifyFire),this.manager.equipmentRegistry.on(i.SlashOP,this.player,this.abortSlash)}))}onDropped(){return r(this,void 0,void 0,(function*(){this.manager.equipmentRegistry.off(u.default,this.player,this.amplifyFire),this.manager.equipmentRegistry.off(i.SlashOP,this.player,this.abortSlash)}))}};t.RenWang=class RenWang extends Equipment{constructor(){super(...arguments),this.abortSlash=e=>r(this,void 0,void 0,(function*(){if(e.hasTarget(this.player)&&e.timeline===s.Timeline.AFTER_CONFIRMING_TARGET&&"black"===e.color){if(t.BlockedEquipment.isBlocked(this.player))return void console.warn("[装备] 被无视, 无法发动 "+this.cardType.name);this.show(),this.manager.log(`${this.player} 的仁王盾令此杀无效`),console.log(`[装备] 仁王盾令 ${e.source.player.id} 的杀无效`),e.removeTarget(this.player)}}))}onEquipped(){return r(this,void 0,void 0,(function*(){this.manager.equipmentRegistry.on(i.SlashOP,this.player,this.abortSlash)}))}onDropped(){return r(this,void 0,void 0,(function*(){this.manager.equipmentRegistry.off(i.SlashOP,this.player,this.abortSlash)}))}};t.BaGua=class BaGua extends Equipment{constructor(){super(...arguments),this.pretendDodge=e=>r(this,void 0,void 0,(function*(){if(e.target.player.id===this.player&&!e.playedDodgeSomehow){if(t.BlockedEquipment.isBlocked(this.player))return void console.warn("[装备] 被无视, 无法发动 "+this.cardType.name);(yield this.manager.sendHint(this.player,{hintType:l.HintType.MULTI_CHOICE,hintMsg:"是否发动八卦阵?",extraButtons:[d.Button.OK,d.Button.CANCEL]})).isCancel()||(this.manager.log(`${this.player} 发动了八卦阵`),yield this.doEffect(e))}}))}onEquipped(){return r(this,void 0,void 0,(function*(){this.manager.equipmentRegistry.on(m.default,this.player,this.pretendDodge)}))}onDropped(){return r(this,void 0,void 0,(function*(){this.manager.equipmentRegistry.off(m.default,this.player,this.pretendDodge)}))}doEffect(e){return r(this,void 0,void 0,(function*(){this.show();let t=yield new v.default(`${this.player} 八卦阵判定牌`,this.player).perform(this.manager);(0,y.isSuitRed)(this.manager.interpret(this.player,t).suit)?(console.log(`[装备] ${this.player} 八卦判定成功`),this.manager.log(`${this.player} 的八卦阵判定成功`),e.playedDodgeSomehow=!0):(this.manager.log(`${this.player} 的八卦阵判定失败`),console.log(`[装备] ${this.player} 八卦判定失败`))}))}};t.BaiYin=class BaiYin extends Equipment{constructor(){super(...arguments),this.reduceDamage=e=>r(this,void 0,void 0,(function*(){if(e.target.player.id===this.player&&e.timeline===u.DamageTimeline.TAKING_DAMAGE&&e.amount>1){if(t.BlockedEquipment.isBlocked(this.player))return void console.warn("[装备] 被无视, 无法发动 "+this.cardType.name);this.show(),this.manager.log(`${this.player} 的白银狮子触发`),console.log(`[装备] 白银狮子将伤害 ${e.amount} 降低为1`),e.amount=1}}))}onEquipped(){return r(this,void 0,void 0,(function*(){this.manager.equipmentRegistry.on(u.default,this.player,this.reduceDamage)}))}onDropped(){return r(this,void 0,void 0,(function*(){this.manager.equipmentRegistry.off(u.default,this.player,this.reduceDamage);let e=this.manager.context.getPlayer(this.player);e.hp<e.maxHp&&(this.show(),yield new C.default(e,e,1).perform(this.manager))}))}}},9575:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{l(r.next(e))}catch(e){a(e)}}function s(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.CardObtainedEvent=t.CardBeingTakenEvent=t.CardBeingDroppedEvent=t.CardBeingUsedEvent=t.CardAwayEvent=void 0,t.cardAmountAt=function(e,t){let n=0;return t.forEach((t=>{t===s.UIPosition.MY_HAND?n+=e.getCards(a.CardPos.HAND).length:t===s.UIPosition.MY_EQUIP?n+=e.getCards(a.CardPos.EQUIP).length:t===s.UIPosition.MY_JUDGE&&(n+=e.getCards(a.CardPos.JUDGE).length)})),n},t.cardsAt=function(e,t){let n=[];return t.forEach((t=>{t===s.UIPosition.MY_HAND?n.push([a.CardPos.HAND,e.getCards(a.CardPos.HAND)]):t===s.UIPosition.MY_EQUIP?n.push([a.CardPos.HAND,e.getCards(a.CardPos.EQUIP)]):t===s.UIPosition.MY_JUDGE&&n.push([a.CardPos.HAND,e.getCards(a.CardPos.JUDGE)])})),n},t.gatherCards=function(e,t,n=null){let r=0,o={};for(let s of d.keys()){let l=d.get(s);if(!t.find((e=>l===e)))continue;let u=e.getCards(l);0!==u.length&&(r+=u.length,(0,a.isCardPosHidden)(l)&&e.player.id!==n?o[s]=u.map((e=>i.Card.DUMMY)):o[s]=u)}if(0===r)return console.error("无法取得这些位置的牌...",e.player.id,t),null;return o},t.findCard=function(e,t){return t.map((t=>[e.getCards(d.get(t.rowName))[t.idx],d.get(t.rowName)]))},t.turnOver=function(e,t,n,i){return r(this,void 0,void 0,(function*(){i.log(`${e} ${n?"发动了 "+n:""} 将${e} 翻面`),i.broadcast(new l.TextFlashEffect(e.player.id,[t.player.id],n)),t.isTurnedOver=!t.isTurnedOver,i.broadcast(t,o.PlayerInfo.sanitize)}))};const i=n(4619),a=n(1073),o=n(3402),s=n(1480),l=n(6069);class CardAwayEvent{isCardFrom(e){return this.player===e&&this.cards.length>0&&(this.cards[0][1]===a.CardPos.HAND||this.cards[0][1]===a.CardPos.EQUIP)}}t.CardAwayEvent=CardAwayEvent;t.CardBeingUsedEvent=class CardBeingUsedEvent extends CardAwayEvent{constructor(e,t,n,r=!1,i=!0){super(),this.player=e,this.cards=t,this.as=n,this.isFromSkill=r,this.isUse=i}};t.CardBeingDroppedEvent=class CardBeingDroppedEvent extends CardAwayEvent{constructor(e,t){super(),this.player=e,this.cards=t}};t.CardBeingTakenEvent=class CardBeingTakenEvent extends CardAwayEvent{constructor(e,t){super(),this.player=e,this.cards=t}};t.CardObtainedEvent=class CardObtainedEvent{constructor(e,t){this.player=e,this.cards=t}};const d=new Map([["手牌",a.CardPos.HAND],["装备区",a.CardPos.EQUIP],["判定区",a.CardPos.JUDGE]])},2421:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{l(r.next(e))}catch(e){a(e)}}function s(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.HealTimeline=void 0;const i=n(3484),a=n(3402);var o;!function(e){e[e.BEFORE=0]="BEFORE",e[e.AFTER=1]="AFTER"}(o||(t.HealTimeline=o={}));class HealOp extends i.Operation{constructor(e,t,n){super(),this.source=e,this.target=t,this.amount=n,this.timeline=o.BEFORE}perform(e){return r(this,void 0,void 0,(function*(){yield e.events.publish(this),this.amount>0&&(e.log(`${this.target} 回复了 ${this.amount} 点体力`),this.target.heal(this.amount),e.broadcast(this.target,a.PlayerInfo.sanitize),this.timeline=o.AFTER,yield e.events.publish(this))}))}}t.default=HealOp},3160:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{l(r.next(e))}catch(e){a(e)}}function s(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.JudgeTimeline=void 0;const i=n(3484),a=n(6069),o=n(5706);var s;!function(e){e[e.BEGIN=0]="BEGIN",e[e.CONFIRMING=1]="CONFIRMING",e[e.CONFIRMED=2]="CONFIRMED"}(s||(t.JudgeTimeline=s={}));class JudgeOp extends i.Operation{constructor(e,t){super(),this.judgeCardMsg=e,this.owner=t,this.judgeCard=null,this.timeline=s.BEGIN}perform(e){return r(this,void 0,void 0,(function*(){yield e.events.publish(this),this.judgeCard=e.context.deck.getCardsFromTop(1)[0],this.judgeCard.description=this.judgeCardMsg;let t=a.CardTransit.deckToWorkflow([this.judgeCard]);t.specialEffect="flip",e.broadcast(t),e.context.workflowCards.add(this.judgeCard),e.log(`${this.owner} 的判定牌为 ${this.judgeCard}`),yield(0,o.delay)(600),this.timeline=s.CONFIRMING,yield e.events.publish(this);let n=this.judgeCard;return this.timeline=s.CONFIRMED,yield e.events.publish(this),yield(0,o.delay)(600),n}))}}t.default=JudgeOp},1034:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{l(r.next(e))}catch(e){a(e)}}function s(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.MoveCardOnField=function(e,t,n){return r(this,void 0,void 0,(function*(){let r=yield e.sendHint(t.player.id,{hintType:i.HintType.CHOOSE_PLAYER,hintMsg:"选择2名玩家移动装备/判定牌",minQuantity:2,quantity:2}),u=r.targets[0],p=r.targets[1];console.log(n+" 挪动者",u.player.id,p.player.id),e.broadcast(new a.TextFlashEffect(t.player.id,[u.player.id,p.player.id],n));let h=u.getCards(o.CardPos.EQUIP),f=p.getCards(o.CardPos.EQUIP),g=u.getCards(o.CardPos.JUDGE),y=p.getCards(o.CardPos.JUDGE);c(h,f,!0),c(g,y,!1);let m={title:n+"挪牌",titleLeft:u.player.id,titleRight:p.player.id,rowsOfCard:{装备区:[h,f],判定区:[g,y]},chooseSize:1,canCancel:!0},v=(yield e.sendHint(t.player.id,{hintType:i.HintType.UI_PANEL,hintMsg:"选择一张你想要移动的牌",customRequest:{mode:"duo-choose",data:m}})).customData;if(0===v.length)return void console.log("挪动 取消",v);let C,b,S,E=v[0];console.log("挪动 移动场上的牌为",E),"装备区"===E.rowName?(E.isLeft?(C=h[E.idx],b=u,S=p):(C=f[E.idx],b=p,S=u),yield new l.EquipOp(S,C,o.CardPos.EQUIP,b).perform(e)):(E.isLeft?(C=g[E.idx],b=u,S=p):(C=y[E.idx],b=p,S=u),yield new d.UseDelayedRuseOp(C,b,o.CardPos.JUDGE,S).perform(e)),e.log(`${t.player.id} 发动了 ${n} 将 ${b} 的 ${C} 移动给 ${S}`),(0,s.cleanDescription)(...h,...f,...g,...y)}))};const i=n(739),a=n(6069),o=n(1073),s=n(4619),l=n(4105),d=n(9716),u="无法移动";function c(e,t,n){(0,s.cleanDescription)(...e,...t),e.forEach((e=>{if(delete e.description,n){let n=t.find((t=>t.type.genre===e.type.genre));n&&(e.description=u,n.description=u)}else{let n=t.find((t=>(t.as||t.type).id===(e.as||e.type).id));n&&(e.description=u,n.description=u)}}))}},2985:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{l(r.next(e))}catch(e){a(e)}}function s(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.WuGu=t.TaoYuan=t.WanJian=t.WanJianDodgedEvent=t.NanMan=t.DoTieSuo=t.TieSuo=t.MultiRuse=void 0;const i=n(3484),a=n(4739),o=n(3402),s=n(4619),l=n(6069),d=n(2608),u=n(5796),c=n(9550),p=n(1628),h=n(6203),f=n(5706),g=n(739),y=n(1073),m=n(9575),v=n(2421),C=n(5465);class MultiRuse extends i.UseEventOperation{constructor(e,t,n,r){super(r,n.name),this.cards=e,this.source=t,this.ruseType=n,this.targets=r,this.skipThisRound=!0,console.log("[MultiRuseOp] 多目标锦囊牌",n.name,r.map((e=>e.player.id)))}doPerform(e){return r(this,void 0,void 0,(function*(){yield this.init(e);let t=this.targets.map((e=>e.player.id));e.broadcast(new l.TextFlashEffect(this.source.player.id,t,this.ruseType.name)),yield e.events.publish(this);let n=new a.WuXieContext(e,this.ruseType);yield n.init();for(let t of this.targets)if(!t.isDead&&(yield this.beforeWuXie(e,t))){if(yield n.doOneRound(t)){console.log(`[MultiRuseOp] 针对${t.player.id}的锦囊牌被无懈掉了了`);continue}console.log(`[MultiRuseOp] ${this.ruseType.name} 开始对 ${t.player.id} 的结算`),yield this.doForOne(t,e)}yield this.onDone(e)}))}init(e){return r(this,void 0,void 0,(function*(){}))}onDone(e){return r(this,void 0,void 0,(function*(){}))}beforeWuXie(e,t){return r(this,void 0,void 0,(function*(){return!0}))}}t.MultiRuse=MultiRuse;class TieSuo extends i.Operation{constructor(e,t,n,r){super(),this.source=e,this.targets=t,this.isChongZhu=n,this.cards=r}perform(e){return r(this,void 0,void 0,(function*(){!this.targets||0===this.targets.length||this.isChongZhu?(console.log("[MultiRuseOp] 重铸了"),yield new d.default(this.source,1).perform(e)):(console.log("[MultiRuseOp] 铁索了",this.targets.map((e=>e.player.id))),yield new DoTieSuo(this.cards,this.source,s.CardType.TIE_SUO,this.targets).perform(e))}))}}t.TieSuo=TieSuo;class DoTieSuo extends MultiRuse{doForOne(e,t){return r(this,void 0,void 0,(function*(){e.isChained=!e.isChained,t.broadcast(new l.PlaySound("audio/card/common/chain.ogg")),t.broadcast(e,o.PlayerInfo.sanitize)}))}}t.DoTieSuo=DoTieSuo;t.NanMan=class NanMan extends MultiRuse{constructor(e,t,n,r){super(e,t,n,r),this.damageDealer=t}beforeWuXie(e,t){return r(this,void 0,void 0,(function*(){return!t.getCards(y.CardPos.EQUIP).find((e=>e.type===s.CardType.TENG_JIA))||(C.BlockedEquipment.isBlocked(t.player.id)?(console.warn("[装备] 被无视, 无法发动"),!0):(console.log(`[装备] 藤甲将 ${t} 移出万箭/南蛮的影响对象`),e.log(`${t} 的藤甲触发`),e.broadcast(new l.PlaySound("audio/equip/teng_jia_good.ogg")),e.broadcast(new l.TextFlashEffect(t.player.id,[],"藤甲_好")),this.removeTarget(t.player.id),!1))}))}doForOne(e,t){return r(this,void 0,void 0,(function*(){let n=this.source;(yield new c.AskForSlashOp(e,n,`${this.source} 使用南蛮, 请出杀`).perform(t))||(console.log(`[MultiRuseOp] ${e.player.id} 放弃南蛮出杀, 掉血`),yield new u.default(this.damageDealer,e,1,this.cards,u.DamageSource.NAN_MAN,u.DamageType.NORMAL).perform(t))}))}};class WanJianDodgedEvent{constructor(e,t){}}t.WanJianDodgedEvent=WanJianDodgedEvent;t.WanJian=class WanJian extends MultiRuse{beforeWuXie(e,t){return r(this,void 0,void 0,(function*(){return!t.getCards(y.CardPos.EQUIP).find((e=>e.type===s.CardType.TENG_JIA))||(C.BlockedEquipment.isBlocked(t.player.id)?(console.warn("[装备] 被无视, 无法发动"),!0):(console.log(`[装备] 藤甲将 ${t} 移出万箭/南蛮的影响对象`),e.log(`${t} 的藤甲触发`),e.broadcast(new l.PlaySound("audio/equip/teng_jia_good.ogg")),e.broadcast(new l.TextFlashEffect(t.player.id,[],"藤甲_好")),this.removeTarget(t.player.id),!1))}))}doForOne(e,t){return r(this,void 0,void 0,(function*(){let n=new p.default(e,this.source,1,`${this.source} 的万箭齐发, 请出闪`);(yield n.perform(t))?yield t.events.publish(new WanJianDodgedEvent(this,n)):(console.log(`[MultiRuseOp] ${e.player.id} 放弃万箭出闪, 掉血`),yield new u.default(this.source,e,1,this.cards,u.DamageSource.WAN_JIAN,u.DamageType.NORMAL).perform(t))}))}};t.TaoYuan=class TaoYuan extends MultiRuse{beforeWuXie(e,t){return r(this,void 0,void 0,(function*(){return t.hp<t.maxHp}))}doForOne(e,t){return r(this,void 0,void 0,(function*(){console.log("[MultiRuseOp] ",e.player.id,"桃园加血~"),yield new v.default(this.source,e,1).perform(t)}))}};t.WuGu=class WuGu extends MultiRuse{constructor(){super(...arguments),this.wuguCards=new Map}init(e){return r(this,void 0,void 0,(function*(){e.context.deck.getCardsFromTop(this.targets.length).forEach((e=>{this.wuguCards.set(e.id,e)})),this.broadCastCurrent("五谷丰登",e)}))}onDone(e){return r(this,void 0,void 0,(function*(){e.rescindAll(),e.broadcast(new h.CustomUIData(h.CustomUIData.STOP,null)),e.onReconnect=null,this.wuguCards.forEach((t=>{t.description||(console.log("[MultiRuseOp] 弃置五谷没人要的卡牌: ",t.id),t.description="五谷丰登弃置",e.broadcast(l.CardTransit.deckToWorkflow([t])),e.context.workflowCards.add(t))}))}))}doForOne(e,t){return r(this,void 0,void 0,(function*(){let n=e.player.id;this.broadCastCurrent(`等待 ${n} 选牌`,t);let r=yield t.sendHint(e.player.id,{hintType:g.HintType.UI_PANEL,hintMsg:"ignore",customRequest:{mode:"choose",data:!0}});console.log("[MultiRuseOp]",n,"选走了",r.customData);let i=t.getCard(r.customData);e.addCard(i,y.CardPos.HAND),t.broadcast(l.CardTransit.fromDeck(n,[i])),yield t.events.publish(new m.CardObtainedEvent(n,[[i,y.CardPos.HAND]])),this.wuguCards.get(i.id).description=e.player.id+" 选走"}))}beforeWuXie(e,t){return r(this,void 0,void 0,(function*(){return this.broadCastCurrent(`${t.player.id} 即将选牌`,e),!0}))}broadCastCurrent(e,t){t.onReconnect=()=>{t.broadcast(new h.CustomUIData("wugu",{title:e,cards:(0,f.flattenMap)(this.wuguCards).map((e=>e[1]))}))},t.onReconnect()}}},5278:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{l(r.next(e))}catch(e){a(e)}}function s(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const i=n(3484),a=n(6069),o=n(2421);class PeachOp extends i.Operation{constructor(e){super(),this.player=e}perform(e){return r(this,void 0,void 0,(function*(){e.broadcast(new a.TextFlashEffect(this.player.player.id,[],"桃")),yield new o.default(this.player,this.player,1).perform(e)}))}}t.default=PeachOp},6652:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{l(r.next(e))}catch(e){a(e)}}function s(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.HuoGong=t.JieDao=t.WuZhong=t.GuoHe=t.ShunShou=t.JueDou=t.SingleRuse=void 0,t.GrabCard=m;const i=n(3484),a=n(1480),o=n(4739),s=n(739),l=n(1073),d=n(4619),u=n(6069),c=n(2608),p=n(9550),h=n(9575),f=n(5706),g=n(5796),y=n(1802);class SingleRuse extends i.RuseOp{constructor(e,t,n,r){super(t,n,r),this.source=e,this.target=t,this.cards=n,this.ruseType=r}doPerform(e){return r(this,void 0,void 0,(function*(){this.doTextEffect(e);let t=new o.WuXieContext(e,this.ruseType);yield t.init(),(yield t.doOneRound(this.target))?console.log("锦囊牌被无懈掉了了"):yield this.doEffect(e)}))}doTextEffect(e){e.broadcast(new u.TextFlashEffect(this.source.player.id,[this.target.player.id],this.ruseType.name))}}t.SingleRuse=SingleRuse;function m(e,t,n,i,a){return r(this,void 0,void 0,(function*(){let r=(0,h.gatherCards)(t,a);if(!r)return void console.error("无法拿牌, 此玩家没有牌可以拿");let o=(yield i.sendHint(e.player.id,{hintType:s.HintType.UI_PANEL,hintMsg:"请选择对方一张牌",customRequest:{data:{rowsOfCard:r,title:n,chooseSize:1},mode:"choose"}})).customData,d=(0,h.findCard)(t,o)[0],u=d[0],c=d[1];i.log(`${e} 获得了 ${t} 的 ${c===l.CardPos.HAND?"一张手牌":u}`),delete u.description,delete u.as,yield i.transferCards(t.player.id,e.player.id,c,l.CardPos.HAND,[u])}))}t.JueDou=class JueDou extends SingleRuse{constructor(e,t,n){super(e,t,n,d.CardType.JUE_DOU),this.source=e,this.target=t,this.cards=n,this.damage=1,this.slashCountDecider=(e,t)=>1,this.targetLost=!0}doEffect(e){return r(this,void 0,void 0,(function*(){let t=this.target,n=this.source;for(;;){let r=this.targetLost?t:n,i=this.targetLost?n:t,a=this.slashCountDecider(i,r),o=`${i.player.id}和你决斗, 请出杀`;if(a>1&&(o+=`(需出${a}张)`),!(yield new p.AskForSlashOp(r,i,o,a).perform(e))){console.log("玩家决斗放弃出杀, 掉血"),yield new g.default(i,r,this.damage,this.cards,g.DamageSource.DUEL,g.DamageType.NORMAL).perform(e);break}console.log("又出了一个杀"),this.targetLost=!this.targetLost}}))}};t.ShunShou=class ShunShou extends SingleRuse{constructor(e,t,n){super(e,t,n,d.CardType.SHUN_SHOU),this.source=e,this.target=t,this.cards=n}doEffect(e){return r(this,void 0,void 0,(function*(){yield m(this.source,this.target,`顺手牵羊 > ${this.target}`,e,[l.CardPos.JUDGE,l.CardPos.HAND,l.CardPos.EQUIP])}))}};t.GuoHe=class GuoHe extends SingleRuse{constructor(e,t,n){super(e,t,n,d.CardType.GUO_HE),this.source=e,this.target=t,this.cards=n}doEffect(e){return r(this,void 0,void 0,(function*(){yield(new y.DropOthersCardRequest).perform(e,this.source,this.target,`过河拆桥 > ${this.target}`,[l.CardPos.JUDGE,l.CardPos.HAND,l.CardPos.EQUIP])}))}};t.WuZhong=class WuZhong extends SingleRuse{constructor(e,t,n){super(e,t,n,d.CardType.WU_ZHONG),this.source=e,this.target=t,this.cards=n}doEffect(e){return r(this,void 0,void 0,(function*(){console.log("无中生有成功!"),yield new c.default(this.source,2).perform(e)}))}};t.JieDao=class JieDao extends SingleRuse{constructor(e,t,n){super(e,t[0],n,d.CardType.JIE_DAO),this.source=e,this.actors=t,this.cards=n}doTextEffect(e){e.broadcast(new u.TextFlashEffect(this.source.player.id,[this.actors[0].player.id],this.ruseType.name,this.actors[1].player.id))}doEffect(e){return r(this,void 0,void 0,(function*(){console.log("借刀杀人开始结算!");let t=this.actors[0],n=this.actors[1],r=t.getCards(l.CardPos.EQUIP).find((e=>"weapon"===e.type.genre));if(2!==this.actors.length)throw console.error("借刀杀人指令不对",this.source,this.target,this.actors),"Invalid!!";if(!r)return void console.error("[借刀] 无法执行, 对象没有刀了!");let i=yield e.sendHint(t.player.id,{hintType:s.HintType.PLAY_SLASH,hintMsg:`${this.source} 令你对 ${n.player.id} 出杀, 取消则放弃你的武器`,targetPlayers:[n.player.id],extraButtons:[new a.Button(a.Button.CANCEL.id,"放弃")]});i.isCancel()?(console.log("玩家放弃出杀, 失去武器",this.source.player.id,t.player.id,n),yield e.transferCards(t.player.id,this.source.player.id,l.CardPos.EQUIP,l.CardPos.HAND,[r])):(console.log("玩家出杀, 开始结算吧"),i.targets.push(n),yield e.resolver.on(i,e))}))}};t.HuoGong=class HuoGong extends SingleRuse{constructor(e,t,n){super(e,t,n,d.CardType.HUO_GONG),this.source=e,this.target=t,this.cards=n}doEffect(e){return r(this,void 0,void 0,(function*(){if(0===this.target.getCards(l.CardPos.HAND).length)return void console.error("[火攻] 玩家没有手牌, 无法火攻!! (最后手牌是无懈?)",this.target);let t=(yield e.sendHint(this.target.player.id,{hintType:s.HintType.CHOOSE_CARD,hintMsg:"请选择火攻展示牌",quantity:1,positions:[a.UIPosition.MY_HAND]})).getSingleCardAndPos()[0],n=e.interpret(this.target.player.id,t).suit;t.description=`${this.target} 火攻展示牌`,console.log(`${this.target} 为火攻展示手牌 ${t.id}`),e.sendToWorkflow(this.target.player.id,l.CardPos.HAND,[t],!1,!0);let r=yield e.sendHint(this.source.player.id,{hintType:s.HintType.CHOOSE_CARD,hintMsg:`请打出一张花色为[${f.Suits[n]}]的手牌`,quantity:1,positions:[a.UIPosition.MY_HAND],extraButtons:[a.Button.CANCEL],suits:[n]});if(r.isCancel())console.log(`${this.source} 放弃了火攻`);else{let t=r.getSingleCardAndPos()[0];console.log(`${this.source} 为火攻出了 ${t.id}`),t.description=`${this.source} 火攻使用牌`,e.sendToWorkflow(this.source.player.id,l.CardPos.HAND,[t]),yield e.events.publish(new h.CardBeingDroppedEvent(this.source.player.id,[[t,l.CardPos.HAND]])),yield new g.default(this.source,this.target,1,this.cards,g.DamageSource.HUO_GONG,g.DamageType.FIRE).perform(e)}}))}}},9550:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{l(r.next(e))}catch(e){a(e)}}function s(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.AskForSlashOp=t.SlashCompute=t.SlashOP=t.SlashType=t.SlashDodgedEvent=void 0,t.PlaySlashOpNoCards=function(e,t,n,i){return r(this,void 0,void 0,(function*(){e.broadcast(new u.TextFlashEffect(t.player.id,n.map((e=>e.player.id)),i.text)),e.playSound(t.getGender(),i.cardType.id),e.roundStats.slashCount++,yield new SlashOP(t,n,[],1,i.damageType,i.color).perform(e)}))};const i=n(3484),a=n(1480),o=n(3402),s=n(5796),l=n(1628),d=n(4619),u=n(6069),c=n(4910),p=n(739),h=n(1073),f=n(9575);class SlashDodgedEvent{constructor(e,t){this.slashOp=e,this.dodgeOp=t}}t.SlashDodgedEvent=SlashDodgedEvent;class SlashType{constructor(e,t,n,r){this.cardType=e,this.damageType=t,this.text=n,this.color=r}}function g(e){if(1===e.length){let t=e[0].as||e[0].type;if(t===d.CardType.SLASH_FIRE)return SlashType.FIRE;if(t===d.CardType.SLASH_THUNDER)return SlashType.THUNDER}let t=(0,c.deriveColor)(e.map((e=>e.suit)));return"red"===t?SlashType.RED:"black"===t?SlashType.BLACK:SlashType.NO_COLOR}t.SlashType=SlashType,SlashType.RED=new SlashType(d.CardType.SLASH,s.DamageType.NORMAL,"红杀","red"),SlashType.BLACK=new SlashType(d.CardType.SLASH,s.DamageType.NORMAL,"杀","black"),SlashType.NO_COLOR=new SlashType(d.CardType.SLASH,s.DamageType.NORMAL,"杀","n.a."),SlashType.FIRE=new SlashType(d.CardType.SLASH_FIRE,s.DamageType.FIRE,"火杀","red"),SlashType.THUNDER=new SlashType(d.CardType.SLASH_THUNDER,s.DamageType.THUNDER,"雷杀","black");class PlaySlashOp extends i.Operation{constructor(e,t,n){super(),this.source=e,this.targets=t,this.cards=n}perform(e){return r(this,void 0,void 0,(function*(){let t=this.cards.map((t=>e.interpret(this.source.player.id,t)));this.slashType=g(t),e.broadcast(new u.TextFlashEffect(this.source.player.id,this.targets.map((e=>e.player.id)),this.slashType.text)),this.source===e.currPlayer()&&e.roundStats.slashCount++,yield new SlashOP(this.source,this.targets,this.cards,1,this.slashType.damageType,this.slashType.color).perform(e)}))}}t.default=PlaySlashOp;class SlashOP extends i.UseEventOperation{constructor(e,t,n,r,i,a){super(t,"杀"),this.source=e,this.targets=t,this.cards=n,this.damageAmount=r,this.damageType=i,this.color=a,this.undodegables=new Set,this.dodgesRequired=1}doPerform(e){return r(this,void 0,void 0,(function*(){this.source.isDrunk&&(this.damageAmount+=1,this.source.isDrunk=!1,e.broadcast(this.source,o.PlayerInfo.sanitize));for(let t of this.targets){if(t.isDead)return void console.warn("[Slash Op] Player already dead, not doing slash on him",t.player.id);yield new SlashCompute(this.source,t,this.cards,this.dodgesRequired,this.damageAmount,this.damageType,this.color,this.undodegables.has(t.player.id)).perform(e)}}))}}t.SlashOP=SlashOP;class SlashCompute extends i.Operation{constructor(e,t,n,r,i,a,o,s){super(),this.source=e,this.target=t,this.cards=n,this.dodgeRequired=r,this.damageAmount=i,this.damageType=a,this.color=o,this.undodgeable=s}perform(e){return r(this,void 0,void 0,(function*(){if(this.undodgeable)return void(yield new s.default(this.source,this.target,this.damageAmount,this.cards,s.DamageSource.SLASH,this.damageType).perform(e));let t=this.dodgeRequired;if(t>0){let n=new l.default(this.target,this.source,t,`${this.source} 对你出杀, 请出闪`);(yield n.perform(e))?yield e.events.publish(new SlashDodgedEvent(this,n)):yield new s.default(this.source,this.target,this.damageAmount,this.cards,s.DamageSource.SLASH,this.damageType).perform(e)}}))}}t.SlashCompute=SlashCompute;class AskForSlashOp extends i.Operation{constructor(e,t,n,r=1){super(),this.slasher=e,this.target=t,this.hintMsg=n,this.repeat=r}perform(e){return r(this,void 0,void 0,(function*(){for(yield e.events.publish(this);this.repeat>0;){this.repeat--;let t=yield e.sendHint(this.slasher.player.id,{hintType:p.HintType.SLASH,hintMsg:this.hintMsg,extraButtons:[new a.Button(a.Button.CANCEL.id,"放弃")]});if(t.isCancel())return console.log("玩家放弃出杀"),!1;if(t.skill)yield e.resolver.onSkillAction(t,this,e);else{let n=t.getCardsAtPos(h.CardPos.HAND).map((e=>(e.description=`${this.slasher.player.id} 出杀`,e.type.isSlash()||(e.as=d.CardType.SLASH),e))),r=g(n.map((t=>e.interpret(this.slasher.player.id,t))));e.log(`${t.source} 打出了 ${n}`),e.sendToWorkflow(this.slasher.player.id,h.CardPos.HAND,n),e.broadcast(new u.TextFlashEffect(this.slasher.player.id,[this.target.player.id],r.cardType.name)),yield e.events.publish(new f.CardBeingUsedEvent(this.slasher.player.id,n.map((e=>[e,h.CardPos.HAND])),r.cardType,!1,!1))}}return!0}))}}t.AskForSlashOp=AskForSlashOp},8411:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{l(r.next(e))}catch(e){a(e)}}function s(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.InStageEnd=t.InStageStart=t.StageEndFlow=t.StageStartFlow=void 0;const i=n(3484);class StageEvent extends i.Operation{constructor(e,t){super(),this.info=e,this.stage=t}perform(e){return r(this,void 0,void 0,(function*(){yield e.events.publish(this)}))}isFor(e,t){return e===this.info.player.id&&this.stage===t}}t.StageStartFlow=class StageStartFlow extends StageEvent{};t.StageEndFlow=class StageEndFlow extends StageEvent{};t.InStageStart=class InStageStart extends StageEvent{constructor(){super(...arguments),this.endStage=!1}};t.InStageEnd=class InStageEnd extends StageEvent{}},2608:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{l(r.next(e))}catch(e){a(e)}}function s(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.TakeCardStageOp=void 0;const i=n(3484),a=n(1073),o=n(6069),s=n(9575);class TakeCardStageOp extends i.Operation{constructor(e,t){super(),this.player=e,this.amount=t}perform(e){return r(this,void 0,void 0,(function*(){yield e.events.publish(this),this.amount>0&&(yield this.do(e))}))}do(e){return r(this,void 0,void 0,(function*(){yield new TakeCardOp(this.player,this.amount).perform(e)}))}}t.TakeCardStageOp=TakeCardStageOp;class TakeCardOp extends i.Operation{constructor(e,t){super(),this.player=e,this.amount=t}perform(e){return r(this,void 0,void 0,(function*(){if(this.player.isDead)return void console.error("玩家已死亡, 无法摸牌",this.player.player.id);let t=e.context.deck.getCardsFromTop(this.amount);return t.forEach((e=>this.player.addCard(e,a.CardPos.HAND))),e.broadcast(new o.LogTransit(`${this.player} 从牌堆摸了 ${this.amount} 张牌`)),e.broadcast(o.CardTransit.fromDeck(this.player.player.id,t),o.CardTransit.defaultSanitize),yield e.events.publish(new s.CardObtainedEvent(this.player.player.id,t.map((e=>[e,a.CardPos.HAND])))),t}))}}t.default=TakeCardOp},7844:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{l(r.next(e))}catch(e){a(e)}}function s(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const i=n(3484),a=n(3402),o=n(3587),s=n(6069);class WineOp extends i.Operation{constructor(e){super(),this.player=e}perform(e){return r(this,void 0,void 0,(function*(){if(e.roundStats.customData[o.WINE_TAKEN])throw"本回合已经吃过酒了! "+this.player.player.id;this.player.isDrunk=!0,e.broadcast(this.player,a.PlayerInfo.sanitize),e.broadcast(new s.TextFlashEffect(this.player.player.id,[],"酒")),e.roundStats.customData[o.WINE_TAKEN]=!0}))}}t.default=WineOp},4739:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{l(r.next(e))}catch(e){a(e)}}function s(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.WuXieContext=void 0;const i=n(1480),a=n(1073),o=n(5706),s=n(739),l=n(9575),d=n(6069),u="refuse",c="refuse_all";t.WuXieContext=class WuXieContext{constructor(e,t){this.manager=e,this.ruseType=t,this.processors=new Map,this.candidates=new Set,this.processNormal=(e,t)=>r(this,void 0,void 0,(function*(){let n=e.getSingleCardAndPos()[0];console.log(`[无懈的结算] 打出了${n.id}作为无懈`),t.broadcast(new d.LogTransit(`${e.source} 打出了 ${n}`)),n.description=`${e.source.player.id} 打出`,t.sendToWorkflow(e.source.player.id,a.CardPos.HAND,[n]),yield t.events.publish(new l.CardBeingUsedEvent(e.source.player.id,[[n,a.CardPos.HAND]],n.type,!1,!1))}))}init(){return r(this,void 0,void 0,(function*(){this.manager.context.playerInfos.filter((e=>!e.isDead)).forEach((e=>{e.getCards(a.CardPos.HAND).filter((e=>e.type.isWuxie())).length>0&&this.candidates.add(e.player.id)})),yield this.manager.events.publish(this)}))}doOneRound(e){return r(this,void 0,void 0,(function*(){let t=!1,n=new Set;for(;;){if(this.candidates=new Set((0,o.toArr)(this.candidates).filter((e=>{let t=this.manager.context.getPlayer(e).getCards(a.CardPos.HAND).filter((e=>e.type.isWuxie())).length>0,r=this.processors.has(e)&&this.processors.get(e).canStillProcess(this.manager);return(t||r)&&!n.has(e)}))),0===this.candidates.size)return t;let l=`[${e.player.id}] 为 [${this.ruseType.name}${t?"的无懈":""}] 寻求无懈`,d=[i.Button.CANCEL,new i.Button(u,`放弃针对[${e.player.id}]的无懈`)];"group-ruse"===this.ruseType.genre&&d.push(new i.Button(c,`不为本次 [${this.ruseType.name}] 出无懈`)),this.manager.setPending(this.manager.getSortedByCurr(!0).map((e=>e.player.id))),this.manager.log(l);let p=(0,o.toArr)(this.candidates).map((e=>r(this,void 0,void 0,(function*(){let t=yield this.manager.sendHint(e,{hintType:s.HintType.WU_XIE,hintMsg:l,extraButtons:d},!0),r=t.button;if(r===i.Button.OK.id)return t;throw r===u?n.add(e):r===c&&(n.add(e),this.processors.delete(e),this.candidates.delete(e)),`${e}拒绝了无懈`}))));try{let e=yield(0,o.promiseAny)(p);if(this.manager.rescindAll(),e.skill){if(!this.processors.has(e.source.player.id))throw`Missing Custom Handler For Player ${e.source.player.id} with skill ${e.skill}`;yield this.processors.get(e.source.player.id).doProcess(e,this.manager)}else yield this.processNormal(e,this.manager);t=!t,yield(0,o.delay)(1e3)}catch(e){return console.log("[无懈的结算] 无人使用无懈, 进行锦囊牌结算",e),this.manager.rescindAll(),t}}}))}}},1558:(e,t,n)=>{"use strict";n.d(t,{Zw:()=>d,iC:()=>l});var r=n(8168),i=n(8587),a=n(6540);n(311);function o(e){return"default"+e.charAt(0).toUpperCase()+e.substr(1)}function s(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function l(e,t,n){var r=(0,a.useRef)(void 0!==e),i=(0,a.useState)(t),o=i[0],s=i[1],l=void 0!==e,d=r.current;return r.current=l,!l&&d&&o!==t&&s(t),[l?e:o,(0,a.useCallback)((function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];n&&n.apply(void 0,[e].concat(r)),s(e)}),[n])]}function d(e,t){return Object.keys(t).reduce((function(n,a){var d,u=n,c=u[o(a)],p=u[a],h=(0,i.A)(u,[o(a),a].map(s)),f=t[a],g=l(p,c,e[f]),y=g[0],m=g[1];return(0,r.A)({},h,((d={})[a]=y,d[f]=m,d))}),e)}function u(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);null!=e&&this.setState(e)}function c(e){this.setState(function(t){var n=this.constructor.getDerivedStateFromProps(e,t);return null!=n?n:null}.bind(this))}function p(e,t){try{var n=this.props,r=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(n,r)}finally{this.props=n,this.state=r}}u.__suppressDeprecationWarning=!0,c.__suppressDeprecationWarning=!0,p.__suppressDeprecationWarning=!0},2831:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"MAX",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"NIL",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"parse",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"v1",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"v1ToV6",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"v3",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(t,"v4",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"v5",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"v6",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(t,"v6ToV1",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(t,"v7",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(t,"validate",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(t,"version",{enumerable:!0,get:function(){return y.default}});var r=m(n(4213)),i=m(n(4808)),a=m(n(6792)),o=m(n(9910)),s=m(n(3518)),l=m(n(343)),d=m(n(4948)),u=m(n(5073)),c=m(n(7186)),p=m(n(4671)),h=m(n(3507)),f=m(n(744)),g=m(n(7037)),y=m(n(7775));function m(e){return e&&e.__esModule?e:{default:e}}},4213:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default="ffffffff-ffff-ffff-ffff-ffffffffffff"},2311:(e,t)=>{"use strict";function n(e){return 14+(e+64>>>9<<4)+1}function r(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function i(e,t,n,i,a,o){return r((s=r(r(t,e),r(i,o)))<<(l=a)|s>>>32-l,n);var s,l}function a(e,t,n,r,a,o,s){return i(t&n|~t&r,e,t,a,o,s)}function o(e,t,n,r,a,o,s){return i(t&r|n&~r,e,t,a,o,s)}function s(e,t,n,r,a,o,s){return i(t^n^r,e,t,a,o,s)}function l(e,t,n,r,a,o,s){return i(n^(t|~r),e,t,a,o,s)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=function(e){if("string"==typeof e){var t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(var i=0;i<t.length;++i)e[i]=t.charCodeAt(i)}return function(e){for(var t=[],n=32*e.length,r="0123456789abcdef",i=0;i<n;i+=8){var a=e[i>>5]>>>i%32&255,o=parseInt(r.charAt(a>>>4&15)+r.charAt(15&a),16);t.push(o)}return t}(function(e,t){e[t>>5]|=128<<t%32,e[n(t)-1]=t;for(var i=1732584193,d=-271733879,u=-1732584194,c=271733878,p=0;p<e.length;p+=16){var h=i,f=d,g=u,y=c;i=a(i,d,u,c,e[p],7,-680876936),c=a(c,i,d,u,e[p+1],12,-389564586),u=a(u,c,i,d,e[p+2],17,606105819),d=a(d,u,c,i,e[p+3],22,-1044525330),i=a(i,d,u,c,e[p+4],7,-176418897),c=a(c,i,d,u,e[p+5],12,1200080426),u=a(u,c,i,d,e[p+6],17,-1473231341),d=a(d,u,c,i,e[p+7],22,-45705983),i=a(i,d,u,c,e[p+8],7,1770035416),c=a(c,i,d,u,e[p+9],12,-1958414417),u=a(u,c,i,d,e[p+10],17,-42063),d=a(d,u,c,i,e[p+11],22,-1990404162),i=a(i,d,u,c,e[p+12],7,1804603682),c=a(c,i,d,u,e[p+13],12,-40341101),u=a(u,c,i,d,e[p+14],17,-1502002290),i=o(i,d=a(d,u,c,i,e[p+15],22,1236535329),u,c,e[p+1],5,-165796510),c=o(c,i,d,u,e[p+6],9,-1069501632),u=o(u,c,i,d,e[p+11],14,643717713),d=o(d,u,c,i,e[p],20,-373897302),i=o(i,d,u,c,e[p+5],5,-701558691),c=o(c,i,d,u,e[p+10],9,38016083),u=o(u,c,i,d,e[p+15],14,-660478335),d=o(d,u,c,i,e[p+4],20,-405537848),i=o(i,d,u,c,e[p+9],5,568446438),c=o(c,i,d,u,e[p+14],9,-1019803690),u=o(u,c,i,d,e[p+3],14,-187363961),d=o(d,u,c,i,e[p+8],20,1163531501),i=o(i,d,u,c,e[p+13],5,-1444681467),c=o(c,i,d,u,e[p+2],9,-51403784),u=o(u,c,i,d,e[p+7],14,1735328473),i=s(i,d=o(d,u,c,i,e[p+12],20,-1926607734),u,c,e[p+5],4,-378558),c=s(c,i,d,u,e[p+8],11,-2022574463),u=s(u,c,i,d,e[p+11],16,1839030562),d=s(d,u,c,i,e[p+14],23,-35309556),i=s(i,d,u,c,e[p+1],4,-1530992060),c=s(c,i,d,u,e[p+4],11,1272893353),u=s(u,c,i,d,e[p+7],16,-155497632),d=s(d,u,c,i,e[p+10],23,-1094730640),i=s(i,d,u,c,e[p+13],4,681279174),c=s(c,i,d,u,e[p],11,-358537222),u=s(u,c,i,d,e[p+3],16,-722521979),d=s(d,u,c,i,e[p+6],23,76029189),i=s(i,d,u,c,e[p+9],4,-640364487),c=s(c,i,d,u,e[p+12],11,-421815835),u=s(u,c,i,d,e[p+15],16,530742520),i=l(i,d=s(d,u,c,i,e[p+2],23,-995338651),u,c,e[p],6,-198630844),c=l(c,i,d,u,e[p+7],10,1126891415),u=l(u,c,i,d,e[p+14],15,-1416354905),d=l(d,u,c,i,e[p+5],21,-57434055),i=l(i,d,u,c,e[p+12],6,1700485571),c=l(c,i,d,u,e[p+3],10,-1894986606),u=l(u,c,i,d,e[p+10],15,-1051523),d=l(d,u,c,i,e[p+1],21,-2054922799),i=l(i,d,u,c,e[p+8],6,1873313359),c=l(c,i,d,u,e[p+15],10,-30611744),u=l(u,c,i,d,e[p+6],15,-1560198380),d=l(d,u,c,i,e[p+13],21,1309151649),i=l(i,d,u,c,e[p+4],6,-145523070),c=l(c,i,d,u,e[p+11],10,-1120210379),u=l(u,c,i,d,e[p+2],15,718787259),d=l(d,u,c,i,e[p+9],21,-343485551),i=r(i,h),d=r(d,f),u=r(u,g),c=r(c,y)}return[i,d,u,c]}(function(e){if(0===e.length)return[];for(var t=8*e.length,r=new Uint32Array(n(t)),i=0;i<t;i+=8)r[i>>5]|=(255&e[i/8])<<i%32;return r}(e),8*e.length))}},6140:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n="undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);t.default={randomUUID:n}},4808:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default="00000000-0000-0000-0000-000000000000"},6792:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(7037))&&r.__esModule?r:{default:r};t.default=function(e){if(!(0,i.default)(e))throw TypeError("Invalid UUID");var t,n=new Uint8Array(16);return n[0]=(t=parseInt(e.slice(0,8),16))>>>24,n[1]=t>>>16&255,n[2]=t>>>8&255,n[3]=255&t,n[4]=(t=parseInt(e.slice(9,13),16))>>>8,n[5]=255&t,n[6]=(t=parseInt(e.slice(14,18),16))>>>8,n[7]=255&t,n[8]=(t=parseInt(e.slice(19,23),16))>>>8,n[9]=255&t,n[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,n[11]=t/4294967296&255,n[12]=t>>>24&255,n[13]=t>>>16&255,n[14]=t>>>8&255,n[15]=255&t,n}},7656:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i},2858:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){if(!n&&!(n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(r)};var r=new Uint8Array(16)},9042:(e,t)=>{"use strict";function n(e,t,n,r){switch(e){case 0:return t&n^~t&r;case 1:case 3:return t^n^r;case 2:return t&n^t&r^n&r}}function r(e,t){return e<<t|e>>>32-t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=function(e){var t=[1518500249,1859775393,2400959708,3395469782],i=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){var a=unescape(encodeURIComponent(e));e=[];for(var o=0;o<a.length;++o)e.push(a.charCodeAt(o))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);for(var s=e.length/4+2,l=Math.ceil(s/16),d=new Array(l),u=0;u<l;++u){for(var c=new Uint32Array(16),p=0;p<16;++p)c[p]=e[64*u+4*p]<<24|e[64*u+4*p+1]<<16|e[64*u+4*p+2]<<8|e[64*u+4*p+3];d[u]=c}d[l-1][14]=8*(e.length-1)/Math.pow(2,32),d[l-1][14]=Math.floor(d[l-1][14]),d[l-1][15]=8*(e.length-1)&4294967295;for(var h=0;h<l;++h){for(var f=new Uint32Array(80),g=0;g<16;++g)f[g]=d[h][g];for(var y=16;y<80;++y)f[y]=r(f[y-3]^f[y-8]^f[y-14]^f[y-16],1);for(var m=i[0],v=i[1],C=i[2],b=i[3],S=i[4],E=0;E<80;++E){var w=Math.floor(E/20),_=r(m,5)+n(w,v,C,b)+S+t[w]+f[E]>>>0;S=b,b=C,C=r(v,30)>>>0,v=m,m=_}i[0]=i[0]+m>>>0,i[1]=i[1]+v>>>0,i[2]=i[2]+C>>>0,i[3]=i[3]+b>>>0,i[4]=i[4]+S>>>0}return[i[0]>>24&255,i[0]>>16&255,i[0]>>8&255,255&i[0],i[1]>>24&255,i[1]>>16&255,i[1]>>8&255,255&i[1],i[2]>>24&255,i[2]>>16&255,i[2]>>8&255,255&i[2],i[3]>>24&255,i[3]>>16&255,i[3]>>8&255,255&i[3],i[4]>>24&255,i[4]>>16&255,i[4]>>8&255,255&i[4]]}},9910:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.unsafeStringify=s;var r,i=(r=n(7037))&&r.__esModule?r:{default:r};for(var a=[],o=0;o<256;++o)a.push((o+256).toString(16).slice(1));function s(e,t=0){return(a[e[t+0]]+a[e[t+1]]+a[e[t+2]]+a[e[t+3]]+"-"+a[e[t+4]]+a[e[t+5]]+"-"+a[e[t+6]]+a[e[t+7]]+"-"+a[e[t+8]]+a[e[t+9]]+"-"+a[e[t+10]]+a[e[t+11]]+a[e[t+12]]+a[e[t+13]]+a[e[t+14]]+a[e[t+15]]).toLowerCase()}t.default=function(e,t=0){var n=s(e,t);if(!(0,i.default)(n))throw TypeError("Stringified UUID is invalid");return n}},3518:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i,a,o=(r=n(2858))&&r.__esModule?r:{default:r},s=n(9910);var l=0,d=0;t.default=function(e,t,n){var r=t&&n||0,u=t||new Array(16),c=(e=e||{}).node,p=e.clockseq;if(e._v6||(c||(c=i),null==p&&(p=a)),null==c||null==p){var h=e.random||(e.rng||o.default)();null==c&&(c=[h[0],h[1],h[2],h[3],h[4],h[5]],i||e._v6||(c[0]|=1,i=c)),null==p&&(p=16383&(h[6]<<8|h[7]),void 0!==a||e._v6||(a=p))}var f=void 0!==e.msecs?e.msecs:Date.now(),g=void 0!==e.nsecs?e.nsecs:d+1,y=f-l+(g-d)/1e4;if(y<0&&void 0===e.clockseq&&(p=p+1&16383),(y<0||f>l)&&void 0===e.nsecs&&(g=0),g>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");l=f,d=g,a=p;var m=(1e4*(268435455&(f+=122192928e5))+g)%4294967296;u[r++]=m>>>24&255,u[r++]=m>>>16&255,u[r++]=m>>>8&255,u[r++]=255&m;var v=f/4294967296*1e4&268435455;u[r++]=v>>>8&255,u[r++]=255&v,u[r++]=v>>>24&15|16,u[r++]=v>>>16&255,u[r++]=p>>>8|128,u[r++]=255&p;for(var C=0;C<6;++C)u[r+C]=c[C];return t||(0,s.unsafeStringify)(u)}},343:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=function(e,t=!1){return Uint8Array.of((15&e[6])<<4|e[7]>>4&15,(15&e[7])<<4|(240&e[4])>>4,(15&e[4])<<4|(240&e[5])>>4,(15&e[5])<<4|(240&e[0])>>4,(15&e[0])<<4|(240&e[1])>>4,(15&e[1])<<4|(240&e[2])>>4,96|15&e[2],e[3],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])}("string"==typeof e?(0,i.default)(e):e);return"string"==typeof e?(0,a.unsafeStringify)(t):t};var r,i=(r=n(6792))&&r.__esModule?r:{default:r},a=n(9910)},4948:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(9025)),i=a(n(2311));function a(e){return e&&e.__esModule?e:{default:e}}var o=(0,r.default)("v3",48,i.default);t.default=o},9025:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.URL=t.DNS=void 0,t.default=function(e,t,n){function r(e,r,o,s){var l;if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));for(var t=[],n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t}(e)),"string"==typeof r&&(r=(0,a.default)(r)),16!==(null===(l=r)||void 0===l?void 0:l.length))throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var d=new Uint8Array(16+e.length);if(d.set(r),d.set(e,r.length),(d=n(d))[6]=15&d[6]|t,d[8]=63&d[8]|128,o){s=s||0;for(var u=0;u<16;++u)o[s+u]=d[u];return o}return(0,i.unsafeStringify)(d)}try{r.name=e}catch(e){}return r.DNS=o,r.URL=s,r};var r,i=n(9910),a=(r=n(6792))&&r.__esModule?r:{default:r};var o=t.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",s=t.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8"},5073:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(6140)),i=o(n(2858)),a=n(9910);function o(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t,n){if(r.default.randomUUID&&!t&&!e)return r.default.randomUUID();var o=(e=e||{}).random||(e.rng||i.default)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t){n=n||0;for(var s=0;s<16;++s)t[n+s]=o[s];return t}return(0,a.unsafeStringify)(o)}},7186:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(9025)),i=a(n(9042));function a(e){return e&&e.__esModule?e:{default:e}}var o=(0,r.default)("v5",80,i.default);t.default=o},4671:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e={},t,n=0){var o=(0,i.default)(l(l({},e),{},{_v6:!0}),new Uint8Array(16));if(o=(0,a.default)(o),t){for(var s=0;s<16;s++)t[n+s]=o[s];return t}return(0,r.unsafeStringify)(o)};var r=n(9910),i=o(n(3518)),a=o(n(343));function o(e){return e&&e.__esModule?e:{default:e}}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},3507:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=function(e){return Uint8Array.of((15&e[3])<<4|e[4]>>4&15,(15&e[4])<<4|(240&e[5])>>4,(15&e[5])<<4|15&e[6],e[7],(15&e[1])<<4|(240&e[2])>>4,(15&e[2])<<4|(240&e[3])>>4,16|(240&e[0])>>4,(15&e[0])<<4|(240&e[1])>>4,e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])}("string"==typeof e?(0,i.default)(e):e);return"string"==typeof e?(0,a.unsafeStringify)(t):t};var r,i=(r=n(6792))&&r.__esModule?r:{default:r},a=n(9910)},744:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(2858))&&r.__esModule?r:{default:r},a=n(9910);var o=null,s=null,l=0;t.default=function(e,t,n){e=e||{};var r=t&&n||0,d=t||new Uint8Array(16),u=e.random||(e.rng||i.default)(),c=void 0!==e.msecs?e.msecs:Date.now(),p=void 0!==e.seq?e.seq:null,h=s,f=o;return c>l&&void 0===e.msecs&&(l=c,null!==p&&(h=null,f=null)),null!==p&&(p>2147483647&&(p=2147483647),h=p>>>19&4095,f=524287&p),null!==h&&null!==f||(h=(h=127&u[6])<<8|u[7],f=(f=(f=63&u[8])<<8|u[9])<<5|u[10]>>>3),c+1e4>l&&null===p?++f>524287&&(f=0,++h>4095&&(h=0,l++)):l=c,s=h,o=f,d[r++]=l/1099511627776&255,d[r++]=l/4294967296&255,d[r++]=l/16777216&255,d[r++]=l/65536&255,d[r++]=l/256&255,d[r++]=255&l,d[r++]=h>>>4&15|112,d[r++]=255&h,d[r++]=f>>>13&63|128,d[r++]=f>>>5&255,d[r++]=f<<3&255|7&u[10],d[r++]=u[11],d[r++]=u[12],d[r++]=u[13],d[r++]=u[14],d[r++]=u[15],t||(0,a.unsafeStringify)(d)}},7037:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(7656))&&r.__esModule?r:{default:r};t.default=function(e){return"string"==typeof e&&i.default.test(e)}},7775:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(7037))&&r.__esModule?r:{default:r};t.default=function(e){if(!(0,i.default)(e))throw TypeError("Invalid UUID");return parseInt(e.slice(14,15),16)}},9771:e=>{"use strict";var t=function(){};e.exports=t},6942:(e,t)=>{var n;!function(){"use strict";var r={}.hasOwnProperty;function i(){for(var e="",t=0;t<arguments.length;t++){var n=arguments[t];n&&(e=o(e,a(n)))}return e}function a(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return i.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var n in e)r.call(e,n)&&e[n]&&(t=o(t,n));return t}function o(e,t){return t?e?e+" "+t:e+t:e}e.exports?(i.default=i,e.exports=i):void 0===(n=function(){return i}.apply(t,[]))||(e.exports=n)}()},8168:(e,t,n)=>{"use strict";function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(null,arguments)}n.d(t,{A:()=>r})},5540:(e,t,n)=>{"use strict";function r(e,t){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},r(e,t)}function i(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,r(e,t)}n.d(t,{A:()=>i})},8587:(e,t,n)=>{"use strict";function r(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}n.d(t,{A:()=>r})}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r].call(a.exports,a,a.exports,n),a.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};(()=>{"use strict";const e=n(6540),t=n(961);n(4707);const r=n(1502);t.render(e.createElement(r.default,null),document.getElementById("app"))})()})();